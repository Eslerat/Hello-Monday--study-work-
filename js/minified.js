/**
 * @author mrdoob / http://mrdoob.com/
 * @author jetienne / http://jetienne.com/
 * @author paulirish / http://paulirish.com/
 */
function Event(){}function MouseEvent(){}function KeyboardEvent(){}function TouchEvent(){}function MutationEvent(){}function MessageEvent(){}function MediaEvent(){}function MouseAndTouchEvent(){}function Trace(t,e){if(Trace.isEnabled){var i=t;trace._consoleAvailable,null!=e&&(i=function(t){var e="";try{e="Function"==typeof t?t.name.toString()+"();":t.toString()}catch(i){try{e=t.toString()}catch(t){e="null"}}return e}(e)+" => "+i),Trace.displayOnScreen?(Trace._onScreenDiv||(Trace._onScreenDiv=document.createElement("div"),Trace._onScreenDiv.style.position="absolute",Trace._onScreenDiv.style.width="200px",Trace._onScreenDiv.style.height="300px",Trace._onScreenDiv.style.overflowY="scroll",Trace._onScreenDiv.style.color="#00ff00",Trace._onScreenDiv.style.padding="10px",Trace._onScreenDiv.style.zIndex=2e7,Trace._onScreenDiv.style.left="20px",Trace._onScreenDiv.style.top="20px",Trace._onScreenDiv.style.fontFamily="Courier New",Trace._onScreenDiv.style.fontSize="10px",Trace._onScreenDiv.style.backgroundColor="#000000",Trace._fieldLines=[]),Trace._fieldLines.push(i),Trace._fieldLines.length>Trace.onScreenMaxLines&&Trace._fieldLines.shift(),Trace._onScreenDiv.innerHTML=Trace._fieldLines.join("<br />"),document.body.appendChild(Trace._onScreenDiv)):!0===trace._consoleAvailable&&console.log(i),Trace._traceArray.push(i)}else Trace._traceArray.push(i)}function TemplateData(){var t,e,i,n,r,o,s,a,l=new Object;return l.getXML=function(){return t},l.getLevel=function(){return e},l.getPassedVariablesByName=function(t){var e="undefined";if(i){var n=i[t];n&&(e=n)}return e},l.getNextTemplateData=function(){return s},l.getPrevTemplateData=function(){return a},l.getTemplateName=function(){return n},l.getTemplatePath=function(){return r},l.getTemplateFullPath=function(){return o},l.getChildIndex=function(){var e=t;if(!e)return-1;var i=e.parentNode;if(!i)return-1;for(var n=i.children,r=n.length,o=0;o<r;o++)if(n[o]===e)return o},l.setXML=function(e){t=e},l.setLevel=function(t){e=t},l.setPassedVariables=function(t){i=t},l.setNextTemplateData=function(t){s=t},l.setPrevTemplateData=function(t){a=t},l.setTemplateName=function(t){n=t},l.setTemplatePath=function(t){r=t},l.setTemplateFullPath=function(t){o=t},l}function SmartObject(t){var e=SmartObject.defaults;if(null==t){var i=document.createElement("div");i.style.position="absolute",i.style.left=null,i.style.top=null}else i=t,i.style.position="absolute",i.style.left&&(e._x=parseInt(i.style.left)),i.style.top&&(e._y=parseInt(i.style.top)),i.style.opacity&&(e._opacity=i.style.opacity),i.style[SmartObject.prefix+"Perspective"]&&(e._perspective=i.style[SmartObject.prefix+"Perspective"]),i.style[SmartObject.prefix+"TransformStyle"]&&(e._transformStyle=i.style[SmartObject.prefix+"TransformStyle"]),i.style[SmartObject.prefix+"BackfaceVisibility"]&&(e._backfaceVisibility=i.style[SmartObject.prefix+"BackfaceVisibility"]),i.style.left=null,i.style.top=null;return i.className="smart-object",SmartObject.convert(i,e)}function AssetGroup(t,e){var i=this;return i.data=t,e.onComplete&&(i.onComplete=e.onComplete),null!==e.customPath&&(i.customPath=e.customPath),e.onUpdate&&(i.onUpdate=e.onUpdate),e.dataURIFile&&(i.dataURIFile=e.dataURIFile),e.dataURIFileSizeInBytes&&(i.dataURIFileSizeInBytes=e.dataURIFileSizeInBytes),e.dataURIFilePercentageOfTotal?i.dataURIFilePercentageOfTotal=e.dataURIFilePercentageOfTotal:i.dataURIFilePercentageOfTotal=0,e.stripPath?i.stripPath=e.stripPath:i.stripPath=!1,i}function colorFade(t,e,i,n,o,s){var a,l,c,h,u,d,p,f,m=t;o=o||20,s=s||20,clearInterval(m.timer),l=colorConv(n),c=l[0],h=l[1],u=l[2],m.r||(a=colorConv(i),r=a[0],g=a[1],b=a[2],m.r=r,m.g=g,m.b=b),d=Math.round(Math.abs(m.r-c)/o),p=Math.round(Math.abs(m.g-h)/o),f=Math.round(Math.abs(m.b-u)/o),0==d&&(d=1),0==p&&(p=1),0==f&&(f=1),m.step=1,m.timer=setInterval(function(){animateColor(t,e,o,c,h,u,d,p,f)},s)}function animateColor(t,e,i,n,r,o,s,a,l){var c,h=t;if(h.step<=i){var u=h.r,d=h.g,p=h.b;u>=n?u-=s:u=parseInt(u)+parseInt(s),d>=r?d-=a:d=parseInt(d)+parseInt(a),p>=o?p-=l:p=parseInt(p)+parseInt(l),c="rgb("+u+","+d+","+p+")","background"==e?h.style.backgroundColor=c:"border"==e?h.style.borderColor=c:h.style.color=c,h.r=u,h.g=d,h.b=p,h.step=h.step+1}else clearInterval(h.timer),c="rgb("+n+","+r+","+o+")","background"==e?h.style.backgroundColor=c:"border"==e?h.style.borderColor=c:h.style.color=c}function colorConv(t){return[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)]}function MainMenu(t){function e(){m=new MainMenuButton(u,E),m.style.position="fixed",m.style.zIndex=5,m._x=-80,m._y=40,m.style.top=0,m.style.left=0,m.style["-webkit-backface-visibility"]="hidden",Assets.LAYER_TOP.appendChild(m)}function i(t){w=new SmartObject,w.style.width=window.innerWidth+"px",w.style.height=window.innerHeight+"px",w._x=0,w.style.backgroundColor="#525453",g.appendChild(w),y=new SmartObject,y.style.position="absolute",y.style.width=window.innerWidth-40+"px",y.style.height=window.innerHeight-40+"px",y._x=20,y._y=20,y.style.backgroundColor="#5D5F5E";var e=new SmartObject;e.style.position="absolute",e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px",g.appendChild(y),g.appendChild(e),x=new SmartObject,x.style.position="absolute",x.style.zIndex=9999,x.style.width="50%",x.style.height="100%",x.style.left="20px";var i=new SmartObject;i.style.position="absolute",i.style.left="52%",i.style.right=0,i.style.width="auto",i.style.margin="0px 40px 0px 0px",i.style.display="block";var r=n();i.appendChild(r);var o=new SmartObject;o.style.position="absolute",o.style.width="100%",o.style.height="100%",o.style.left="-20px";var l=new SmartObject;l.style.position="absolute",l.innerHTML=Assets.DATA_STATIC.querySelector("#nav-title").innerHTML,l.style.fontSize="14px",l.style.left="52%",l.style.top="30px",l.style.color="#B9BFBB";var c=new SmartObject;c.style.width="45px",c.style.height="1px",c.style.position="absolute",c.style.top="8px",c.style.right="-49px",c.style.backgroundColor=l.style.color,l.appendChild(c);var h=new HMLogo,u=Assets.DATA_STATIC.querySelector("#email").innerHTML,d=document.createElement("a");d.style.position="absolute",d.style.fontFamily="TheinhardtRegular",d.href="mailto:"+u,d.innerHTML=u,d.style.left="20px",d.style.bottom="20px",d.style.color="#B9BFBB",d.style.textDecoration="none",BrowserDetect.DESKTOP&&(d.addEventListener(MouseEvent.MOUSE_OVER,function(t){TweenMax.to(d,.2,{css:{color:"#FFF"},ease:Linear.easeNone})}),d.addEventListener(MouseEvent.MOUSE_OUT,function(t){TweenMax.to(d,.2,{css:{color:"#B9BFBB"},ease:Linear.easeNone})}));var p=new SmartObject;p.style.position="absolute",p.innerHTML="&copy; Copyright "+(new Date).getFullYear(),p.style.fontFamily="TheinhardtRegular",p.style.left="52%",p.style.bottom="20px",p.style.color="#B9BFBB",o.appendChild(l),o.appendChild(h),o.appendChild(d),o.appendChild(p),o.appendChild(i);var f=new SmartObject;f.style.position="absolute",f.style.display="block",f.style.width="100%",f.style.height="auto",f.style.top=0,f.style.left=0,f.style.right=0,f.style.bottom=0,f.style.margin="20px 0px 20px 20px",f.appendChild(o),a(),o.appendChild(v),x.appendChild(f),x.resize=function(t){T=window.innerWidth/640,window.innerHeight<window.innerWidth&&(T=window.innerHeight/640),x.style.width=window.innerWidth/2-20+"px";window.innerWidth<900||window.innerHeight;if(h.resize(),e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px",window.innerWidth<900||BrowserDetect.MOBILE){i.style.left="20px",p.style.opacity=0,l.style.opacity=0,i.style.top=null,i.style.bottom=(window.innerHeight<500?100:150)*T+"px";var n=(window.innerWidth>window.innerHeight||window.innerHeight<500?30:48)*T,r=(window.innerWidth>window.innerHeight||window.innerHeight<500?34:52)*T;(n>45||r>48)&&(n=45,r=48),_.style.fontSize=n+"px",_.style.lineHeight=r+"px"}else i.style.left="52%",p.style.opacity=1,l.style.opacity=1,_.style.fontSize="30px",_.style.lineHeight="34px",i.style.top=h._y-parseInt(_.style.fontSize)/2+9+"px";window.innerWidth>450&&BrowserDetect.MOBILE&&window.innerWidth>window.innerHeight&&(i.style.left="70%",i.style.top=h._y-parseInt(_.style.fontSize)/2+4+"px"),x.style.width="50%",v.style.bottom="90px",window.innerWidth<900||BrowserDetect.MOBILE||window.innerHeight<700?v.style.display="none":v.style.display="block",i.style.height=s(i.firstChild)+"px"},e.appendChild(x)}function n(){var e=t.children.length;_=document.createElement("div"),_.style.position="relative",_.style.display="block";for(var i,n,o=0,s=0;s<e;s++){var a=t.children[s];i=a.getAttribute("data-menuTitle"),i&&("Culture"!==i&&(n=r(o,a),_.appendChild(n)),0==o&&(b=n,n.style.color="#fff"),"Culture"===i&&(n=r(o,a,!0),_.appendChild(n)),o++)}return _}function r(t,e,i){var n=document.createElement("div");return n.style.position="relative",n.style.clear="both",n.style.display="block",n._menuTitle=i?"Stories":e.getAttribute("data-menuTitle"),n._template=e.getAttribute("data-template"),n._path=e.getAttribute("data-path"),n._index=t,n.innerHTML=i?"Stories":e.getAttribute("data-menuTitle"),n.style.whiteSpace="noWrap",n.style.color="#B9BFBB",5===t&&(n.style.marginTop="25px"),n.style.left=0,n.style.cursor="pointer",n._storeData=e,C.push(n),BrowserDetect.MOBILE||BrowserDetect.TABLET?n.addEventListener("touchstart",i?o:p):(n.addEventListener(MouseAndTouchEvent.MOUSE_DOWN,i?o:p),n.addEventListener(MouseEvent.MOUSE_OVER,function(t){this!=b&&TweenMax.to(this,0,{css:{color:"#FFF"},ease:Linear.easeNone})}),n.addEventListener(MouseEvent.MOUSE_OUT,function(t){this!=b&&TweenMax.to(this,0,{css:{color:"#B9BFBB"},ease:Linear.easeNone})})),n}function o(){window.open("https://medium.com/@hellomondaycom","_blank")}function s(t){var e={w:t.offsetWidth,h:t.offsetHeight};if(!t._sizeW&&!t._sizeH){var i=t.cloneNode(!0);i.style.display="block",i.style.visibility="hidden",document.body.appendChild(i),t._sizeW=i.offsetWidth,t._sizeH=i.offsetHeight,e={w:i.offsetWidth,h:i.offsetHeight},document.body.removeChild(i)}return e}function a(){l(),v=new SmartObject,v.style.position="absolute",v.style.width="370px",v.style.fontSize="14px",v.style.lineHeight="16px",v.className="nav-twitter",v.style.left="52%";var t=document.createElement("span");return t.style.display="block",t.style.marginBottom="7px",t.innerHTML=Assets.DATA_STATIC.querySelector("#nav-twitter").innerHTML,t.style.color="#B9BFBB",v.appendChild(t),v}function l(){AJAX.load(Assets.SITE_BASE+"/social/gettweets.php",c,"GET")}function c(t){A=JSON.parse(t);var e=A[0],i=e.text,n=e.user.screen_name;n=String(n);var r=e.created_at,o=r.split(" ");r=o[1]+" "+o[2]+", "+o[5],i=h(i,n,r),v.appendChild(i)}function h(t,e,i){var n=new SmartObject;n.style.position="relative";var r=document.createElement("span");if(r.style.display="block",r.style.width="100%",r.style.marginBottom="6px",r.style.color="#B9BFBB",t.indexOf("https://")>-1||t.indexOf("http://")>-1||t.indexOf("@")>-1)for(var o=t.split(" "),s=0;s<o.length;s++)if(o[s].indexOf("https://")>-1){var a=document.createElement("a");a.style.textDecoration="none",a.style.color="#fff",a.setAttribute("href",o[s]),a.setAttribute("target","_blank"),a.innerHTML=o[s]+" ",a.className="cultureLink",r.appendChild(a)}else if(o[s].indexOf("http://")>-1){var a=document.createElement("a");a.style.textDecoration="none",a.style.color="#fff",a.setAttribute("href",o[s]),a.setAttribute("target","_blank"),a.innerHTML=o[s]+" ",a.className="cultureLink",r.appendChild(a)}else if(o[s].indexOf("@")>-1){var l=document.createElement("span");l.style.color="#fff",l.innerHTML=o[s]+" ",r.appendChild(l)}else r.innerHTML+=o[s]+" ";else r.innerHTML=t;return n._text=r,n.appendChild(r),n}function u(t,e){if(E._isAnimating)return!1;if(!e){var i=g._isOpen?"Close":"Open";_gaq.push(["_trackEvent","Menu",i])}if("HomeTemplate"===ContentManager._activeTemplates[0].templateName&&ContentManager._activeTemplates[0].template.hideActiveCat&&ContentManager._activeTemplates[0].template.hideActiveCat(),g._isOpen){var n=g,r=ContentManager._prevTemplateObj.template;parseInt(r.style.top)&&(g.style.top=-parseInt(r.style.top)+"px",Assets.LAYER_ALL.scrollTop=-parseInt(r.style.top),r.style.top="0px"),Assets.SCROLL_DISABLER.enable_scroll(),E.move(n,r,{direction:"left",onComplete:function(){r.enableParallax&&r.enableParallax(),r.showBackArrow&&r.showBackArrow(),g.style.top="0px",g._isOpen=!1,d(e)}})}else{g._isOpen=!0,document.body.style.overflow="hidden",Assets.SCROLL_DISABLER.disable_scroll();var n=ContentManager._prevTemplateObj.template,r=g;Assets.LAYER_ALL&&Assets.LAYER_ALL.scrollTop&&(n.style.top=-Assets.LAYER_ALL.scrollTop+"px",Assets.LAYER_ALL.scrollTop=0),n.disableParallax&&n.disableParallax(),n.hideBackArrow&&n.hideBackArrow(),E.move(n,r,{direction:"right",onComplete:function(){d(e)}}),g.style.display="block",g.style.top="0px"}}function d(t){t&&t()}function p(t){if(E._isAnimating)return!1;var e=t.currentTarget;trace(e._storeData),ContentManager._newPath!==e._path&&TweenMax.to(b,.2,{css:{color:"#B9BFBB"},ease:Linear.easeNone}),e.style.color="#fff",b=e,ContentManager._newPath===e._path?(Assets.SCROLL_DISABLER.enable_scroll(),u(t,function(){g._isOpen=!1,g.style.top="0px"})):(Assets.SCROLL_DISABLER.enable_scroll(),g._isOpen=!1,g.style.top="0px",Assets.CLICKED_MENU_LINK=!0,ContentManager.path(e._storeData)),m.onClick(null,!0)}function f(t){T=window.innerWidth/640,window.innerHeight<window.innerWidth&&(T=window.innerHeight/640),g._isOpen?(g.style.display="block",TweenMax.set(ContentManager._prevTemplateObj.template,{x:Math.ceil(window.innerWidth+2),y:0,z:0})):g.style.display="none",w.style.width=window.innerWidth+"px",w.style.height=window.innerHeight+"px",y.style.width=window.innerWidth-40+"px",y.style.height=window.innerHeight-40+"px",x&&x.resize(),y.style.width=window.innerWidth-40+"px"}var g=new SmartObject;g.style.position="absolute",g.style.top=0,g.style.left=0,g.style.right=0,g.style.bottom=0,g.style.display="none";var m,y,_,v,b,w,x,T,A,C=[],E=Assets.FULLSCREEN_TRANSITIONS||new FullScreenStackTransition;return g._isOpen=!1,g.slideInMenuIcon=function(){TweenMax.to(m,Assets.TRANSITIONS_MANAGER._options.speed,{_x:40,ease:Expo.easeInOut,overwrite:"all"})},g.getIndexOfTemplateFromPath=function(t){var e,i=0,n=C.length;for(i;i<n;i++){var r=C[i];if(r._path===t){var e=r;break}}return e},g.setColor=function(t,e,i){return!1},g.highlightMenuItemFromPath=function(t){var e=g.getIndexOfTemplateFromPath(t);e&&(e!==b&&(b.style.color="#B9BFBB"),e.style.color="#fff",b=e)},function(){i(),e(),f(),g._resize=f,window.addEventListener("resize",f)}(),g}function AbstractButton(t,e){var i=new SmartObject;return i.bg=document.createElement("div"),i.callback=t||function(){},i.hitArea=new SmartObject,i.addEvents=function(){i.hitArea.style.backgroundColor="#FFFFFF",i.hitArea._opacity=.01,i.hitArea.style.width=i.bg.style.width,i.hitArea.style.height=i.bg.style.height,i.hitArea.style.cursor="pointer",i.hitArea.style.pointerEvents="all",i.appendChild(i.hitArea),BrowserDetect.MOBILE||BrowserDetect.TABLET?i.hitArea.addEventListener("touchstart",i.onClick):(i.hitArea.addEventListener(MouseEvent.MOUSE_OVER,i.mouseOver),i.hitArea.addEventListener(MouseEvent.MOUSE_OUT,i.mouseOut),i.hitArea.addEventListener(MouseEvent.MOUSE_DOWN,i.onClick))},i.removeEvents=function(){i.hitArea.style.cursor="default",i.hitArea.style.pointerEvents="none",BrowserDetect.MOBILE||BrowserDetect.TABLET?i.hitArea.removeEventListener("touchstart",i.onClick):(i.hitArea.removeEventListener(MouseEvent.MOUSE_OVER,i.mouseOver),i.hitArea.removeEventListener(MouseEvent.MOUSE_OUT,i.mouseOut),i.hitArea.removeEventListener(MouseEvent.MOUSE_DOWN,i.onClick)),i&&i.hitArea&&i.hitArea.parentNode&&i.hitArea.parentNode.removeChild(i.hitArea)},i.onClick=function(){i.callback&&i.callback()},i.mouseOver=function(){},i.mouseOut=function(){},i.changeBackgroundColor=function(t){i.bg.style.backgroundColor=t},i.kill=function(){i.bg=null,i.callback=null,i.hitArea=null,i=null},function(){i.bg.style.width="46px",i.bg.style.height="46px",i.bg.style.borderRadius="23px",i.bg.style.position="absolute",i.changeBackgroundColor(e||"#FFFFFF"),i.appendChild(i.bg)}(),i}function MainMenuButton(t,e){function i(){c=!0,TweenMax.to(l[0],.3,{_y:9,overwrite:!0,ease:Quad.easeOut}),TweenMax.to(l[1],.3,{delay:.2,_rotation:180,overwrite:!0,ease:Quad.easeOut}),TweenMax.to(l[2],.3,{_y:35,overwrite:!0,ease:Quad.easeOut,onComplete:r})}function n(){c=!1,TweenMax.to(l[0],.3,{_y:9,overwrite:!0,ease:Quad.easeOut}),TweenMax.to(l[1],.3,{delay:.2,_rotation:0,overwrite:!0,ease:Quad.easeOut}),TweenMax.to(l[2],.3,{_y:35,overwrite:!0,ease:Quad.easeOut,onComplete:r})}function r(){TweenMax.to(l[0],.3,{_y:18,overwrite:!0,ease:Quad.easeOut}),TweenMax.to(l[2],.3,{_y:26,overwrite:!0,ease:Quad.easeOut,onComplete:o})}function o(){h=!1}function s(t){o();var e=0===t?Quad.easeOut:Quad.easeInOut;TweenMax.to(l[0],.3,{delay:t||.3,_y:18,overwrite:!0,ease:e}),TweenMax.to(l[2],.3,{delay:t||.3,_y:26,overwrite:!0,ease:e})}var a=HM.extend(AbstractButton,[t]),l=[],c=!1,h=!1;return a.override("onClick",function(t,r){if(e._isAnimating&&!0!==r)return!1;c?n():i(),r||a._super.onClick()}),a.override("mouseOver",function(){h||(TweenMax.to(l[0],.3,{_y:16,overwrite:!0,ease:Quad.easeOut}),TweenMax.to(l[2],.3,{_y:28,overwrite:!0,ease:Quad.easeOut,onComplete:s}))}),a.override("mouseOut",function(){h||r()}),function(){var t,e=0;for(e;e<3;e++)t=new SmartObject(AssetLoader.getAsset("assets/images/ui/navigationline@2.png")),t._x=13,t._y=18+4*e,t.width=20,t.height=3,t.style.pointerEvents="none",a.appendChild(t),l.push(t);a.addEvents()}(),a}function ArrowButton(t,e,i,n,r){function o(){m||(TweenLite.to(c,f.speed,{_rotation:135,_x:-1,ease:Expo.easeInOut}),TweenLite.to(h,f.speed,{_rotation:-135,_x:y,ease:Expo.easeInOut,onComplete:a}))}function s(){switch(c=new SmartObject,c.style.backgroundColor=i?"#FFFFFF":"#555657",c.style.width="15px",c.style.height="1px",c._rotation=-45,c._x=-1,c._y=4,h=new SmartObject,h.style.backgroundColor=i?"#FFFFFF":"#555657",h.style.width="15px",h.style.height="1px",h._x=y,h._y=4,h._rotation=45,u=new SmartObject,u.style.width="24px",u.style.height="11px",u._x=11,u._y=17,u.style.pointerEvents="none",t){case"down":u._rotation=180,u._x=11,u._y=18;break;case"left":u._rotation=-90,u._x=10,u._y=18;break;case"right":u._rotation=90}d.appendChild(u),u.appendChild(c),u.appendChild(h)}function a(){g=!1,c._rotation=-45,h._rotation=45,m&&d.mouseOver()}var l,c,h,u,d=HM.extend(AbstractButton,[e,i]),p=4,f=r._options,g=!1,m=!1,y="Safari"===BrowserDetect.BROWSER_NAME?9:10;return d.override("onClick",function(e,i){if(r._isAnimating&&!0!==i)return!1;g=!0,d.callback(e,t),TweenLite.to(c,f.speed,{_rotation:135,_x:-1,ease:f.ease||Expo.easeInOut,overwrite:!0}),TweenLite.to(h,f.speed,{_rotation:-135,_x:y,ease:f.ease||Expo.easeInOut,onComplete:a,overwrite:!0})}),d.override("mouseOver",function(){m=!0,g||(TweenLite.to(c,.25,{_rotation:-25,_x:-2,ease:Quad.easeInOut}),TweenLite.to(h,.25,{_rotation:25,_x:11,ease:Quad.easeInOut}))}),d.override("mouseOut",function(){m=!1,g||(TweenLite.to(c,.25,{_rotation:-45,_x:-1,ease:Quad.easeInOut}),TweenLite.to(h,.25,{_rotation:45,_x:y,ease:Quad.easeInOut}))}),function(){d.style.zIndex=999,s(),n&&(setTimeout(o,500),l=setInterval(o,1e3*p),d.idleTimer=l),d.addEvents()}(),d}function OffsiteButton(t,e){var i=HM.extend(AbstractButton,[t,e]),n=SmartObject(AssetLoader.getAsset("assets/images/ui/offsite_icon_outline@2.png")),r=SmartObject(AssetLoader.getAsset("assets/images/ui/offsite_icon_arrow@2.png"));return i.override("mouseOver",function(){TweenLite.to(r,.3,{_x:21,_y:8})}),i.override("mouseOut",function(){TweenLite.to(r,.3,{_x:19,_y:10,_rotation:0})}),function(){i.bg.style.width="36px",i.bg.style.height="36px",i.bg.style.borderRadius="18px",n.___useRounded=!0,n.style.pointerEvents="none",n._x=9,n._y=10,n.width=18.5,n.height=16,i.appendChild(n),r.style.pointerEvents="none",r._x=19,r._y=10,r.width=8,r.height=8,i.appendChild(r)}(),i}function HMLogo(){function t(){e._x=20,e._y=158,e.orgW=e.naturalWidth||e.width,e.orgH=e.naturalHeight||e.height,e.ratio=e.orgH/e.orgW}var e=new SmartObject(AssetLoader.getAsset("assets/images/frontpage/hellomonday-logo@2.png"));return e.addEvents=function(){e.style.cursor="pointer",e.style.pointerEvents="all",BrowserDetect.MOBILE||BrowserDetect.TABLET?e.addEventListener("touchstart",e.onClick):e.addEventListener(MouseEvent.MOUSE_DOWN,e.onClick)},e.removeEvents=function(){BrowserDetect.MOBILE||BrowserDetect.TABLET?e.removeEventListener("touchstart",e.onClick):e.removeEventListener(MouseEvent.MOUSE_DOWN,e.onClick)},e.onclick=function(t){ContentManager.path("home")},e.resize=function(){var t=window.innerWidth/640;if(window.innerHeight<window.innerWidth&&(t=window.innerHeight/640),window.innerWidth<900||window.innerHeight<600){var i=.7*(window.innerWidth/2-20);1==BrowserDetect.MOBILE&&window.innerWidth>window.innerHeight&&window.innerWidth<720?i=e.orgW/2.2*t:1==BrowserDetect.MOBILE&&window.innerWidth>window.innerHeight&&(i=e.orgW/1.6*t),i>=e.orgW/2&&!0!==BrowserDetect.MOBILE?(e.style.width=null,e.style.height=null):(e.style.width=i+"px",e.style.height="auto")}else e.style.width=null,e.style.height=null},function(){e.style.zIndex=999,t(),e.addEvents()}(),e}function Cat(t,e){function i(t){t===r.frames-1&&e(s)}var n,r,o,s=new SmartObject,a=!1,l=!1;return s.play=function(){n.play(),a&&(HM.Audio.play(o),l=!0)},s.pause=function(){n.pause(),a&&l&&HM.Audio.pause(o)},s.unloadAssets=function(){var e=CatAnimationData.getAssetsForType(t),i=0,n=e.length;for(i;i<n;i++)AssetLoader.destroy(e[i]);r=null},function(){r=CatAnimationData.getDataForType(t),n=new AnimationSequence(r.images,r.fps,i),n.style.pointerEvents="none",s.appendChild(n),r.audio&&""!==r.audio&&(a=!0,o=HM.Audio.createAudioObject(r.audio))}(),s}function PageTransitionsManager(){function t(){if(!l){var t=a.shift();if(!t)return!1;i=t,l=!0;var o=0;if(Assets.LAYER_ALL.scrollTop){var h=Assets.LAYER_ALL.scrollTop;i.oldTemplate.style.top=-h+"px",c[i.oldTemplate._path]=h,o=h,Assets.LAYER_ALL.scrollTop=0}if(c[i.newTemplate._path]&&!Assets.RESET_SCROLL_TO_ZERO){var u=c[i.newTemplate._path];i.oldTemplate.style.top=-o+u+"px",Assets.LAYER_ALL.scrollTop=u,c[i.newTemplate._path]=null}i.oldTemplate.disableParallax&&i.oldTemplate.disableParallax(),Assets.RESET_SCROLL_TO_ZERO&&(Assets.RESET_SCROLL_TO_ZERO=!1),i.oldTemplate.pause&&requestAnimFrame(i.oldTemplate.pause),i.newTemplate.style.opacity=1,n=i.oldTemplate.style.position,r=i.newTemplate.style.position,i.oldTemplate.style.position="absolute",i.newTemplate.style.position="absolute",Assets.SCROLL_DISABLER.disable_scroll(),requestAnimFrame(function(){s.move(i.oldTemplate,i.newTemplate,{direction:"left",onComplete:e})}),setTimeout(function(){requestAnimFrame(function(){Assets.SCROLL_DISABLER.enable_scroll()})},1e3*Assets.PAGE_TRANSTION_SPEED*.6)}}function e(){i.onCompleteCallback&&i.onCompleteCallback(),i.newTemplate.loadRest&&i.newTemplate.loadRest(),i.newTemplate.buildTemplate&&requestAnimFrame(i.newTemplate.buildTemplate),i.newTemplate.unpause&&requestAnimFrame(i.newTemplate.unpause),i=null,l=!1,t()}var i,n,r,o={},s=Assets.FULLSCREEN_TRANSITIONS||new FullScreenStackTransition,a=[],l=!1,c=[];return o._options=s._options,Array.prototype.pushUnique=function(t){return-1==this.indexOf(t)&&(this.push(t),!0)},o.go=function(e,i,n){Assets.FIRST_PAGE_TRANSITION=!1;var r;Assets.CLICKED_MENU_LINK?(n&&n(),n=null,r=Assets.MAIN_MENU):(r=e,r._path=i.getAttribute("data-path")),BrowserDetect.DESKTOP&&(Assets.DELAY_CASE_IMAGES=!0),ContentManager.nextTemplate();var o=ContentManager._prevTemplateObj.template;o._path=ContentManager._newPath,o.style.opacity=0;var s=parseInt(r.style.zIndex)||0;r.style.zIndex=s+1,o.style.zIndex=s+2,TweenMax.set(o,{x:Math.ceil(window.innerWidth+2),y:0,z:0});var l={oldTemplate:r,newTemplate:o,onCompleteCallback:n};a.push(l),t(),Assets.CLICKED_MENU_LINK=!1},o}function Preloader(){function t(){c=new HMLogo,a.appendChild(c)}function e(){h=new SmartObject(document.createElement("span")),h.innerHTML=Assets.DATA_STATIC.querySelector("#please-wait").innerHTML,h.style.fontSize="14px",h.style.display="block",h.style.color="#fff",h._x=l+20,h._y=30;var t=document.createElement("div");t.style.position="relative",t.style.width="43px",t.style.height="1px",t.style.backgroundColor="#fff",t.style.top=("Firefox"===BrowserDetect.BROWSER_NAME?-10:-8)+"px",t.style.left="87px",h.appendChild(t),a.appendChild(h)}function i(){u=new SmartObject(document.createElement("span")),u.innerHTML=Assets.DATA_STATIC.querySelector("#loading").innerHTML,u.style.fontSize="28px",u.style.lineHeight="30px",u.style.display="block",u.style.color="#fff",u._x=l+20,u._y=125,d=new SmartObject(document.createElement("span")),d.innerHTML="0%",d.style.fontSize="28px",d.style.lineHeight="30px",d.style.display="block",d.style.color="#b8c2b9",u.appendChild(d),a.appendChild(u)}function n(){var t=Assets.DATA_STATIC.querySelector("#email").innerHTML;p=document.createElement("a"),p.style.position="absolute",p.href="mailto:"+t,p.innerHTML=t,p.style.textDecoration="none",p.style.fontFamily="TheinhardtRegular",p.style.fontSize="12px",p.style.color="#afb4b0",p.style.left="20px",p.style.bottom="20px",BrowserDetect.DESKTOP&&(p.addEventListener(MouseEvent.MOUSE_OVER,r),p.addEventListener(MouseEvent.MOUSE_OUT,o)),a.appendChild(p),f=document.createElement("span"),f.style.position="absolute",f.innerHTML="&copy; Copyright "+(new Date).getFullYear(),f.style.fontFamily="TheinhardtRegular",f.style.fontSize="12px",f.style.color="#afb4b0",f.style.left="20px",f.style.bottom="20px",a.appendChild(f)}function r(t){TweenMax.to(p,.2,{opacity:.5,ease:Linear.easeNone})}function o(t){TweenMax.to(p,.2,{opacity:1,ease:Linear.easeNone})}function s(t){l=Math.round((Assets.getWindowWidth()-40)/4),a.style.width=Math.round(Assets.getWindowWidth()-40)+"px",a.style.height=Math.round(Assets.getWindowHeight()-40)+"px",c.resize(),Assets.getWindowWidth()<1100?(h._x=20,u._x=20,u._y=292):(h._x=l+20,u._x=l+20,u._y=125),Assets.getWindowWidth()<640?(a.style.paddingBottom="50px",f.style.left="auto",f.style.right="20px"):(f.style.left=l+20+"px",f.style.right="auto",a.style.paddingBottom="0px"),g.style.width=window.innerWidth+"px",g.style.height=window.innerHeight+"px"}var a,l,c,h,u,d,p,f,g=new SmartObject,m=new FullScreenStackTransition,y=!1;return g.update=function(t){if(y)return!1;t=t||100,t>=100&&(y=!0),d.innerHTML=t+"%"},g.kill=function(){if(!g)return!1;if(window.removeEventListener("resize",s),BrowserDetect.DESKTOP&&(p.removeEventListener(MouseEvent.MOUSE_OVER,r),p.removeEventListener(MouseEvent.MOUSE_OUT,o)),g.parentNode){var t=ContentManager._prevTemplateObj.template,e=g;e.style.zIndex=0,Assets.MAIN_MENU.slideInMenuIcon(),requestAnimFrame(function(){m.move(e,t,{speed:Assets.PAGE_TRANSTION_SPEED,direction:"left",onComplete:function(){m.kill(),g.parentNode.removeChild(g),g=null,document.body.style.background=document.documentElement.style.background="#AFB6B0"}})})}},function(){document.body.appendChild(g),g.style.position="absolute",g.style.background="#565759",g.style.zIndex=99999,g.style.top=0,g.style.left=0,a=new SmartObject,a.style.overflow="hidden",a.style.backgroundColor="#5e5f61",a.style.height=Assets.getWindowHeight()-20+"px",a._x=20,a._y=20,g.appendChild(a),l=(Assets.getWindowWidth()-40)/4,t(),e(),i(),n(),s(),window.addEventListener("resize",s)}(),g}function CaseSlideshow(t,e){function i(t,i){var o=Assets.getWindowWidth(),s=new ArrowButton("left",n,"#"+i,null,{_options:{speed:.3,ease:Linear.easeNone}});s.style.zIndex=4,Assets.getWindowWidth()<690?s._x=o-12-46:s._x=o-42-46,s._y=e/2-52,s._dir="up",s._slideshow=t,t.appendChild(s);var a=new ArrowButton("right",n,"#"+i,null,{_options:{speed:.3,ease:Linear.easeNone}});a.style.zIndex=4,Assets.getWindowWidth()<690?a._x=o-12-46:a._x=o-42-46,a._y=e/2+6,a._slideshow=t,a._dir="down",t.appendChild(a),t._slideshowBtnUp=s,t._slideshowBtnDown=a,t.addEventListener("click",r)}function n(t){d||o(this._dir)}function r(t){d||o("up")}function o(t){d=!0,"up"==t?--p<0&&(p=l-1):++p>l-1&&(p=0),HM.AssetLoader.loadSingle(f[p].path,{onComplete:s})}function s(){h=SmartObject(HM.AssetLoader.get(f[p].path)),h._sizePerc=f[p].sizePerc,h.style.width="100%",h.style.height="auto",h.style.zIndex=0,c?(c.style.zIndex=1,TweenMax.to(c,.4,{_opacity:0,onComplete:a,ease:Linear.easeNone})):(h._opacity=0,TweenMax.to(h,.4,{_opacity:1,onComplete:a,ease:Linear.easeNone})),u.appendChild(h)}function a(){c&&u.removeChild(c),c=h,h=null,d=!1}var l,c,h,u=new SmartObject,d=!1,p=-1,f=[];return u.loadFirstSlide=function(){o("down")},u.resize=function(t,e){u.style.width=t+"px",c&&0!==c._getHeight()&&(u.style.height=c._getHeight()+"px"),u._slideshowBtnUp&&(t<690?(u._slideshowBtnUp._x=t-12-46,u._slideshowBtnDown._x=t-12-46):(u._slideshowBtnUp._x=t-42-46,u._slideshowBtnDown._x=t-42-46),c&&(u._slideshowBtnUp._y=c._getHeight()/2-52,u._slideshowBtnDown._y=c._getHeight()/2+6))},u.kill=function(){u._slideshowBtnUp.removeEvents(),u._slideshowBtnDown.removeEvents(),u._slideshowBtnUp=null,u._slideshowBtnDown=null,u.removeEventListener("click",r);var t=0,e=f.length;for(t;t<e;t++)HM.AssetLoader.destroy(f[t]);c&&(TweenMax.killTweensOf(c),c.parentNode&&u.removeChild(c)),h&&(TweenMax.killTweensOf(h),h.parentNode&&u.removeChild(h))},function(){u.style.overflow="hidden",u.style.top=0,u.style.left=0,u.style.width=Assets.getWindowWidth()+"px",u.style.clear="both",u.style.cssFloat="left",u.style.backgroundColor="#"+t.getAttribute("data-backgroundColor");var e=t.getAttribute("data-arrowColor");i(u,e);var n=t.children;l=n.length;for(var r=0;r<l;r++){var o,s=window.devicePixelRatio>1;if(o=1==BrowserDetect.MOBILE?1==s?Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/mobile/":1==BrowserDetect.TABLET?1==s?Assets.CDN_URL_SMALL+"assets/images/projects/desktop/":Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/desktop/",f.push({path:o+n[r].getAttribute("data-image"),sizePerc:n[r].getAttribute("data-imageSizePerc")/100}),0==r){var a=n[r].getAttribute("data-height")/n[r].getAttribute("data-width");u.style.height=Math.round(Assets.getWindowWidth()*a)+"px"}}}(),u}function CalicoLogoGenerator(t,e,i){function n(){m=new UILogoGen(_,v),m.onDownload(a),m.onNewText(h),m.onColorChange(l),m.onTypePlaceChange(c),m.style.top=v-2+"px",i.appendChild(m)}function r(){p=document.createElement("canvas"),p.style.position="absolute",p.width=_,p.height=v,f=p.getContext("2d"),w.appendChild(p);var t=document.createElement("canvas");t.id="fabricLogo",t.width=_,t.height=v,w.appendChild(t)}function o(){y=new CircleAlpabet(f)}function s(){d(b),y.render()}function a(){switch(m.getFileType()){case"svg":y.saveAsSvg();break;case"jpg":y.saveAsJpg();break;case"png":y.saveAsPng();break;default:console.log("NO FILE TYPE SELECTED")}}function l(t){y.setColor(t),b="#fff"==t}function c(t){}function h(t){y.setNewText(t)}function u(){_=window.innerWidth,v=_*e,p.width=_,p.height=v,y.setPos(.5*_,.5*v),m.setSize(_,v),m.style.top=v-2+"px",m.style.left=_>1200?(window.innerWidth-1200)/2+"px":0,d()}function d(t){color=1==t?"#AAA":"#f4f4f4",f.fillStyle=color,f.fillRect(0,0,_,v)}var p,f,g,m,y,_=window.innerWidth,v=window.innerHeight,b=!1,w=document.createElement("div");return w.style.position="absolute",w.style.zIndex=10,w.init=function(){_=window.innerWidth,v=_*e,r(),o(),n(),window.addEventListener("resize",u),u()},w.startRender=function(){g=setInterval(s,1e3/60)},w.stopRender=function(){clearInterval(g)},w}function CircleAlpabet(t){function e(){try{new Blob}catch(t){return console.log("Downloading of the logo is not supported in your browser. Go get the newest version or try another browser."),alert("Downloading of the logo is not supported in your browser. Go get the newest version or try another browser."),!1}return!(Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0)||(alert("Safari is not one of the supported browsers for downloading of the Logo. Please Try either Google Chrome or Firefox"),!1)}function i(){TweenMax.killAll(!0),
document.createElement("canvas").id="fabricRender";var t=S,e=S,i=2*S,n=2*S,r=C.length;4==r&&("BOTTOM"==M&&(n+=_-.5*S),"LEFT"==M&&(i+=p.getWidth()+-1*v-.5*S,t+=p.getWidth()+-1*v-.5*S));var o=new fabric.Canvas("fabricRender");o.setDimensions({width:i,height:n});for(var s=0;s<r;s++)C[s].renderFabric(o,t,e);if(4==r){var a="BOTTOM"==M?y:v,l="BOTTOM"==M?_:b;p.set({left:a+t,top:l+e}),o.add(p)}return o}function n(){_LogoCanvas=new fabric.Canvas("fabricLogo");var t=[];_LogoCanvas.selection=!1,fabric.loadSVGFromURL("assets/images/projects/calico-logogenerator/CalicoLogo.svg",function(e,i){var n=new fabric.Group(t);n.hasControls=n.hasBorders=n.selectable=!1;var r="BOTTOM"==M?y:v,o="BOTTOM"==M?_:b,s=L?1:0;n.set({left:T+r,top:A+o,fill:f,opacity:s,width:75,height:75}),p=n,_LogoCanvas.add(n),_LogoCanvas.renderAll()},function(e,i){i.set("id",e.getAttribute("id")),t.push(i)})}function r(){if(p){var t="BOTTOM"==M?y:v,e="BOTTOM"==M?_:b;p.set({left:T+t,top:A+e}),_LogoCanvas.renderAll()}}function o(t){var e=T-t.pageX,i=A-t.pageY;Math.sqrt(e*e+i*i)<S&&window.addEventListener("mousemove",a)}function s(){window.removeEventListener("mousemove",a);for(var t=C.length,e=0;e<t;e++)TweenMax.to(C[e],1,{offsetX:0,offsetY:0,ease:Expo.easeOut})}function a(t){var e=T-t.pageX,i=A-t.pageY;e<-T?e=-T:e>T&&(e=T),i<-A?i=-A:i>A&&(i=A);for(var n=(Math.sqrt(e*e+i*i),T),r=(Math.atan2(e,i),Math.PI,C.length),o=0;o<r;o++){var s=-C[o].radius/n;TweenMax.to(C[o],1,{offsetX:e*s,offsetY:i*s,ease:Expo.easeOut})}}function l(t,e){var i=C[t],n=360/I.length,r=.5*n,o=n*e+r;TweenMax.to(i,3,{rotation:o,gap:n,ease:Quart.easeOut})}function c(t,e){var i=C[t],n=360/D.length,r=.5*n,o=2*n,s=n*e+r-o;TweenMax.to(i,3,{rotation:s,gap:n,ease:Quart.easeOut})}function h(t){var e=360,i=new Circle(x,g,S,e,f);i.setPos(T,A),e=360/I.length,i.rotation=360*Math.random(),O=e*t+.5*e,C.push(i),E.push(i),TweenMax.to(i,1.5,{rotation:O,gap:e,ease:Quart.easeInOut}),S+=m}function u(t){var e=360,i=new Circle(x,g,S,e,f);i.setPos(T,A),e=360/D.length,i.rotation=360*Math.random(),O=e*t+.5*e-2*e,C.push(i),E.push(i),TweenMax.to(i,1.5,{rotation:O,gap:e,ease:Quart.easeInOut}),S+=m}function d(){if(C.length>1){C.pop().kill(function(t){var e=E.indexOf(t);-1!=e&&E.splice(e,1)}),S-=m}}var p,f="#403c3c",g=8,m=8+g,y=7,_=123,v=-162,b=12,w={},x=t,T=0,A=0,C=[],E=[],S=18,O=0,M="BOTTOM",L=!1,k=new Circle(x,g,S,360/3.5,f);k.rotation=360/3.5*.5,C.push(k),E.push(k),S+=m;var D=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],I=["0","1","2","3","4","5","6","7","8","9"];w.activate=function(){window.addEventListener("mousedown",o),window.addEventListener("mouseup",s),n()},w.deactivate=function(){window.removeEventListener("mousedown",o),window.removeEventListener("mouseup",s)},w.render=function(){for(var t=E.length,e=0;e<t;e++)E[e].render()},w.setLogoPosition=function(t){M=t},w.setColor=function(t){f=t;for(var e=C.length,i=0;i<e;i++)C[i].color=t;p&&(p.set({fill:t}),_LogoCanvas.renderAll())},w.setLogoPlacemenet=function(t){M=t,r()},w.setPos=function(t,e){T=t,A=e;for(var i=C.length,n=0;n<i;n++)C[n].setPos(T,A);r()},w.saveAsSvg=function(){if(e()){var t=i(),n=new Blob([t.toSVG()],{type:"text/plain;charset=utf-8"});saveAs(n,"calico_logo_"+R+".svg"),t.dispose(),r()}},w.saveAsJpg=function(){if(e()){var t=i();t.backgroundColor="#FFFFFF",t.renderAll();for(var n=t.toDataURL("image/jpg"),o=atob(n.substr(n.indexOf(",")+1)),s=o.length,a=new Uint8Array(s);s--;)a[s]=o.charCodeAt(s);saveAs(new Blob([a],{type:"image/jpg"}),"calico_logo_"+R+".jpg"),t.dispose(),r()}},w.saveAsPng=function(){if(e()){for(var t=i(),n=t.toDataURL("image/png"),o=atob(n.substr(n.indexOf(",")+1)),s=o.length,a=new Uint8Array(s);s--;)a[s]=o.charCodeAt(s);saveAs(new Blob([a],{type:"image/png"}),"calico_logo_"+R+".png"),t.dispose(),r()}};var R="";return w.setNewText=function(t){if((t=t.toLowerCase())!=R){t.length,L=!1,p&&(p.set({opacity:0}),_LogoCanvas.renderAll());var e;if(t.length>R.length){var i=t.length;e=R.length;for(var n=e;n<i;n++){var r=t.charAt(n),o=D.indexOf(r);if(-1==o){if(-1==(o=I.indexOf(r)))continue;h(o)}else u(o)}}else if(t.length<R.length){e=t.length;for(var i=R.length-e,n=0;n<i;n++)d()}for(var n=0;n<e;n++)if(R.charAt(n)!=t.charAt(n)){var s=n+1,a=D.indexOf(t.charAt(n));if(-1==a){if(-1==(a=I.indexOf(t.charAt(n))))continue;l(s,a)}else c(s,a)}R=t}},w.activate(),w}function Circle(t,e,i,n,r){function o(t,i,n,r,o){var a="",c=Math.PI/180,h=n-.5*e,u=t+h*Math.cos(r*c),d=i+h*Math.sin(r*c);if(o-r>180){var p=s(t,i,h,r,r+180),f=s(t,i,h,r+180,o);a="M"+u+" "+d,a+=" a"+p+" a"+f,h=n+.5*e,u=t+h*Math.cos(o*c),d=i+h*Math.sin(o*c),a+="L"+u+" "+d,p=s(t,i,h,o,o+180,0),f=s(t,i,h,o+180,r,0),a+=" a"+p+" a"+f,h=n-.5*e,u=t+h*Math.cos(r*c),d=i+h*Math.sin(r*c),a+="L"+u+" "+d,a+="z"}else a="M"+u+" "+d,a+=" a"+s(t,i,n,r,o),console.log("Angles under 180deg needs to be implemented, if needed.");return new fabric.Path(a,{width:2*n,height:2*n,fill:l.color})}function s(t,e,i,n,r,o){o=0==o?o:1;var s=t+i*Math.cos(n*Math.PI/180),l=e+i*Math.sin(n*Math.PI/180);return a(s,l,t+i*Math.cos(r*Math.PI/180)-s,e+i*Math.sin(r*Math.PI/180)-l,i,i,o)}function a(t,e,i,n,r,o,s){return[r,o,0,0,s,i,n].join(" ")}var l={},c=t;l.x=0,l.y=0,l.radius=i,l.rotation=0,l.gap=n,l.offsetX=0,l.offsetY=0,l.rotationOffset=0,l.alpha=1,l.color=r;var h=e/l.radius,u=h*e*0;return l.render=function(){var t=360-this.gap+this.rotation+this.rotationOffset-u,i=this.rotation+this.rotationOffset+u;t-i<0&&(t+=-1*(t-i));var n=t/180*Math.PI;c.strokeStyle=l.color,c.beginPath(),c.arc(this.x+this.offsetX,this.y+this.offsetY,this.radius,i/180*Math.PI,n,!1),c.lineWidth=e,c.stroke()},l.setPos=function(t,e){this.x=t,this.y=e},l.kill=function(t){var e=this.radius;TweenMax.to(this,.9+.6*Math.random(),{gap:359,radius:e,rotation:360*Math.random(),onComplete:t,onCompleteParams:[this],ease:Quad.easeInOut})},l.renderFabric=function(t,e,n){var r=360-this.gap+this.rotation;e=e||0,n=n||0,t.add(o(e,n,i,this.rotation+.01,r+.01))},l}function UILogoGen(t,e){function i(){l=document.createElement("div"),l.style.position="absolute",l.style.backgroundColor="#D5D5D5",c=document.createElement("div"),c.style.position="absolute",c.style.marginTop="60px",c.style.backgroundColor="#D5D5D5",l.appendChild(c),a.appendChild(l)}function n(){h=document.createElement("span"),h.innerHTML="Calico Logo Generator",h.style.position="absolute",h.style.fontSize="16px",h.style.fontFamily="TheinhardtRegular",h.style.whiteSpace="nowrap",h.style.color="#9a9898",h.style.top="20px",h.style.left="20px",a.appendChild(h)}function r(){u=new LogoInputField("Type your word here"),a.appendChild(u)}function o(){var t=d;t>1200&&(t=1200);var e=t-170,i=s/3;u.style.left="85px",u.style.top=i+"px",u.style.width=e+"px",u.style.height=i+"px",l.style.width=t+"px",l.style.height=s+"px",l.style.backgroundColor="#e1e1e1",c.style.width=t-85+"px",c.style.height=2*i+"px"}var s=180,a=document.createElement("div");a.style.position="absolute",a.style.zIndex=12;var l,c,h,u,d=t||0,p=e||0;return function(){i(),n(),r(),o()}(),a.setSize=function(t,e){d=t,p=e,o()},a.onNewText=function(t){u.onChange(t)},a.onDownload=function(t){},a.onColorChange=function(t){},a.onTypePlaceChange=function(t){},a.getHeight=function(){return s},a.getFileType=function(){},a}function LogoInputField(){var t=new TextInput("Write here");return t.restrict="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t.maxChars=26,t.size=20,t.style.width="916px",t.style.height="60px",t.style.fontSize="22px",t.style.fontFamily="TheinhardtRegular",t.style.pointerEvents="all",t.style.backgroundColor="#fff",t}function TextField(t,e){var i="",n=document.createElement("div");return n.style.position="absolute",n.style.color="#BBBBBB",n.style.width=t+"px",n.style.height=e+"px",n.style.fontFamily="mark_otbold",n.style.textAlign="center",n.style.fontSize="12px",n.getText=function(){return i},n.setText=function(t){i=t,n.innerHTML=i},n}function TextInput(t){function e(){l.value==t&&(l.value=""),document.addEventListener("keyup",s)}function i(){""==l.value&&(l.value=t),document.removeEventListener("keyup",s)}function n(e){return l.value==t&&(l.value=""),r(e)}function r(t){return(-1==l.maxChars||l.value.length<l.maxChars)&&o(t)}function o(t){if(!l.restrict.length)return!0;var e="number"==typeof t.which?t.which:t.keyCode,i=String.fromCharCode(e);return 8===e||0===e||-1!==l.restrict.indexOf(i)}function s(t){a(),c&&h!=l.value&&(h=l.value,c(l.value))}function a(){if(l.value!=t){var e,i=l.value,n=i.length,r="",o=null;for(e=0;e<n;e+=1)o=i.charAt(e),-1!==l.restrict.indexOf(o)&&(r+=o);r!=l.value&&(l.value=r)}}var l=document.createElement("input");l.style.position="absolute",l.value=t;var c,h="";return l.maxChars=-1,l.restrict="",function(){l.style.border="none",l.style.fontFamily="mark_otlight",l.style.fontSize="25px",l.style.margin=0,l.style.padding="0 0 0 17px",l.style.boxSizing="border-box",l.style.color="#7c7c7c",l.style.resize="none",l.style.outline="0px !important",l.style.webkitAppearance="none",l.style.lineHeight="20px",l.style.letterSpacing="0.5px",l.style.marginBottom="-3px",l.onkeypress=n,l.onfocus=e,l.onblur=i}(),l.onChange=function(t){c=t},l}function AnimationSequence(t,e,i){function n(){if(d.curFrame++,p&&d.curFrame>c)return void h.pause();d.curFrame>d.totalFrames?h.loop?(d.curFrame=0,s(),o()):(h.pause(),d.curFrame=d.totalFrames):(s(),o())}function r(){d.curFrame--,d.curFrame<0?h.loop?(d.curFrame=d.totalFrames,s(),o()):(h.pause(),d.curFrame=0):(s(),o())}function o(){l&&h.removeChild(l),l=u[d.curFrame],h.appendChild(l)}function s(){i&&i(d.curFrame)}var a,l,c,h=new SmartObject,u=t,d={curFrame:0,totalFrames:t.length-1},p=!1;return h.play=function(t){t||(p=!1),a&&clearInterval(a),s(),a=setInterval(n,1e3/e)},h.reverse=function(){a&&clearInterval(a),s(),a=setInterval(r,1e3/e)},h.changeFrameRate=function(t,e){a&&clearInterval(a),a="reverse"===e?setInterval(r,1e3/t):setInterval(n,1e3/t)},h.stop=function(){a&&clearInterval(a),d.curFrame=0},h.pause=function(){a&&clearInterval(a)},h.gotoAndPlay=function(t){if(!(t<=d.totalFrames&&t>=0))throw new Error("Animation.gotoAndPlay: out of bounds!");h.stop(),d.curFrame=t,h.play()},h.playTo=function(t){h.stop(),c=t,p=!0,h.play(!0)},h.gotoAndStop=function(t){h.stop(),d.curFrame=t,o()},h.kill=function(){h.stop(),d=null,u=null,t=null},function(){h.loop=!1,l=u[0],h.appendChild(l)}(),h}function ScrollDisabler(){function t(t){t=t||window.event,t.preventDefault&&t.preventDefault(),t.returnValue=!1}var e={},i=navigator.userAgent.match("CriOS");return e.disable_scroll=function(){if(document.addEventListener("touchmove",t),i)return!1;Assets.LAYER_ALL.style.overflowY="hidden"},e.enable_scroll=function(){if(document.removeEventListener("touchmove",t),i)return!1;Assets.LAYER_ALL.style.overflowY=Assets.all_overflow},e}function CaseTemplate(t){function e(){if(et&&1!=ft){var t=ct[dt];t._bkgSrc?preloadImg=document.createElement("img"):t._isVid?(preloadImg=document.createElement("img"),preloadImg._vid=t):preloadImg=t,preloadImg._order=dt,pt.push(preloadImg),dt++,preloadImg.addEventListener(Event.LOAD,i),t._bkgSrc?preloadImg.src=t._bkgSrc:preloadImg.src=t._src}}function i(t){if(et&&1!=ft){if(1==dt){H.style.backgroundImage="url("+this.src+")";var i=BrowserDetect.MOBILE||BrowserDetect.TABLET?0:.5;TweenMax.to(H,i,{_opacity:1,ease:Linear.easeNone}),!0!==Assets.DELAY_CASE_IMAGES&&dt<ct.length&&e()}else dt<ct.length&&e();this._vid&&TweenMax.to(this._vid,.3,{_opacity:1,ease:Linear.easeNone}),this._isImg&&(TweenMax.to(this._wrap,.3,{_opacity:1,ease:Linear.easeNone}),this._wrap.style.height="auto"),this._order==ct.length-1&&O()}}function n(){O(),window.addEventListener("resize",O),Assets.LAYER_MID.appendChild(et),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(it.getAttribute("data-path")),I._x=40,I._y=40,I._opacity=0;var t=0;Assets.DELAY_CASE_IMAGES||(t=.7),TweenMax.to(I,Assets.PAGE_TRANSTION_SPEED,{_x:92,delay:t,ease:Expo.easeInOut,onComplete:function(){gt=!0}}),TweenMax.to(I,.2,{_opacity:1,delay:t,ease:Linear.easeNone});var e;e=Assets.getWindowWidth()<520?Assets.getWindowHeight()-79:Assets.getWindowHeight()-260,BrowserDetect.MOBILE||BrowserDetect.TABLET?(F._y=e,nt=!0):TweenMax.to(F,.5,{_y:e,ease:Expo.easeOut,delay:.5,onComplete:function(){nt=!0}})}function r(){for(var t=it.querySelector(".case-content"),e=t.children,i=0;i<e.length;i++){var n,r=e[i].getAttribute("data-type");if("slideshow"==r)n=new CaseSlideshow(e[i],J),Assets.FIRST_PAGE_TRANSITION&&n.loadFirstSlide(),st.push(n),et.appendChild(n);else if("image"==r)n=new E(e[i]),at.push(n),et.appendChild(n);else if("video"==r){if(0==(n=new o(e[i])))return;lt.push(n),et.appendChild(n)}else if("calico-logo-generator"==r){if(BrowserDetect.MOBILE||BrowserDetect.TABLET||"Explorer"==BrowserDetect.BROWSER_NAME)return;n=new SmartObject,n.className+=" logo-generator";n.style.top=0,n.style.left=0,n.style.width=Assets.getWindowWidth()+"px",n.style.backgroundColor="#f4f4f4",n.style.height=Assets.getWindowWidth()*(300/520)+180+"px",$=new CalicoLogoGenerator(e[i],300/520,n),$._ratio=300/520,n.appendChild($),$.init(),$.startRender(),tt=n,et.appendChild(n)}0==i&&(j=n),i==e.length-1&&(W=n),ht.push(n),n._order=i}}function o(t){var e=new SmartObject;e.style.width=Assets.getWindowWidth()+"px",e.style.clear="both",e.style.zIndex=2,e.style.top=0,e.style.left=0;var i=t.getAttribute("data-video-height")/t.getAttribute("data-video-width"),n=Assets.getWindowWidth()*i;e.style.height=n+"px",e._ratio=i,e._opacity=0;var r=document.createElement("video"),o=navigator.userAgent.toLowerCase();o.indexOf("android");r.src=Assets.CDN_URL_LARGE+"assets/videos/projects/"+t.getAttribute("data-video"),r.style.zIndex=7,r._isPlaying=!1,r._isMetaLoaded=!1,r.addEventListener("ended",a),e._video=r,r._videoWrap=e;var u=new SmartObject;u.style.top=0,u.style.left=0,u.style.width="100%",u.style.height="100%";var d,p=window.devicePixelRatio>1;d=1==BrowserDetect.MOBILE?1==p?Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/mobile/":1==BrowserDetect.TABLET?1==p?Assets.CDN_URL_SMALL+"assets/images/projects/desktop/":Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/desktop/";var f=d+t.getAttribute("data-image");u.style.backgroundImage="url("+f+")",u.style.backgroundSize="cover",u.style.backgroundPosition="center center",u.style.pointerEvents="none",u.style.zIndex=9,e._poster=u,e.appendChild(u);var g=new SmartObject;g.style.width="108px",g.style.height="108px",g.style.borderRadius="54px";var m=new SmartObject;m.style.width="108px",m.style.height="108px",m.style.borderRadius="54px",m.style.backgroundColor="#"+t.getAttribute("data-buttonColor"),m._opacity=.4,g.appendChild(m);var y=new SmartObject;y.style.width="78px",y.style.height="78px",y.style.borderRadius="39px",y.style.backgroundColor="#"+t.getAttribute("data-buttonColor"),y._opacity=1,y._x=15,y._y=15,g.appendChild(y);var _=new ArrowButton("right",null,"#"+t.getAttribute("data-buttonColor"),null,{_options:{speed:.5}});if(_._x=30,_._y=30,_.removeEvents(),g._innerButton=_,g.appendChild(_),g.style.cursor="pointer",g.style.zIndex=10,g._x=(Assets.getWindowWidth()-108)/2,e._playBtn=g,g.addEventListener("mouseover",c),g.addEventListener("mouseout",h),e.appendChild(g),e._height=t.getAttribute("data-video-height"),BrowserDetect.MOBILE||BrowserDetect.TABLET){r.style.width="100%";var i=t.getAttribute("data-video-height")/t.getAttribute("data-video-width");r._ratio=i;var n=Assets.getWindowWidth()*i;r.style.height=n+"px",r._videoWrap._playBtn._y=(n-108)/2,r._videoWrap.style.height=n+"px",r._videoWrap.addEventListener("click",l),r._isMetaLoaded=!0}else{r.style.width="100%";var i=t.getAttribute("data-video-height")/t.getAttribute("data-video-width");r._ratio=i;var n=Assets.getWindowWidth()*i;r.style.height=n+"px",r._videoWrap._playBtn._y=(n-108)/2,r._videoWrap.style.height=n+"px",r.addEventListener("loadedmetadata",s)}return e.appendChild(r),e._isVid=!0,e._src=f,ct.push(e),e}function s(t){this.style.width="100%";var e=this.videoHeight/this.videoWidth;this._ratio=e;var i=Assets.getWindowWidth()*e;this.style.height=i+"px",this._videoWrap._playBtn._y=(i-108)/2,this._videoWrap.style.height=i+"px",this._videoWrap.addEventListener("click",l),this._isMetaLoaded=!0}function a(t){this.parentNode._poster.style.display="block",TweenMax.to(this.parentNode._poster,.2,{_opacity:1,ease:Linear.easeNone}),TweenMax.to(this.parentNode._playBtn,.2,{_opacity:1,ease:Linear.easeNone}),this._isPlaying=!1}function l(t){if(0==this._video._isPlaying){this._video._isPlaying=!0;var e=this;TweenMax.to(this._poster,.2,{_opacity:0,ease:Linear.easeNone,onComplete:function(){e._poster.style.display="none"}}),TweenMax.to(this._playBtn,.3,{delay:.3,_opacity:0,ease:Linear.easeNone}),this._playBtn._innerButton.mouseOut(),this._playBtn._innerButton.onClick(),this._video.play()}else this._video._isPlaying=!1,TweenMax.to(this._playBtn,.2,{_opacity:1,ease:Linear.easeNone}),this._video.pause()}function c(t){1!=this.parentNode._video._isPlaying&&this._innerButton.mouseOver()}function h(t){1!=this.parentNode._video._isPlaying&&this._innerButton.mouseOut()}function u(){I=new ArrowButton("left",d,"#"+it.getAttribute("data-backBtnColor"),null,Assets.TRANSITIONS_MANAGER),I.style.position="fixed",I._x=40,I._y=40,I._opacity=0,I.style.zIndex=2,Assets.LAYER_TOP.appendChild(I)}function d(t){mt||(mt=!0,history.back())}function p(){H=new SmartObject,H.style.position="relative",H.style.width=Assets.getWindowWidth()+"px",H.style.height=Assets.getWindowHeight()+"px",I.style.zIndex=3,H._opacity=0;var t,e=window.devicePixelRatio>1;if(t=1==BrowserDetect.MOBILE?1==e?Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/mobile/":1==BrowserDetect.TABLET?1==e?Assets.CDN_URL_SMALL+"assets/images/projects/desktop/":Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/desktop/",1==BrowserDetect.MOBILE&&Assets.getWindowWidth()<Assets.getWindowHeight())var t=Assets.CDN_URL_SMALL+"assets/images/projects/portrait/";H._path=t,H._bkgSrc=t+it.getAttribute("data-caseImageTop"),H.style.backgroundSize="cover",H.style.backgroundPosition="center top",ct.push(H),et.appendChild(H)}function f(){if(!ut)return!1;var t=Assets.LAYER_ALL.scrollTop/(Assets.getWindowHeight()/1.2),e=1-t;clearInterval(P.idleTimer),H._opacity=e,H._y=Assets.LAYER_ALL.scrollTop/2}function g(){F=new SmartObject;var t=.9;it.getAttribute("data-panelOpacity")&&(t=parseInt(it.getAttribute("data-panelOpacity"))),F._opacity=t,F.style.top=0,F.style.left=0,F.style.zIndex=10,F.style.overflow="hidden",F.style.backgroundColor="#"+it.getAttribute("data-panelColor"),F._x=20,w(),v(),m(),et.appendChild(F)}function m(){R=new SmartObject,R.style.position="absolute",R.style.width="46px",R.style.height="46px",R.style.borderRadius="23px",it.getAttribute("data-whiteOpt")?R.style.backgroundColor="#"+it.getAttribute("data-whiteOpt"):R.style.backgroundColor="#fff",R.style.zIndex=4,R.style.pointerEvents="all",R.style.overflow="hidden",R.style.cursor="pointer",R._y=16,R._rotation=0;if(it.getAttribute("data-whiteOpt"))var t=new SmartObject(AssetLoader.getAsset("assets/images/ui/dots-white@2.png"));else var t=new SmartObject(AssetLoader.getAsset("assets/images/ui/dots@2.png"));t._x=5.5,t._y=5.5,R.appendChild(t),R.addEventListener("click",y),F.appendChild(R)}function y(t){if(1!=ot){if(ot=!0,0==rt){TweenMax.to(R,.15,{_rotation:-90,ease:Circ.easeInOut});var e;e=X._columnOne.offsetHeight+X._columnTwo.offsetHeight+10+G.offsetHeight+60>Y._getHeight()+20?Y._y+X._columnOne.offsetHeight+X._columnTwo.offsetHeight+10+G.offsetHeight+100:Y._y+Y._getHeight()+20,TweenMax.to(F,.5,{css:{height:e+"px"},ease:Quad.easeInOut});for(var i=e+H._getHeight()-79+20,n=0;n<ht.length;n++)TweenMax.to(ht[n],.5,{_y:i,ease:Quad.easeInOut}),i+=ht[n]._getHeight();TweenMax.to(et,.5,{css:{height:i+"px"},ease:Quad.easeInOut}),rt=!0}else{TweenMax.to(R,.15,{_rotation:0,ease:Circ.easeInOut}),TweenMax.to(F,.5,{css:{height:"79px"},ease:Quad.easeInOut});for(var i=H._getHeight(),n=0;n<ht.length;n++)TweenMax.to(ht[n],.5,{_y:i,ease:Quad.easeInOut}),i+=ht[n]._getHeight();TweenMax.to(et,.5,{css:{height:i+"px"},ease:Quad.easeInOut}),rt=!1}K=setTimeout(_,1e3)}}function _(){ot=!1}function v(){P=new ArrowButton("down",b,"#"+it.getAttribute("data-arrowButtonColor"),!0,Assets.TRANSITIONS_MANAGER),P._y=14,P.style.zIndex=4,F.appendChild(P)}function b(t){TweenMax.to(Assets.LAYER_ALL,.7,{scrollTo:{y:Assets.getWindowHeight()},ease:Power2.easeOut})}function w(){x(),T(),A(),C()}function x(){z=new SmartObject,z._x=20,z._y=15;var t=document.createElement("span");t.style.display="block",it.getAttribute("data-whiteOpt")?t.style.color="#"+it.getAttribute("data-whiteOpt"):t.style.color="#fff",t.style.fontSize="14px",t.innerHTML=Assets.DATA_STATIC.querySelector("#client").innerHTML;var e=document.createElement("span");e.style.display="block",e.style.color="#"+it.getAttribute("data-textColor"),e.style.fontSize="14px",e.innerHTML=it.querySelector(".client-title").innerHTML;var i=document.createElement("span");i.style.display="block",i.style.position="absolute",i.style.left=(Assets.getWindowWidth()-40)/4+"px",i.style.top="15px",it.getAttribute("data-whiteOpt")?i.style.color="#"+it.getAttribute("data-whiteOpt"):i.style.color="#fff",i.style.fontSize="14px",i.innerHTML=Assets.DATA_STATIC.querySelector("#case-tag").innerHTML;var n=document.createElement("div");n.style.position="relative",n.style.width="43px",n.style.height="1px",it.getAttribute("data-whiteOpt")?n.style.backgroundColor="#"+it.getAttribute("data-whiteOpt"):n.style.backgroundColor="#fff",n.style.top="-8px",n.style.left="38px",i.appendChild(n),F._caseTag=i,z.appendChild(t),z.appendChild(e),F.appendChild(z),F.appendChild(i),U=new SmartObject,U.style.fontSize="33px",U.style.lineHeight="35px";var r=document.createElement("span");r.style.display="block",it.getAttribute("data-whiteOpt")?r.style.color="#"+it.getAttribute("data-whiteOpt"):r.style.color="#fff",r.innerHTML=it.querySelector(".case-title").innerHTML;var o=document.createElement("span");o.style.display="block",o.style.width="320px",o.style.color="#"+it.getAttribute("data-textColor"),o.innerHTML=it.querySelector(".subtitle").innerHTML,U.appendChild(r),U.appendChild(o),F.appendChild(U),V=new SmartObject(document.createElement("span")),V.style.display="block",V.style.width=.75*(Assets.getWindowWidth()-40)+"px",V.style.color="#"+it.getAttribute("data-textColor"),V.style.fontSize="33px",V.style.lineHeight="35px",V._x=20,V._y=355,V.innerHTML=it.querySelector(".intro").innerHTML,F.appendChild(V)}function T(){Y=new SmartObject,Y.style.width="250px",Y.style.height="auto",Y.style.paddingBottom="14px",Y._x=Assets.getWindowWidth()-66-250;var t=document.createElement("span");t.style.display="block",t.style.fontSize="14px",t.style.lineHeight="27px",t.style.color="#"+it.getAttribute("data-secondTextColor"),t.innerHTML=Assets.DATA_STATIC.querySelector("#project").innerHTML,Y.appendChild(t);var e=document.createElement("span");e.style.width="180px",e.style.display="block",e.style.fontSize="14px",e.style.lineHeight="18px",e.style.color="#"+it.getAttribute("data-secondTextColor"),e.style.fontFamily="TheinhardtRegular",e.innerHTML=it.querySelector(".project").innerHTML,Y.appendChild(e);var i=new SmartObject;i.style.position="relative",i.style.width="100%",i.style.height="1px",i.style.marginTop="10px",i.style.marginBottom="5px",i.style.background="#"+it.getAttribute("data-secondTextColor"),i._opacity=.2,Y.appendChild(i);var n=document.createElement("span");n.style.display="block",n.style.fontSize="14px",n.style.lineHeight="27px",n.style.color="#"+it.getAttribute("data-secondTextColor"),n.innerHTML=Assets.DATA_STATIC.querySelector("#deliverables").innerHTML,Y.appendChild(n);var r=document.createElement("span");if(r.style.width="180px",r.style.display="block",r.style.fontSize="14px",r.style.lineHeight="18px",r.style.color="#"+it.getAttribute("data-secondTextColor"),r.style.fontFamily="TheinhardtRegular",r.innerHTML=it.querySelector(".deliverables").innerHTML,Y.appendChild(r),String(it.querySelector(".awards").innerHTML+"").length>0){i=i.cloneNode(),Y.appendChild(i);var o=document.createElement("span");o.style.display="block",o.style.fontSize="14px",o.style.lineHeight="27px",o.style.color="#"+it.getAttribute("data-secondTextColor"),o.innerHTML=Assets.DATA_STATIC.querySelector("#awards").innerHTML,Y.appendChild(o);var s=document.createElement("span");s.style.width="180px",s.style.display="block",s.style.fontSize="14px",s.style.lineHeight="18px",s.style.color="#"+it.getAttribute("data-secondTextColor"),s.style.fontFamily="TheinhardtRegular",s.innerHTML=it.querySelector(".awards").innerHTML,Y.appendChild(s)}i=i.cloneNode(),i.style.position="absolute",Y._lastLine=i,Y.appendChild(i),F.appendChild(Y)}function A(){X=new SmartObject,X.style.width=(Assets.getWindowWidth()-40)/4-40+"px",X._x=(Assets.getWindowWidth()-40)/4+20,X._y=Math.round(V._y+V._getHeight()+40);var t=it.querySelector(".body-text"),e=document.createElement("span");e.style.color="#"+it.getAttribute("data-secondTextColor"),e.style.fontSize="14px",e.style.lineHeight="27px",e.style.whiteSpace="nowrap",e.innerHTML=t.querySelector(".headline").innerHTML,X.appendChild(e),X._headline=e;var i=document.createElement("div");i.style.position="absolute",i.style.width="100%",i.style.fontSize="14px",i.style.lineHeight="18px",i.style.width=(Assets.getWindowWidth()-40)/4-40+"px",i.style.color="#"+it.getAttribute("data-secondTextColor"),i.style.fontFamily="TheinhardtRegular",i.innerHTML=t.querySelector(".column-one").innerHTML;var n=document.createElement("div");n.style.position="absolute",n.style.width="100%",n.style.fontSize="14px",n.style.lineHeight="18px",n.style.marginTop="27px",n.style.left=(Assets.getWindowWidth()-40)/4+"px",n.style.width=(Assets.getWindowWidth()-40)/4-40+"px",n.style.color="#"+it.getAttribute("data-secondTextColor"),n.style.fontFamily="TheinhardtRegular",n.innerHTML=t.querySelector(".column-two").innerHTML,X._columnOne=i,X._columnTwo=n,X.appendChild(i),X.appendChild(n),F.appendChild(X)}function C(){if(G=document.createElement("span"),G.style.position="absolute",G.style.display="block",it.getAttribute("data-link")&&""!=it.getAttribute("data-link")){var t=it.querySelector(".link-text");t&&""!==t.innerHTML?G.innerHTML=t.innerHTML:G.innerHTML=Assets.DATA_STATIC.querySelector("#visit-site").innerHTML,G.style.fontSize="14px",G.style.lineHeight="18px",G.style.color="#"+it.getAttribute("data-secondTextColor");var e=it.getAttribute("data-link"),i=document.createElement("a");i.style.textDecoration="none",i.style.color="#"+it.getAttribute("data-linkColor"),i.setAttribute("href",e),i.setAttribute("target","_blank");var n=it.querySelector(".link-name");n&&""!==n.innerHTML?i.innerHTML="</br>"+n.innerHTML:i.innerHTML="</br>"+e,G.appendChild(i),F.appendChild(G)}}function E(t){var e=new SmartObject;e.style.width=Assets.getWindowWidth()+"px";var i=t.getAttribute("data-height")/t.getAttribute("data-width");e.style.height=Math.round(Assets.getWindowWidth()*i)+"px",e.style.overflow="hidden",e.style.clear="both",e.style.display="block",e.style.top=0,e.style.left=0,e._opacity=0;var n=new SmartObject(document.createElement("img"));n.style.position="relative",n.style.verticalAlign="top",n._wrap=e,n._isImg=!0;var r,o=window.devicePixelRatio>1;return r=1==BrowserDetect.MOBILE?1==o?Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/mobile/":1==BrowserDetect.TABLET?1==o?Assets.CDN_URL_SMALL+"assets/images/projects/desktop/":Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/desktop/",n._src=r+t.getAttribute("data-image"),ct.push(n),n.style.width="100%",n.style.height="auto",e.appendChild(n),e}function S(){var t;t=Assets.getWindowWidth()<520||1==BrowserDetect.MOBILE?F._getHeight()+H._getHeight()-79:F._getHeight()+H._getHeight()-260+20;for(var e=0;e<ht.length;e++)ht[e]._y=t,ht[e]._getHeight()>0?t+=ht[e]._getHeight():t+=J;et.style.height=t+"px"}function O(t){var e=Assets.getWindowWidth(),i=Assets.getWindowHeight();if(H.style.width=e+"px",H.style.height=i+"px",1==BrowserDetect.MOBILE&&e<i){var n=Assets.CDN_URL_SMALL+"assets/images/projects/portrait/",r=n+it.getAttribute("data-caseImageTop");console.log(r),H.style.backgroundImage="url("+r+")"}else if(1==BrowserDetect.MOBILE&&e>i){var r=H._path+it.getAttribute("data-caseImageTop");H.style.backgroundImage="url("+r+")"}tt&&(tt.style.width=Assets.getWindowWidth(),tt.style.height=Assets.getWindowWidth()*$._ratio+180+"px"),U._x=(e-40)/4,V.style.width=.75*(e-40)+"px",Y._x=e-66-250,X.style.width=(e-40)/4-40+"px",X._x=e<1270?20:(e-40)/4+20,e<520||1==BrowserDetect.MOBILE?(U._x=20,U._y=260-U._getHeight()-40,F._caseTag.style.top="300px",F._caseTag.style.left="20px",V.style.fontSize="28px",V.style.lineHeight="30px",R.style.display="block",P.style.display="none",F.addEventListener("click",y)):(U._x=(e-40)/4+20,U._y=75,F._caseTag.style.top="15px",F._caseTag.style.left=(e-40)/4+20+"px",V.style.fontSize="33px",V.style.lineHeight="35px",P.style.display="block",R.style.display="none",F.removeEventListener("click",y)),e<520?(U.style.fontSize="23px",U.style.lineHeight="28px",V.style.fontSize="23px",V.style.lineHeight="28px"):(U.style.fontSize="33px",U.style.lineHeight="35px",V.style.fontSize="33px",V.style.lineHeight="35px"),X._y=Math.round(V._y+V._getHeight()+40),Y._y=V._y+V._getHeight()+40,Q=setTimeout(M,10),P._x=e-40-46-21,R._x=e-40-46-21;for(var o=0;o<st.length;o++)st[o].resize(e,i);for(var s=0;s<at.length;s++)at[s].style.width=e+"px";for(var a=0;a<lt.length;a++){lt[a].style.width=e+"px";var l=lt[a]._video;if(lt[a]._playBtn._x=(e-100)/2,1==l._isMetaLoaded){var c=e*l._ratio;0!==c&&(l.style.height=c+"px",lt[a]._playBtn._y=(c-108)/2,lt[a].style.height=c+"px")}else l.style.height=l._height+"px"}}function M(){var t=Assets.getWindowWidth(),e=Assets.getWindowHeight();t<690?(X._columnOne.style.width=t-88+"px",X._columnTwo.style.left="0px",X._columnTwo.style.top=Math.round(X._columnOne.offsetHeight+X._headline.offsetHeight+10)+"px",X._columnTwo.style.width=t-88+"px",X._columnOne.offsetHeight+X._columnTwo.offsetHeight+10+G.offsetHeight+60>Y._getHeight()+20?(F.style.height=Y._y+X._columnOne.offsetHeight+X._columnTwo.offsetHeight+10+G.offsetHeight+100+"px",G.style.top=Y._y+X._columnOne.offsetHeight+X._columnTwo.offsetHeight+10+83+"px"):(F.style.height=Y._y+Y._getHeight()+20+"px",G.style.top=Y._y+Y._getHeight()-33+"px")):t<1030?(X._columnOne.style.width=(t-40)/4*2+"px",X._columnTwo.style.left="0px",X._columnTwo.style.top=Math.round(X._columnOne.offsetHeight+X._headline.offsetHeight+10)+"px",X._columnTwo.style.width=(t-40)/4*2+"px",X._columnOne.offsetHeight+X._columnTwo.offsetHeight+10+G.offsetHeight+60>Y._getHeight()+20?(F.style.height=Y._y+X._columnOne.offsetHeight+X._columnTwo.offsetHeight+10+G.offsetHeight+100+"px",G.style.top=Y._y+X._columnOne.offsetHeight+X._columnTwo.offsetHeight+10+83+"px"):(F.style.height=Y._y+Y._getHeight()+20+"px",G.style.top=Y._y+Y._getHeight()-33+"px")):(X._columnOne.style.width=(t-40)/4-40+"px",X._columnTwo.style.left=(t-40)/4+"px",X._columnTwo.style.top="0px",X._columnTwo.style.width=(t-40)/4-40+"px",X._columnOne.offsetHeight+G.offsetHeight+60>Y._getHeight()+20?(F.style.height=Y._y+X._columnOne.offsetHeight+G.offsetHeight+100+"px",G.style.top=Y._y+X._columnOne.offsetHeight+83+"px"):(F.style.height=Y._y+Y._getHeight()+20+"px",G.style.top=Y._y+Y._getHeight()-33+"px")),Y._lastLine.style.top=F.offsetHeight-(Y._y+36)+"px",t<520&&0==rt&&(F.style.height="79px"),1==BrowserDetect.MOBILE&&0==rt&&1==ct.length?y():1==BrowserDetect.MOBILE&&1==rt&&1==ct.length?Z=setTimeout(L,25):1==BrowserDetect.MOBILE&&0==rt&&(F.style.height="79px"),1==BrowserDetect.MOBILE&&1==rt&&ct.length>1&&(F.style.height="79px",y()),t<690?(Y.style.display="none",I._x=92):(Y.style.display="block",I._x=92),0==gt&&(I._x=40),0==nt?F._y=e:1==BrowserDetect.MOBILE?F._y=e-79:F._y=t<520?e-79:e-260,
F.style.width=t-40+"px",G.style.left=X._x+"px",S()}function L(){var t;t=X._columnOne.offsetHeight+X._columnTwo.offsetHeight+10+G.offsetHeight+60>Y._getHeight()+20?Y._y+X._columnOne.offsetHeight+X._columnTwo.offsetHeight+10+G.offsetHeight+100:Y._y+Y._getHeight()+20,F.style.height=t+"px";var e=t+H._getHeight()-79+20;et.style.height=e+"px"}function k(){var t=0,e=ct.length;for(t;t<e;t++)ct[t]._playBtn&&(ct[t]._playBtn._innerButton.kill(),ct[t]._playBtn=null),ct[t].parentNode&&ct[t].parentNode.removeChild(ct[t]),ct[t]=null;$&&$.stopRender(),j=null,W=null,clearInterval(B),clearTimeout(K),clearTimeout(Q),clearTimeout(Z);for(var n=0;n<pt.length;n++)pt[n].removeEventListener(Event.LOAD,i),pt[n]._vid&&(pt[n]._vid=null);P.parentNode&&P.parentNode.removeChild(P),P&&(P.kill(),P=null),V&&V.parentNode&&V.parentNode.removeChild(V),V=null,F.parentNode&&F.parentNode.removeChild(F),F=null;var r=0,o=st.length;for(r;r<o;r++)st[r].parentNode&&st[r].parentNode.removeChild(st[r]),st[r].kill(),st[r]=null;st=null;for(var l=0;l<lt.length;l++){var c=lt[l]._video;c.removeEventListener("ended",a),BrowserDetect.MOBILE||BrowserDetect.TABLET||c.removeEventListener("loadedmetadata",s),c.parentNode&&c.parentNode.removeChild(c),c=null}et.parentNode&&et.parentNode.removeChild(et),et=null}function D(){Assets.LAYER_TOP.removeChild(I),I=null}var I,R,P,B,H,j,W,N,F,z,F,U,Y,X,G,V,q,J,K,Q,Z,$,tt,et=new SmartObject,it=t.getXML(),nt=!1,rt=!1,ot=!1,st=[],at=[],lt=[],ct=[],ht=[],ut=!0,dt=0,pt=[],ft=!1,gt=!1,mt=!1;return et.templateIn=function(){et._allowOverflowReset=!0,et.style.position="relative",_saveOverflow=Assets.LAYER_MID.style.overflow,et.style.background="#"+it.getAttribute("data-bodyBackground"),et.style.overflow="hidden",et.style.width="100%",et.style.height="auto",J=949/1920*Assets.getWindowWidth(),J=Math.ceil(J);var t=document.createElement("div");t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="#525453",t.style.zIndex=1e3,et.appendChild(t),N=it.querySelector(".case-content"),u(),p(),g(),r(),n(),!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE?Assets.LAYER_ALL.addEventListener("scroll",f):nt=!0,q=0,(BrowserDetect.DESKTOP||Assets.FIRST_PAGE_TRANSITION)&&e()},et.pause=function(){},et.unpause=function(){},et.setOverflows=function(){Assets.LAYER_MID.style.overflow=Assets.mid_overflow,document.body.style.overflow=Assets.body_overflow},et.loadRest=function(){dt<ct.length&&e();var t=0,i=st.length;for(t;t<i;t++)st[t].loadFirstSlide()},et.showBackArrow=function(){TweenMax.to(I,.15,{_opacity:1,linear:Linear.easeNone})},et.hideBackArrow=function(){TweenMax.to(I,.15,{_opacity:0,linear:Linear.easeNone})},et.removeParallax=function(){Assets.LAYER_ALL.removeEventListener("scroll",f),f=function(){}},et.enableParallax=function(){ut=!0},et.disableParallax=function(){ut=!1},et.templateOut=function(){ft=!0,I.removeEvents(),window.removeEventListener("resize",O),!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE&&Assets.LAYER_ALL.removeEventListener("scroll",f);for(var t=0;t<lt.length;t++)lt[t]._playBtn.removeEventListener("mouseover",c),lt[t]._playBtn.removeEventListener("mouseout",h),lt[t].removeEventListener("click",l);R.removeEventListener("click",y),P.removeEvents(),Assets.TRANSITIONS_MANAGER.go(et,it,k),TweenMax.to(I,Assets.PAGE_TRANSTION_SPEED,{_x:40,delay:0,ease:Expo.easeInOut}),TweenMax.to(I,.2,{_opacity:0,delay:Assets.PAGE_TRANSTION_SPEED-.3,ease:Linear.easeNone,onComplete:D})},et}function AboutTemplate(t){function e(){p=new HMLogo,d.appendChild(p)}function i(){S++,0==O&&S==E&&(TweenMax.to(d,.15,{_opacity:1,ease:Linear.easeNone}),O=!0)}function n(){f=document.createElement("span"),f.style.display="block",f.style.position="absolute",f.style.fontSize="33px",f.style.lineHeight="39px",f.style.color="#555658",f.innerHTML=A.querySelector(".intro-text").innerHTML,f.style.top="32px",d.appendChild(f)}function r(){g=document.createElement("div"),g.style.position="absolute",g.style.fontSize="36px",g.style.fontSize="39px",g.style.top="485px";for(var t=A.querySelector(".yay-monday"),e=0;e<2;e++){var i=document.createElement("span");i.style.display="block",i.innerHTML=t.getElementsByTagName("span")[e].innerHTML,i.style.color=0==e?"#fff":"#555658",g.appendChild(i)}d.appendChild(g)}function o(){var t=A.querySelectorAll(".column");m=document.createElement("div"),m.style.marginTop="745px",m.style.width=(Assets.getWindowWidth()-40)/4*3+"px",m.style.position="relative",d.appendChild(m);for(var e=0;e<t.length;e++){var n=t[e].getAttribute("data-title"),r=t[e].getAttribute("data-image"),o=document.createElement("div");if(o.style.position="absolute",o.style.display="inline-block",o.style.fontSize="14px",o.style.lineHeight="18px",o.style.color="#555658",o.style.fontFamily="TheinhardtRegular",o._colName=n,o.innerHTML=t[e].innerHTML,e<3?o.style.width=(Assets.getWindowWidth()-40)/4-40+"px":e<5&&(o.style.width=(Assets.getWindowWidth()-40)/4-40+"px",o.style.marginTop="250px"),e<5?(o.style.position="relative",o.style.verticalAlign="top",o.style.marginLeft="how-we-work"==n?(Assets.getWindowWidth()-40)/4+20+"px":"20px",o.style.marginRight="20px",m.appendChild(o)):"end-level-bosses"==n?d.appendChild(o):"offices"==n&&(y=o),r){var l=document.createElement("img");l.style.position="absolute",l.style.left="end-level-bosses"==n?"-30px":"how-we-work"==n?"0px":"-12px",l.src=Assets.CDN_URL_SMALL+"assets/images/about/"+r,E++,o.appendChild(l),l.onload=function(){"end-level-bosses"==this.parentNode._colName?(this.style.width=this.parentNode.offsetWidth+30+"px",this.style.height="auto",this.style.top=-this.clientHeight-15+"px"):(this.style.width=this.clientWidth/2+"px",this.style.height="auto",this.style.top=-this.clientHeight-15+"px"),i()}}if("end-level-bosses"==n){o.style.right="20px",o.style.top="745px",o.style.width="250px";var c=o.querySelector(".management");c.style.fontFamily="ClarendonLTStdBold",c.style.display="block",c.style.marginTop="30px",c.style.width="100%";for(var h=o.querySelectorAll(".name"),u=0;u<h.length;u++)h[u].style.fontFamily="ClarendonLTStdBold",h[u].style.display="block",h[u].style.width="100%",h[u].style.borderTop="1px solid #9ea4a1",h[u].style.paddingTop="8px";h[0].style.marginTop="8px";for(var p=o.querySelectorAll(".position"),f=0;f<p.length;f++)p[f].style.display="block",p[f].style.width="100%",p[f].style.paddingBottom="8px";var g=o.getElementsByTagName("p"),_=g[g.length-1];_.style.borderBottom="1px solid #9ea4a1",_.style.borderTop="1px solid #9ea4a1",_.style.paddingBottom="8px",_.style.paddingTop="8px"}else if("awards"==n){for(var b=o.querySelectorAll(".award"),w=0;w<b.length;w++){b[w].style.display="block",b[w].style.fontFamily="ClarendonLTStdBold",b[w].style.borderBottom="1px solid #9ea4a1",b[w].style.paddingBottom="8px",b[w].style.marginBottom="8px";var x=document.createElement("img"),T=b[w].getAttribute("data-ico");x.src=Assets.CDN_URL_SMALL+"assets/images/"+T,E++,x.style.verticalAlign="middle",x.style.cssFloat="right",x.style.marginRight="10px",b[w].appendChild(x),x.onload=function(){i(),this.style.width=this.clientWidth/2+"px",this.style.height="auto",this.style.marginTop=(18-this.clientHeight)/2+"px"}}b[0].style.borderTop="1px solid #9ea4a1",b[0].style.paddingTop="8px",b[0].style.marginTop="32px"}else if("offices"==n){o.style.position="relative",o.style.marginLeft=(Assets.getWindowWidth()-40)/4*2+20+"px",o.style.marginBottom="20px";for(var S=o.querySelectorAll(".office"),O=0;O<S.length;O++){S[O].style.borderBottom="1px solid #9ea4a1",S[O].style.paddingBottom="8px",S[O].style.marginTop="8px";var M=S[O].querySelector(".city");M.style.fontFamily="ClarendonLTStdBold",M.style.display="block"}var L=o.querySelector(".contact-link");L.style.fontFamily="ClarendonLTStdBold",L.style.fontSize="18px",L.style.lineHeight="20px",L.style.marginTop="60px",L.style.width="150px";var k=new SmartObject(L.getElementsByTagName("a")[0]);k.style.position="relative",k.style.color="#fff",k.style.textDecoration="none",k.addEventListener("mouseover",s),k.addEventListener("mouseout",a),v=k,S[0].style.borderTop="1px solid #9ea4a1",S[0].style.paddingTop="8px"}var D=o.querySelector(".title");D.style.fontFamily="ClarendonLTStdBold",D.style.display="block",D.style.marginBottom="3px",C.push(o)}}function s(t){TweenMax.to(this,.2,{_opacity:.6,ease:Linear.easeNone})}function a(t){TweenMax.to(this,.2,{_opacity:1,ease:Linear.easeNone})}function l(){_=document.createElement("div"),_.innerHTML=A.querySelector(".contact-us").innerHTML,_.style.fontSize="260px",_.style.lineHeight="195px",_.style.marginBottom="40px",_.style.color="#555658",_.style.marginLeft="20px",_.style.clear="both",_.querySelector(".white").style.color="#fff",x=new SmartObject(document.createElement("img"));var t=A.querySelector(".contact-us").querySelector(".bob-cat").getAttribute("data-src");x.src=Assets.CDN_URL_SMALL+"assets/images/"+t,x.onload=function(){this.style.width=this.width/2+"px",this.style.height="auto",this._x=144,this._y=-this.height/2+20,_.appendChild(this)},d.appendChild(_),d.appendChild(y)}function c(){var t=Assets.DATA_STATIC.querySelector("#email").innerHTML;b=document.createElement("a"),b.style.position="absolute",b.href="mailto:"+t,b.innerHTML=t,b.style.textDecoration="none",b.style.fontFamily="TheinhardtRegular",b.style.fontSize="12px",b.style.color="#717573",b.style.left="20px",b.style.bottom="20px",BrowserDetect.DESKTOP&&(b.addEventListener(MouseEvent.MOUSE_OVER,function(t){TweenMax.to(b,.2,{opacity:.5,ease:Linear.easeNone})}),b.addEventListener(MouseEvent.MOUSE_OUT,function(t){TweenMax.to(b,.2,{opacity:1,ease:Linear.easeNone})})),d.appendChild(b),w=document.createElement("span"),w.style.position="absolute",w.innerHTML="&copy; Copyright "+(new Date).getFullYear(),w.style.fontFamily="TheinhardtRegular",w.style.fontSize="12px",w.style.color="#717573",w.style.left="20px",w.style.bottom="20px",d.appendChild(w)}function h(t){d.style.width=Assets.getWindowWidth()-40+"px";window.innerWidth;window.innerHeight<window.innerWidth&&window.innerHeight;window.innerWidth<900||window.innerHeight;p.resize(),Assets.getWindowWidth()<860?(g.style.top="150px",m.style.marginTop="400px",m.style.fontSize="28px",m.style.lineHeight="34px",g.style.fontSize="33px",g.style.lineHeight="36px"):(g.style.top="485px",m.style.marginTop="745px",m.style.fontSize="33px",m.style.lineHeight="39px",g.style.fontSize="36px",g.style.lineHeight="39px"),Assets.getWindowWidth()<1024?(f.style.fontSize="23px",f.style.lineHeight="28px",g.style.fontSize="23px",g.style.lineHeight="28px"):(f.style.fontSize="33px",f.style.lineHeight="39px",g.style.fontSize="36px",g.style.lineHeight="39px"),Assets.getWindowWidth()<860?(f.style.width=Assets.getWindowWidth()-80+"px",f.style.marginTop="300px"):Assets.getWindowWidth()<1488?(f.style.width=(Assets.getWindowWidth()-80)/4*3-80+"px",f.style.marginTop="0px"):(f.style.marginTop="0px",f.style.width="1100px"),Assets.getWindowWidth()<860?(f.style.position="relative",g.style.position="relative",f.style.left="20px",g.style.left="20px"):(f.style.position="absolute",g.style.position="absolute",g.style.left=(Assets.getWindowWidth()-40)/4+20+"px",f.style.left=(Assets.getWindowWidth()-40)/4+20+"px"),Assets.getWindowWidth()<1140?m.style.width=Assets.getWindowWidth()-40+"px":m.style.width=(Assets.getWindowWidth()-40)/4*3+"px";for(var e=0;e<C.length;e++){var i=C[e];if((e<5||"offices"==i._colName)&&(Assets.getWindowWidth()<640?(i.style.width=Assets.getWindowWidth()-80+"px",i.style.marginRight="0px","how-we-work"==i._colName&&(i.style.marginLeft="20px"),"awards"!=i._colName&&"offices"!=i._colName||(i.style.marginLeft="20px")):Assets.getWindowWidth()<940?(i.style.width=(Assets.getWindowWidth()-40)/2-40+"px",i.style.marginRight="0px","how-we-work"==i._colName&&(i.style.marginLeft="20px"),"awards"!=i._colName&&"offices"!=i._colName||(i.style.marginLeft=(Assets.getWindowWidth()-40)/2+"px")):Assets.getWindowWidth()<1140?(i.style.width=(Assets.getWindowWidth()-40)/3-40+"px",i.style.marginRight="0px","how-we-work"==i._colName&&(i.style.marginLeft=(Assets.getWindowWidth()-40)/3+"px"),"awards"==i._colName&&(i.style.marginLeft="20px"),"offices"==i._colName&&(i.style.marginLeft=(Assets.getWindowWidth()-40)/3*2-20+"px")):Assets.getWindowWidth()<1250?(i.style.width=(Assets.getWindowWidth()-40)/4-20+"px",i.style.marginRight="0px","how-we-work"!=i._colName&&"offices"!=i._colName||(i.style.marginLeft=(Assets.getWindowWidth()-40)/4+20+"px"),"awards"==i._colName&&(i.style.marginLeft="20px"),"offices"==i._colName&&(i.style.marginLeft=Assets.getWindowWidth()/4*2+"px")):(i.style.width=(Assets.getWindowWidth()-40)/4-40+"px",i.style.marginRight="20px","how-we-work"!=i._colName&&"offices"!=i._colName||(i.style.marginLeft=(Assets.getWindowWidth()-40)/4+20+"px"),"awards"==i._colName&&(i.style.marginLeft="20px"),"offices"==i._colName&&(i.style.marginLeft=Assets.getWindowWidth()/4*2+"px"))),Assets.getWindowWidth()<940?"who-we-are"==i._colName&&(i.style.marginTop="250px"):"who-we-are"==i._colName&&(i.style.marginTop="0px"),Assets.getWindowWidth()<640?"what-we-believe"==i._colName&&(i.style.marginTop="250px"):"what-we-believe"==i._colName&&(i.style.marginTop="0px"),"end-level-bosses"==i._colName){var n=i.getElementsByTagName("img")[0];Assets.getWindowWidth()<1488?i.style.width="200px":i.style.width="250px",Assets.getWindowWidth()<1140?(i.style.display="none",n.style.top=-n.clientHeight-15+"px",n.style.left="-30px"):(i.style.display="block",n.style.top=-n.clientHeight-15+"px",n.style.left="-30px",n.style.width=i.offsetWidth+30+"px")}}Assets.getWindowWidth()<530?(_.style.fontSize="55px",x.style.display="none"):Assets.getWindowWidth()<750?(_.style.fontSize="80px",x.style.display="none"):Assets.getWindowWidth()<1020?(_.style.fontSize="120px",x.style.display="none"):Assets.getWindowWidth()<1520?(_.style.fontSize="170px",x.style.display="none"):(_.style.fontSize="260px",x.style.display="block"),Assets.getWindowWidth()<640?(d.style.paddingBottom="50px",w.style.left="auto",w.style.right="20px"):(w.style.left=(Assets.getWindowWidth()-40)/4+20+"px",w.style.right="auto",d.style.paddingBottom="0px")}function u(){T.parentNode.removeChild(T)}var d,p,f,g,m,y,_,v,b,w,x,T=document.createElement("div"),A=t.getXML(),C=[],E=0,S=0,O=!1;return T.templateIn=function(){SmartObject(T),T.style.position="relative",T._allowOverflowReset=!0,_saveOverflow=Assets.LAYER_MID.style.overflow,T.style.background="#bac2bb",T.style.overflow="hidden",T.style.width="100%",T.style.height="auto",T.style.minHeight="100%",T.style.paddingBottom="20px",T.style.backgroundColor="rgb(186,194,187)";var t=document.createElement("div");t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="#525453",t.style.zIndex=1e3,T.appendChild(t),d=new SmartObject,d.style.position="relative",d.style.overflow="hidden",d.style.backgroundColor="rgb(175,182,176)",d.style.height="100%",d.style.borderBottom="20px solid rgb(186,194,187)",d.style.left="20px",d.style.top="20px",T.appendChild(d),e(),n(),r(),o(),l(),c(),h(),window.addEventListener("resize",h),Assets.LAYER_MID.appendChild(T),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(A.getAttribute("data-path"))},T.setOverflows=function(){Assets.LAYER_MID.style.overflow=Assets.mid_overflow,document.body.style.overflow=Assets.body_overflow},T.templateOut=function(){v.removeEventListener("mouseover",s),v.removeEventListener("mouseout",a),window.removeEventListener("resize",h),Assets.TRANSITIONS_MANAGER.go(T,A,u)},T}function ContactTemplate(t){function e(){TweenMax.to(d,.15,{_opacity:1,ease:Linear.easeNone})}function i(){f=new HMLogo,d.appendChild(f)}function n(){g=document.createElement("span"),g.style.display="block",g.style.position="absolute",g.style.fontSize="33px",g.style.lineHeight="39px",g.style.color="#555658",g.innerHTML=x.querySelector(".intro-text").innerHTML,g.style.top="32px",d.appendChild(g)}function r(){var t=x.querySelector(".column-one");m=document.createElement("div"),m.style.display="inline-block",m.style.width=p-20+"px",m.style.marginLeft=p+20+"px",m.style.verticalAlign="top";var e=document.createElement("span");e.innerHTML=t.querySelector(".title").innerHTML,e.style.display="block",e.style.fontSize="36px",e.style.lineHeight="39px",e.style.marginBottom="20px",e.style.color="#555658",e.querySelector(".white").style.color="#fff",e.querySelector(".white").style.display="block",m._title=e,m.appendChild(e);for(var i=t.querySelectorAll(".office"),n=0;n<i.length;n++){var r=document.createElement("span");r.style.display="block",r.innerHTML=i[n].innerHTML,r.style.fontFamily="TheinhardtRegular",r.style.fontSize="14px",r.style.lineHeight="18px",r.style.color="#555658",r.style.marginTop="11px";var o=r.querySelector(".city");o.style.fontFamily="ClarendonLTStdBold",o.style.display="block",o.style.marginBottom="3px",m.appendChild(r)}setTimeout(function(){Assets.getWindowWidth()<860?m.style.marginTop="120px":Assets.getWindowWidth()>1920?m.style.marginTop=d.offsetHeight-m.offsetHeight-170+"px":m.style.marginTop=d.offsetHeight-m.offsetHeight-120+"px"},20),d.appendChild(m)}function o(){var t=x.querySelector(".column-two");y=document.createElement("div"),y.style.display="inline-block",y.style.position="relative",y.style.width=p-20+"px",y.style.marginLeft="20px",y.style.verticalAlign="top";var e=document.createElement("span");e.innerHTML=t.querySelector(".title").innerHTML,e.style.display="block",e.style.fontSize="36px",e.style.lineHeight="39px",e.style.marginBottom="20px",e.style.color="#555658",e.querySelector(".white").style.color="#fff",e.querySelector(".white").style.display="block",y._title=e,y.appendChild(e);var i=document.createElement("div");i.style.fontSize="14px",i.style.lineHeight="18px",i.style.color="#555658",y.appendChild(i);var n=document.createElement("div");n.style.fontSize="14px",n.style.lineHeight="18px",n.style.color="#555658",n.style.position="relative",n.style.bottom=0,y._contact=n,y.appendChild(n);var r,o=Selector.getChildren(t,"contactLinks"),l=0,c=o.length;for(l;l<c;l++){r=document.createElement("div"),r.innerHTML=Selector.getHtml(o[l],"title"),r.style.display="block",n.appendChild(r);var h=new SmartObject(document.createElement("div"));h.style.position="relative",h.style.marginBottom=l<3?"18px":"10px",h.innerHTML=Selector.getHtml(o[l],"email"),h.style.fontFamily="TheinhardtRegular";var u=h.getElementsByTagName("a")[0];u.style.color="#fff",u.style.textDecoration="none",n.appendChild(h),h.addEventListener("mouseover",s),h.addEventListener("mouseout",a),A.push(h)}setTimeout(function(){Assets.getWindowWidth()<860?(y.style.marginTop="80px",y.style.height="auto",y.style.paddingBottom="65px",y.style.marginBottom="65px"):(y.style.marginTop=m.offsetTop+"px",y.style.height=m.offsetHeight+"px",y.style.paddingBottom="0px",y.style.marginBottom="0px")},25),d.appendChild(y)}function s(t){TweenMax.to(this,.2,{_opacity:.6,ease:Linear.easeNone})}function a(t){TweenMax.to(this,.2,{_opacity:1,ease:Linear.easeNone})}function l(){_=document.createElement("img"),_.style.position="absolute",_.style.zIndex=10,_.style.top=0,_.src=Assets.CDN_URL_SMALL+x.getAttribute("data-image"),_.onload=function(){this._origW=this.clientWidth,Assets.getWindowWidth()<860?_.style.maxWidth="180px":_.style.maxWidth="auto",Assets.getWindowWidth()<860?(this.style.width=(Assets.getWindowWidth()-40)/2-100+"px",this.style.height="auto"):Assets.getWindowWidth()<1240?(this.style.width=p+"px",this.style.height="auto"):(this.style.width=this._origW/2+"px",this.style.height="auto"),Assets.getWindowWidth()<860?_.style.marginTop=g.offsetTop+g.offsetHeight+m.offsetHeight-_.clientHeight+80+"px":Assets.getWindowWidth()>1920?_.style.marginTop=d.offsetHeight-_.offsetHeight-170+"px":_.style.marginTop=d.offsetHeight-_.offsetHeight-120+"px",T=!0,e()},_.style.left="20px",d.appendChild(_)}function c(){var t=Assets.DATA_STATIC.querySelector("#email").innerHTML;v=document.createElement("a"),v.style.position="absolute",v.href="mailto:"+t,v.innerHTML=t,v.style.textDecoration="none",v.style.fontFamily="TheinhardtRegular",v.style.fontSize="12px",v.style.color="#717573",v.style.left="20px",v.style.bottom="20px",BrowserDetect.DESKTOP&&(v.addEventListener(MouseEvent.MOUSE_OVER,function(t){TweenMax.to(v,.2,{opacity:.5,ease:Linear.easeNone})}),v.addEventListener(MouseEvent.MOUSE_OUT,function(t){TweenMax.to(v,.2,{opacity:1,ease:Linear.easeNone})})),d.appendChild(v),b=document.createElement("span"),b.style.position="absolute",b.innerHTML="&copy; Copyright "+(new Date).getFullYear(),b.style.fontFamily="TheinhardtRegular",b.style.fontSize="12px",b.style.color="#717573",b.style.left="20px",b.style.bottom="20px",d.appendChild(b)}function h(t){p=(Assets.getWindowWidth()-40)/4;window.innerWidth;window.innerHeight<window.innerWidth&&window.innerHeight;window.innerWidth<900||window.innerHeight;f.resize(),d.style.minHeight=Assets.getWindowHeight()-20+"px",Assets.getWindowWidth()<860?(g.style.width=Assets.getWindowWidth()-80+"px",g.style.marginTop="300px"):Assets.getWindowWidth()<1488?(g.style.width=(Assets.getWindowWidth()-40)/4*3-80+"px",g.style.marginTop="0px"):(g.style.marginTop="0px",g.style.width="1100px"),Assets.getWindowWidth()<1024||Assets.getWindowHeight()<860?(g.style.fontSize="23px",g.style.lineHeight="28px",m._title.style.fontSize="23px",m._title.style.lineHeight="28px",y._title.style.fontSize="23px",y._title.style.lineHeight="28px"):(g.style.fontSize="33px",g.style.lineHeight="39px",m._title.style.fontSize="33px",m._title.style.lineHeight="39px",y._title.style.fontSize="33px",y._title.style.lineHeight="39px"),Assets.getWindowWidth()<860?(g.style.position="relative",g.style.left="20px"):(g.style.position="absolute",g.style.left=(Assets.getWindowWidth()-40)/4+20+"px"),Assets.getWindowWidth()<580?(m.style.width=Assets.getWindowWidth()-80+"px",m.style.display="block",m.style.marginLeft="20px"):Assets.getWindowWidth()<860?(m.style.width=(Assets.getWindowWidth()-40)/2-20+"px",m.style.display="block",m.style.marginLeft=(Assets.getWindowWidth()-40)/2-20+"px"):(m.style.marginLeft=p+20+"px",m.style.width=m.style.width=p-20+"px",m.style.display="inline-block"),Assets.getWindowWidth()<860?_.style.maxWidth="180px":_.style.maxWidth="none",Assets.getWindowWidth()<580?_.style.display="none":_.style.display="block",Assets.getWindowWidth()<580?y.style.width=Assets.getWindowWidth()-80+"px":Assets.getWindowWidth()<860?y.style.width=(Assets.getWindowWidth()-40)/2-20+"px":y.style.width=p-20+"px",1==T&&(Assets.getWindowWidth()<860?(_.style.width=(Assets.getWindowWidth()-40)/2-100+"px",_.style.height="auto"):Assets.getWindowWidth()<1240?(_.style.width=p-20+"px",_.style.height="auto"):(_.style.width=_._origW/2+"px",_.style.height="auto")),Assets.getWindowWidth()<860?(m.style.marginTop="120px",1==T&&(_.style.marginTop=g.offsetTop+g.offsetHeight+m.offsetHeight-_.clientHeight+80+"px")):Assets.getWindowWidth()>1920?(m.style.marginTop=d.offsetHeight-m.offsetHeight-170+"px",1==T&&(_.style.marginTop=d.offsetHeight-_.offsetHeight-170+"px")):(m.style.marginTop=d.offsetHeight-m.offsetHeight-120+"px",1==T&&(_.style.marginTop=d.offsetHeight-_.offsetHeight-120+"px")),Assets.getWindowHeight()<670?(m.style.marginTop=670-m.offsetHeight-120+"px",m.style.marginBottom="80px"):m.style.marginBottom="0px",Assets.getWindowWidth()<860?(y.style.display="block",y.style.marginTop="80px",y.style.height="auto",y.style.paddingBottom="65px",y.style.marginBottom="65px"):(y.style.display="inline-block",y.style.marginTop=m.offsetTop+"px",y.style.height=m.offsetHeight+"px",y.style.paddingBottom="0px",y.style.marginBottom="0px"),Assets.getWindowWidth()<640?(d.style.paddingBottom="50px",b.style.left="auto",b.style.right="20px"):(b.style.left=(Assets.getWindowWidth()-40)/4+20+"px",b.style.right="auto",d.style.paddingBottom="0px"),d.offsetHeight>Assets.getWindowHeight()-20?d.style.width=Assets.getWindowWidth()-40+"px":d.style.width=window.innerWidth-40+"px",w.style.width=window.innerWidth+"px"}function u(){w.parentNode.removeChild(w)}var d,p,f,g,m,y,_,v,b,w=document.createElement("div"),x=t.getXML(),T=!1,A=[];return w.templateIn=function(){SmartObject(w),w.style.position="relative",w._allowOverflowReset=!0,_saveOverflow=Assets.LAYER_MID.style.overflow,w.style.background="#bac2bb",w.style.width=Assets.getWindowWidth()+"px",w.style.height="auto",w.style.minHeight="100%",w.style.paddingBottom="20px",w.style.backgroundColor="rgb(186,194,187)";var t=document.createElement("div");t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="#525453",t.style.zIndex=1e3,w.appendChild(t),d=new SmartObject,d.style.position="relative",d.style.overflow="hidden",d.style.backgroundColor="rgb(175,182,176)",d.style.height="100%",d.style.minHeight=Assets.getWindowHeight()-20+"px",d.style.borderBottom="20px solid rgb(186,194,187)",d.style.left="20px",d.style.top="20px",setTimeout(function(){d.offsetHeight>Assets.getWindowHeight()-20?d.style.width=Assets.getWindowWidth()-40+"px":d.style.width=window.innerWidth-40+"px"},25),p=(Assets.getWindowWidth()-40)/4,w.appendChild(d),i(),n(),r(),o(),l(),c(),h(),window.addEventListener("resize",h),Assets.LAYER_MID.appendChild(w),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(x.getAttribute("data-path"))},w.setOverflows=function(){Assets.LAYER_MID.style.overflow="hidden",document.body.style.overflow="hidden"},w.templateOut=function(){var t=0,e=A.length;for(t;t<e;t++)A[t].removeEventListener("mouseover",s),A[t].removeEventListener("mouseout",a);g.parentNode.removeChild(g),g=null,_.onload=null,_.src=null,_.parentNode.removeChild(_),_=null,d.removeChild(f),f.onclick=null,window.removeEventListener("resize",h),Assets.TRANSITIONS_MANAGER.go(w,x,u)},w}function PeopleTemplate(t){function e(){var t=Assets.getWindowWidth()/A,e=0,i="#aeb6af",n="#aeb6af";x=b.querySelector('[data-id="employee-list"]').children.length;for(var r=0;r<x;r++){var o=new SmartObject;o.style.width=t+"px",o.style.height=t*T+"px",o.style.overflow="hidden",o._x=t*(r%A),r%A==0&&e++;var s;r%A==0?"#aeb6af"==i?(s="#bac1ba",i="#bac1ba"):(s="#aeb6af",i="#aeb6af"):s="#aeb6af"==n?"#bac1ba":"#aeb6af",o.style.backgroundColor=s,n=s,o._y=t*T*(e-1),w.push(o),v.appendChild(o)}v.style.height=t*T*e+"px"}function i(){g=new SmartObject;var t=Assets.getWindowWidth()/A;g.style.backgroundColor="#AFB6B0",g.style.width=2*t+"px",g.style.height=t*T+"px",g.style.overflow="hidden",g.style.border="20px solid #BAC3BB";var e=new SmartObject;e.style.position="absolute",e.innerHTML="Looking for more",e.style.fontSize="14px",e.style.top="20px",e.style.color="#fff";var i=new SmartObject;i.style.width="45px",i.style.height="1px",i.style.position="absolute",i.style.top="11px",i.style.right="-44px",i.style.backgroundColor="#fff",e.appendChild(i);var n=SmartObject(document.createElement("a"));n.style.position="absolute",n.innerHTML="<span style='color:#fff;'>It's a wrap<br /></span><span style='color:#4E4F51;'>Want to create<br />great things<br />with us?<br /></span><span style='color:#fff;'>hello@hellomonday.com</span>",n.style.fontSize="14px",n.style.bottom="20px",n.style.color="#fff",n.style.fontSize="20px",n.style.lineHeight="25px",n.style.cursor="pointer",n.setAttribute("href","mailto:hello@hellomonday.com"),n.className="itsAwrapLink",g.smallHeadline=e,g.copy=n,g.appendChild(e),g.appendChild(n),v.appendChild(g)}function n(){var t=b.querySelector('[data-id="employee-list"]'),e=[],i=0,n=t.children.length;for(i;i<n;i++){var o=t.children[i];e.push(o)}r(e);for(var s=0;s<e.length;s++){var a=e[s],l=a.getAttribute("data-name"),c=a.getAttribute("data-email"),h=a.getAttribute("data-dir"),u=a.getAttribute("data-city"),d={};d.name=l,d.email=c,d.dir=h,d.city=u,d.baby={},d.teen={},d.adult={},d.baby.image=null,d.baby.path=h+"/"+l+"-baby.jpg",d.baby.loaded=!1,d.teen.image=null,d.teen.path=h+"/"+l+"-teen.jpg",d.teen.loaded=!1,d.adult.image=null,d.adult.path=h+"/"+l+"-adult.jpg",d.adult.loaded=!1,C[h]=d}}function r(t){var e=t.length;if(0==e)return!1;for(;--e;){var i=Math.floor(Math.random()*(e+1)),n=t[e],r=t[i];t[e]=r,t[i]=n}}function o(){var t=Math.floor(Math.random()*w.length),e=w[t];if(e.personDir){var i=e.personDir,n=C[i],r=n[e.activeImage].image,o=["baby","teen","adult"],s=o.indexOf(e.activeImage);s>-1&&o.splice(s,1);var a=Math.floor(Math.random()*o.length);e.activeImage=o[a];var l=n[e.activeImage].image;TweenMax.to(r,.4,{css:{opacity:0},ease:Linear.easeNone}),TweenMax.to(l,.4,{css:{opacity:1},ease:Linear.easeNone})}}function s(){var t=Assets.getWindowWidth()/A,e=t*T,i=["baby","teen","adult"],n=0,r="";for(var o in C){if(n==E){r=o;break}n++}var l=0,p=function(t){this.parentNode&&(this._y=(this.parentNode.clientHeight-this.clientHeight)/2),!0===this.initialImage&&(TweenMax.to(this,.3,{css:{opacity:1},ease:Linear.easeNone}),(BrowserDetect.MOBILE||BrowserDetect.TABLET)&&TweenMax.to(this.icon,.3,{css:{opacity:1},ease:Linear.easeNone})),3==++l&&++E<w.length&&s()},f=w[E],g=C[r],m=c(g,i[0]),y=c(g,i[1]),_=c(g,i[2]);m.onload=p,y.onload=p,_.onload=p,m.src=Assets.CDN_URL_SMALL+"assets/images/people/"+g.baby.path,y.src=Assets.CDN_URL_SMALL+"assets/images/people/"+g.teen.path,_.src=Assets.CDN_URL_SMALL+"assets/images/people/"+g.adult.path,g[i[0]].image=m,g[i[1]].image=y,g[i[2]].image=_;var v=h(g,t,e);f.hoverBlock=v;var b=Math.floor(3*Math.random());if(g[i[b]].image.initialImage=!0,f.personDir=g.dir,f.activeImage=i[b],f.appendChild(m),f.appendChild(y),f.appendChild(_),f.appendChild(v),BrowserDetect.MOBILE||BrowserDetect.TABLET){var x=new SmartObject;x.style.marginTop="20px",x.style.display="block",x.style.width="35px",x.style.height="35px",x.style.borderRadius="100%",x.style.cursor="pointer",x.style.background="#fff",x.style.left="40px",x.style.bottom="40px",x._opacity=0;var S=AssetLoader.getAsset("assets/images/ui/dots@2.png");x.appendChild(S),f.appendChild(x),f.icon=x,f.iconInSite=S,x.hoverBlock=v,x.iconInSite=S,g[i[b]].image.icon=x,f.addEventListener("click",a)}f.addEventListener(MouseEvent.MOUSE_OVER,u),f.addEventListener(MouseEvent.MOUSE_OUT,d)}function a(t){y!=this&&(l(),TweenMax.to(this.hoverBlock,.3,{_opacity:1,ease:Linear.easeNone}),TweenMax.to(this.iconInSite,.5,{delay:.1,rotation:180,ease:Expo.easeOut,overwrite:"all"}),_=setTimeout(l,4e3),y=this)}function l(){y&&(TweenMax.to(y.hoverBlock,.3,{_opacity:0,ease:Linear.easeNone}),TweenMax.to(y.iconInSite,.5,{rotation:0,ease:Expo.easeOut,overwrite:"all"})),_&&(clearTimeout(_),_=null)}function c(t,e){var i=new SmartObject(document.createElement("img"));return i.style.width="100%",i.style.opacity=0,i}function h(t,e,i){var n=new SmartObject;n.style.width=e-40+"px",n.style.height=i-40+"px",n.style.backgroundColor="rgba(175,182,176,.9)",n.style.pointerEvents="none",n.style.top=0,n.style.left=0,n._opacity=0,n._x=20,n._y=20;var r=new SmartObject;r.style.position="relative",r._x=20,r.style.width=e-80+"px",n.textWrap=r;var o=document.createElement("span");o.style.display="block",o.style.textTransform="capitalize",o.style.width="100%",o.style.color="#555658",o.innerHTML=t.name,Assets.getWindowWidth()<700?(o.style.fontSize="18px",o.style.lineHeight="24px"):Assets.getWindowWidth()<900?(o.style.fontSize="19px",o.style.lineHeight="25px"):(o.style.fontSize="25px",o.style.lineHeight="31px"),n.personName=o,r.appendChild(o);var s=document.createElement("span");return s.style.display="inline-block",s.style.fontSize="14px",s.style.color="#fff",s.style.textTransform="capitalize",s.innerHTML=t.city,r.appendChild(s),n.appendChild(r),BrowserDetect.MOBILE||BrowserDetect.TABLET?r._y=i-56-r._getHeight()-50:r._y=i-56-r._getHeight(),n}function u(t){TweenMax.to(this.hoverBlock,.3,{_opacity:1,ease:Linear.easeNone})}function d(t){TweenMax.to(this.hoverBlock,.3,{_opacity:0,ease:Linear.easeNone})}function p(t){A=Assets.getWindowWidth()<700?1:Assets.getWindowWidth()<1400?2:Assets.getWindowWidth()<2100?3:4;for(var e=Math.round(Assets.getWindowWidth()/A),i=Math.round(e*T),n=0,r="#aeb6af",o="#aeb6af",s=0;s<w.length;s++){var a=w[s];if(a.style.width=e+"px",a.style.height=i+"px",a._x=e*(s%A),a.hoverBlock){
a.hoverBlock.style.width=e-40+"px",a.hoverBlock.style.height=i-40+"px";var l=a.hoverBlock.personName;Assets.getWindowWidth()<700?(l.style.fontSize="18px",l.style.lineHeight="24px"):Assets.getWindowWidth()<900?(l.style.fontSize="19px",l.style.lineHeight="25px"):(l.style.fontSize="25px",l.style.lineHeight="31px"),BrowserDetect.MOBILE||BrowserDetect.TABLET?a.hoverBlock.textWrap._y=i-56-a.hoverBlock.textWrap._getHeight()-50:a.hoverBlock.textWrap._y=i-56-a.hoverBlock.textWrap._getHeight()}s%A==0&&n++;var c;s%A==0?"#aeb6af"==r?(c="#bac1ba",r="#bac1ba"):(c="#aeb6af",r="#aeb6af"):c="#aeb6af"==o?"#bac1ba":"#aeb6af",a.style.backgroundColor=c,o=c,a._y=i*(n-1)}g.style.width=2*e+"px",g.style.height=i+"px",g._x=w[w.length-1]._x+e,g._y=w[w.length-1]._y,g.smallHeadline._x=e,g.copy._x=e,g.style.display=4==A?"block":"none",Assets.getWindowWidth()<2100&&Assets.getWindowWidth(),v.style.height=i*n+"px"}function f(){window.removeEventListener("resize",p),v.parentNode.removeChild(v)}var g,m,y,_,v=document.createElement("div"),b=t.getXML(),w=[],x=0,T=334/496,A=3,C={},E=0;return v.templateIn=function(){SmartObject(v),v._allowOverflowReset=!0,v.style.position="relative",_saveOverflow=Assets.LAYER_MID.style.overflow,v.style.background="#bac2bb",v.style.overflow="hidden",v.style.width="100%",v.style.height="auto",v.style.minHeight="100%",v.style.paddingBottom="22px",v.style.backgroundColor="rgb(186,194,187)";var t=document.createElement("div");t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="#525453",t.style.zIndex=1e3,v.appendChild(t),e(),i(),n(),s(),m=setInterval(o,1e3),p(),window.addEventListener(Event.RESIZE,p),Assets.LAYER_MID.appendChild(v),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(b.getAttribute("data-path"))},v.setOverflows=function(){Assets.LAYER_MID.style.overflow="hidden",document.body.style.overflow="hidden"},v.templateOut=function(){if(clearInterval(m),m=null,BrowserDetect.MOBILE||BrowserDetect.TABLET){for(var t=0;t<w.length;t++)w[t].removeEventListener("click",a);_&&(clearTimeout(_),_=null)}Assets.TRANSITIONS_MANAGER.go(v,b,f)},v}function AwardsTemplate(t){function e(){f=new HMLogo,d.appendChild(f)}function i(){g=document.createElement("span"),g.style.display="block",g.style.position="absolute",g.style.fontSize="33px",g.style.lineHeight="39px",g.style.color="#555658",g.innerHTML=b.querySelector(".intro-text").innerHTML,g.style.top="32px",d.appendChild(g)}function n(){m=document.createElement("span"),m.style.display="block",m.innerHTML=b.querySelector(".page-title").innerHTML,m.style.marginTop="480px",m.style.fontSize="33px",m.style.lineHeight="39px",m.style.color="#555658",m.style.marginLeft=p+20+"px",m.style.marginBottom="35px";var t=m.querySelector(".white");t.style.display="block",t.style.color="#fff",d.appendChild(m)}function r(){for(var t=b.querySelectorAll(".year"),e=0;e<t.length;e++){var i=document.createElement("div");i.style.width=Assets.getWindowWidth()-80+"px",i.style.position="relative",i.style.marginLeft="20px",e==t.length-1?i.style.marginBottom="140px":i.style.marginBottom="40px";var n=document.createElement("span");n.style.fontSize="14px",n.style.display="inline-block",n.style.color="#fff",n.style.width=p+"px",n.style.paddingRight="20px",n.innerHTML=Assets.DATA_STATIC.querySelector("#year").innerHTML,i.appendChild(n),i._yearTag=n;var r=(Assets.getWindowWidth()-40-p-40)/4,s=document.createElement("span");s.style.fontSize="14px",s.style.display="inline-block",s.style.color="#fff",s.style.width=r-50+"px",s.style.paddingRight="20px",s.innerHTML=Assets.DATA_STATIC.querySelector("#client").innerHTML,i.appendChild(s),i._clientTag=s;var a=document.createElement("span");a.style.fontSize="14px",a.style.display="inline-block",a.style.color="#fff",a.style.width=r-20+40+"px",a.style.paddingRight="20px",a.innerHTML=Assets.DATA_STATIC.querySelector("#project").innerHTML,i.appendChild(a),i._projectTag=a;var l=document.createElement("span");l.style.fontSize="14px",l.style.display="inline-block",l.style.color="#fff",l.style.width=r-20+80+"px",l.style.paddingRight="20px",l.innerHTML=Assets.DATA_STATIC.querySelector("#award").innerHTML,i.appendChild(l),i._awardTag=l;var c=document.createElement("span");c.style.fontSize="14px",c.style.display="inline-block",c.style.color="#fff",c.style.width=r-20-50+"px",c.innerHTML=Assets.DATA_STATIC.querySelector("#contest").innerHTML,i.appendChild(c),i._contestTag=c;var h=document.createElement("div");h.style.width="100%",h.style.marginTop="7px",h.style.marginBottom="7px",h.style.height="1px",h.style.backgroundColor="#9ea4a1",i.appendChild(h);var u=document.createElement("span");u.style.position="absolute",u.innerHTML=t[e].getAttribute("data-year"),u.style.color="#555658",u.style.fontSize="60px",u.style.left=0,u.style.top="27px",i._yearTitle=u,i.appendChild(u);var f=new o(t[e],i);i._awardList=f,i.appendChild(f),w.push(i),d.appendChild(i)}}function o(t,e){var i=document.createElement("div");i.style.position="relative",i.style.width=Assets.getWindowWidth()-40-p-40+"px";var n=(Assets.getWindowWidth()-40-p-40)/4,r=t.querySelectorAll(".award-wrap");e._awardArr=[];for(var o=0;o<r.length;o++){var c=new SmartObject;c.style.position="relative",c.style.width="100%",c.style.height="auto",c.style.marginLeft=p+"px",c.style.borderBottom="1px solid #9ea4a1";var h=document.createElement("span");h.style.display="inline-block",h.style.verticalAlign="top",h.style.color="#5e6061",h.style.fontSize="14px",h.style.lineHeight="18px",h.style.marginTop="4px",h.style.marginBottom="3px",h.style.fontFamily="TheinhardtRegular",h.innerHTML=r[o].querySelector(".client").innerHTML,h.style.width=n-50+"px",h.style.paddingRight="20px",c.appendChild(h),c._client=h;var u=document.createElement("span");u.style.display="inline-block",u.style.verticalAlign="top",u.style.color="#5e6061",u.style.fontSize="14px",u.style.lineHeight="18px",u.style.marginTop="4px",u.style.marginBottom="3px",u.style.fontFamily="TheinhardtRegular",u.innerHTML=r[o].querySelector(".project").innerHTML;var d=r[o].querySelector(".project").getAttribute("data-project-link");d&&(c._projectLink=d,c.style.cursor="pointer",c.addEventListener("click",s),BrowserDetect.MOBILE||BrowserDetect.TABLET||(c.addEventListener("mouseover",a),c.addEventListener("mouseout",l))),u.style.width=n-20+40+"px",u.style.paddingRight="20px",c.appendChild(u),c._project=u;var f=document.createElement("span");f.style.display="inline-block",f.style.verticalAlign="top",f.style.color="#5e6061",f.style.fontSize="14px",f.style.lineHeight="18px",f.style.marginTop="4px",f.style.marginBottom="3px",f.style.fontFamily="TheinhardtRegular",f.innerHTML=r[o].querySelector(".award").innerHTML,f.style.width=n-20+80+"px",f.style.paddingRight="20px",c.appendChild(f),c._award=f;var g=document.createElement("span");g.style.display="inline-block",g.style.verticalAlign="top",g.style.color="#5e6061",g.style.fontSize="14px",g.style.lineHeight="18px",g.style.marginTop="4px",g.style.marginBottom="3px",g.style.fontFamily="TheinhardtRegular",g.innerHTML=r[o].querySelector(".contest").innerHTML,g.style.width=n-50+"px",c.appendChild(g),c._contest=g;var m=r[o].getAttribute("data-highlightImage"),y=r[o].getAttribute("data-highlightText");if(m&&y){h.style.fontFamily="TheinhardtBold",u.style.fontFamily="TheinhardtBold",f.style.fontFamily="TheinhardtBold",g.style.fontFamily="TheinhardtBold",c.style.borderBottom="1px solid #c7ccc7";var _=document.createElement("div");_.style.position="absolute",_.style.width=p+"px",_.style.left=-p+"px",_.style.height="1px",_.style.backgroundColor="#c7ccc7",c.appendChild(_),c._highlightLine=_;var v=document.createElement("img");v.src=Assets.CDN_URL_SMALL+m;var b=r[o].getAttribute("data-xy");b=b.split(","),v._xPos=parseInt(b[0]),v._yPos=parseInt(b[1]),c._highlightImg=v,v.onload=function(){v.style.width=v.clientWidth/2+"px",v.style.height="auto",v.style.top=-v.clientHeight-v._yPos+"px",v.style.left=-p+v.clientWidth/2-v._xPos+"px"},v.style.position="absolute",v.style.zIndex=3,c.appendChild(v);var w=document.createElement("span");w.innerHTML=y,w.style.position="absolute",w.style.fontSize="44px",w.style.lineHeight="45px",w.style.display="block",w.style.zIndex=2,w.style.left=-p+"px",w.style.width=p+"px",setTimeout(function(){w.style.top=10-w.clientHeight+"px"},20),w.style.color="#fff",c.appendChild(w),c._highlightText=w}i.appendChild(c),e._awardArr.push(c)}return i}function s(t){ContentManager.path(this._projectLink)}function a(t){TweenMax.to(this,.2,{_opacity:.6,ease:Linear.easeNone})}function l(t){TweenMax.to(this,.2,{_opacity:1,ease:Linear.easeNone})}function c(){var t=Assets.DATA_STATIC.querySelector("#email").innerHTML;y=document.createElement("a"),y.style.position="absolute",y.href="mailto:"+t,y.innerHTML=t,y.style.textDecoration="none",y.style.fontFamily="TheinhardtRegular",y.style.fontSize="12px",y.style.color="#717573",y.style.left="20px",y.style.bottom="20px",BrowserDetect.DESKTOP&&(y.addEventListener(MouseEvent.MOUSE_OVER,function(t){TweenMax.to(y,.2,{opacity:.5,ease:Linear.easeNone})}),y.addEventListener(MouseEvent.MOUSE_OUT,function(t){TweenMax.to(y,.2,{opacity:1,ease:Linear.easeNone})})),d.appendChild(y),_=document.createElement("span"),_.style.position="absolute",_.innerHTML="&copy; Copyright "+(new Date).getFullYear(),_.style.fontFamily="TheinhardtRegular",_.style.fontSize="12px",_.style.color="#717573",_.style.left="20px",_.style.bottom="20px",d.appendChild(_)}function h(t){p=(Assets.getWindowWidth()-40)/4;window.innerWidth;window.innerHeight<window.innerWidth&&window.innerHeight;window.innerWidth<900||window.innerHeight;f.resize(),d.style.width=Assets.getWindowWidth()-40+"px",d.style.minHeight=Assets.getWindowHeight()-20+"px";for(var e=0;e<w.length;e++)for(var i=0;i<w[e]._awardArr.length;i++){var n=w[e]._awardArr[i];if(Assets.getWindowWidth()<480?(n._client.style.fontSize="12px",n._client.style.lineHeight="14px",n._project.style.fontSize="12px",n._project.style.lineHeight="14px",n._award.style.fontSize="12px",n._award.style.lineHeight="14px",n._contest.style.fontSize="12px",n._contest.style.lineHeight="14px"):(n._client.style.fontSize="14px",n._client.style.lineHeight="18px",n._project.style.fontSize="14px",n._project.style.lineHeight="18px",n._award.style.fontSize="14px",n._award.style.lineHeight="18px",n._contest.style.fontSize="14px",n._contest.style.lineHeight="18px"),1==BrowserDetect.MOBILE&&n._project.innerHTML.indexOf(".com")>-1){var r=n._project.innerHTML.split(".com");n._project.innerHTML=r[0]+"</br>.com"}}if(Assets.getWindowWidth()<860?(g.style.width=Assets.getWindowWidth()-80+"px",g.style.marginTop="300px"):Assets.getWindowWidth()<1488?(g.style.width=(Assets.getWindowWidth()-40)/4*3-80+"px",g.style.marginTop="0px"):(g.style.marginTop="0px",g.style.width="1100px"),Assets.getWindowWidth()<1024||Assets.getWindowHeight()<860?(g.style.fontSize="23px",g.style.lineHeight="28px",m.style.fontSize="23px",m.style.lineHeight="28px"):(g.style.fontSize="33px",g.style.lineHeight="39px",m.style.fontSize="33px",m.style.lineHeight="39px"),Assets.getWindowWidth()<860?m.style.marginTop="120px":m.style.marginTop="480px",Assets.getWindowWidth()<860?(g.style.position="relative",g.style.left="20px"):(g.style.position="absolute",g.style.left=(Assets.getWindowWidth()-40)/4+20+"px"),Assets.getWindowWidth()<640?(d.style.paddingBottom="50px",_.style.left="auto",_.style.right="20px"):(_.style.left=(Assets.getWindowWidth()-40)/4+20+"px",_.style.right="auto",d.style.paddingBottom="0px"),Assets.getWindowWidth()<860){m.style.marginLeft="20px";for(var o=0;o<w.length;o++){w[o].style.width=Assets.getWindowWidth()-80+"px",w[o]._yearTag.style.width="auto",w[o]._yearTag.style.display="block",w[o]._yearTag.style.marginBottom="36px",w[o]._yearTag.style.opacity=0,w[o]._yearTitle.style.fontSize="30px",w[o]._yearTitle.style.top="10px";var s=(Assets.getWindowWidth()-40)/3;w[o]._clientTag.style.width=s-50+"px",w[o]._clientTag.style.display="none",w[o]._projectTag.style.width=s-20+20+"px",w[o]._awardTag.style.width=s-20+20+"px",w[o]._contestTag.style.width=s-20-50+"px",w[o]._awardList.style.width=Assets.getWindowWidth()-40-40+"px";for(var a=0;a<w[o]._awardArr.length;a++){var n=w[o]._awardArr[a];n.style.marginLeft="0px",n._client.style.width=s-50+"px",n._client.style.display="none",n._project.style.width=s-20+20+"px",n._award.style.width=s-20+20+"px",n._contest.style.width=s-20-50+"px",n._highlightLine&&(n._client.style.fontFamily="TheinhardtRegular",n._project.style.fontFamily="TheinhardtRegular",n._award.style.fontFamily="TheinhardtRegular",n._contest.style.fontFamily="TheinhardtRegular",n._highlightLine.style.display="none",n._highlightImg.style.visibility="hidden",n._highlightText.style.visibility="hidden")}}}else if(Assets.getWindowWidth()<1200){m.style.marginLeft="20px";for(var o=0;o<w.length;o++){w[o].style.width=Assets.getWindowWidth()-80+"px",w[o]._yearTag.style.width="auto",w[o]._yearTag.style.display="block",w[o]._yearTag.style.marginBottom="60px",w[o]._yearTag.style.opacity=0,w[o]._yearTitle.style.fontSize="50px",w[o]._yearTitle.style.top="10px";var s=(Assets.getWindowWidth()-40)/4;w[o]._clientTag.style.width=s-50+"px",w[o]._projectTag.style.width=s-20+40+"px",w[o]._awardTag.style.width=s-20+80+"px",w[o]._contestTag.style.width=s-20-50+"px",w[o]._awardList.style.width=Assets.getWindowWidth()-40-40+"px";for(var a=0;a<w[o]._awardArr.length;a++){var n=w[o]._awardArr[a];n.style.marginLeft="0px",n._client.style.width=s-50+"px",n._project.style.width=s-20+40+"px",n._award.style.width=s-20+80+"px",n._contest.style.width=s-20-50+"px",n._highlightLine&&(n._client.style.fontFamily="TheinhardtRegular",n._project.style.fontFamily="TheinhardtRegular",n._award.style.fontFamily="TheinhardtRegular",n._contest.style.fontFamily="TheinhardtRegular",n._highlightLine.style.display="none",n._highlightImg.style.visibility="hidden",n._highlightText.style.visibility="hidden",n._highlightLine.style.width=p+"px",n._highlightLine.style.left=-p+"px")}}}else{m.style.marginLeft=p+20+"px";for(var o=0;o<w.length;o++){w[o].style.width=Assets.getWindowWidth()-80+"px",w[o]._yearTag.style.width=p+"px",w[o]._yearTag.style.display="inline-block",w[o]._yearTag.style.marginBottom="0px",w[o]._yearTag.style.opacity=1,w[o]._yearTitle.style.fontSize="60px",w[o]._yearTitle.style.top="27px";var s=(Assets.getWindowWidth()-40-p-40)/4;w[o]._clientTag.style.width=s-50+"px",w[o]._projectTag.style.width=s-20+40+"px",w[o]._awardTag.style.width=s-20+80+"px",w[o]._contestTag.style.width=s-20-50+"px",w[o]._awardList.style.width=Assets.getWindowWidth()-40-p-40+"px";for(var a=0;a<w[o]._awardArr.length;a++){var n=w[o]._awardArr[a];n.style.marginLeft=p+"px",n._client.style.width=s-50+"px",n._project.style.width=s-20+40+"px",n._award.style.width=s-20+80+"px",n._contest.style.width=s-20-50+"px",n._highlightLine&&(n._client.style.fontFamily="TheinhardtBold",n._project.style.fontFamily="TheinhardtBold",n._award.style.fontFamily="TheinhardtBold",n._contest.style.fontFamily="TheinhardtBold",n._highlightLine.style.display="block",n._highlightImg.style.visibility="visible",n._highlightText.style.visibility="visible",n._highlightLine.style.width=p+"px",n._highlightLine.style.left=-p+"px",n._highlightImg.clientHeight>0&&(n._highlightImg.style.left=-p+n._highlightImg.clientWidth/2-n._highlightImg._xPos+"px"),n._highlightText.clientHeight>0&&(n._highlightText.style.top=10-n._highlightText.clientHeight+"px"),n._highlightText.style.left=-p+"px",n._highlightText.style.width=p+"px")}}}v.style.width=Assets.getWindowWidth()+"px"}function u(){for(var t=0;t<w.length;t++)for(var e=0;e<w[t]._awardArr.length;e++)w[t]._awardArr[e]._projectLink&&(w[t]._awardArr[e].removeEventListener("click",s),BrowserDetect.MOBILE||BrowserDetect.TABLET||(w[t]._awardArr[e].removeEventListener("mouseover",a),w[t]._awardArr[e].removeEventListener("mouseout",l)));v.parentNode.removeChild(v)}var d,p,f,g,m,y,_,v=document.createElement("div"),b=t.getXML(),w=[];return v.templateIn=function(){SmartObject(v),v._allowOverflowReset=!0,v.style.position="relative",_saveOverflow=Assets.LAYER_MID.style.overflow,v.style.background="#bac2bb",v.style.overflow="hidden",v.style.width="100%",v.style.height="auto",v.style.minHeight="100%",v.style.paddingBottom="22px",v.style.backgroundColor="rgb(186,194,187)";var t=document.createElement("div");t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="#525453",t.style.zIndex=1e3,v.appendChild(t),d=document.createElement("div"),d.style.position="relative",d.style.overflow="hidden",d.style.backgroundColor="rgb(175,182,176)",d.style.height="100%",d.style.minHeight=Assets.getWindowHeight()-20+"px",d.style.borderBottom="20px solid rgb(186,194,187)",d.style.left="20px",d.style.top="20px",p=(Assets.getWindowWidth()-40)/4,v.appendChild(d),e(),i(),n(),r(),c(),h(),window.addEventListener("resize",h),Assets.LAYER_MID.appendChild(v),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(b.getAttribute("data-path"))},v.setOverflows=function(){Assets.LAYER_MID.style.overflow="hidden",document.body.style.overflow="hidden"},v.templateOut=function(){window.removeEventListener("resize",h),Assets.TRANSITIONS_MANAGER.go(v,b,u)},v}function CultureTemplate(t){function e(){for(var t=T.querySelector(".instagram-list"),e=0;e<t.children.length;e++){var i=t.children[e].innerHTML;P.push(i)}}function i(){for(var t=Assets.getWindowWidth()/S,e=0,i="#aeb6af",n="#aeb6af",r=0;r<C;r++){var o=new SmartObject;o.style.width=t+"px",o.style.height=t*E+"px",o._x=t*(r%S),r%S==0&&e++;var s;r%S==0?"#aeb6af"==i?(s="#bac1ba",i="#bac1ba"):(s="#aeb6af",i="#aeb6af"):s="#aeb6af"==n?"#bac1ba":"#aeb6af",o.style.backgroundColor=s,n=s,o._y=t*E*(e-1),A.push(o),x.appendChild(o)}x.style.height=t*E*e+"px"}function n(){if(L!=A.length)if(L%R==0&&0!==L&&_[M]){var t=M,e=_[t].text,i=_[t].user.screen_name;i=String(i);var o=_[t].created_at,s=o.split(" ");o=s[1]+" "+s[2]+", "+s[5];var a=A[L].offsetWidth,l=A[L].offsetHeight,u=new c(A[L],e,i,o,a,l);A[L]._tweet=u,A[L].style.backgroundColor="#bac1ba",A[L].appendChild(u),setTimeout(function(){TweenMax.to(u,.3,{_opacity:1,ease:Linear.easeNone,delay:.2}),M++,L++,n()},100)}else if(y&&y[O]){for(var t=O,d=y[t].caption.text,i=y[t].user.username,p=!1,f=0;f<P.length;f++)P[f]==i&&(p=!0);if(0==p)return O++,void n();var g,m,v=new Date,b=v.setTime(1e3*y[t].created_time),w=new Date,x=h(w,b);if("video"==y[t].type){var T=navigator.userAgent.toLowerCase(),C=T.indexOf("android")>-1,E=!1,S=document.createElement("video");S.canPlayType&&S.canPlayType("video/mp4").replace(/no/,"")&&(E=!0),"Firefox"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=34?(g=!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE?y[t].images.standard_resolution:y[t].images.low_resolution,m="image"):1==C?(g=!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE?y[t].images.standard_resolution:y[t].images.low_resolution,m="image"):0==E?(g=!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE?y[t].images.standard_resolution:y[t].images.low_resolution,m="image"):(g=y[t].videos.low_resolution,g._image=y[t].images.standard_resolution,m="video")}else g=!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE?y[t].images.standard_resolution:y[t].images.low_resolution,m="image";var a=A[L].offsetWidth,l=A[L].offsetHeight,k=new r(A[L],d,i,x,g,m,a,l);A[L]._insta=k,A[L].appendChild(k),k._loadImg.onload=function(){TweenMax.to(k,.3,{_opacity:1,ease:Linear.easeNone,delay:.2}),L++,O++,n()}}else if(_[M]){var t=M,e=_[t].text,i=_[t].user.screen_name;i=String(i);var o=_[t].created_at,s=o.split(" ");o=s[1]+" "+s[2]+", "+s[5];var a=A[L].offsetWidth,l=A[L].offsetHeight,u=new c(A[L],e,i,o,a,l);A[L]._tweet=u,A[L].style.backgroundColor="#bac1ba",A[L].appendChild(u),setTimeout(function(){TweenMax.to(u,.3,{_opacity:1,ease:Linear.easeNone,delay:.2}),M++,L++,n()},100)}}function r(t,e,i,n,r,s,c,h){var u=new SmartObject;u._opacity=0,u.style.width="100%",u.style.height="100%",u.style.pointerEvents="all";var d;if("video"==s){var p=document.createElement("video");p.src=r.url,p.loop=!0,p.muted=!0,p.style.width="100%",p.style.height="auto",p.style.marginTop=-h/4+"px",u._vid=p,d=r._image.url,u.style.backgroundImage="url("+d+")",u.style.backgroundSize="cover",u.style.backgroundRepeat="no-repeat",u.style.backgroundPosition="center center",u.style.overflow="hidden",p.oncanplay=function(){this.play()},u.appendChild(p)}else d=r.url,u.style.backgroundImage="url("+d+")",u.style.backgroundSize="cover",u.style.backgroundRepeat="no-repeat",u.style.backgroundPosition="center center";var f=new SmartObject;f.style.width=c-40+"px",f.style.height=h-40+"px",f.style.backgroundColor="rgba(175,182,176,.9)",f.style.pointerEvents="none",f.style.top=0,f.style.left=0,f._opacity=0,f._x=20,f._y=20;var g=new SmartObject;g.style.position="relative",g._x=20,g.style.width=c-80+"px",f._textWrap=g;var m=document.createElement("span");if(m.style.display="block",m.style.width="100%",1==BrowserDetect.MOBILE?(m.style.fontSize="18px",m.style.lineHeight="20px"):Assets.getWindowWidth()<480?(m.style.fontSize="18px",m.style.lineHeight="20px"):Assets.getWindowWidth()<820&&Assets.getWindowWidth()>700?(m.style.fontSize="20px",m.style.lineHeight="22px"):(m.style.fontSize="25px",m.style.lineHeight="27px"),m.style.marginBottom="6px",m.style.color="#555658",e.indexOf("#")>-1||e.indexOf("@")>-1)for(var y=e.split(" "),_=0;_<y.length;_++)if(y[_].indexOf("#")>-1){var v=document.createElement("span");v.style.color="#fff",v.innerHTML=y[_]+" ",m.appendChild(v)}else if(y[_].indexOf("@")>-1){var b=document.createElement("span");b.style.color="#fff",b.innerHTML=y[_]+" ",m.appendChild(b)}else m.innerHTML+=y[_]+" ";else m.innerHTML=e;f._caption=m,g.appendChild(m);var w=document.createElement("span");w.style.display="inline-block",w.style.fontSize="14px",w.style.color="#fff",w.innerHTML="@"+i,g.appendChild(w);var x=document.createElement("span");x.style.display="inline-block",x.style.fontSize="14px",x.style.color="#fff",x.style.marginLeft="5px",x.innerHTML=n,g.appendChild(x),f.appendChild(g),setTimeout(function(){BrowserDetect.MOBILE||BrowserDetect.TABLET?g._y=h-110-g._getHeight():g._y=h-56-g._getHeight()},20),u.appendChild(f),u._hovBlock=f;var T=document.createElement("img");if(T.src=d,u._loadImg=T,!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE)u.addEventListener("mouseover",a),u.addEventListener("mouseout",l);else{var A=new SmartObject;A.style.marginTop="20px",A.style.display="block",A.style.width="35px",A.style.height="35px",A.style.borderRadius="100%",A.style.cursor="pointer",A.style.background="#fff",A.style.left="40px",A.style.bottom="40px";var C=AssetLoader.getAsset("assets/images/ui/dots@2.png");A.appendChild(C),u.appendChild(A),u.icon=A,u.iconInSite=C,u.hoverBlock=f,u.iconInSite=C,u.icon=A,u.addEventListener("click",o)}return u}function o(t){b!=this&&(s(),TweenMax.to(this.hoverBlock,.3,{_opacity:1,ease:Linear.easeNone}),TweenMax.to(this.iconInSite,.5,{delay:.1,rotation:180,ease:Expo.easeOut,overwrite:"all"}),w=setTimeout(s,4e3),b=this)}function s(){b&&(TweenMax.to(b.hoverBlock,.3,{_opacity:0,ease:Linear.easeNone}),TweenMax.to(b.iconInSite,.5,{rotation:0,ease:Expo.easeOut,overwrite:"all"})),w&&(clearTimeout(w),w=null)}function a(t){v&&TweenMax.to(v,.3,{_opacity:0,ease:Linear.easeNone});var e=this._hovBlock;TweenMax.to(e,.3,{_opacity:1,ease:Linear.easeNone}),v=this._hovBlock}function l(t){var e=this._hovBlock;TweenMax.to(e,.3,{_opacity:0,ease:Linear.easeNone}),v=null}function c(t,e,i,n,r,o){var s=new SmartObject;s.style.width=r-40+"px",s.style.height=o-40+"px",s.style.backgroundColor="#afb6b0",s._x=20,s._y=20,s._opacity=0;var a=new SmartObject;a.style.position="relative",a._x=20,a.style.width=r-80+"px",s._textWrap=a;var l=document.createElement("span");if(l.style.display="block",l.style.width="100%",Assets.getWindowWidth()<480?(l.style.fontSize="18px",l.style.lineHeight="20px"):Assets.getWindowWidth()<820&&Assets.getWindowWidth()>700?(l.style.fontSize="20px",l.style.lineHeight="22px"):(l.style.fontSize="25px",l.style.lineHeight="27px"),l.style.marginBottom="6px",l.style.color="#ffffff",e.indexOf("https://")>-1||e.indexOf("http://")>-1||e.indexOf("@")>-1)for(var c=e.split(" "),h=0;h<c.length;h++)if(c[h].indexOf("https://")>-1){var u=document.createElement("a");u.style.textDecoration="none",u.style.color="#555658",u.setAttribute("href",c[h]),u.setAttribute("target","_blank"),u.innerHTML=c[h]+" ",u.className="cultureLink",l.appendChild(u)}else if(c[h].indexOf("http://")>-1){var u=document.createElement("a");u.style.textDecoration="none",u.style.color="#555658",u.setAttribute("href",c[h]),u.setAttribute("target","_blank"),u.innerHTML=c[h]+" ",u.className="cultureLink",l.appendChild(u)}else if(c[h].indexOf("@")>-1){var d=document.createElement("span");d.style.color="#555658",d.innerHTML=c[h]+" ",l.appendChild(d)}else l.innerHTML+=c[h]+" ";else l.innerHTML=e;s._text=l,a.appendChild(l);var p=document.createElement("span");p.style.display="inline-block",p.style.fontSize="14px",p.style.color="#fff",p.innerHTML="@"+i,a.appendChild(p);var f=document.createElement("span");return f.style.display="inline-block",f.style.fontSize="14px",f.style.color="#fff",f.style.marginLeft="5px",f.innerHTML=n,a.appendChild(f),s.appendChild(a),setTimeout(function(){a._y=o-56-a._getHeight()},20),s}function h(t,e){var i=t-e;return i<6e4?1==Math.round(i/1e3)?Math.round(i/1e3)+" second ago":Math.round(i/1e3)+" seconds ago":i<36e5?1==Math.round(i/6e4)?Math.round(i/6e4)+" minute ago":Math.round(i/6e4)+" minutes ago":i<864e5?1==Math.round(i/36e5)?Math.round(i/36e5)+" hour ago":Math.round(i/36e5)+" hours ago":i<2592e6?1==Math.round(i/864e5)?Math.round(i/864e5)+" day ago":Math.round(i/864e5)+" days ago":i<31536e6?1==Math.round(i/2592e6)?Math.round(i/2592e6)+" month ago":Math.round(i/2592e6)+" months ago":1==Math.round(i/31536e6)?Math.round(i/31536e6)+" year ago":Math.round(i/31536e6)+" years ago"}function u(){AJAX.load(Assets.SITE_BASE+"/social/getinstagrams.php",d,"GET")}function d(t){y=JSON.parse(t),y=y.data,k=!0,1==D&&0==I&&(I=!0,n())}function p(){AJAX.load(Assets.SITE_BASE+"/social/gettweets.php",f,"GET")}function f(t){_=JSON.parse(t),D=!0,1==k&&0==I&&(I=!0,n())}function g(t){Assets.getWindowHeight(),S=Assets.getWindowWidth()<700?1:Assets.getWindowWidth()<1400?2:Assets.getWindowWidth()<2100?3:4;var e=Assets.getWindowWidth()/S;e=Math.round(e);var i=e*E;i=Math.round(i);for(var n=0,r="#aeb6af",o="#aeb6af",s=0;s<A.length;s++){var a=A[s];a.style.width=e+"px",a.style.height=i+"px",a._x=e*(s%S),s%S==0&&n++;var l;if(s%S==0?"#aeb6af"==r?(l="#bac1ba",r="#bac1ba"):(l="#aeb6af",r="#aeb6af"):l="#aeb6af"==o?"#bac1ba":"#aeb6af",a.style.backgroundColor=l,o=l,a._y=i*(n-1),A[s]._insta){var c=A[s]._insta,h=c._hovBlock;1==BrowserDetect.MOBILE?(h._caption.style.fontSize="18px",h._caption.style.lineHeight="20px"):Assets.getWindowWidth()<480?(h._caption.style.fontSize="18px",h._caption.style.lineHeight="20px"):Assets.getWindowWidth()<820&&Assets.getWindowWidth()>700?(h._caption.style.fontSize="20px",h._caption.style.lineHeight="22px"):(h._caption.style.fontSize="25px",h._caption.style.lineHeight="27px"),h.style.width=A[s].offsetWidth-40+"px",h.style.height=A[s].offsetHeight-40+"px",h._textWrap.style.width=A[s].offsetWidth-80+"px",h._textWrap._getHeight()>0&&(BrowserDetect.MOBILE||BrowserDetect.TABLET?h._textWrap._y=A[s].offsetHeight-110-h._textWrap._getHeight():h._textWrap._y=A[s].offsetHeight-56-h._textWrap._getHeight()),c._vid&&(c._vid.style.marginTop=-A[s].offsetHeight/4+"px")}else if(A[s]._tweet){var u=A[s]._tweet;Assets.getWindowWidth()<480?(u._text.style.fontSize="18px",u._text.style.lineHeight="20px"):Assets.getWindowWidth()<820&&Assets.getWindowWidth()>700?(u._text.style.fontSize="20px",u._text.style.lineHeight="22px"):(u._text.style.fontSize="25px",u._text.style.lineHeight="27px"),u.style.width=A[s].offsetWidth-40+"px",u.style.height=A[s].offsetHeight-40+"px",u._textWrap.style.width=A[s].offsetWidth-80+"px",u._textWrap._getHeight()>0&&(u._textWrap._y=A[s].offsetHeight-56-u._textWrap._getHeight())}}Assets.getWindowWidth()<2100&&Assets.getWindowWidth()>1400?(A[A.length-1].style.display="none",n-=1):A[A.length-1].style.display="block",x.style.height=i*n+"px"}function m(){window.removeEventListener("resize",g),x.parentNode.removeChild(x)}var y,_,v,b,w,x=document.createElement("div"),T=t.getXML(),A=[],C=36,E=334/496,S=3,O=0,M=0,L=0,k=!1,D=!1,I=!1,R=5,P=[];return x.templateIn=function(){SmartObject(x),x._allowOverflowReset=!0,x.style.position="relative",_saveOverflow=Assets.LAYER_MID.style.overflow,x.style.background="#bac2bb",x.style.overflow="hidden",x.style.width="100%",x.style.height="auto",x.style.minHeight="100%",x.style.paddingBottom="22px",x.style.backgroundColor="rgb(186,194,187)";var t=document.createElement("div");t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="#525453",t.style.zIndex=1e3,x.appendChild(t),e(),i(),p(),u(),g(),window.addEventListener("resize",g),Assets.LAYER_MID.appendChild(x),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(T.getAttribute("data-path"))},x.setOverflows=function(){Assets.LAYER_MID.style.overflow="hidden",document.body.style.overflow="hidden"},x.templateOut=function(){for(var t=0;t<A.length;t++)A[t]._insta&&(!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE?(A[t].removeEventListener("mouseover",a),A[t].removeEventListener("mouseout",l)):A[t].removeEventListener("click",a));Assets.TRANSITIONS_MANAGER.go(x,T,m)},x}function JournalTemplate(t){function e(t){}function i(){window.removeEventListener("resize",e),n.parentNode.removeChild(n)}var n=document.createElement("div"),r=t.getXML();return n.templateIn=function(){SmartObject(n),n._allowOverflowReset=!0,n.style.position="relative",_saveOverflow=Assets.LAYER_MID.style.overflow,n.style.background="#bac2bb",n.style.overflow="hidden",n.style.width="100%",n.style.height="auto",n.style.minHeight="100%",n.style.paddingBottom="22px",n.style.backgroundColor="rgb(186,194,187)",e(),window.addEventListener("resize",e),Assets.LAYER_MID.appendChild(n),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(r.getAttribute("data-path"))},n.setOverflows=function(){Assets.LAYER_MID.style.overflow="hidden",document.body.style.overflow="hidden"},n.templateOut=function(){Assets.TRANSITIONS_MANAGER.go(n,r,i)},n}function ProjectsTemplate(t){function e(){var t,e,n,r,o,s,a,l=[],c=[],h=[],u=m.querySelectorAll("[data-type=dimension]"),d=0,p=u.length;for(d;d<p;d++){for(t=u[d],e=[],n={path:t.getAttribute("data-path")||"",headline:t.querySelector("[data-type=headline]").innerHTML,subHeadline:t.querySelector("[data-type=subHeadline]").innerHTML,subHeadlineColor:t.getAttribute("data-subHeadlineColor")||"",overlayColor:t.getAttribute("data-overlayColor")||"",bgColor:t.getAttribute("data-bgColor")||""},r=t.getAttribute("data-images").split(", "),o=0,s=r.length,o;o<s;o++)a=r[o],e.push(a),l.push(a);c.push(e),h.push(n)}i(l,c,h),l=null,c=null,h=null}function i(t,e,i){c=new FauxParallax({nrOfColumns:2,keepResizeRatio:!0,resizeLayersToFillCell:!0,resizeWithBreakPoints:!0,showOverlays:!0,animateRefreshes:!1,assets:t,cellData:e,cellAttributes:i}),c._onBuildCallback=n,c._onRefreshCellsCallback=r,c.build()}function n(){var t=c.getAllCells(),e=0,i=t.length;for(e;e<i;e++){var n=SmartObject(t[e]);(n._container||n._href)&&(n.style.cursor="pointer"),n.style.webkitTransform="",g.appendChild(n)}r(),o(),f.killPreloader()}function r(){if(u=window.innerWidth/640,window.innerHeight<window.innerWidth&&(u=window.innerHeight/640),!c._buildFinished)return!1;var t=c.getAllCells(),e=t[0],i=Math.floor(e._width),n=Math.floor(e._height),r=0,o=t.length;h={x:0,y:0,columns:0,rows:0};var s=["#bac1ba","#aeb6af"];for(r;r<o;r++){var a=t[r];if(!a._isHidden&&(a._orgX=h.x*i,a._orgY=h.y*n,a._column=h.x+1,a._row=h.y+1,h.x+=1,h.columns=h.x,h.rows=h.y+1,r%c._nrOfColumns==c._nrOfColumns-1&&(h.x=0,h.y+=1),a._container)){var l=s[0],g=s[1],m=r%2==0?l:g
;if(r>0&&0===a._orgX&&3!==c._nrOfColumns&&1!==c._nrOfColumns){var _=t[r-1]._bgColor;s=[_,"#bac1ba"===_?"#aeb6af":"#bac1ba"],a.style.background=_}else a.style.background=a._bgColor=a._container._bgColor=m}}r=0;for(r;r<o;r++){var a=t[r];y<window.innerWidth&&(a=t[o-r-1]),void 0!==a._orgX&&TweenMax.set(a,{left:a._orgX,top:a._orgY})}y=window.innerWidth,p=h.rows*n,p=p<window.innerHeight?window.innerHeight:p,f.setDocHeight(),d=p}function o(){f.addEventListener("click",a)}function s(){f.removeEventListener("click",a)}function a(t){if(Assets.MAIN_MENU._isOpen)return!1;t=t||window.event;var e=t.target||t.currentTarget;(BrowserDetect.IE9||BrowserDetect.IE10)&&e._rel&&(e=e._rel),e._attributes&&(Assets.RESET_SCROLL_TO_ZERO=!0,ContentManager.path(e._attributes.path))}function l(){c.kill(),c=null,f.parentNode.removeChild(f),f=null}var c,h,u,d,p,f=new SmartObject,g=new SmartObject,m=t.getXML(),y=(BrowserDetect.TABLET||BrowserDetect.MOBILE,window.innerWidth);return f.templateIn=function(){console.log("ProjectsTemplate templateIn"),f._allowOverflowReset=!0,f.style.position="absolute",f.style.background="#D3D6CD",f.style.width="100%",g.style.position="absolute",g.style.width="100%",g.style.height="100%",g.style.overflow="hidden",f.appendChild(g),requestAnimFrame(e),Assets.LAYER_MID.appendChild(f),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(m.getAttribute("data-path"))},f.buildTemplate=function(){},f.pause=function(){c&&c.checkVisibility(!0)},f.unpause=function(){c&&c.checkVisibility(!1,!0)},f.killPreloader=function(){},f.setOverflows=function(){Assets.LAYER_MID.style.overflow=Assets.mid_overflow,document.body.style.overflow=Assets.body_overflow},f.setDocHeight=function(){f.style.height=p+"px"},f.templateOut=function(){c._onBuildCallback=null,c._onRefreshCellsCallback=null,c.removeEvents(),c.deactivateCells(),s(),Assets.TRANSITIONS_MANAGER.go(f,m,l)},f}function HomeTemplate(t){function e(){C=new StackTransition(null,!0,B,I.children.length),C._onBuildCallback=i,C._onResizeCallback=c,C.setup(),D.appendChild(C)}function i(){A=C.getAllLayers(),A[A.length-1]._isVisible=!0,M={oldLayer:null,newLayer:A[A.length-1]},C.addEvents(),f(),_(),m(),y(),o(),h(),u()}function n(t){var t=t||L;if(!t)return!1;try{t.pause()}catch(t){}TweenLite.to(t,.3,{_opacity:0,onComplete:r,onCompleteParams:[t],ease:Linear.easeNone,overwrite:"all"})}function r(t){var t=t||L;if(!t)return!1;t&&t.parentNode&&(t._stack._cat=null,t.parentNode.removeChild(t),t.unloadAssets(),t=null)}function o(){var t=[],e=[],i=[],n=0,r=I.children.length;for(n;n<r;n++){var o,s=I.children[n],a=[],c=s.querySelector("[data-type=dimension]");if(c){o={alignOnMobile:c.getAttribute("data-alignOnMobile")};var h=c.getAttribute("data-images").split(", "),u=0,d=h.length;for(u;u<d;u++){var p=h[u];a.push(p),t.push(p)}e.push(a),i.push(o)}}l(t,e,i)}function s(){var t=E.getAllCells(),e=0,i=A.length;for(e;e<i;e++){var n=t[e];n.style.position="absolute",A[e].appendChild(n)}k.killPreloader();var r=A[A.length-1]._cat;r&&b(r)}function a(){var t=E.getAllCells(),e=0,i=A.length,n=window.innerWidth<900||window.innerHeight<600;for(e;e<i;e++){var r=t[e],o=window.innerWidth,s=window.innerHeight,a=r._ratio,l=Math.ceil(1.1*o),c=Math.ceil(l*a);c<s&&(c=Math.ceil(1.1*s),l=Math.ceil(c/a));var h,u;h=Math.ceil((o-l)/2),u=Math.ceil((s-c)/2),(n||BrowserDetect.MOBILE||BrowserDetect.TABLET)&&r._mobileAlign&&(h=-(l-o)*r._mobileAlign),r.refresh(l,c,!1),r.style.top=u+"px",r.style.left=h+"px"}}function l(t,e,i){E=new FauxParallax({nrOfColumns:0,perspective:9e3,zoomDepth:145,resizeLayersToFillCell:!0,resizeWithBreakPoints:!1,showOverlays:!1,animateRefreshes:!1,dontRefreshCells:!0,hideCellsOnBuild:!1,addDesktopEvents:B,loadAssetsInReverse:!0,assets:t,cellData:e,cellAttributes:i}),E._onBuildCallback=s,E._onResizeCallback=a,E.build()}function c(t){requestAnimFrame(h)}function h(t){O=window.innerWidth/640,window.innerHeight<window.innerWidth&&(O=window.innerHeight/640),S&&S.resize(t),g()}function u(){k.addEventListener("click",p)}function d(){k.removeEventListener("click",p)}function p(t){t=t||window.event;var e=t.target||t.currentTarget;e!==S._hitArea&&e._rel!==S._hitArea||(-1!==S._path.indexOf("http")?window.open(S._path):ContentManager.path(S._path))}function f(){P.up=new ArrowButton("up",C.changeLayer,null,null,C.transitionManager),P.down=new ArrowButton("down",C.changeLayer,null,null,C.transitionManager),g(),P.up.addEventListener("click",C.clearSlideshowInt),P.down.addEventListener("click",C.clearSlideshowInt),D.appendChild(P.up),D.appendChild(P.down)}function g(){if(P.down&&P.up){window.innerWidth<900||BrowserDetect.MOBILE?P.down._x=P.up._x=window.innerWidth-70:P.down._x=P.up._x=window.innerWidth-90;var t=.7*window.innerHeight;P.up._y=t,P.down._y=t+54}}function m(){var t=R[R.length-1];if(S=new SmartObject,S.style.position="absolute",S.style.zIndex=999,S.style.width="50%",S.style.height="100%",S._color="fade",S._text=BrowserDetect.MOBILE||BrowserDetect.TABLET?"fade":"slide single",S._reverseText=!1,S._path=t.getAttribute("data-path"),C._gui){var e=C._gui.addFolder("Panel");e.open();e.add(S,"_color",["slide","fade"]),e.add(S,"_text",["slide all","slide single","fade"])}var i=new SmartObject;i.style.position="absolute",i.style.left="52%",i.style.bottom="70px",i.style.right=0,i.style.width="auto",i.style.maxWidth="400px",i.style.height="auto",i.style.minHeight="200px",i.style.margin="0px 40px 0px 0px",i.style.display="block",i.style.cursor="pointer",i.style.overflow="visible";var r=document.createElement("span");r.innerHTML=t.querySelector("[data-type=title]").innerHTML,r.style.display="block",r.style.fontSize="14px",r.style.marginBottom="30px",r.style.color="#"+t.getAttribute("data-color");var o=document.createElement("span");o.innerHTML=t.querySelector("[data-type=headline]").innerHTML,o.style.display="block",o.style.fontSize="33px",o.style.lineHeight="36px",o.style.color="#fff",o.style.marginLeft="-2px",o.style.paddingLeft="2px";var s=document.createElement("span");s.innerHTML=t.querySelector("[data-type=subHeadline]").innerHTML,s.style.display="block",s.style.fontSize="33px",s.style.lineHeight="36px",s.style.color="#"+t.getAttribute("data-color");var a=document.createElement("span");a.style.marginTop="20px",a.style.display="block",a.style.width="35px",a.style.height="35px",a.style.borderRadius="100%",a.style.cursor="pointer",a.style.background="#fff";var l=AssetLoader.getAsset("assets/images/ui/dots@2.png");l.width=35,l.height=35;var c=AssetLoader.getAsset("assets/images/ui/dots-white@2.png");c.style.opacity=0;var h=new OffsiteButton;a.appendChild(l),a.appendChild(c),a.appendChild(h),-1!==S._path.indexOf("http")?(h.style.opacity=1,l.style.opacity=0):(h.style.opacity=0,l.style.opacity=1);var u=new SmartObject;u.style.width="200px",u.innerHTML=t.getAttribute("data-hoverText")||"See more",u._x=40,u._y=12,u._opacity=0,u.style.color="#"+t.getAttribute("data-color"),u._color="#"+t.getAttribute("data-color"),u.style.fontFamily="TheinhardtRegular",a.appendChild(u);var d=document.createElement("span");d.style.marginTop="30px",d.style.display="block",d.style.fontSize="14px",d.style.lineHeight="18px",d.innerHTML=t.querySelector("[data-type=description]").innerHTML,d.style.fontFamily="TheinhardtRegular",d.style.color="#"+t.getAttribute("data-color");var p=new SmartObject;if(p.style.position="absolute",p.style.left="52%",p.style.bottom="20px",p.style.right=0,p.style.width="100%",p.style.height="auto",p.style.minHeight="200px",p.style.margin="0px 40px 0px 0px",p.style.display="block",p.style.cursor="pointer",p.style.zIndex=100,p.style.background="transparent","Explorer"===BrowserDetect.BROWSER_NAME){var f=Assets.getTransparentBg();f._rel=p,p.appendChild(f)}p.onmouseover=function(t){TweenMax.to(u,.5,{_opacity:1,x:50,ease:Expo.easeOut,overwrite:"all"}),-1!==S._path.indexOf("http")?h.mouseOver():TweenMax.to(l,.5,{rotation:180,ease:Expo.easeOut,overwrite:"all"})},p.onmouseout=function(t){TweenMax.to(u,.5,{_opacity:0,x:40,ease:Expo.easeOut,overwrite:"all"}),-1!==S._path.indexOf("http")?h.mouseOut():TweenMax.to(l,.5,{rotation:0,ease:Expo.easeOut,overwrite:"all"})},S._hitArea=p,i.appendChild(r),i.appendChild(o),i.appendChild(s),i.appendChild(a),i.appendChild(d),S.appendChild(p);var g=new SmartObject;g.style.position="absolute",g.style.width="100%",g.style.height="100%";var m=new SmartObject;m.style.position="absolute",m.innerHTML=Assets.DATA_STATIC.querySelector("#whats-up").innerHTML,m.style.fontSize="14px",m.style.left="52%",m.style.top="30px",m.style.color="#"+t.getAttribute("data-color");var y=new SmartObject;y.style.width="45px",y.style.height="1px",y.style.position="absolute",y.style.top="8px",y.style.right="-49px",y.style.backgroundColor=m.style.color,m.appendChild(y);var _=new HMLogo;S._logo=_;var v=Assets.DATA_STATIC.querySelector("#email").innerHTML,w=document.createElement("a");w.style.position="absolute",w.style.fontFamily="TheinhardtRegular",w.href="mailto:"+v,w.innerHTML=v,w.style.left="20px",w.style.bottom="20px",w.style.color="#"+t.getAttribute("data-color"),w.style.textDecoration="none",BrowserDetect.DESKTOP&&(w.addEventListener(MouseEvent.MOUSE_OVER,function(t){TweenMax.to(w,.2,{opacity:.5,ease:Linear.easeNone})}),w.addEventListener(MouseEvent.MOUSE_OUT,function(t){TweenMax.to(w,.2,{opacity:1,ease:Linear.easeNone})}));var T=new SmartObject;T.style.position="absolute",T.innerHTML="&copy; Copyright "+(new Date).getFullYear(),T.style.fontFamily="TheinhardtRegular",T.style.left="52%",T.style.bottom="20px",T.style.color="#"+t.getAttribute("data-color");var A=new SmartObject;A.style.opacity=0,A.innerHTML=t.querySelector("[data-type=note]").innerHTML.trunc(250/3,!0),A.style.position="absolute",A.style.left="20px",A.style.fontSize="14px",A.style.color="#"+t.getAttribute("data-color"),A.style.maxWidth="200px";var E=A.cloneNode(!0);E.style.opacity=0,E.innerHTML=r.innerHTML,E.style.left="52%",g.appendChild(m),g.appendChild(_),g.appendChild(w),g.appendChild(T),g.appendChild(i),g.appendChild(A),g.appendChild(E);var L=new SmartObject;L.style.position="absolute",L.style.display="block",L.style.width="100%",L.style.height="auto",L.style.top=0,L.style.left=0,L.style.right=0,L.style.bottom=0,L.style.margin="20px 0px 20px 20px";var k=new SmartObject;k.style.position="absolute",k.style.width="100%",k.style.height="100%",k.style.opacity=.9;var I=new SmartObject;I.style.position="absolute",I.style.width="100%",I.style.height="100%",I.style.background="#"+t.getAttribute("data-panelColor"),I.style.opacity=.9,TweenMax.set(I,{x:0,y:0,z:0}),L._curr=I,L._bg1=k,L._bg2=I,L.appendChild(k),L.appendChild(I),L.appendChild(g),S.appendChild(L),S.resize=function(t){O=window.innerWidth/640,window.innerHeight<window.innerWidth&&(O=window.innerHeight/640),S.style.width=window.innerWidth/2-20+"px",_.resize();var e=window.innerWidth<900||window.innerHeight<600;window.innerHeight>580?u.style.visibility="visible":u.style.visibility="hidden",e||BrowserDetect.MOBILE?(i.style.left="20px",T.style.opacity=0,m.style.opacity=0,A.style.display="none",d.style.display="none",BrowserDetect.MOBILE&&window.innerWidth>window.innerHeight?(w.style.opacity=0,i.style.left="52%",E.style.opacity=1,r.style.display="none"):(w.style.opacity=1,E.style.opacity=0,r.style.display="block")):(i.style.left="52%",T.style.opacity=1,m.style.opacity=1,A.style.display="block",d.style.display="block"),i.style.minHeight=.25*S.offsetHeight+"px",e?(r.style.fontSize=14*O+"px",r.style.marginBottom=30*O+"px",o.style.fontSize=33*O+"px",o.style.lineHeight=33*1.083333333*O+"px",s.style.fontSize=33*O+"px",s.style.lineHeight=33*1.083333333*O+"px",window.innerWidth>window.innerHeight?i.style.bottom="50px":i.style.bottom=(window.innerHeight<500?100:180)*O+"px"):(r.style.fontSize="14px",r.style.marginBottom="30px",o.style.fontSize="33px",o.style.lineHeight=33*1.083333333+"px",s.style.fontSize="33px",s.style.lineHeight=33*1.083333333+"px",i.style.bottom="70px"),setTimeout(function(){A.style.top=x(d).top-20+"px",A.style.opacity=1,E.style.top="30px",p.style.width=i.offsetLeft<100?"100%":"50%",p.style.height=i.offsetLeft<100?"50%":"90%",p.style.left=i.style.left},0)},S.resize(),C._onChangeLayerCompleteCallback=function(){M.oldLayer.style.display="none"},C._onChangeLayerStartCallback=function(t){var e=t.oldLayer._cat;e&&n(e);var p=t.newLayer._cat;p&&b(p);var f="up"===t.moveDirection?"Next":"Previous";_gaq.push(["_trackEvent","Home",f,t.newLayer._headline]);var g=C.transitionManager._options.speed;if(M=t,t.oldLayer._isVisible=!1,t.newLayer._isVisible=!0,"down"===t.moveDirection?P.up.onClick(null,!0):"up"===t.moveDirection&&P.down.onClick(null,!0),"fade"===S._color){var _=t.newLayer,v=t.moveDirection,O=50*("down"===v||"left"===v?-1:1);TweenMax.to(L._curr,.7*g,{backgroundColor:"#"+_._panelColor,ease:Expo.easeInOut,overwrite:"all"})}if("fade"===S._text){var v=t.moveDirection,k=BrowserDetect.MOBILE||BrowserDetect.TABLET?1:0;TweenMax.to(i,g/3,{opacity:k,ease:Expo.easeInOut,overwrite:"all",onComplete:function(){o.innerHTML=_._headline,s.innerHTML=_._subHeadline,s.style.color="#"+_._color,r.innerHTML=_._title,r.style.color="#"+_._color,d.innerHTML=_._description,d.style.color="#"+_._color,A.innerHTML=_._note,A.style.color="#"+_._color,A.style.top=x(d).top-20+O+"px",E.innerHTML=r.innerHTML,E.style.color="#"+_._color,E.style.top="30px",u.innerHTML=_._hoverText||"See more",u._color="#"+_._color,u.style.color=u._color,a.style.background="#fff",S._path=_._path,c.style.opacity=0,-1!==S._path.indexOf("http")?(h.style.opacity=1,l.style.opacity=0):(h.style.opacity=0,l.style.opacity=1),BrowserDetect.MOBILE||BrowserDetect.TABLET||TweenMax.to(i,g/3,{opacity:1,ease:Expo.easeInOut,overwrite:"all"})}})}if("slide single"===S._text){var v=t.moveDirection,O=75*("down"===v||"left"===v?-1:1);S._reverseText&&(O*=-1);"down"!==v&&"left"!==v||(.1,.05,0);var D=[r,o,s,a,d,A];"down"!==v&&"left"!==v||(D=[d,a,s,o,r,A]);var I=1.3/D.length/10;TweenMax.staggerTo(D,g/3,{opacity:0,x:0,y:-O,z:0,ease:Expo.easeInOut,overwrite:"all",onComplete:function(){o.innerHTML=_._headline,s.innerHTML=_._subHeadline,s.style.color="#"+_._color,r.innerHTML=_._title,r.style.color="#"+_._color,d.innerHTML=_._description,d.style.color="#"+_._color,A.innerHTML=_._note,A.style.color="#"+_._color,A.style.top=x(d).top-20+O+"px",E.innerHTML=r.innerHTML,E.style.color="#"+_._color,E.style.top="30px",u.innerHTML=_._hoverText||"See more",u._color="#"+_._color,u.style.color=u._color,a.style.background="#fff",S._path=_._path,c.style.opacity=0,-1!==S._path.indexOf("http")?(h.style.opacity=1,l.style.opacity=0):(h.style.opacity=0,l.style.opacity=1),TweenMax.set(D,{x:0,y:O,z:0}),TweenMax.staggerTo(D,g/3,{opacity:1,x:0,y:0,z:0,ease:Expo.easeInOut,overwrite:"all"},I)}},I)}TweenMax.to([m,T,w],g,{color:"#"+_._color,ease:Expo.easeInOut,overwrite:"all"}),TweenMax.to(y,g,{backgroundColor:"#"+_._color,ease:Expo.easeInOut,overwrite:"all"})},D.appendChild(S)}function y(){var t=0,e=H.length;for(t;t<e;t++){var i=H[t];S.appendChild(i),H[t]=null}}function _(){var t,e=0,i=A.length;for(e;e<i;e++){var n=R[e];t=A[e],t._data=A[e],t._headline=n.querySelector("[data-type=headline]").innerHTML,t._subHeadline=n.querySelector("[data-type=subHeadline]").innerHTML,t._description=n.querySelector("[data-type=description]").innerHTML,t._color=n.getAttribute("data-color"),t._bgColor=n.getAttribute("data-bgColor"),t._panelColor=n.getAttribute("data-panelColor"),t._title=n.querySelector("[data-type=title]").innerHTML,t._icon=n.getAttribute("data-icon"),t._note=n.querySelector("[data-type=note]").innerHTML,t._path=n.getAttribute("data-path"),t._hoverText=n.getAttribute("data-hoverText"),t._catID=n.getAttribute("data-cat"),t.style.background="#"+t._bgColor,t._catID&&v(t)}}function v(t){if(BrowserDetect.MOBILE||BrowserDetect.TABLET||Assets.CAT_ANIMATION_RUN||"Explorer"===BrowserDetect.BROWSER_NAME)return!1;if(window.innerWidth>=900){var e=new Cat(t._catID,n);e._x=36,e._opacity=0,e.style.bottom="248px",e.style.zIndex=999,e._stack=t,t._cat=e,H.push(e)}}function b(t){var t=t||L;t&&(TweenLite.to(t,.3,{delay:.8,_opacity:1,onComplete:w,onCompleteParams:[t],ease:Linear.easeNone}),Assets.CAT_ANIMATION_RUN=!0)}function w(t){if(t)try{t.play()}catch(t){}}function x(t){function e(t){return null!=t&&t===t.window}var i,n,r={top:0,left:0},o=t&&t.ownerDocument;return i=o.documentElement,void 0!==t.getBoundingClientRect&&(r=t.getBoundingClientRect()),n=function(t){return e(t)?t:9===t.nodeType&&t.defaultView}(o),{top:r.top+n.pageYOffset-i.clientTop,left:r.left+n.pageXOffset-i.clientLeft}}function T(){P.up.removeEvents(),P.down.removeEvents(),P.up.removeEventListener("click",C.clearSlideshowInt),P.down.removeEventListener("click",C.clearSlideshowInt),S._hitArea.onmouseover=null,S._hitArea.onmouseout=null,S._logo.onclick=null,S=null,M=null;var t=0,e=A.length;for(t;t<e;t++)A[t]&&A[t].parentNode&&A[t].parentNode.removeChild(A[t]),A[t]=null;A=null,C._onBuildCallback=null,C._onResizeCallback=null,C._onChangeLayerCompleteCallback=null,C._onChangeLayerStartCallback=null,D.removeChild(C),C.kill(),C=null,k.removeChild(D),D=null,E.kill(),E=null,k.parentNode.removeChild(k),k=null}var A,C,E,S,O,M,L,k=new SmartObject,D=new SmartObject,I=t.getXML(),R=I.querySelectorAll("[data-type=case]"),P={down:null,up:null,resize:null},B=!BrowserDetect.MOBILE&&!BrowserDetect.TABLET,H=[];return k.templateIn=function(){k._allowOverflowReset=!1,k.style.width="100%",k.style.height="100%",k.style.background="#D3D6CD",D.style.width="100%",D.style.height="100%",D.style.overflow="hidden",D.___MEM_ID___="PageWrapper",k.appendChild(D);var t=new SmartObject;t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="red",t.style.zIndex=1e3,e(),C.setSlideshowInt(),Assets.LAYER_MID.appendChild(k),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(I.getAttribute("data-path"))},k.killPreloader=function(){},k.setOverflows=function(){Assets.LAYER_MID.style.overflow="hidden",document.body.style.overflow="hidden"},k.hideContent=function(){},k.showContent=function(){},k.hideActiveCat=function(){n()},k.templateOut=function(){k.hideActiveCat(),C.clearSlideshowInt(),d(),C.removeEvents(),E.removeEvents(),Assets.TRANSITIONS_MANAGER.go(k,I,T)},k}function FauxParallax(t){function e(){i()}function i(){x&&"function"==typeof x._onLoadAssetsCallback&&x._onLoadAssetsCallback(S.assets),A=document.createElement("div"),n(),a(),u(),p(),y(),x._buildFinished=!0,x&&"function"==typeof x._onBuildCallback&&x._onBuildCallback(T)}function n(){var t=S.cellData;if(t){T=[];var e=0,i=t.length;for(e;e<i;e++){var n=t[e],o=S.cellAttributes[e],s=new Cell(n,x,e,o);x._hideCellsOnBuild&&(s.style.opacity=0),L.push(s),T.push(s)}r();var e=0,i=3;for(e;e<i;e++){var s=document.createElement("div");if(s._type="extraFooterCellCTA",s.style.background="#AFB6B0",s._width=Math.ceil(x._width),s._height=Math.ceil(x._height),s._ratio=s._height/s._width,s.style.borderTop="20px solid #BAC3BB",s.style.borderBottom="20px solid #BAC3BB",0===e?s.style.borderLeft="20px solid #BAC3BB":2===e&&(s.style.borderRight="20px solid #BAC3BB"),2===e){var a=new SmartObject;a.style.position="absolute",a.innerHTML="Looking for more",a.style.fontSize="14px",a.style.left="20px",a.style.top="20px",a.style.color="#fff";var l=new SmartObject;l.style.width="45px",l.style.height="1px",l.style.position="absolute",l.style.top="11px",l.style.right="-44px",l.style.backgroundColor="#fff",a.appendChild(l);var c=SmartObject(document.createElement("a"));c.style.position="absolute",c.innerHTML="<span style='color:#fff;'>It's a wrap<br /></span><span style='color:#4E4F51;'>Want to create<br />great things<br />with us?<br /></span><span style='color:#fff;'>hello@hellomonday.com</span>",c.style.fontSize="14px",c.style.left="20px",c.style.bottom="20px",c.style.color="#fff",c.style.fontSize="20px",c.style.lineHeight="24px",c.style.cursor="pointer",c.setAttribute("href","mailto:hello@hellomonday.com"),c.className="itsAwrapLink",s.appendChild(a),s.appendChild(c)}s.refresh=function(t,e,i){var n=this;t&&(i&&(n._width=t,n._height=n._width*n._ratio),n._width=Math.ceil(n._width),n._height=Math.ceil(n._height)),n.style.width=n._width+"px",n.style.height=n._height+"px"},L.push(s),T.push(s),D.push(s)}x&&"function"==typeof x._onAddCellsCallback&&x._onAddCellsCallback(T)}else console.log("Error: No cell data provided")}function r(){C=x._loadAssetsInReverse?L.length-1:0,E=L.length,o()}function o(){var t=L[C];t._onAddLayersCallback=s,t._loadAssets()}function s(){return!!x&&(x._loadAssetsInReverse?C--:C++,x._loadAssetsInReverse&&C<0?(x._allCellImagesLoaded=!0,x&&"function"==typeof x._onAllAssetsLoadedCallback&&x._onAllAssetsLoadedCallback(x),!1):C>=E?(x._allCellImagesLoaded=!0,x&&"function"==typeof x._onAllAssetsLoadedCallback&&x._onAllAssetsLoadedCallback(x),!1):void o())}function a(){k?console.log("Error: Events already added"):(k=!0,x._addDesktopEvents&&(window.addEventListener("mousemove",c),window.addEventListener("scroll",d)),window.addEventListener("resize",h),window.addEventListener("deviceorientation",g),window.addEventListener("orientationchange",y),x&&"function"==typeof x._onAddEventsCallback&&x._onAddEventsCallback(x))}function l(){k&&(k=!1,x._addDesktopEvents&&(window.removeEventListener("mousemove",c),window.removeEventListener("scroll",d)),window.removeEventListener("resize",h),window.removeEventListener("deviceorientation",g),window.removeEventListener("orientationchange",y),x&&"function"==typeof x._onRemoveEventsCallback&&x._onRemoveEventsCallback(x))}function c(t){t=t||window.event;t.target||t.currentTarget||t.srcElement;clearTimeout(O.timeout),O.isMoving=!0,O.x=t.clientX,O.y=t.clientY,O.timeout=setTimeout(function(t){if(O.isMoving=!1,L){var e=0,i=L.length;for(e;e<i;e++){var n=L[e];n&&n._onMouseOut&&n._onMouseOut(t,n)}}},O.timeoutDelay);var e=0,i=L.length;Assets.LAYER_ALL.scrollTop,Assets.LAYER_ALL.scrollTop,window.innerHeight;for(e;e<i;e++){var n=L[e];if(!n._isSelected&&n._isLoaded){var r=n.getBoundingClientRect(),o=r.top>-r.height&&r.top+r.height<window.innerHeight+r.height;!o&&n.parentNode&&n.parentNode._isVisible&&(o=!0),n._isVisible=o,o&&n._onMouseMove&&n._onMouseMove(t,n)}}x&&"function"==typeof x._onMouseMoveCallback&&x._onMouseMoveCallback(O)}function h(t){requestAnimFrame(u)}function u(t){t=t||window.event,y(t),A.clientX=(window.innerWidth-30)/2,A.clientY=(window.innerHeight-30)/2,x._resizeWithBreakPoints&&(window.innerWidth<700?x._nrOfColumns=1:window.innerWidth<1400?x._nrOfColumns=2:window.innerWidth<2100?x._nrOfColumns=3:x._nrOfColumns=4),x._currWinWidth=window.innerWidth-Assets.SCROLLBAR_WIDTH,x.refreshCells(),x&&"function"==typeof x._onResizeCallback&&x._onResizeCallback(x)}function d(t){requestAnimFrame(p)}function p(t){t=t||window.event;var e=document.documentElement,i=(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0),n=(window.pageYOffset||e.scrollTop)-(e.clientTop||0);x._scroll={x:i,y:n},x&&"function"==typeof x._onScrollCallback&&x._onScrollCallback(x._scroll)}function f(t,e){var i=0,n=L.length,r=0;Assets.LAYER_ALL.scrollTop,Assets.LAYER_ALL.scrollTop,window.innerHeight;for(i;i<n;i++){var o=L[i];if(!o._isSelected){var s=o.getBoundingClientRect(),a=s.top>-s.height&&s.top+s.height<window.innerHeight+s.height;!a&&o.parentNode&&o.parentNode._isVisible&&(a=!0),a||o._type||(t?o.style.display="none":e&&(o.style.display="block"),r++),o._isVisible=a}}var l=e?"show":t?"hide":"";console.log("FauxParallax checkVisibility "+l,r)}function g(t){var e=t.absolute,i=Math.round(t.alpha),n=Math.round(t.beta),r=Math.round(t.gamma),o=t.timeStamp;M.absolute=e,M.alpha=i,M.beta=n,M.gamma=r,M.timeStamp=o,M.prevValue=M.currValue,M.currValue=M.beta,m()}function m(){if(!x._allCellImagesLoaded)return!1;M.currValue=M.currValue%360;var t=M.isLandscape?M.beta:-M.gamma,e=M.isLandscape?M.gamma:M.beta,i=M.isLandscape?1.35:1.22,n={clientX:A.clientX*t/20+360*i*(window.innerWidth/900),clientY:-A.clientY*e/20+360*i*(window.innerHeight/900)},r=0,o=L.length,s=0;Assets.LAYER_ALL.scrollTop,Assets.LAYER_ALL.scrollTop,window.innerHeight;for(r;r<o;r++){var a=L[r];if(!a._isSelected&&a._isLoaded){var l=a.getBoundingClientRect();l.top>-l.height&&l.top+l.height<window.innerHeight+l.height&&(a._onMouseMove&&a._onMouseMove(n,a),s++)}}}function y(t){_()}function _(){if(!window.matchMedia)return!1;var t=window.matchMedia("(orientation: portrait)");if(t)t.matches?M.isLandscape=!1:M.isLandscape=!0,t.addListener(v);else{var e=window.getComputedStyle(document.body,":after");"p"==e.content?M.isLandscape=!1:"l"==e.content?M.isLandscape=!0:M.isLandscape=window.innerWidth>=window.innerHeight}}function v(t){t.matches?M.isLandscape=!1:M.isLandscape=!0}function b(){var t=0,e=L.length;for(t;t<e;t++)L[t].kill&&L[t].kill(),L[t]._onAddLayersCallback=null,L[t]._isHidden=null,L[t]=null;for(t=0,e=D.length,t;t<e;t++)D[t].kill&&D[t].kill(),D[t]._isHidden=null,D[t]=null;if(T)for(t=0,e=T.length,t;t<e;t++)T[t].kill&&T[t].kill(),T[t]._isHidden=null,T[t]=null;T=null,L=null,D=null}function w(){var t=1,e=arguments.length;for(t;t<e;t++)for(var i in arguments[t])arguments[t].hasOwnProperty(i)&&(arguments[0][i]=arguments[t][i]);for(var n in S)if(S.hasOwnProperty(n)){var r=n,i=S[n];x["_"+r]=i}return arguments[0]}var x={};x._scroll,x._dynamicOut=!0,x._buildFinished=!1,x._currWinWidth=window.innerWidth,x._onGetAllCellsCallback=null,x._onGetCellCallback=null,x._onRefreshCellsCallback=null,x._onUpdateOptionsCallback=null,x._onScrollCallback=null,x._onResizeCallback=null,x._onMouseMoveCallback=null,x._onRemoveEventsCallback=null,x._onAddEventsCallback=null,x._onAddCellsCallback=null,x._onBuildCallback=null,x._onLoadAssetsCallback=null,x._onInitCallback=null,x._onAddSingleCellCallback=null,x._onRefreshSingleCellCallback=null,x._onAllAssetsLoadedCallback=null;var T,A,C,E,S={perspective:1e3,overflow:"hidden",width:496,height:334,keepResizeRatio:!1,zoomDepth:45,nrOfColumns:0,resizeWithBreakPoints:!1,resizeLayersToFillCell:!1,resizeCellToFillParent:!1,animateRefreshes:!0,animateHovers:!1,showOverlays:!1,dontRefreshCells:!1,hideCellsOnBuild:!0,addDesktopEvents:!0,loadAssetsInReverse:!1,assets:["../development/assets/images/gfx3d/0-1.png","../development/assets/images/gfx3d/0-2.png"],cellData:[["../development/assets/images/gfx3d/0-1.png","../development/assets/images/gfx3d/0-2.png"]],cellAttributes:[[{headline:"",subHeadline:"",overlayColor:""}]]},O={x:0,y:0,timeout:null,timeoutDelay:1e3,isMoving:!1,isDown:!1},M={currValue:0,prevValue:0,absolute:0,alpha:0,gamma:0,beta:0,timeStamp:null,isLandscape:!1},L=[],k=!1,D=[];return x.loadCellAssets=r,x.removeEvents=l,x.checkVisibility=f,x.updateOptions=function(t){return w(S,t),x&&"function"==typeof x._onUpdateOptionsCallback&&x._onUpdateOptionsCallback(S),x},x.build=function(t){return t&&x.updateOptions(t),e(),x},x.refreshCells=function(){if(x._dontRefreshCells)return!1;var t=0,e=L.length,i=0,n=0,r=null,o=0;for(x._nrOfColumns&&(i=(window.innerWidth-Assets.SCROLLBAR_WIDTH)/x._nrOfColumns),t;t<e;t++){var s=L[t];if(x._resizeCellToFillParent&&s.parentNode&&(i=s.parentNode.offsetWidth||i,n=s.parentNode.offsetHeight||n),s.refresh(i,n,x._keepResizeRatio),x._hideCellsOnBuild&&(_hideCellsOnBuild=!1,s.style.opacity=1),!s._container){if(null===r){var a=(e-3)/Math.ceil(x._currWinWidth/i);if(r=a>Math.floor(a)){var l=Math.ceil(x._currWinWidth/i);o=l-(e-3)%l}}var c=t-e+3;1===o?2!==c?(s._isHidden=!0,s.style.display="none"):(s._isHidden=!1,s.style.display="block",s.style.borderLeft="20px solid #BAC3BB"):2===o?1===c?(s._isHidden=!0,s.style.display="none"):(s._isHidden=!1,s.style.display="block"):3===o?(s._isHidden=!1,s.style.display="block"):(s._isHidden=!0,s.style.display="none"),1!==o&&2===c&&(s.style.borderLeft="0px solid #BAC3BB")}}return x&&"function"==typeof x._onRefreshCellsCallback&&x._onRefreshCellsCallback(L),x},x.getCell=function(t,e){return x&&"function"==typeof x._onGetCellCallback&&x._onGetCellCallback(T[e]),"last"===t?T[e]:L[e]},x.getAllCells=function(t){return x&&"function"==typeof x._onGetAllCellsCallback&&x._onGetAllCellsCallback(T),"last"===t?T:L},x.kill=function(){l(),A=null,O.timeout&&clearTimeout(O.timeout),b(),x.parentNode&&x.parentNode.removeChild(x),x=null},x.deactivateCells=function(){var t=0,e=L.length;for(t;t<e;t++)L[t].removeEvents&&L[t].removeEvents();for(t=0,e=D.length,t;t<e;t++)D[t].removeEvents&&D[t].removeEvents();if(T)for(t=0,e=T.length,t;t<e;t++)T[t].removeEvents&&T[t].removeEvents()},function(){x.updateOptions(t),x&&"function"==typeof x._onInitCallback&&x._onInitCallback(x)}(),x}function Cell(t,e,i,n){function r(e){if(A&&(_._isLoaded=!0,_&&"function"==typeof _._onAddLayersCallback))return _._onAddLayersCallback(_._layerArr),!1;var i=t;i?AssetLoader.loadGroup(new AssetGroup(i,{onComplete:function(){s(),e&&e()},onUpdate:null})):console.log("Error: No assets provided")}function o(){if(_.style.width=_._width+"px",_.style.height=_._height+"px",_.style.position="relative",_.style.overflow=e._overflow,_.style.background=_._attributes?"#"+_._attributes.bgColor:"",v=document.createElement("div"),v.style.width="100%",v.style.height="100%",v.style.pointerEvents="none",E||TweenMax.set(v,{perspective:e._perspective,transformStyle:"preserve-3d"}),b=new SmartObject,b.style.position="relative",b.style.width="100%",b.style.height="100%",b.style.pointerEvents="none",b._orgZ=100,E||TweenMax.set(b,{transformStyle:"preserve-3d",x:0,y:0,z:b._orgZ}),"Explorer"===BrowserDetect.BROWSER_NAME&&TweenMax.set(b,{perspective:e._perspective}),v.appendChild(b),_.appendChild(v),_._container=v,_._wrapper=b,a(),BrowserDetect.IE9||BrowserDetect.IE10){var t=Assets.getTransparentBg();t._rel=_,_.appendChild(t)}A&&s(),_&&"function"==typeof _._onBuildCallback&&_._onBuildCallback(_),_&&"function"==typeof _._parent._onAddSingleCellCallback&&_._parent._onAddSingleCellCallback(_)}function s(){var e=0,i=t.length,n=10;if(!v)return!1;for(v.style.background=_._attributes?"#"+_._attributes.bgColor:"",e;e<i;e++){var r=AssetLoader.getAsset(t[e]);r._orgW=r.width||r.naturalWidth,r._orgH=r.height||r.naturalHeight,r._ratio=r._orgH/r._orgW,r._orgRatioW=r._ratio,r._orgRatioH=r._orgW/r._orgH,r._orgX=-(r._orgW-_._width)/2,r._orgY=-(r._orgH-_._height)/2,r._orgZ=n,_._mobileAlign,n+=10,E||TweenMax.set(r,{x:r._orgX,y:r._orgY,z:r._orgZ}),r.style.pointerEvents="none",b.appendChild(r),_._layerArr.push(r)}if(A);else{v.style.opacity=0,TweenMax.to(v,.3,{opacity:1,ease:Linear.easeNone,overwrite:"all"}),TweenMax.to(_,0,{delay:.25,overwrite:"all",onComplete:function(){Assets.LOADED_PROJECTS_GRID_ITEMS[t[t.length-1]]||(Assets.LOADED_PROJECTS_GRID_ITEMS[t[t.length-1]]=t[t.length-1]),_&&(_._isLoaded=!0,"function"==typeof _._onAddLayersCallback&&_._onAddLayersCallback(_._layerArr))}})}_.refresh()}function a(){if(w=new SmartObject,w.style.position="absolute",w.style.width=_._width+"px",w.style.height=_._height+"px",w.style.color="#fff",w.style.textAlign="left",w.style.pointerEvents="none",w.style.padding="20px",w.style.font="25px/27px ClarendonLTStdBold",_._attributes)var t=_._attributes.overlayColor||Math.random().toString(16).slice(2,8),e=_._attributes.headline,i=_._attributes.subHeadline,n=_._attributes.subHeadlineColor||"000";else var t="",e="",i="",n="000";var r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.color="#fff",r.style.background="rgba("+y(t)+", 0.80)";var o=new SmartObject;o.style.position="absolute",o.style.left="40px",o.style.bottom="90px",o.style.width="80%",o.innerHTML=e+"<br/><span style='color:#"+n+";'>"+i+"</span>";var s=new SmartObject;s.style.marginTop="20px",s.style.display="block",s.style.width="35px",s.style.height="35px",s.style.borderRadius="100%",s.style.cursor="pointer",s.style.background="#fff",s.style.left="40px",s.style.bottom="40px";var a=AssetLoader.getAsset("assets/images/ui/dots@2.png");if(a.width=35,a.height=35,s.appendChild(a),BrowserDetect.MOBILE||BrowserDetect.TABLET){var l=s.cloneNode(!0);l._parent=_._parent,l.addEventListener("click",function(t){w._isVisible?w.hide(t,_):(w.show(t,_),clearTimeout(_._lastTouchedTimeout),_._lastTouchedTimeout=setTimeout(function(){w.hide(t,_)
},4e3))}),"HomeTemplate"!==ContentManager._activeTemplates[0].templateName&&_.appendChild(l)}r.appendChild(o),r.appendChild(s),w.appendChild(r),_._parent._showOverlays&&_.appendChild(w),_._overlay=w,w.show=function(t,e){e=e||_,e._mouseInDirection=g(t,e),w._isVisible=!0;TweenMax.to(w,.3,{opacity:1,ease:Linear.easeNone,overwrite:"all"}),TweenMax.to(a,.5,{delay:.1,rotation:180,ease:Expo.easeOut,overwrite:"all"}),_&&"function"==typeof _._onOverlayShowCallback&&_._onOverlayShowCallback(w)},w.hide=function(t,e){e=e||_,e._mouseOutDirection=g(t,e),w._isVisible=!1;TweenMax.to(w,.3,{opacity:0,ease:Linear.easeNone,overwrite:"all"}),TweenMax.to(a,.5,{rotation:0,ease:Expo.easeOut,overwrite:"all"}),_&&"function"==typeof _._onOverlayHideCallback&&_._onOverlayHideCallback(w)},_&&"function"==typeof _._onAddOverlayCallback&&_._onAddOverlayCallback(w)}function l(){T?console.log("Error: Events already added"):(T=!0,!_._parent._addDesktopEvents||BrowserDetect.MOBILE||BrowserDetect.TABLET||(_.addEventListener("mousemove",h),_.addEventListener("mouseover",u),_.addEventListener("mouseout",d)),_._onMouseMove=h,_._onMouseOver=u,_._onMouseOut=d,_&&"function"==typeof _._onAddEventsCallback&&_._onAddEventsCallback(_))}function c(){T&&(T=!1,_._parent._addDesktopEvents&&(_.removeEventListener("mousemove",h),_.removeEventListener("mouseover",u),_.removeEventListener("mouseout",d)),_._onMouseMove=null,_._onMouseOver=null,_._onMouseOut=null,_&&"function"==typeof _._onRemoveEventsCallback&&_._onRemoveEventsCallback(_))}function h(t,e){t=t||window.event;var i=e||t.target||t.currentTarget||t.srcElement;if(E)return!1;if((BrowserDetect.IE9||BrowserDetect.IE10)&&i._rel===_&&(i=_),!i._parent)return!1;var n=m(i),r=n.left,o=n.top,s=i._width,a=i._height,l=i._parent._scroll;i._mouse={x:t.clientX-r+l.x,y:t.clientY-o+l.y,winX:t.clientX,winY:t.clientY};var c=(s/2-i._mouse.x)/s*2;c=c>1?c=1:c<-1?c=-1:c;var h=(a/2-i._mouse.y)/a*2;h=h>1.25?h=1.25:h<-1.25?h=-1.25:h;var u=BrowserDetect.IE11?5:15,d=c*u*.75,p=5*h*.75;TweenMax.to(b,.5,{delay:0,rotationY:d,rotationX:-p,ease:Quad.easeOut,overwrite:"all"}),_&&"function"==typeof _._onMouseMoveCallback&&_._onMouseMoveCallback(i._mouse)}function u(t,e,i){t=t||window.event;var n=e||t.target||t.currentTarget||t.srcElement;if((BrowserDetect.IE9||BrowserDetect.IE10)&&n._rel===_&&(n=_),n._isSelected=!0,n._overlay&&n._parent&&n._parent._showOverlays&&(!e||i)&&w.show(t,n),n._parent&&n._parent._animateHovers){var r=0,o=n._zoomDepth*n._layerArr.length,s=Math.ceil(o/n._layerArr.length)/1,a=0,l=n._layerArr.length;for(a;a<l;a++){var c=n._layerArr[l-a-1];TweenMax.to(c,3,{delay:r,x:c._orgX,y:c._orgY,z:o,ease:Elastic.easeOut,overwrite:"all"}),r+=.05,o-=s}}_&&"function"==typeof _._onMouseOverCallback&&_._onMouseOverCallback(n._mouse)}function d(t,e,i){t=t||window.event;var n=e||t.target||t.currentTarget||t.srcElement;if((BrowserDetect.IE9||BrowserDetect.IE10)&&n._rel===_&&(n=_),n._isSelected=!1,n._overlay&&n._parent&&n._parent._showOverlays&&(!e||i)&&w.hide(t,n),n._parent&&n._parent._animateHovers){var r=0,o=1;TweenMax.to(b,o,{delay:r,rotationY:0,rotationX:0,ease:Quad.easeInOut,overwrite:"all"});var r=0,o=1.5,s=10,a=0,l=n._layerArr.length;for(a;a<l;a++){var c=n._layerArr[a];TweenMax.to(c,o,{delay:r,x:c._orgX,y:c._orgY,z:s,ease:Quad.easeInOut,overwrite:"all"}),r+=.05,s+=10}}_&&"function"==typeof _._onMouseOutCallback&&_._onMouseOutCallback(n._mouse)}function p(t,e,i){var n=e._parent._resizeLayersToFillCell;if(n){"width"===n?(t._orgW=e._width||t.width||t.naturalWidth,t._orgH=e._width*t._ratio||t.height||t.naturalHeight):(t._orgH=e._height||t.height||t.naturalHeight,t._orgW=e._height*t._orgRatioH||t.width||t.naturalWidth);var r=BrowserDetect.IE9?1.2:1;if(t._orgW=Math.ceil(t._orgW)*r,t._orgH=Math.ceil(t._orgH)*r,t._ratio=t._orgH/t._orgW,e._parent&&e._parent._animateRefreshes){var o=.03*e._realIndex;e._lastWinWidth<window.innerWidth&&(o=e._parent?.03*(e._parent.getAllCells().length-e._realIndex):0),TweenMax.to(t,1,{delay:o,width:t._orgW,height:t._orgH,ease:Expo.easeInOut})}else t.style.width=t._orgW+"px",t.style.height=t._orgH+"px"}t._orgX=-(t._orgW-e._width)/2,t._orgY=-(t._orgH-e._height)/2,t._orgZ=i,_._mobileAlign,f(t),x&&x.update()}function f(t){var e=_._parent._perspective,i=t._orgW,n=t._orgH,r=t._orgZ+b._orgZ,o=Math.ceil(i*e/(e-r)),s=Math.ceil(n*e/(e-r)),a=o/i,l=s/n;t._perspective=e,t._orgWidth=i,t._orgHeight=n,t._zSpace=r,t._newWidth=o,t._newHeight=s,t._widthPercent=a,t._heightPercent=l}function g(t,e){t=t||window.event;var i=(e._mouse,e._parent._scroll),n=m(e),r=e._width,o=e._height,s=(t.clientX+i.x-n.left-r/2)*(r>o?o/r:1),a=(t.clientY+i.y-n.top-o/2)*(o>r?r/o:1),l=Math.round((Math.atan2(a,s)*(180/Math.PI)+180)/90+3)%4;return l=0===l?"top":1===l?"right":2===l?"bottom":3===l?"left":l}function m(t){function e(t){return null!=t&&t===t.window}var i,n,r={top:0,left:0},o=t&&t.ownerDocument;return i=o.documentElement,void 0!==t.getBoundingClientRect&&(r=t.getBoundingClientRect()),n=function(t){return e(t)?t:9===t.nodeType&&t.defaultView}(o),{top:r.top+n.pageYOffset-i.clientTop,left:r.left+n.pageXOffset-i.clientLeft}}function y(t){var e=parseInt(t,16);return(e>>16&255)+","+(e>>8&255)+","+(255&e)}var _=document.createElement("div");_._zoomDepth=e._zoomDepth,_._width=Math.ceil(e._width),_._height=Math.ceil(e._height),_._ratio=_._height/_._width,_._data=t,_._parent=e,_._realIndex=i,_._attributes=n,_._mobileAlign=n.alignOnMobile,_._lastWinWidth=window.innerWidth,_._layerArr=[],_._onBuildCallback=null,_._onAddLayersCallback=null,_._onOverlayShowCallback=null,_._onOverlayHideCallback=null,_._onAddOverlayCallback=null,_._onAddEventsCallback=null,_._onRemoveEventsCallback=null,_._onMouseMoveCallback=null,_._onMouseOverCallback=null,_._onMouseOutCallback=null,_._onRefreshCallback=null,_.onSetSizeCallback=null;var v,b,w,x,T=!1;Assets.LOADED_PROJECTS_GRID_ITEMS||(Assets.LOADED_PROJECTS_GRID_ITEMS=[]);var A=Assets.LOADED_PROJECTS_GRID_ITEMS[t[t.length-1]],C="Firefox"===BrowserDetect.BROWSER_NAME&&35===BrowserDetect.BROWSER_VERSION,E=C&&"HomeTemplate"===ContentManager._activeTemplates[0].templateName;return _._loadAssets=r,_.removeEvents=c,_.refresh=function(t,e,i){var n=_;if(t&&(i?(n._width=t,n._height=n._width*n._ratio):_.setSize(t,e),n._width=Math.ceil(n._width),n._height=Math.ceil(n._height)),n._parent&&n._parent._animateRefreshes){var r=.03*n._realIndex;n._lastWinWidth<window.innerWidth&&(r=n._parent?.03*(n._parent.getAllCells().length-n._realIndex):0),TweenMax.to(n,1,{delay:r,width:n._width,height:n._height,ease:Expo.easeInOut})}else n.style.width=n._width+"px",n.style.height=n._height+"px";if(n._overlay.style.width=n._width+"px",n._overlay.style.height=n._height+"px",TweenMax.set(n._overlay,{opacity:n._isSelected?1:0,x:0,y:-n._height,z:0}),n._parent._animateHovers){var o=0,s=n._layerArr.length,a=10;for(o;o<s;o++){var l=n._layerArr[o];p(l,n,a),a+=10,TweenMax.set(l,{x:l._orgX,y:l._orgY,z:a})}}else{var a=n._zoomDepth*n._layerArr.length,c=Math.ceil(a/n._layerArr.length)/1,o=0,s=n._layerArr.length;for(o;o<s;o++){var l=n._layerArr[s-o-1];p(l,n,a),E||TweenMax.set(l,{x:l._orgX,y:l._orgY,z:a}),a-=c}}return n._lastWinWidth=window.innerWidth,_&&"function"==typeof _._onRefreshCallback&&_._onRefreshCallback(_),_&&"function"==typeof _._parent._onRefreshSingleCellCallback&&_._parent._onRefreshSingleCellCallback(_),_},_.setSize=function(t,e){return _._width=t,_._height=e,_._ratio=_._height/_._width,"function"==typeof _.onSetSizeCallback&&_.onSetSizeCallback({width:_._width,height:_._height,ratio:_._ratio}),_},_.getOffset=m,_.kill=function(){if(c(),w&&(w.parentNode&&w.parentNode.removeChild(w),_._overlay=null,w.show=null,w.hide=null,w=null),x&&(x.update=null,x=null),_){var t=0,e=_._layerArr.length;for(t;t<e;t++)b&&b.removeChild(_._layerArr[t]),_._layerArr[t]=null;_._layerArr[t]=null,_._data=null,b&&v.removeChild(b),v&&(_.removeChild(v),_._container=null,v=null),b&&(_._wrapper=null,b=null),_._parent=null,_._realIndex=null,_._attributes=null,_._onBuildCallback=null,_._onAddLayersCallback=null,_._onOverlayShowCallback=null,_._onOverlayHideCallback=null,_._onAddOverlayCallback=null,_._onAddEventsCallback=null,_._onRemoveEventsCallback=null,_._onMouseMoveCallback=null,_._onMouseOverCallback=null,_._onMouseOutCallback=null,_._onRefreshCallback=null,_.onSetSizeCallback=null,_=null}},function(){o(),l()}(),_}function FullScreenStackTransition(t){function e(){var t=1,e=arguments.length;for(t;t<e;t++)for(var i in arguments[t])arguments[t].hasOwnProperty(i)&&(arguments[0][i]=arguments[t][i]);return arguments[0]}function i(){if(!n)return!1;var t=a.shift();if(!t)return!1;var e=t.oldLayer;Assets.MAIN_MENU&&Assets.MAIN_MENU._isOpen?t.oldLayer=Assets.MAIN_MENU:t.oldLayer=o,e!==t.oldLayer&&(t.oldLayer.style.display="none"),n.move(t.oldLayer,t.newLayer,t.newOptions)}var n={};n._isAnimating=!1,n._options={speed:1,delay:0,magnitude:2,direction:"up",darkenOverlay:!1,onStart:null,onComplete:null,allowDeffering:!0};var r,o,s,a=[];return n.setOptions=function(t){e(n._options,t)},n.move=function(t,l,c,h){function u(t,e,i){t._isAnimating=!0,"function"==typeof e.onStart&&e.onStart(t)}function d(t,e,r){Assets.showAllInvisibleChildren(r,"PageTransitionsManager"),"function"==typeof e.onComplete&&e.onComplete(n),t._isAnimating=!1,i()}if(t&&l)if(n._isAnimating){if(console.log("Error: busy animating",t,l),h);else if(n._options.allowDeffering){console.log("Assets.CLICKED_MENU_LINK",Assets.CLICKED_MENU_LINK);var p={oldLayer:t,newLayer:l,newOptions:c};a.push(p)}}else{var f={speed:n._options.speed,delay:n._options.delay,magnitude:n._options.magnitude,direction:n._options.direction,onStart:n._options.onStart,onComplete:n._options.onComplete,maxWidth:window.innerWidth,maxHeight:window.innerHeight,extraDelay:.05};e(f,c),r=t,o=l,s=c,Assets.hideAllInvisibleChildren(t,"PageTransitionsManager"),"none"===t.style.display&&(t.style.display="block"),"none"===l.style.display&&(l.style.display="block");var g=parseInt(t.style.zIndex)||0;g>99&&(g=10),"up"===f.direction?(t.style.zIndex=g+1,l.style.zIndex=g+2,TweenMax.set(l,{x:0,y:Math.ceil(f.maxHeight+2),z:0}),TweenMax.to(t,f.speed,{delay:f.delay+f.extraDelay,x:0,y:-Math.ceil(f.maxHeight/f.magnitude),z:0,ease:Expo.easeInOut,onStart:u,onComplete:d,onStartParams:[n,f,l],onCompleteParams:[n,f,l]})):"down"===f.direction?(t.style.zIndex=g+2,l.style.zIndex=g+1,TweenMax.set(l,{x:0,y:-Math.ceil(f.maxHeight/f.magnitude-2),z:0}),TweenMax.to(t,f.speed,{delay:f.delay+f.extraDelay,x:0,y:Math.ceil(f.maxHeight),z:0,ease:Expo.easeInOut,onStart:u,onComplete:d,onStartParams:[n,f,l],onCompleteParams:[n,f,l]})):"left"===f.direction?(TweenMax.set(l,{x:Math.ceil(f.maxWidth+2),y:0,z:0}),TweenMax.to(t,f.speed,{delay:f.delay+f.extraDelay,x:-Math.ceil(f.maxWidth/f.magnitude),y:0,z:0,ease:Expo.easeInOut,onStart:u,onComplete:d,onStartParams:[n,f,l],onCompleteParams:[n,f,l]})):"right"===f.direction&&(TweenMax.set(l,{x:-Math.ceil(f.maxWidth/f.magnitude-2),y:0,z:0}),TweenMax.to(t,f.speed,{delay:f.delay+f.extraDelay,x:Math.ceil(f.maxWidth),y:0,z:0,ease:Expo.easeInOut,onStart:u,onComplete:d,onStartParams:[n,f,l],onCompleteParams:[n,f,l]})),TweenMax.to(l,f.speed,{delay:f.delay-f.extraDelay,x:0,y:0,z:0,ease:Expo.easeInOut})}else console.log("Error: missing oldLayer or newLayer")},n.abort=function(){r&&TweenMax.killTweensOf(r),o&&TweenMax.killTweensOf(o)},n.kill=function(){n.parentNode&&n.parentNode.removeChild(n),n=null},function(){n.setOptions(t)}(),n}function TinyTouchController(t,e){function i(t){if(t=t||window.event,null==t.targetTouches||1==t.targetTouches.length){var i=c(t);h.isActive=!0,h.startPoint.x=i.x,h.startPoint.y=i.y,h.e=t,h.state="Started",e&&e(h),o()}}function n(t){if(t=t||window.event,t.preventDefault(),h.isActive&&(null==t.targetTouches||1==t.targetTouches.length)){var i=c(t);h.stopPoint.x=i.x,h.stopPoint.y=i.y,h.direction=a(h.startPoint,h.stopPoint),h.distance=l(h.startPoint,h.stopPoint),h.difference={x:h.stopPoint.x-h.startPoint.x,y:h.stopPoint.y-h.startPoint.y},h.e=t,h.state="Moving",e&&e(h)}}function r(t){t=t||window.event,h.isActive=!1,h.e=t,h.state="Stopped",e&&e(h),s()}function o(){document.addEventListener("touchmove",n),document.addEventListener("touchend",r),document.addEventListener("touchcancel",r)}function s(){document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r),document.removeEventListener("touchcancel",r),h.isActive=!1,h.e=null,h.state=null,h.direction=null,h.distance=0,h.difference=null,h.startPoint={x:0,y:0},h.stopPoint={x:0,y:0}}function a(t,e){return Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)?t.x-e.x>0?"left":"right":t.y-e.y>0?"up":"down"}function l(t,e){var i=e.x-t.x,n=t.y-e.y;return Math.round(Math.sqrt(i*i+n*n))}function c(t){t=t||window.event;var e={x:0,y:0};return 1==t.targetTouches.length&&(e.x=t.touches[0].pageX,e.y=t.touches[0].pageY),e}var h={};return h.isActive=!1,h.e=null,h.state=null,h.direction=null,h.distance=0,h.difference=null,h.startPoint={x:0,y:0},h.stopPoint={x:0,y:0},h.threshold=t||1,h.addEvents=function(){document.addEventListener("touchstart",i)},h.removeEvents=function(){document.removeEventListener("touchstart",i)},h.kill=function(){s(),h.removeEvents(),h=null},h}function StackTransition(t,e,i,n){function r(){e?o():k?AssetLoader.loadGroup(new AssetGroup(k,{onComplete:o,onUpdate:null})):console.log("Error: No assets provided")}function o(){w&&"function"==typeof w._onLoadAssetsCallback&&w._onLoadAssetsCallback(w),s(),a(),v(),w&&"function"==typeof w._onBuildCallback&&w._onBuildCallback(w)}function s(){var t=0,i=D;for(A=i-1,t;t<i;t++){var n=(b(),new SmartObject);n.style.width="100%",n.style.height="100%",n.style.overflow="hidden",n.style.color="#fff",n.style.fontWeight="bold",n.style.font="1500%/0px Helvetica",n.style.position="absolute",n._i=t,n.style.display="none",TweenMax.set(n,{x:0,y:0,z:0});var r=document.createElement("div");if(r.style.width="100%",r.style.height="100%",r.style.pointerEvents="none",r.style.opacity=0,r.style.background="rgba(0,0,0,"+w.overlayDarkness+")",!e){var o=SmartObject(AssetLoader.getAsset(k[t]));o.style.position="absolute",o._orgW=o.width||o.naturalWidth,o._orgH=o.height||o.naturalHeight,o._ratio=o._orgH/o._orgW,o._orgRatioW=o._ratio,o._orgRatioH=o._orgW/o._orgH,n._img=o,n.appendChild(o)}n._overlay=r,n.appendChild(r),n.resize=function(t,e){var e=e||this._img;if(e){var i=e.parentNode.offsetWidth,n=e.parentNode.offsetHeight,r=e._ratio,o=Math.ceil(1*i),s=Math.ceil(o*r);s<n&&(s=Math.ceil(1*n),o=Math.ceil(s/r));var a,l;a=Math.ceil((i-o)/2),l=Math.ceil((n-s)/2),e.style.width=o+"px",e.style.height=s+"px",TweenMax.set(e,{x:a,y:l,z:0}),e._x=a,e._y=l,e._width=o,e._height=s}},O.push(n),w.appendChild(n)}O[O.length-1].style.display="block",w&&"function"==typeof w._onAddLayersCallback&&w._onAddLayersCallback(w)}function a(){C=new SmartObject,C.style.width="100%",C.style.height="100%",C.style.display="table",C.style.textAlign="center",C.style.color="#fff",C.style.fontWeight="bold",C.style.font="200%/0px Helvetica",C.style.position="absolute",C.style.backgroundColor=b(),C.style.opacity=0,TweenMax.set(C,{x:0,y:0,z:0});var t=document.createElement("div");t.style.display="table-cell",t.style.verticalAlign="middle",t.style.pointerEvents="none",t.innerHTML="Loading awesomeness...",C._overlay=t,C.appendChild(t),w.appendChild(C),w&&"function"==typeof w._onAddLoaderCallback&&w._onAddLoaderCallback(w)}function l(t,e){if(x._isAnimating||Assets.MAIN_MENU&&Assets.MAIN_MENU._isOpen)return!1;d();var i,n,r=O[A];"up"===e?(A=A>=O.length-1?-1:A,i=O[++A],n="down"):"down"===e?(A=A<=0?O.length:A,i=O[--A],n="up"):"left"===e?(A=A<=0?O.length:A,i=O[--A],n="right"):"right"===e&&(A=A>=O.length-1?-1:A,i=O[++A],n="left"),E={oldLayer:r,newLayer:i,moveDirection:n},w.showLoader&&(S=E,i=C,C.style.opacity=1,C.style.backgroundColor=b()),r&&i&&n&&requestAnimFrame(function(){x.move(r,i,{direction:n,onStart:c,onComplete:h})}),w&&"function"==typeof w._onChangeLayerCallback&&w._onChangeLayerCallback(E)}function c(){w&&"function"==typeof w._onChangeLayerStartCallback&&w._onChangeLayerStartCallback(E)}function h(){if(u(),S){var t=C,e=S.newLayer,i=S.moveDirection;E=S,S=null,x.move(t,e,{direction:i,onStart:c,onComplete:h,delay:w.loaderDelay})}w&&"function"==typeof w._onChangeLayerCompleteCallback&&w._onChangeLayerCompleteCallback(E)}function u(){L=!1}function d(){L=!0}function p(t){if(t=t||window.event,L)return!1;w.clearSlideshowInt();var e=g(t),i=f(t);e>0?Math.abs(i)>=.5&&l(t,"up"):e<0&&Math.abs(i)>=.5&&l(t,"down"),w&&"function"==typeof w._onScrollCallback&&w._onScrollCallback(w)}function f(t){t=t||window.event;var e=t.wheelDelta,i=t.detail;return i?e?e/i/40*i>0?1:-1:-i/3:e/120}function g(t){return t=t||window.event,t.detail<0?1:t.wheelDelta>0?1:-1}function m(t){t=t||window.event;var e=t.target||t.currentTarget;if(!M.down)return!1;e===M.down?l(t,"down"):e===M.up&&l(t,"up"),w.clearSlideshowInt(),w&&"function"==typeof w._onDocumentClickCallback&&w._onDocumentClickCallback(w)}function y(t,e){t=t||window.event;t.target||t.currentTarget;if(L)return!1;w.clearSlideshowInt(),"38"==t.keyCode?l(t,"up"):"40"==t.keyCode||"32"==t.keyCode?l(t,"down"):"37"==t.keyCode||t.keyCode,w&&"function"==typeof w._onKeyDownCallback&&w._onKeyDownCallback(w)}function _(t){if("Stopped"===t.state&&t.distance>t.threshold){if(L)return!1;w.clearSlideshowInt(),"up"===t.direction?l(t.e,"down"):"down"===t.direction?l(t.e,"up"):"left"===t.direction||t.direction}w&&"function"==typeof w._onTouchCallback&&w._onTouchCallback(w)}function v(t){t=t||window.event;var e=0,i=O.length;for(e;e<i;e++){O[e].resize(t)}w&&"function"==typeof w._onResizeCallback&&w._onResizeCallback(t)}function b(){return"#"+Math.random().toString(16).slice(2,8)}var w=document.createElement("div");w.speed=1,w.delay=.1,w.magnitude=2,w.showLoader=!1,w.loaderDelay=.1,w.darkenOverlay=!1,w.overlayDarkness=.5,w.addDesktopEvents=!1!==i,w._gui,w._onInitCallback=null,w._onLoadAssetsCallback=null,w._onBuildCallback=null,w._onAddLayersCallback=null,w._onAddLoaderCallback=null,w._onAddEventsCallback=null,w._onRemoveEventsCallback=null,w._onChangeLayerCallback=null,w._onChangeLayerStartCallback=null,w._onChangeLayerCompleteCallback=null,w._onScrollCallback=null,w._onDocumentClickCallback=null,w._onKeyDownCallback=null,w._onTouchCallback=null,w._onResizeCallback=null,w._slideshowInt=null;var x,T,A,C,E,S,O=[],M={down:null,up:null},L=!1,k=t||["_1.jpg","_2.jpg","_3.jpg"],D=n||k.length,I="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";return w.onDATchange=function(){x.setOptions({speed:w.speed,delay:w.delay,magnitude:w.magnitude,darkenOverlay:w.darkenOverlay});var t=0,e=O.length;for(t;t<e;t++){var i=O[t],n=i._overlay;n.style.background="rgba(0,0,0,"+w.overlayDarkness+")",n.style.opacity=0}},w.setup=function(){r()},w.addEvents=function(){window.addEventListener("resize",v),w.addDesktopEvents&&(window.addEventListener("keydown",y),window.addEventListener("DOMMouseScroll",p),window.addEventListener(I,p),w.addEventListener("click",m)),T.addEvents(),w&&"function"==typeof w._onAddEventsCallback&&w._onAddEventsCallback(w)},w.removeEvents=function(){window.removeEventListener("resize",v),w.addDesktopEvents&&(window.removeEventListener("keydown",y),window.removeEventListener("DOMMouseScroll",p),window.removeEventListener(I,p),w.removeEventListener("click",m)),T.removeEvents(),w&&"function"==typeof w._onRemoveEventsCallback&&w._onRemoveEventsCallback(w)},w.getLayer=function(t){return O[t]},w.getAllLayers=function(){return O},w.kill=function(){w.removeEvents(),T.kill(),E=null,S=null;var t=0,e=O.length;for(t;t<e;t++)O[t]&&O[t].parentNode&&O[t].parentNode.removeChild(O[t]),O[t]=null;O=null,w.removeChild(C),C=null,w.parentNode&&w.parentNode.removeChild(w),w=null},w.changeLayer=l,w.setSlideshowInt=function(){var t=window.event;w._slideshowInt=setInterval(function(){l(t,"down")},8e3)},w.clearSlideshowInt=function(){w._slideshowInt&&(clearInterval(w._slideshowInt),w._slideshowInt=null)},function(){w.style.width="100%",w.style.height="100%",x=new FullScreenStackTransition({speed:Assets.PAGE_TRANSTION_SPEED,allowDeffering:!1}),w.transitionManager=x,T=new TinyTouchController(50,_),w&&"function"==typeof w._onInitCallback&&w._onInitCallback(w)}(),w}var MemoryStats=function(){var t=100,e=0,i=document.createElement("div");i.id="stats",i.style.cssText="width:80px;opacity:0.9;cursor:pointer";var n=document.createElement("div");n.id="ms",n.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;",i.appendChild(n);var r=document.createElement("div");r.id="msText",r.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",r.innerHTML="Memory",n.appendChild(r);var o=document.createElement("div");for(o.id="msGraph",o.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",n.appendChild(o);o.children.length<74;){var s=document.createElement("span");s.style.cssText="width:1px;height:30px;float:left;background-color:#131",o.appendChild(s)}var a=function(t,e,i){var n=t.appendChild(t.firstChild);n.style.height=e+"px",i&&(n.style.backgroundColor=i)};window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var l=Date.now(),c=performance.memory.usedJSHeapSize;return{domElement:i,update:function(){if(!(Date.now()-l<1e3/30)){l=Date.now();var i=performance.memory.usedJSHeapSize-c;c=performance.memory.usedJSHeapSize;var n=i<0?"#830":"#131",s=performance.memory.usedJSHeapSize;t=Math.min(t,s),e=Math.max(e,s),r.textContent="Mem: "+function(t,e){var i=["Bytes","KB","MB","GB","TB"];if(0==t)return"n/a";e=void 0!==e?e:0;var n=Math.pow(10,e),r=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t*n/Math.pow(1024,r))/n+" "+i[r]}(s,2);var h=s/31457280,u=Math.min(30,30-30*h);a(o,u,n)}}}},HM=HM||{};HM.Version="1.0.1";var HM=HM||{};HM.extend=function(t,e){var i=t.apply(t,e);return i._super=i._super||{},i.override=function(t,e){void 0!==this[t]&&(this._super[t]=this[t]),this[t]=e},i},function(){var t=this;t.disableSelection=function(t){void 0!==t.style.MozUserSelect&&(t.style.MozUserSelect="-moz-none"),t.onselectstart=function(){return!1},t.onmousedown=function(){return!1}},t.getHtml=function(t,e){return t.querySelector('div[data-name="'+e+'"]').innerHTML},t.getChildren=function(t,e){return t.querySelector('div[data-name="'+e+'"]').children},t.getData=function(t,e){return t.querySelector('div[data-name="'+e+'"]')},t.copyCSS=function(t,e){t.style.cssText=document.defaultView.getComputedStyle(e,"").cssText},window.Selector=t}();var HM=HM||{};!function(t){function e(t){var e=t.currentTarget;!0===t.lengthComputable&&null!==e._onUpdate&&e._onUpdate(t.loaded/t.total)}function i(t){var n=t.currentTarget;4==n.readyState&&200==n.status&&(n.removeEventListener(Event.PROGRESS,e,!0),n.removeEventListener(Event.READY_STATE_CHANGE,i,!1),n._onComplete&&n._onComplete(n.responseText),n=null)}var n={};n.load=function(n,r,o){var s,o=o||"GET",r=r||{};s=t.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),s._onComplete=r.onComplete||null,s._onUpdate=r.onUpdate||null,s.addEventListener(Event.PROGRESS,e,!0),s.addEventListener(Event.READY_STATE_CHANGE,i,!1),r.mimeType&&s.overrideMimeType&&s.overrideMimeType(r.mimeType),r.withCredentials&&(s.withCredentials=!0),s.open(o,n,!0),s.send(null)},t.HM.Ajax=n}(window);var BrowserDetect={};BrowserDetect.init=function(){BrowserDetect.MOBILE=BrowserDetect.checkMobile(),BrowserDetect.TABLET=BrowserDetect.checkTablet(),BrowserDetect.MOBILE||BrowserDetect.TABLET||(BrowserDetect.DESKTOP=!0),BrowserDetect.MOBILE?BrowserDetect.DEVICE="mobile":BrowserDetect.TABLET?BrowserDetect.DEVICE="tablet":BrowserDetect.DESKTOP&&(BrowserDetect.DEVICE="desktop"),BrowserDetect.BROWSER_NAME=this.searchString(this.dataBrowser)||"An unknown browser",BrowserDetect.BROWSER_VERSION=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",BrowserDetect.OS=this.searchString(this.dataOS)||"an unknown OS",window.chrome&&(window.chrome.webstore||(BrowserDetect.BROWSER_NAME="Opera")),"Firefox"==BrowserDetect.BROWSER_NAME?BrowserDetect.FIREFOX=!0:"Chrome"==BrowserDetect.BROWSER_NAME?BrowserDetect.CHROME=!0:"Safari"==BrowserDetect.BROWSER_NAME?BrowserDetect.SAFARI=!0:"Explorer"==BrowserDetect.BROWSER_NAME?BrowserDetect.IE=!0:"Opera"==BrowserDetect.BROWSER_NAME&&(BrowserDetect.OPERA=!0),BrowserDetect.IE&&BrowserDetect.BROWSER_VERSION<=8&&(BrowserDetect.IE8=!0),BrowserDetect.IE&&9==BrowserDetect.BROWSER_VERSION&&(BrowserDetect.IE9=!0),BrowserDetect.IE&&10==BrowserDetect.BROWSER_VERSION&&(BrowserDetect.IE10=!0),"Mozilla"==BrowserDetect.BROWSER_NAME&&11==BrowserDetect.BROWSER_VERSION&&(BrowserDetect.IE11=!0),BrowserDetect.FIREFOX&&BrowserDetect.BROWSER_VERSION>=10&&(BrowserDetect.TRANSLATE3D_SUPPORT=!0)},BrowserDetect.searchString=function(t){for(var e=0;e<t.length;e++){var i=t[e].string,n=t[e].prop;if(BrowserDetect.BROWSER_VERSIONSearchString=t[e].versionSearch||t[e].identity,i){if(-1!=i.indexOf(t[e].subString))return t[e].identity}else if(n)return t[e].identity}},BrowserDetect.searchVersion=function(t){var e=t.indexOf(BrowserDetect.BROWSER_VERSIONSearchString);if(-1!=e)return parseFloat(t.substring(e+BrowserDetect.BROWSER_VERSIONSearchString.length+1))},BrowserDetect.getOlderSafariVersion=function(t){return t<100?1:t<125.2?1.1:t<312.1?1.2:t<412?1.3:t<523.1?2:t<=523.12?3:void 0},BrowserDetect.dataBrowser=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],BrowserDetect.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"Windows CE",identity:"Windows CE"},{string:navigator.userAgent,subString:"Palm",identity:"Palm"},{string:navigator.userAgent,subString:"Blackberry",identity:"Blackberry"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],BrowserDetect.checkMobile=function(){var t=/iphone|ipod|kindle|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec/i.test(navigator.userAgent.toLowerCase());return 1==t&&(BrowserDetect.TABLET=!1),!0===t},BrowserDetect.checkTablet=function(){var t=/ipad|sch-i800|playbook|xoom|tablet|gt-p1000|gt-p7510|sgh-t849|nexus 7|nexus 10|shw-m180s|a100|dell streak|silk/i.test(navigator.userAgent.toLowerCase());if(!0===/android/i.test(navigator.userAgent.toLowerCase())||!0===t){var e=screen.height,i=screen.width;e>i&&(i=screen.height,e=screen.width),e>=736&&i>=1024?t=!0:(BrowserDetect.MOBILE=!0,t=!1)}return 1==t&&(BrowserDetect.MOBILE=!1),!0===t},BrowserDetect.has3d=function(){var t,e=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var n in i)void 0!==e.style[n]&&(e.style[n]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(i[n]));return document.body.removeChild(e),void 0!==t&&t.length>0&&"none"!==t},BrowserDetect.BROWSER_NAME=null,BrowserDetect.BROWSER_VERSION=null,BrowserDetect.OS=null,BrowserDetect.DEVICE="",BrowserDetect.MOBILE=!1,BrowserDetect.TABLET=!1,BrowserDetect.DESKTOP=!1,BrowserDetect.CHROME=!1,BrowserDetect.SAFARI=!1,BrowserDetect.FIREFOX=!1,BrowserDetect.OPERA=!1,BrowserDetect.IE=!1,BrowserDetect.IE8=!1,BrowserDetect.IE9=!1,BrowserDetect.TRANSLATE3D_SUPPORT=BrowserDetect.has3d(),BrowserDetect.init(),Event.RESIZE="resize",Event.ORIENTATIONCHANGE="orientationchange",Event.LOAD="load",Event.SCROLL="scroll",Event.SELECT="select",Event.SUBMIT="submit",Event.HASHCHANGE="hashchange",Event.BLUR="blur",Event.PROGRESS="progress",Event.CHANGE="change",Event.ABORT="abort",Event.UNLOAD="unload",Event.BEFOREUNLOAD="beforeunload",Event.LOAD="load",Event.PROGRESS="progress",Event.ERROR="error",Event.CONTEXTMENU="contextmenu",Event.COPY="copy",Event.PASTE="paste",Event.READY_STATE_CHANGE="readystatechange",Event.RESET="reset",MouseEvent.CLICK="click",MouseEvent.MOUSE_DOWN="mousedown",MouseEvent.MOUSE_MOVE="mousemove",MouseEvent.MOUSE_UP="mouseup",MouseEvent.RIGHT_CLICK="rightclick",MouseEvent.MOUSE_OVER="mouseover",MouseEvent.MOUSE_OUT="mouseout",MouseEvent.DOUBLE_CLICK="dblclick",MouseEvent.FOCUS="focus",MouseEvent.MOUSE_ENTER="mouseenter",MouseEvent.MOUSE_LEAVE="mouseleave",MouseEvent.ROLL_OVER="mouseenter",MouseEvent.ROLL_OUT="mouseleave",MouseEvent.DRAG_END="dragend",MouseEvent.DRAG_ENTER="dragenter",MouseEvent.DRAG_LEAVE="dragleave",MouseEvent.DRAG_OVER="dragover",MouseEvent.DRAG_START="dragstart",MouseEvent.DROP="drop",MouseEvent.MOUSE_WHEEL="mousewheel","Firefox"==BrowserDetect.BROWSER_NAME&&(MouseEvent.MOUSE_WHEEL="DOMMouseScroll"),KeyboardEvent.KEY_DOWN="keydown",KeyboardEvent.KEY_UP="keyup",KeyboardEvent.KEY_PRESS="keypress",TouchEvent.TOUCH_START="touchstart",TouchEvent.TOUCH_MOVE="touchmove",TouchEvent.TOUCH_END="touchend",TouchEvent.TOUCH_CANCEL="touchcancel",1==BrowserDetect.TABLET||1==BrowserDetect.MOBILE?(MouseAndTouchEvent.MOUSE_DOWN=TouchEvent.TOUCH_START,MouseAndTouchEvent.MOUSE_MOVE=TouchEvent.TOUCH_MOVE,MouseAndTouchEvent.MOUSE_UP=TouchEvent.TOUCH_END,MouseAndTouchEvent.RESIZE=Event.ORIENTATIONCHANGE):(MouseAndTouchEvent.MOUSE_DOWN=MouseEvent.MOUSE_DOWN,MouseAndTouchEvent.MOUSE_MOVE=MouseEvent.MOUSE_MOVE,MouseAndTouchEvent.MOUSE_UP=MouseEvent.MOUSE_UP,MouseAndTouchEvent.RESIZE=Event.RESIZE),MessageEvent.MESSAGE="message",MediaEvent.ABORT="abort",MediaEvent.CANPLAY="canplay",MediaEvent.CAN_PLAY_THROUGH="canplaythrough",MediaEvent.DURATION_CHANGE="durationchange",MediaEvent.EMPTIED="emptied",MediaEvent.ENDED="ended",MediaEvent.ERROR="error",MediaEvent.LOADED_DATA="loadeddata",MediaEvent.LOADED_METADATA="loadedmetadata",MediaEvent.LOAD_START="loadstart",MediaEvent.PAUSE="pause",MediaEvent.PLAY="play",MediaEvent.PLAYING="playing",MediaEvent.PROGRESS="progress",MediaEvent.RATE_CHANGE="ratechange",MediaEvent.SEEKED="seeked",MediaEvent.SEEKING="seeking",MediaEvent.SUSPEND="suspend",MediaEvent.TIME_UPDATE="timeupdate",MediaEvent.VOLUME_CHANGE="volumechange",MediaEvent.WAITING="waiting",Trace.checkConsole=function(){var t=!1;return"undefined"!=typeof console&&(t=!0),t};var trace=Trace;Trace.isEnabled=!0,Trace.displayOnScreen=!1,Trace.onScreenMaxLines=50,Trace._onScreenDiv=null,Trace._fieldLines=null,Trace._traceArray=[],Trace._consoleAvailable=Trace.checkConsole();var GoogleAnalytics={};GoogleAnalytics.trackPage=function(t){null!==t?ga("send","pageview",t):ga("send","pageview")},GoogleAnalytics.trackEvent=function(t,e,i,n,r){null===r&&(r="0"),ga("send","event",t,e,label,n,{nonInteraction:r})},GoogleAnalytics.trackSocialEvent=function(t,e,i){ga("send","social",t,e,i)};var HM=HM||{};!function(t){function e(){f=new AudioContext,f.createGain=f.createGain||f.createGainNode,p=f.createGain(),p.connect(f.destination),d=f.createGain(),d.connect(p),u=f.createGain(),u.connect(p)}function i(t){
return Object.prototype.toString.call(t).indexOf("String")>-1?"Path":"AudioObject"}function n(){return _}function r(){return f}function o(){return g.fallback?_smMasterVolume:p.gain.value}function s(t){t>1?t=1:t<0&&(t=0),g.fallback?(_smMasterVolume=t,updateSMMasterVolume()):p.gain.value=t}function a(){return u.gain.value}function l(t){t>1?t=1:t<0&&(t=0),u.gain.value=t}function c(){return d.gain.value}function h(t){t>1?t=1:t<0&&(t=0),d.gain.value=t}var u,d,p,f,g=document.createElement("a"),m=[],y=0,_=!1;g.IOS_READY="HM.Audio.IOS_READY",g.init=function(i){if(!_){try{if(!0===i)throw new Error("forcing HTML5 audio");t.AudioContext=t.AudioContext||t.webkitAudioContext,g.fallback=!1,e()}catch(t){f={},f.createMediaElementSource=function(t){return t},g.fallback=!0}_=!0}},g.createAudioObject=function(t,e,i,n,r){var o,s,a={},l=i;if(e&&!0!==i&&(a.loop=!0,a.loopStart=n,a.loopEnd=r,l=!1),g.fallback)s=HM.AssetLoader.get(t),s.setAttribute("loop",!0),o={},o.path=t,o.params=a,o.buffer=s,o.getVolume=function(){return this.buffer.volume},o.setVolume=function(t){this.buffer.volume=t},Object.defineProperty(o,"volume",{get:o.getVolume,set:o.setVolume});else{s=HM.AssetLoader.get(t);var c=f.createBufferSource();o=new HM.AudioObject(t,c,s,f,u,d,a),o.volume=1}return o.multiShot=l||!1,o},g.play=function(t,e,n,r){var o=void 0!==n?n:0,s=!1;if(g.fallback){var a=t.buffer;a||(a=HM.AssetLoader.get(t),a.pause(),a.currentTime=0),a.volume=e||1,a.play()}else{var l;t.path;if(s="AudioObject"==i(t)){if(t.paused)return void g.resume(t);if(!t.multiShot){if(t.paused)return void g.resume(t);if(t.playing)return}l=f.createBufferSource(),l.buffer=t.buffer,t.setSource(l),t.playing=!0,t.volume=void 0!==e?e:t.volume;var c=t.params;t.startTime=f.currentTime,t.startedAt=o,c.loop&&(l.loop=!0,l.loopStart=c.loopStart||0,c.loopEnd&&(l.loopEnd=c.loopEnd||0))}else{l=f.createBufferSource();var a=HM.AssetLoader.get(t);l.buffer=a;var h=f.createGain();l.connect(h),h.gain.value=e||1,h.connect(u)}l.start||(l.start=l.noteOn),l.start(0,o),s?t.pitch=r||t.pitch:l.playbackRate.value=r||1}},g.stop=function(t){if(t.playing=!1,t.paused=!1,g.fallback)t.stop();else{var e=t.source;t.startOffset=0,e.stop||(e.stop=e.noteOff),e.stop(0)}},g.pause=function(t){if(g.fallback){t.buffer.pause()}else{var e;t.startOffset+=f.currentTime-t.startTime,t.pausedAt=t.currentTime,e=t.source,e.stop||(e.stop=e.noteOff),e.stop(0)}t.playing=!1,t.paused=!0},g.resume=function(t){if(g.fallback)t.resume();else if(t.paused){var e=t.startOffset%t.buffer.duration;t.paused=!1,g.play(t,void 0,e)}},g.addEffect=function(t){var e=y;return m.push({effect:t,id:e}),y++,e},g.removeEffect=function(t){var e=0,i=m.length;for(e;e<i;e++)if(m[e].id==t){m.splice(e,1);break}},g.unlockIOSSound=function(t){function e(){if(n.playbackState===n.PLAYING_STATE||n.playbackState===n.FINISHED_STATE){clearInterval(r);var t=new CustomEvent(g.IOS_READY);g.dispatchEvent(t)}}var i=f.createBuffer(1,1,22050),n=f.createBufferSource();n.buffer=i,n.connect(f.destination),n.start||(n.start=n.noteOn),n.start(0);var r=setInterval(e,100)},g.noteToFreq=function(t){return 440*Math.pow(2,(t-49)/12)},Object.defineProperty(g,"initialized",{get:n}),Object.defineProperty(g,"mainBus",{get:r}),Object.defineProperty(g,"masterVolume",{get:o,set:s}),Object.defineProperty(g,"dryVolume",{get:a,set:l}),Object.defineProperty(g,"wetVolume",{get:c,set:h}),t.HM.Audio=g}(window);var HM=HM||{};HM.AudioObject=function(t,e,i,n,r,o,s){function a(){if(!m.source.buffer)return 0;var t;return t=m.paused?m.pausedAt:n.currentTime-m.startTime+m.startedAt,t>=m.source.buffer.duration&&(t=m.source.buffer.duration),t}function l(t){HM.Audio.stop(m),HM.Audio.play(m,d(),t)}function c(){return y}function h(t){y=t,m.source.playbackRate.value=t}function u(){return m.source.buffer?m.source.buffer.duration:0}function d(){return g.gain.value}function p(t){g.gain.value=t}var f,g,m={},y=1;return m.addEffect=function(t){"dry"==t.outputType?f.addInsert(t):f.addSend(t)},m.removeEffect=function(t){"dry"==t.outputType?f.removeInsert(t):f.removeSend(t)},m.setSource=function(t){m.source=t,t.connect(g),f.update()},Object.defineProperty(m,"currentTime",{get:a,set:l}),Object.defineProperty(m,"pitch",{get:c,set:h}),Object.defineProperty(m,"duration",{get:u}),Object.defineProperty(m,"volume",{get:d,set:p}),function(){m.playing=!1,m.paused=!1,g=n.createGain(),f=new HM.AudioSignalChain(g,r,o),m.path=t,m.source=e,m.buffer=i,m.params=s,m.startTime=0,m.startOffset=0,m.pausePosition=0,m.setSource(e)}(),m};var HM=HM||{};HM.AudioSignalChain=function(t,e,i){function n(){var i=1,n=o.dryEffects.length;if(n>0){for(t.connect(o.dryEffects[0].input),i;i<n;i++)o.dryEffects[i-1].output.connect(o.dryEffects[i].input);o.dryEffects[i-1].output.connect(e)}else t.connect(e)}function r(){var e=1,n=o.wetEffects.length;if(n>0){for(t.connect(o.wetEffects[0].input),e;e<n;e++)o.wetEffects[e-1].output.connect(o.wetEffects[e].input);o.wetEffects[e-1].output.connect(i)}}var o={};return o.addInsert=function(t){o.dryEffects.push(t),o.update()},o.addSend=function(t){o.wetEffects.push(t),o.update()},o.removeInsert=function(t){var e=0,i=o.dryEffects.length;for(e;e<i;e++)if(o.dryEffects[e].id==t.id){o.dryEffects.splice(e,1);break}o.update()},o.removeSend=function(t){var e=0,i=o.wetEffects.length;for(e;e<i;e++)if(o.wetEffects[e].id==t.id){o.wetEffects.splice(e,1);break}o.update()},o.update=function(){t.disconnect(),n(),r()},function(){o.dryEffects=[],o.wetEffects=[]}(),o};var HM=HM||{};!function(){function t(){d=!1,e()}function e(){u.length>0?d||(d=!0,u[0].load(),u.shift()):n&&n()}var i={};i.IMAGE="IMAGE",i.AUDIO="AUDIO",i.DATA_URI="DATA_URI",i.JSON="JSON",i.UNKNOWN="UNKNOWN",i.ASSET_GROUP="ASSET_GROUP",i.DATA_URI_GROUP="DATA_URI_GROUP",i.IMAGE_LOADER="IMAGE_LOADER",i.AUDIO_LOADER="AUDIO_LOADER",i.AUDIO_BUFFER_LOADER="AUDIO_BUFFER_LOADER",i.DATA_URI_LOADER="DATA_URI_LOADER",i.JSON_LOADER="JSON_LOADER",i.imageLoader=null,i.audioLoader=null,i.dataURILoader=null,i.jsonLoader=null,i.assetVersion="",i.defaultPath="";var n,r,o,s={jpg:"jpg",png:"png",gif:"gif"},a={mp3:"mp3",wav:"wav",ogg:"ogg"},l={txt:"txt",uri:"uri"},c={json:"json"},h=[],u=[],d=!1,p=!1;i.init=function(t,e){p||(i.defaultPath=t||"",i.assetVersion=e||"",p=!0)},i.load=function(i,r){if(!p)throw new Error("You need to initialize Assetloader before loading a group");n=r.onComplete?r.onComplete:null,1===i.length&&(i[0].weight=100);var o=new HM.AssetLoadCollection(i,r,t);u.push(o),d||e()},i.loadSingle=function(t,e){if(i.assetExist(t))return e.onUpdate&&e.onUpdate(1),void(e.onComplete&&e.onComplete());var e=e||{},n=e.customPath||i.defaultPath;o=t,r=e.onComplete;var s=new Image;s.addEventListener(Event.LOAD,r),s.src=n+t;var a=i.getLoader(o);a.assets.push({asset:s,id:o}),h.push({id:o,loader:a})},i.encode64=function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",n=0;n<t.length;){var r,o,s=255&t.charCodeAt(n++),a=255&t.charCodeAt(n++),l=255&t.charCodeAt(n++),c=s>>2,h=(3&s)<<4|a>>4;isNaN(a)?r=o=64:(r=(15&a)<<2|l>>6,o=isNaN(l)?64:63&l),i+=e.charAt(c)+e.charAt(h)+e.charAt(r)+e.charAt(o)}return i},i.installLoader=function(t){switch(t){case i.IMAGE:i.imageLoader=new HM.ImageLoader(h);break;case i.AUDIO:if(HM.Audio){if(!0!==HM.Audio.initialized)throw new Error("AssetLoader.installLoader AUDIO -> HM.Audio not initialized");!0===HM.Audio.fallback?i.audioLoader=new HM.AudioLoader(h):i.audioLoader=new HM.AudioBufferLoader(h)}else i.audioLoader=new HM.AudioLoader(h);break;case i.DATA_URI:i.dataURILoader=new HM.DataURILoader(h);break;case i.JSON:i.jsonLoader=new HM.JSONLoader(h)}},i.get=function(t){if(!p)throw new Error("You need to initialize Assetloader before attempting to retrive an asset - id: "+t);var e=0,i=h.length;for(e;e<i;e++)if(t===h[e].id)return h[e].loader.getAsset(t);throw new Error("AssetLoader -> asset with id: "+t+", not found")},i.destroy=function(t){if(!p)throw new Error("You need to initialize Assetloader before attempting to retrive an asset - id: "+t);var e=0,i=h.length;for(e;e<i;e++)if(t===h[e].id){h[e]=null,h.splice(e,1);break}},i.assetExist=function(t){var e=0,i=h.length;for(e;e<i;e++)if(t===h[e].id)return!0;return!1},i.getFileExtension=function(t){var e=t.split("."),i=e[e.length-1];return void 0!==s[i]?HM.AssetLoader.IMAGE:void 0!==a[i]?HM.AssetLoader.AUDIO:void 0!==l[i]?HM.AssetLoader.DATA_URI:void 0!==c[i]?HM.AssetLoader.JSON:HM.AssetLoader.UNKNOWN},i.getLoader=function(t){var e=i.getFileExtension(t);switch(e){case i.IMAGE:return i.imageLoader||i.installLoader(e),i.imageLoader;case i.JSON:return i.jsonLoader||i.installLoader(e),i.jsonLoader;case i.DATA_URI:return i.dataURILoader||i.installLoader(e),i.dataURILoader;case i.AUDIO:return i.audioLoader||i.installLoader(e),i.audioLoader;default:throw new Error("AssetLoader -> "+e+" is not a valid filetype >> HM.AssetLoader.getLoader")}},HM.AssetLoader=i}();var HM=HM||{};HM.AssetGroup=function(t,e){var i={},n=e||{};return i.TYPE=HM.AssetLoader.ASSET_GROUP,i.data=t,i.weight=n.weight||0,i.onComplete=n.onComplete||null,i.customPath=n.customPath||null,i.onUpdate=n.onUpdate||null,i};var HM=HM||{};HM.AssetLoadCollection=function(t,e,i){function n(){p||(p=!0,a=u[0].data.length,l=0,void 0!==u[0].weight&&null!==u[0].weight||(u[0].weight=100/h.length),r())}function r(){var t=u[0].data[l],e=HM.AssetLoader.getLoader(t);u[0].onUpdate&&u[0].onUpdate(l/a),e.path=u[0].customPath||HM.AssetLoader.defaultPath,e.load(t,o,u[0])}function o(){l++,d=Math.ceil(l/a*u[0].weight)/100,s(),l==a?(f+=d,u[0].onComplete&&u[0].onComplete(),u.shift(),u.length>0?(p=!1,setTimeout(n,100)):(h=null,u=null,i())):r()}function s(){u[0].onUpdate&&u[0].onUpdate(l/a),e.onUpdate&&e.onUpdate(d+f)}var a,l,c={},h=t,u=t,d=0,p=!1,f=0;return c.load=function(){n()},c};var HM=HM||{};HM.AbstractLoader=function(t){var e={};return e.assets=[],e.asset=null,e.url=null,e.id=null,e.completeCallback=null,e.path=null,e.load=function(t,i){if(HM.AssetLoader.assetExist(t))return i(),!0;e.id=t;var n=e.path+t+(""!==HM.AssetLoader.assetVersion?"?v=":"")+HM.AssetLoader.assetVersion;if(e.url=n,e.completeCallback=i,"Opera"===BrowserDetect.BROWSER_NAME||"Firefox"===BrowserDetect.BROWSER_NAME){-1!==e.url.indexOf(".mp3")&&(e.url=e.url.replace(".mp3",".ogg"))}return!1},e.onLoad=function(i){e.assets.push({asset:e.asset,id:e.id}),t.push({id:e.id,loader:e}),e.completeCallback()},e.getAsset=function(t){var i=0,n=e.assets.length;for(i;i<n;i++)if(t===e.assets[i].id)return e.assets[i].asset;throw new Error("AbstractLoader -> asset with id: "+t+", not found")},e.onError=function(t){throw new Error("Error Loading file >> "+e.url)},e};var HM=HM||{};HM.ImageLoader=function(t){"use strict";function e(t){i(),r.asset.removeEventListener("load",r.onLoad,!0),r.asset.removeEventListener("error",r.onError,!0),r.onLoad(t)}function i(){var t=asset.width,e=asset.height;id.indexOf("@2")>-1&&(t/=2,e/=2),asset.width=t,asset.height=e,asset._orgW=t,asset._orgH=e,asset._ratio=e/t}function n(t){r.asset.removeEventListener("load",r.onLoad,!0),r.asset.removeEventListener("error",r.onError,!0),r.onError(t)}var r=HM.extend(HM.AbstractLoader,[t]);return r.type=HM.AssetLoader.IMAGE_LOADER,r.override("load",function(t,i){r._super.load(t,i)||(r.asset=new Image,r.asset.addEventListener("load",e,!0),r.asset.addEventListener("error",n,!0),r.asset.style.position="absolute",r.asset.src=r.url)}),r.override("getAsset",function(t){var e=r._super.getAsset(t),i=e.cloneNode(!0);return i.style.position="absolute",i}),r};var HM=HM||{};HM.AudioLoader=function(t){function e(t){n.asset.removeEventListener("canplaythrough",e,!1),n.asset.removeEventListener("error",i,!1),n.onLoad(t)}function i(t){n.asset.removeEventListener("canplaythrough",e,!1),n.asset.removeEventListener("error",i,!1),n.onError(t)}var n=HM.extend(HM.AbstractLoader,[t]);return n.type=HM.AssetLoader.AUDIO_LOADER,n.override("load",function(t,r){n._super.load(t,r)||(n.asset=new Audio,n.asset.addEventListener("canplaythrough",e,!1),n.asset.addEventListener("error",i,!1),n.asset.src=n.url)}),n};var HM=HM||{};HM.AudioBufferLoader=function(t){function e(t){t.currentTarget.onerror=null,t.currentTarget.onload=null,t.currentTarget=null,HM.Audio.mainBus.decodeAudioData(t.target.response,n,r)}function i(t){o.onError(null)}function n(t){t||trace("bufferDecodeSucess - error decoding file data","AudioBufferLoader"),o.asset=t,o.onLoad(null)}function r(){if(trace("bufferDecodeError","AudioBufferLoader"),"Opera"===BrowserDetect.BROWSER_NAME)throw new Error("AudioBufferLoader bufferDecodeError - mp3 format is not supported by Opera. Please provide another format (ogg etc.)");o.onError(null)}var o=HM.extend(HM.AbstractLoader,[t]);return o.type=HM.AssetLoader.AUDIO_BUFFER_LOADER,o.override("load",function(t,n){if(!o._super.load(t,n)){var r=new XMLHttpRequest;r.open("GET",o.url,!0),r.responseType="arraybuffer",r.onerror=i,r.onload=e,r.send()}}),o};var ContentManager=new Object;ContentManager.AUTOMATICALLY_TRACK_GOOGLE_ANALYTICS=!0,ContentManager.SHOW_TRACES=!1,ContentManager.USE_HISTORY_API=!1,ContentManager.DEFAULT_URL=document.location.protocol+"://"+window.location.host,ContentManager.DEFAULT_SUBFOLDER="",ContentManager._activeTemplates=[],ContentManager._templateRegister=[],ContentManager._templateGroups=[],ContentManager._newPath="",ContentManager._blocked=!1,ContentManager._defaultPath="home",ContentManager._xml=null,ContentManager._prevTemplateObj=null,ContentManager._passedVariables=null,ContentManager.init=function(t,e){ContentManager.trace("init();"),"Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=9&&(ContentManager.USE_HISTORY_API=!1),ContentManager._xml=t,e&&(ContentManager._defaultPath=e,ContentManager.trace(ContentManager._defaultPath,"_defaultPath")),1==ContentManager.USE_HISTORY_API?window.addEventListener("popstate",ContentManager.onHashChange):window.addEventListener("hashchange",ContentManager.onHashChange),"Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=7&&ContentManager.autoCheck(),ContentManager.onHashChange()},ContentManager.sortArray=function(t,e){var i=t.slice();if(!e.length)return i.sort();var n=Array.prototype.slice.call(e);return i.sort(function(t,e){for(var i=n.slice(),r=i.shift();t[r]==e[r]&&i.length;)r=i.shift();return t[r]==e[r]?0:t[r]>e[r]?1:-1})},ContentManager.path=function(t){"object"==typeof t&&(t=ContentManager.composeFullPathFromXML(t)),ContentManager.trace("path();"),ContentManager.trace(t,"newPath"),1==ContentManager.USE_HISTORY_API?(t="/"+ContentManager.DEFAULT_SUBFOLDER+t,history.pushState(t,t,t),ContentManager.onHashChange()):window.location.hash="/"+t},ContentManager.nextTemplate=function(t){ContentManager.trace("nextTemplate();"),ContentManager._passedVariables=t,ContentManager._blocked=!1,ContentManager.onHashChange()},ContentManager.addTemplate=function(t,e){ContentManager._templateRegister.push({templateName:t,JSClass:e})},ContentManager.addTransitionGroup=function(t,e){ContentManager._templateGroups.push({name:t,group:e})},ContentManager.getTransitionGroup=function(t,e){var i=null,n=ContentManager._templateGroups.length,r=null,o=null,s=null;for(i=0;i<n;i+=1)if(r=ContentManager._templateGroups[i],o=r.group,-1!=o.indexOf(t)&&-1!=o.indexOf(e)){s=r.name;break}return s},ContentManager.composeFullPathFromXML=function(t){var e=t.getAttribute("data-path"),i=new Array;e&&i.unshift(e);for(var n=t.parentNode,r=0;e&&(e=n.getAttribute("data-path"),e&&i.unshift(e),n=n.parentNode,!((r+=1)>10)););return i.join("/")},ContentManager.getTransitionIndex=function(t){},ContentManager.isContentSupported=function(t){var e=ContentManager.findContent(ContentManager.extractPath(t).split("/")),i=!1;return e&&(templateName=e.getAttribute("data-template"),templateName&&ContentManager.findTemplateFromName(templateName)&&(i=!0)),i},ContentManager.updateMetaTags=function(){var t=ContentManager._newPath.split("/");if(""==t[0]&&(t[0]="home"),selectedPageData=Assets.DATA_URL.pages[t[0]],selectedPageData){if(selectedPageData.subpages&&t.length>1)for(var e=1;e<t.length;e++)""!=t[e]&&(selectedPageData=selectedPageData.subpages[t[e]]);selectedPageData||(selectedPageData=Assets.DATA_URL.defaults),document.head.querySelector("title").innerHTML=selectedPageData.meta.title,document.head.querySelector('[name="description"]').setAttribute("content",selectedPageData.meta.description),document.head.querySelector('[property="og:title"]').setAttribute("content",selectedPageData.meta.title),document.head.querySelector('[property="og:description"]').setAttribute("content",selectedPageData.meta.description),document.head.querySelector('[property="og:image"]').setAttribute("content",selectedPageData.meta.image),document.head.querySelector('[property="og:url"]').setAttribute("content",Assets.DATA_URL.defaults.baseUrl+selectedPageData.url)}},ContentManager.onHashChange=function(){if(ContentManager.trace("-----------------------------"),0==ContentManager._blocked){var t="";if(null!=history){var e=window.location.href;t=e.substring(ContentManager.DEFAULT_URL.length+ContentManager.DEFAULT_SUBFOLDER.length,e.length)}0==ContentManager.USE_HISTORY_API&&(t=window.location.hash),ContentManager._newPath=ContentManager.extractPath(t);var i,n,r,o,s=ContentManager._newPath.split("/"),a=new Array;for(ContentManager.updateMetaTags(),""==s[0]&&(s[0]=ContentManager._defaultPath),ContentManager.trace(s,"pathArr");s.length>0;)i=ContentManager.findContent(s),i&&(n=i.getAttribute("data-template"))&&(r=ContentManager.findTemplateLevelFromName(n),!1===r&&(r=s.length-1),o=i.getAttribute("data-path"),ContentManager.trace("new candidate"),ContentManager.trace(o,"templatePath"),ContentManager.trace(n,"templateName"),ContentManager.trace(r,"templateLevel"),a.push({xml:i,path:o,templateName:n,level:r})),s.pop();a=ContentManager.sortArray(a,["level"]);var l,c,h=0,u=a.length,d="none",p=ContentManager._activeTemplates;for(ContentManager.trace(a.length,"candidates.length"),h=0;h<u&&(l=a[h],c=l.level,null==p[c]?d="push":p[c].path==l.path&&-1!=p[c].fullPath.indexOf(ContentManager.composeFullPathFromXML(l.xml))||(d="pop"),"none"==d);h+=1);if("none"==d&&a.length<p.length&&l&&(d="pop"),ContentManager.trace(d,"type"),"none"!=d)if(ContentManager._blocked=!0,"pop"==d){var f=p.pop(),g=f.templateData;ContentManager._passedVariables&&(g.setPassedVariables(ContentManager._passedVariables),ContentManager._passedVariables=null);var m=new TemplateData;m.setTemplateName(l.templateName),m.setLevel(l.level),m.setTemplatePath(l.path),g.setNextTemplateData(m),ContentManager._prevTemplateObj=f,f.template.templateOut()}else if("push"==d){ContentManager.trace("push candidate"),ContentManager.trace(l.path,"candidate.path"),ContentManager.trace(l.templateName,"candidate.templateName"),ContentManager.trace(l.level,"candidate.level");var y=ContentManager.findTemplateFromName(l.templateName);if(y){var g=new TemplateData;g.setXML(l.xml),g.setLevel(l.level),g.setTemplatePath(l.path),g.setTemplateName(l.templateName);var _=ContentManager.composeFullPathFromXML(l.xml);g.setTemplateFullPath(_),ContentManager._prevTemplateObj&&(g.setPrevTemplateData(ContentManager._prevTemplateObj.templateData),ContentManager._prevTemplateObj=null),ContentManager._passedVariables&&(g.setPassedVariables(ContentManager._passedVariables),ContentManager._passedVariables=null);var v=new y(g);if(1==ContentManager.AUTOMATICALLY_TRACK_GOOGLE_ANALYTICS){var b=ContentManager.composeFullPathFromXML(l.xml);_gaq.push(["_trackPageview",b])}var w={template:v,path:l.path,templateName:l.templateName,fullPath:_,xml:l.xml,templateData:g};ContentManager._prevTemplateObj=w,p.push(w),v.templateIn()}else ContentManager._blocked=!1,trace("ContentManger.js unable to find template")}}},ContentManager.findContent=function(t){for(var e,i,n,r,o=ContentManager.cloneArray(t),s=o[0],a=ContentManager._xml,l=!1,c=0,h=0;s;){for(r=a.children,n=r.length,i=0;i<n;i+=1)if(e=r[i],e.getAttribute("data-path")==s){o.shift(),s=o[0],a=e,l=!0,h+=1;break}(!l||!s||c>10)&&(s=null),c+=1}return h!=t.length&&(a=null),a},ContentManager.extractPath=function(t){var e,i,n=t.split("#"),r=n[n.length-1].split("/"),o=new Array,s=r.length;for(e=0;e<s;e+=1)null!==(i=r[e])&&""!==i&&o.push(i);return o.join("/")},ContentManager.findTemplateFromName=function(t){var e,i,n,r=ContentManager._templateRegister,o=r.length;for(e=0;e<o;e+=1)if(i=r[e],i.templateName==t){n=i.JSClass;break}return n},ContentManager.findTemplateLevelFromName=function(t){var e=!1,i=t.match(/\d+/);return i&&(e=i),e},ContentManager.autoCheck=function(){function t(){var n=window.location.hash;n!=e&&(e=n,ContentManager.onHashChange()),setTimeout(t,1e3*i)}ContentManager.trace("autoCheck();");var e=window.location.hash,i=.2;setTimeout(t,1e3*i)},ContentManager.cloneArray=function(t){var e,i=t.length,n=new Array;for(e=0;e<i;e+=1)n.push(t[e]);return n},ContentManager.trace=function(t,e){ContentManager.SHOW_TRACES&&(e||(e=""),trace(t,"ContentManager.js "+e))};var SmartObjectRenderer={};SmartObjectRenderer.turnedOn=!1,SmartObjectRenderer.objectsToMove=null,SmartObjectRenderer.renderOnTweenMaxTicker=function(){SmartObjectRenderer.objectsToMove=new Array,TweenMax.ticker.addEventListener("tick",SmartObjectRenderer.render,!0),SmartObjectRenderer.turnedOn=!0},SmartObjectRenderer.render=function(){for(var t=SmartObjectRenderer.objectsToMove.length,e=0;e<t;e++){var i=SmartObjectRenderer.objectsToMove[e];SmartObject.update(i),i.___firstRun=!1,i.___isSetToMove=!1}SmartObjectRenderer.objectsToMove=[]},SmartObject.defaults={_x:0,_y:0,_z:0,_rotation:0,_rotationX:0,_rotationY:0,_rotationZ:0,_scaleX:1,_scaleY:1,_opacity:1,_skewX:0,_skewY:0,_perspective:null,_transformStyle:"flat",_backfaceVisibility:"hidden",_transformOriginX:50,_transformOriginY:50,_transformOriginZ:50},SmartObject.convert=function(t,e){return t.___isSmartObject=!0,t.___firstRun=!0,t.___hasHadAdvancedStyle=!1,t.___currTranslate=null,t.___isSetToMove=!1,t.___useRounded=!1,t.___use3D=!0,t.___doNotUseTranslate=!1,t._getWidth=SmartObject.getWidth,t._getHeight=SmartObject.getHeight,t._dispatchCustomEvent=SmartObject.dispatchCustomEvent,"Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=7&&(t.___compensateX=0,t.___compensateY=0,t._setter=new Array,t.attachEvent("onpropertychange",update)),"Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=8?(t.___compensateX=0,t.___compensateY=0,SmartObject.setProperty(t,"_x",e._x,SmartObject.updateIE8),SmartObject.setProperty(t,"_y",e._y,SmartObject.updateIE8),SmartObject.setProperty(t,"_rotation",e._rotation,SmartObject.updateIE8),SmartObject.setProperty(t,"_scaleX",e._scaleX,SmartObject.updateIE8),SmartObject.setProperty(t,"_scaleY",e._scaleY,SmartObject.updateIE8),SmartObject.setProperty(t,"_opacity",e._opacity,SmartObject.updateIE8),SmartObject.setProperty(t,"_transformOriginX",e._transformOriginX,SmartObject.updateIE8),SmartObject.setProperty(t,"_transformOriginY",e._transformOriginY,SmartObject.updateIE8)):(SmartObject.setProperty(t,"_x",e._x,SmartObject.setToUpdate),SmartObject.setProperty(t,"_y",e._y,SmartObject.setToUpdate),SmartObject.setProperty(t,"_z",e._z,SmartObject.setToUpdate),SmartObject.setProperty(t,"_rotationX",e._rotationX,SmartObject.setToUpdate),SmartObject.setProperty(t,"_rotationY",e._rotationY,SmartObject.setToUpdate),SmartObject.setProperty(t,"_rotationZ",e._rotationZ,SmartObject.setToUpdate),SmartObject.setProperty(t,"_rotation",e._rotation,SmartObject.setToUpdate),SmartObject.setProperty(t,"_scaleX",e._scaleX,SmartObject.setToUpdate),SmartObject.setProperty(t,"_scaleY",e._scaleY,SmartObject.setToUpdate),SmartObject.setProperty(t,"_scale",1,SmartObject.setScale),SmartObject.setProperty(t,"_skewX",e._skewX,SmartObject.setToUpdate),SmartObject.setProperty(t,"_skewY",e._skewY,SmartObject.setToUpdate),SmartObject.setProperty(t,"_opacity",e._opacity,SmartObject.setOpacity),SmartObject.setProperty(t,"_transformOriginX",e._transformOriginX,SmartObject.setTransformOrigin),SmartObject.setProperty(t,"_transformOriginY",e._transformOriginY,SmartObject.setTransformOrigin),SmartObject.setProperty(t,"_transformOriginZ",e._transformOriginZ,SmartObject.setTransformOrigin),SmartObject.setProperty(t,"_perspective",e._perspective,SmartObject.setPerspective),SmartObject.setProperty(t,"_transformStyle",e._transformStyle,SmartObject.setTransformStyle),SmartObject.setProperty(t,"_backfaceVisibility",e._backfaceVisibility,SmartObject.setBackfaceVisibility)),t.___firstRun=!1,SmartObject.update(t),t},SmartObject.prefix=function(){if("Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<="8")return"";var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];"WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1];return"moz"==e&&(e="Moz"),e}(),SmartObject.getWidth=function(){var t=this,e=0;if(null==t.parentNode)document.body.appendChild(t),e=t.offsetWidth,document.body.removeChild(t);else if(0==t.offsetWidth){var i=t.parentNode;document.body.appendChild(t),e=t.offsetWidth,i.appendChild(t)}else e=t.offsetWidth;return e},SmartObject.getHeight=function(){var t=this,e=0;if(null==t.parentNode)document.body.appendChild(t),e=t.offsetHeight,document.body.removeChild(t);else if(0==t.offsetHeight){var i=t.parentNode;document.body.appendChild(t),e=t.offsetHeight,i.appendChild(t)}else e=t.offsetHeight;return e},SmartObject.dispatchCustomEvent=function(t){var e=this;if(document.createEventObject&&"Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=8){var i=document.createEventObject();return e.fireEvent("on"+t,i)}var i=document.createEvent("HTMLEvents");return i.initEvent(t,!0,!0),!e.dispatchEvent(i)},SmartObject.setProperty=function(t,e,i,n){SmartObject.extend(t,e,n),t[e]=i},SmartObject.extend=function(t,e,i){Object.defineProperty?Object.defineProperty(t,e,{get:function(){return e},set:function(n){e=n,i(t,n)}}):t.__defineGetter__&&(t.__defineGetter__(e,function(){return e}),t.__defineSetter__(e,function(n){e=n,i(t,n)}))},SmartObject.setToUpdate=function(t){1==SmartObjectRenderer.turnedOn?0==t.___isSetToMove&&(t.___isSetToMove=!0,SmartObjectRenderer.objectsToMove.push(t)):SmartObject.update(t)},SmartObject.setBackfaceVisibility=function(t,e){t.style[SmartObject.prefix+"BackfaceVisibility"]=e},SmartObject.setPerspective=function(t,e){t.style[SmartObject.prefix+"Perspective"]=e+"px"},SmartObject.setTransformStyle=function(t,e){t.style[SmartObject.prefix+"TransformStyle"]=e},SmartObject.setOpacity=function(t,e){1!=t._opacity?t.style.opacity=t._opacity:t.style.opacity=null},SmartObject.setScale=function(t,e){t._scaleX=e,t._scaleY=e},SmartObject.setTransformOrigin=function(t,e){50!=t._transformOriginX||50!=t._transformOriginY||50!=t._transformOriginZ?1==BrowserDetect.TRANSLATE3D_SUPPORT&&50!=t._transformOriginZ&&1==t.___use3D?t.style[SmartObject.prefix+"TransformOrigin"]=t._transformOriginX+"% "+t._transformOriginY+"% "+t._transformOriginZ+"%":t.style[SmartObject.prefix+"TransformOrigin"]=t._transformOriginX+"% "+t._transformOriginY+"%":t.style[SmartObject.prefix+"TransformOrigin"]=null},SmartObject.update=function(t){if(0==t.___firstRun){var e,i=t._x,n=t._y;1==t.___useRounded&&(i=Math.round(t._x),n=Math.round(t._y)),1==BrowserDetect.TRANSLATE3D_SUPPORT&&1==t.___use3D?(e="translate3d("+i+"px, "+n+"px, "+t._z+"px)",0!=t._rotationX&&(e+=" rotateX("+t._rotationX+"deg)"),0!=t._rotationY&&(e+=" rotateY("+t._rotationY+"deg)"),0!=t._rotationZ&&(e+=" rotateZ("+t._rotationZ+"deg)")):e="translate("+i+"px, "+n+"px)",0!=t._rotation&&(e+=" rotate("+t._rotation+"deg)"),1==t._scaleX&&1==t._scaleY||(e+=" scale("+t._scaleX+", "+t._scaleY+")"),0==t._skewX&&0==t._skewY||(e+=" skew("+t._skewX+"deg, "+t._skewY+"deg)"),1==t.___doNotUseTranslate?(t.style.top=n+"px",t.style.left=i+"px"):e!=t.___currTranslate&&(t.style[SmartObject.prefix+"Transform"]=e,t.___currTranslate=e)}},SmartObject.updateFilters=function(t,e){if(0!=t._blur||0!=t._grayscale||0!=t._sepia||1!=t._contrast||0!=t._brightness||0!=t._invert||1!=t._saturate){var i=t._brightness;"Chrome"==BrowserDetect.BROWSER_NAME&&0==BrowserDetect.TABLET&&0==BrowserDetect.MOBILE&&(i=t._brightness+1),t.style[SmartObject.prefix+"Filter"]="blur("+t._blur+"px) grayscale("+t._grayscale+") sepia("+t._sepia+") contrast("+t._contrast+") brightness("+i+") invert("+t._invert+") saturate("+t._saturate+")"}else t.style[SmartObject.prefix+"Filter"]=""},SmartObject.updateIE8=function(t){if(0==t._rotation&&1==t._scaleX&&1==t._scaleY&&1==t._opacity||(t.___hasHadAdvancedStyle=!0),1==t.___hasHadAdvancedStyle){var e=!1,i=null;if(null==t.parentNode){var n=document.createElement("div");n.appendChild(t),document.body.appendChild(n),e=!0}else i=t.parentNode;var r=t.style.filter;t.style.filter="";var o=t.offsetWidth,s=t.offsetHeight;t.style.filter=r,t.parentNode.removeChild(t);var a=null,l=" progid:DXImageTransform.Microsoft.Alpha(opacity="+Math.round(100*t._opacity)+")",c="";if(0!=t._rotation||1!=t._scaleX||1!=t._scaleY){c="progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', "+function(t,e){var i=t.e(1,1)*e._scaleX,n=t.e(1,2)*e._scaleY,r=t.e(2,1)*e._scaleX,o=t.e(2,2)*e._scaleY;return a=Matrix.create([[i,n,0],[r,o,0],[0,0,1]]),"M11="+i+", M12="+n+", M21="+r+", M22="+o}(Matrix.Rotation(FixIE.degreesToRadians(t._rotation)),t)+", filterType='nearest neighbor')"}var h=c+l;null==t.style.background&&(t.style.background="transparent"),t.style.MsFilter=h,t.style.filter=h,t.style.zoom="1",""!=c&&(FixIE.transformOrigin(t,a,o,s),FixIE.fixBoundaryBug(t,a,o,s));try{t.style.left=t._x+t.___compensateX+"px",t.style.top=t._y+t.___compensateY+"px"}catch(t){}null!=i&&(i.appendChild(t),1==e&&(n.parentNode.removeChild(n),n=null)),0==t._rotation&&1==t._scaleX&&1==t._scaleY&&1==t._opacity&&(t.___compensateX=0,t.___compensateY=0,t.___hasHadAdvancedStyle=!1)}else{var i=null;null!=t.parentNode&&(i=t.parentNode,t.parentNode.removeChild(t)),t.style.left=t._x+t.___compensateX+"px",t.style.top=t._y+t.___compensateY+"px",null!=i&&i.appendChild(t)}},DOMUtils=new Object,DOMUtils.getChildIndex=function(t){if(!t)return-1;var e=t.parentNode;if(!e)return-1;for(var i=e.children,n=i.length,r=0;r<n;r++)if(i[r]===t)return r},DOMUtils.getOffset=function(t){for(var e=0,i=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e+=t.offsetLeft-t.scrollLeft,i+=t.offsetTop-t.scrollTop,t=t.parentNode?t.parentNode:t.offsetParent;return{top:i,left:e}},DOMUtils.getWindowSize=function(){var t={},e=0,i=0;return"number"==typeof window.innerWidth?(e=window.innerWidth,i=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)&&(e=document.documentElement.clientWidth,i=document.documentElement.clientHeight),t.width=e,t.height=i,t},DOMUtils.getScrollPosition=function(){var t={};return void 0!==window.pageYOffset?(t.scrollOffsetX=window.pageXOffset,t.scrollOffsetY=window.pageYOffset):void 0!==document.documentElement.scrollTop&&document.documentElement.scrollTop>0?(t.scrollOffsetX=document.documentElement.scrollLeft,t.scrollOffsetY=document.documentElement.scrollTop):void 0!==document.body.scrollTop&&(t.scrollOffsetX=document.body.scrollLeft,t.scrollOffsetY=document.body.scrollTop),t},DOMUtils.localToGlobal=function(t){for(var e=0,i=0;null!=t;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:e,y:i}},DOMUtils.getAbsoluteOffset=function(t){var e=0,i=0;do{isNaN(t.offsetLeft)||(e+=t.offsetLeft)}while(t=t.offsetParent);do{isNaN(t.offsetTop)||(i+=t.offsetTop)}while(t=t.offsetParent);return{x:e,y:i}},DOMUtils.getDocumentSize=function(){var t={},e=document,i=Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight)),n=Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth));return t.width=n,t.height=i,t},DOMUtils.getMousePosition=function(t){var e=document.documentElement,i=document.body
;return t||(t=window.event),void 0!=window.pageXOffset?[t.clientX+window.pageXOffset,t.clientY+window.pageYOffset]:[t.clientX+e.scrollLeft+i.scrollLeft,t.clientY+e.scrollTop+i.scrollTop]},DOMUtils.getElementsByAttribute=function(t,e,i,n){var r=[];null==i&&(i=this),null==n&&(n="*");for(var o=i.getElementsByTagName(n),s=0;s<o.length;s+=1)e?o[s].hasAttribute(t)&&o[s].getAttribute(t)==e&&r.push(o[s]):o[s].hasAttribute(t)&&r.push(o[s]);return r},function(t){var e={};e.load=function(e,i,n){function r(){4==o.readyState&&200==o.status&&(i(o.responseText),o=null)}null===n&&(n="GET");var o;o=t.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),o.onreadystatechange=r,o.open(n,e,!0),o.send()},e.loadJSONP=function(e,i){var n="_"+new Date,r=document.createElement("script"),o=document.getElementsByTagName("head")[0]||document.documentElement;t[n]=function(t){o.removeChild(r),i(t)},r.src=e+"&callback="+n,o.appendChild(r)},t.AJAX=e}(window),function(){function t(){function n(){for(v;v<b;v++)_=h[v],i.assetExist(_)||(x.push(h[v]),T++);s()}function r(t){A.removeEventListener(Event.LOAD,r,!0);for(var e=t.currentTarget.responseText,o=e.split("|"),s=0;s<o.length-1;s++){var a=o[s];if(s%2==0){var l=new Image;l.src=o[s+1];var c=a.toString();i.assets.push({asset:l,id:c,isURI:!0})}}e=null,A=null,n()}function o(t){i._percentageLoaded=Math.ceil(t.loaded/g*m),i._percentageLoaded>m&&(i._percentageLoaded=m),null!=p&&p(i._percentageLoaded)}function s(){if(x.length>0){var t=0,n=x.length;for(t;t<n;t++){y=new Image,_=x[t],y.addEventListener("load",a,!0),y.addEventListener("error",l,!0),y.style.position="absolute";var r=x[t];new RegExp("/").test(r)&&i.que[0].stripPath&&(_=e(x[t])),url=null!=d?d+x[t]:i.assetPath+x[t],i.assets.push({asset:y,id:_,isURI:!1}),y.src=url+(""!==i.assetVersion?"?v=":"")+i.assetVersion}}else c()}function a(t){t.currentTarget.removeEventListener("load",c,!0),t.currentTarget.removeEventListener("error",c,!0),w++,c()}function l(t){t.currentTarget.removeEventListener("load",c,!0),t.currentTarget.removeEventListener("error",c,!0),w++,c()}function c(){i._percentageLoaded=Math.ceil(w/T*(100-m)+m),null!=p&&p(i._percentageLoaded),w==T&&(u&&u(),i.que.shift(),i.que.length>0?setTimeout(t,100):i.busy=!1)}i._percentageLoaded=0;var h=i.que[0].data,u=i.que[0].onComplete,d=i.que[0].customPath,p=i.que[0].onUpdate,f=i.que[0].dataURIFile,g=i.que[0].dataURIFileSizeInBytes,m=i.que[0].dataURIFilePercentageOfTotal;"Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=9&&(f=null,m=0);var y,_,v=0,b=h.length,w=0,x=[],T=0;if(null!=f){f=f+(""!==i.assetVersion?"?v=":"")+i.assetVersion;var A=new XMLHttpRequest;A.addEventListener("progress",o,!1),A.addEventListener(Event.LOAD,r,!0),A.open("GET",f,!0),A.overrideMimeType&&A.overrideMimeType("text/plain; charset=x-user-defined"),A.send(null)}else n()}function e(t){var e;if(t){var i=new RegExp("^.*[/]","g");e=t.replace(i,"")}return e}var i={};i.assetVersion="",i.init=function(t,e){i.initialized||(i.assetVersion=e||"",i.assets=[],i.que=[],i.busy=!1,i.assetPath=t,i._percentageLoaded=0,i.initialized=!0)},i.loadGroup=function(e){if(!i.initialized)throw new Error("You need to initialize Assetloader before loading a group");i.busy?i.que.push(e):(i.busy=!0,i.que.push(e),t())},i.getAsset=function(t){if(!i.initialized)throw new Error("You need to initialize Assetloader before attempting to retrive an asset - id: "+t);var e,n,r,o=!1,s=0,a=i.assets.length,l=null;for(s;s<a;s++)if(t===i.assets[s].id)return e=i.assets[s].asset,o=!0,l=e.cloneNode(!0),l.style.position="absolute",t.indexOf("@2")>-1?(n=e.width/2,r=e.height/2,l.width=n,l.height=r):(n=e.width,r=e.height),l.width=n,l.height=r,l._orgW=n,l._orgH=r,l._ratio=r/n,l;if(!0!==o)throw new Error("AssetLoader -> asset with id: "+t+", not found");return l},i.destroy=function(t){if(!i.initialized)throw new Error("You need to initialize Assetloader before attempting to destroy an asset - id: "+t);var e=0,n=i.assets.length;for(e;e<n;e++)if(t===i.assets[e].id){i.assets[e]=null,i.assets.splice(e,1),!0;break}},i.assetExist=function(t){var e=0,n=i.assets.length;for(e;e<n;e++)if(t===i.assets[e].id)return!0;return!1},window.AssetLoader=i}();/*!
 * VERSION: 1.14.2
 * DATE: 2014-10-29
 * UPDATES AND DOCS AT: http://www.greensock.com
 * 
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2014, GreenSock. All rights reserved.
 * This work is subject to the terms at http://www.greensock.com/terms_of_use.html or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},r=function(t,e,n){i.call(this,t,e,n),this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=r.prototype.render},o=1e-10,s=i._internals,a=s.isSelector,l=s.isArray,c=r.prototype=i.to({},.1,{}),h=[];r.version="1.14.2",c.constructor=r,c.kill()._gc=!1,r.killTweensOf=r.killDelayedCallsTo=i.killTweensOf,r.getTweensOf=i.getTweensOf,r.lagSmoothing=i.lagSmoothing,r.ticker=i.ticker,r.render=i.render,c.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},c.updateTo=function(t,e){var n,r=this.ratio,o=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(n in t)this.vars[n]=t[n];if(this._initted||o)if(e)this._initted=!1;else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var s=this._time;this.render(0,!0,!1),this._initted=!1,this.render(s,!0,!1)}else if(this._time>0||o){this._initted=!1,this._init();for(var a,l=1/(1-r),c=this._firstPT;c;)a=c.s+c.c,c.c*=l,c.s=a-c.c,c=c._next}return this},c.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,r,a,l,c,u,d,p,f=this._dirty?this.totalDuration():this._totalDuration,g=this._time,m=this._totalTime,y=this._cycle,_=this._duration,v=this._rawPrevTime;if(t>=f?(this._totalTime=f,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=_,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(n=!0,r="onComplete"),0===_&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>v||v===o)&&v!==t&&(i=!0,v>o&&(r="onReverseComplete")),this._rawPrevTime=p=!e||t||v===t?t:o)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===_&&v>0&&v!==o)&&(r="onReverseComplete",n=this._reversed),0>t&&(this._active=!1,0===_&&(this._initted||!this.vars.lazy||i)&&(v>=0&&(i=!0),this._rawPrevTime=p=!e||t||v===t?t:o)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(l=_+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!=(1&this._cycle)&&(this._time=_-this._time),this._time>_?this._time=_:0>this._time&&(this._time=0)),this._easeType?(c=this._time/_,u=this._easeType,d=this._easePower,(1===u||3===u&&c>=.5)&&(c=1-c),3===u&&(c*=2),1===d?c*=c:2===d?c*=c*c:3===d?c*=c*c*c:4===d&&(c*=c*c*c*c),this.ratio=1===u?1-c:2===u?c:.5>this._time/_?c/2:1-c/2):this.ratio=this._ease.getRatio(this._time/_)),g===this._time&&!i&&y===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||h)));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=g,this._totalTime=m,this._rawPrevTime=v,this._cycle=y,s.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/_):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==g&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===_)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||h))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==m||n)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||h)),this._cycle!==y&&(e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||h)),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||h),0===_&&this._rawPrevTime===o&&p!==o&&(this._rawPrevTime=0))},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new r(t,e,i)},r.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new r(t,e,n)},r.staggerTo=r.allTo=function(t,e,o,s,c,u,d){s=s||0;var p,f,g,m,y=o.delay||0,_=[],v=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,arguments),c.apply(d||this,u||h)};for(l(t)||("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=n(t))),t=t||[],0>s&&(t=n(t),t.reverse(),s*=-1),p=t.length-1,g=0;p>=g;g++){f={};for(m in o)f[m]=o[m];f.delay=y,g===p&&c&&(f.onComplete=v),_[g]=new r(t[g],e,f),y+=s}return _},r.staggerFrom=r.allFrom=function(t,e,i,n,o,s,a){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,r.staggerTo(t,e,i,n,o,s,a)},r.staggerFromTo=r.allFromTo=function(t,e,i,n,o,s,a,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,r.staggerTo(t,e,n,o,s,a,l)},r.delayedCall=function(t,e,i,n,o){return new r(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:n,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:n,immediateRender:!1,useFrames:o,overwrite:0})},r.set=function(t,e){return new r(t,0,e)},r.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var u=function(t,e){for(var n=[],r=0,o=t._first;o;)o instanceof i?n[r++]=o:(e&&(n[r++]=o),n=n.concat(u(o,e)),r=n.length),o=o._next;return n},d=r.getAllTweens=function(e){return u(t._rootTimeline,e).concat(u(t._rootFramesTimeline,e))};r.killAll=function(t,i,n,r){null==i&&(i=!0),null==n&&(n=!0);var o,s,a,l=d(0!=r),c=l.length,h=i&&n&&r;for(a=0;c>a;a++)s=l[a],(h||s instanceof e||(o=s.target===s.vars.onComplete)&&n||i&&!o)&&(t?s.totalTime(s._reversed?0:s.totalDuration()):s._enabled(!1,!1))},r.killChildTweensOf=function(t,e){if(null!=t){var o,c,h,u,d,p=s.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=n(t)),l(t))for(u=t.length;--u>-1;)r.killChildTweensOf(t[u],e);else{o=[];for(h in p)for(c=p[h].target.parentNode;c;)c===t&&(o=o.concat(p[h].tweens)),c=c.parentNode;for(d=o.length,u=0;d>u;u++)e&&o[u].totalTime(o[u].totalDuration()),o[u]._enabled(!1,!1)}}};var p=function(t,i,n,r){i=!1!==i,n=!1!==n,r=!1!==r;for(var o,s,a=d(r),l=i&&n&&r,c=a.length;--c>-1;)s=a[c],(l||s instanceof e||(o=s.target===s.vars.onComplete)&&n||i&&!o)&&s.paused(t)};return r.pauseAll=function(t,e,i){p(!0,t,e,i)},r.resumeAll=function(t,e,i){p(!1,t,e,i)},r.globalTimeScale=function(e){var n=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||o,n._startTime=r-(r-n._startTime)*n._timeScale/e,n=t._rootFramesTimeline,r=i.ticker.frame,n._startTime=r-(r-n._startTime)*n._timeScale/e,n._timeScale=t._rootTimeline._timeScale=e,e):n._timeScale},c.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},c.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},c.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},c.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},c.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},c.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},c.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},c.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},r},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,n,r=this.vars;for(n in r)i=r[n],a(i)&&-1!==i.join("").indexOf("{self}")&&(r[n]=this._swapSelfInParams(i));a(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=1e-10,o=i._internals,s=o.isSelector,a=o.isArray,l=o.lazyTweens,c=o.lazyRender,h=[],u=_gsScope._gsDefine.globals,d=function(t){var e,i={};for(e in t)i[e]=t[e];return i},p=function(t,e,i,n){var r=t._timeline._totalTime;(e||!this._forcingPlayhead)&&(t._timeline.pause(t._startTime),e&&e.apply(n||t._timeline,i||h),this._forcingPlayhead&&t._timeline.seek(r))},f=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},g=n.prototype=new e;return n.version="1.14.2",g.constructor=n,g.kill()._gc=g._forcingPlayhead=!1,g.to=function(t,e,n,r){var o=n.repeat&&u.TweenMax||i;return e?this.add(new o(t,e,n),r):this.set(t,n,r)},g.from=function(t,e,n,r){return this.add((n.repeat&&u.TweenMax||i).from(t,e,n),r)},g.fromTo=function(t,e,n,r,o){var s=r.repeat&&u.TweenMax||i;return e?this.add(s.fromTo(t,e,n,r),o):this.set(t,r,o)},g.staggerTo=function(t,e,r,o,a,l,c,h){var u,p=new n({onComplete:l,onCompleteParams:c,onCompleteScope:h,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],s(t)&&(t=f(t)),o=o||0,0>o&&(t=f(t),t.reverse(),o*=-1),u=0;t.length>u;u++)r.startAt&&(r.startAt=d(r.startAt)),p.to(t[u],e,d(r),u*o);return this.add(p,a)},g.staggerFrom=function(t,e,i,n,r,o,s,a){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,n,r,o,s,a)},g.staggerFromTo=function(t,e,i,n,r,o,s,a,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,n,r,o,s,a,l)},g.call=function(t,e,n,r){return this.add(i.delayedCall(0,t,e,n),r)},g.set=function(t,e,n){return n=this._parseTimeOrLabel(n,0,!0),null==e.immediateRender&&(e.immediateRender=n===this._time&&!this._paused),this.add(new i(t,0,e),n)},n.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var r,o,s=new n(t),a=s._timeline;for(null==e&&(e=!0),a._remove(s,!0),s._startTime=0,s._rawPrevTime=s._time=s._totalTime=a._time,r=a._first;r;)o=r._next,e&&r instanceof i&&r.target===r.vars.onComplete||s.add(r,r._startTime-r._delay),r=o;return a.add(s,0),s},g.add=function(r,o,s,l){var c,h,u,d,p,f;if("number"!=typeof o&&(o=this._parseTimeOrLabel(o,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&a(r)){for(s=s||"normal",l=l||0,c=o,h=r.length,u=0;h>u;u++)a(d=r[u])&&(d=new n({tweens:d})),this.add(d,c),"string"!=typeof d&&"function"!=typeof d&&("sequence"===s?c=d._startTime+d.totalDuration()/d._timeScale:"start"===s&&(d._startTime-=d.delay())),c+=l;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,o);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,o),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(p=this,f=p.rawTime()>r._startTime;p._timeline;)f&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},g.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&a(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},g._remove=function(t,i){e.prototype._remove.call(this,t,i);var n=this._last;return n?this._time>n._startTime+n._totalDuration/n._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},g.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},g.insert=g.insertMultiple=function(t,e,i,n){return this.add(t,e||0,i,n)},g.appendMultiple=function(t,e,i,n){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,n)},g.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},g.addPause=function(t,e,i,n){return this.call(p,["{self}",e,i,n],this,t)},g.removeLabel=function(t){return delete this._labels[t],this},g.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},g._parseTimeOrLabel=function(e,i,n,r){var o;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&a(r)))for(o=r.length;--o>-1;)r[o]instanceof t&&r[o].timeline===this&&this.remove(r[o]);if("string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,n);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(-1===(o=e.indexOf("=")))return null==this._labels[e]?n?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(o-1)+"1",10)*Number(e.substr(o+1)),e=o>1?this._parseTimeOrLabel(e.substr(0,o-1),0,n):this.duration()}return Number(e)+i},g.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},g.stop=function(){return this.paused(!0)},g.gotoAndPlay=function(t,e){return this.play(t,e)},g.gotoAndStop=function(t,e){return this.pause(t,e)},g.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,o,s,a,u,d=this._dirty?this.totalDuration():this._totalDuration,p=this._time,f=this._startTime,g=this._timeScale,m=this._paused;if(t>=d?(this._totalTime=this._time=d,this._reversed||this._hasPausedChild()||(o=!0,a="onComplete",0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===r)&&this._rawPrevTime!==t&&this._first&&(u=!0,this._rawPrevTime>r&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=d+1e-4):1e-7>t?(this._totalTime=this._time=0,(0!==p||0===this._duration&&this._rawPrevTime!==r&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(a="onReverseComplete",o=this._reversed),0>t?(this._active=!1,this._rawPrevTime>=0&&this._first&&(u=!0),this._rawPrevTime=t):(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=0,this._initted||(u=!0))):this._totalTime=this._time=this._rawPrevTime=t,this._time!==p&&this._first||i||u){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&t>0&&(this._active=!0),0===p&&this.vars.onStart&&0!==this._time&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||h)),this._time>=p)for(n=this._first;n&&(s=n._next,!this._paused||m);)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=s;else for(n=this._last;n&&(s=n._prev,!this._paused||m);)(n._active||p>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=s;this._onUpdate&&(e||(l.length&&c(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||h))),a&&(this._gc||(f===this._startTime||g!==this._timeScale)&&(0===this._time||d>=this.totalDuration())&&(o&&(l.length&&c(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this.vars[a].apply(this.vars[a+"Scope"]||this,this.vars[a+"Params"]||h)))}},g._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof n&&t._hasPausedChild())return!0;t=t._next}return!1},g.getChildren=function(t,e,n,r){r=r||-9999999999;for(var o=[],s=this._first,a=0;s;)r>s._startTime||(s instanceof i?!1!==e&&(o[a++]=s):(!1!==n&&(o[a++]=s),!1!==t&&(o=o.concat(s.getChildren(!0,e,n)),a=o.length))),s=s._next;return o},g.getTweensOf=function(t,e){var n,r,o=this._gc,s=[],a=0;for(o&&this._enabled(!0,!0),n=i.getTweensOf(t),r=n.length;--r>-1;)(n[r].timeline===this||e&&this._contains(n[r]))&&(s[a++]=n[r]);return o&&this._enabled(!1,!0),s},g.recent=function(){return this._recent},g._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},g.shiftChildren=function(t,e,i){i=i||0;for(var n,r=this._first,o=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(n in o)o[n]>=i&&(o[n]+=t);return this._uncache(!0)},g._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),n=i.length,r=!1;--n>-1;)i[n]._kill(t,e)&&(r=!0);return r},g.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},g.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},g._enabled=function(t,i){if(t===this._gc)for(var n=this._first;n;)n._enabled(t,!0),n=n._next;return e.prototype._enabled.call(this,t,i)},g.totalTime=function(){this._forcingPlayhead=!0;var e=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,e},g.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},g.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,n=0,r=this._last,o=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>o&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):o=r._startTime,0>r._startTime&&!r._paused&&(n-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),o=0),i=r._startTime+r._totalDuration/r._timeScale,i>n&&(n=i),r=e;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},g.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},g.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},n},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var n=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},r=1e-10,o=[],s=e._internals,a=s.lazyTweens,l=s.lazyRender,c=new i(null,null,1,0),h=n.prototype=new t;return h.constructor=n,h.kill()._gc=!1,n.version="1.14.2",h.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},h.addCallback=function(t,i,n,r){return this.add(e.delayedCall(0,t,n,r),i)},h.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),n=i.length,r=this._parseTimeOrLabel(e);--n>-1;)i[n]._startTime===r&&i[n]._enabled(!1,!1);return this},h.tweenTo=function(t,i){i=i||{};var n,r,s,a={ease:c,overwrite:i.delay?2:1,useFrames:this.usesFrames(),immediateRender:!1};for(r in i)a[r]=i[r];return a.time=this._parseTimeOrLabel(t),n=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,s=new e(this,n,a),a.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&n===s.duration()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||s,i.onStartParams||o)},s},h.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],onCompleteScope:this},i.immediateRender=!1!==i.immediateRender;var n=this.tweenTo(e,i);return n.duration(Math.abs(n.vars.time-t)/this._timeScale||.001)},h.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,s,c,h,u,d,p=this._dirty?this.totalDuration():this._totalDuration,f=this._duration,g=this._time,m=this._totalTime,y=this._startTime,_=this._timeScale,v=this._rawPrevTime,b=this._paused,w=this._cycle;if(t>=p?(this._locked||(this._totalTime=p,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(s=!0,h="onComplete",0===this._duration&&(0===t||0>v||v===r)&&v!==t&&this._first&&(u=!0,v>r&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,this._yoyo&&0!=(1&this._cycle)?this._time=t=0:(this._time=f,t=f+1e-4)):1e-7>t?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==g||0===f&&v!==r&&(v>0||0>t&&v>=0)&&!this._locked)&&(h="onReverseComplete",s=this._reversed),0>t?(this._active=!1,v>=0&&this._first&&(u=!0),this._rawPrevTime=t):(this._rawPrevTime=f||!e||t||this._rawPrevTime===t?t:r,t=0,this._initted||(u=!0))):(0===f&&0>v&&(u=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(d=f+this._repeatDelay,this._cycle=this._totalTime/d>>0,0!==this._cycle&&this._cycle===this._totalTime/d&&this._cycle--,this._time=this._totalTime-this._cycle*d,this._yoyo&&0!=(1&this._cycle)&&(this._time=f-this._time),this._time>f?(this._time=f,t=f+1e-4):0>this._time?this._time=t=0:t=this._time))),this._cycle!==w&&!this._locked){var x=this._yoyo&&0!=(1&w),T=x===(this._yoyo&&0!=(1&this._cycle)),A=this._totalTime,C=this._cycle,E=this._rawPrevTime,S=this._time;if(this._totalTime=w*f,w>this._cycle?x=!x:this._totalTime+=f,this._time=g,this._rawPrevTime=0===f?v-1e-4:v,this._cycle=w,this._locked=!0,g=x?0:f,this.render(g,e,0===f),e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||o),T&&(g=x?f+1e-4:-1e-4,this.render(g,!0,!1)),this._locked=!1,this._paused&&!b)return;this._time=S,this._totalTime=A,this._cycle=C,this._rawPrevTime=E}if(!(this._time!==g&&this._first||i||u))return void(m!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||o)));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&t>0&&(this._active=!0),0===m&&this.vars.onStart&&0!==this._totalTime&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||o)),this._time>=g)for(n=this._first;n&&(c=n._next,!this._paused||b);)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=c;else for(n=this._last;n&&(c=n._prev,!this._paused||b);)(n._active||g>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=c;this._onUpdate&&(e||(a.length&&l(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||o))),h&&(this._locked||this._gc||(y===this._startTime||_!==this._timeScale)&&(0===this._time||p>=this.totalDuration())&&(s&&(a.length&&l(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[h]&&this.vars[h].apply(this.vars[h+"Scope"]||this,this.vars[h+"Params"]||o)))},h.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var n,r,o=[],s=this.getChildren(t,e,i),a=0,l=s.length;for(n=0;l>n;n++)r=s[n],r.isActive()&&(o[a++]=r);return o},h.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),n=i.length;for(e=0;n>e;e++)if(i[e].time>t)return i[e].name;return null},h.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},h.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},h.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},h.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},h.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},h.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},h.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},h.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},h.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},h.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},n},!0),function(){var t=180/Math.PI,e=[],i=[],n=[],r={},o=function(t,e,i,n){this.a=t,this.b=e,this.c=i,this.d=n,this.da=n-t,this.ca=i-t,this.ba=e-t},s=function(t,e,i,n){var r={a:t},o={},s={},a={c:n},l=(t+e)/2,c=(e+i)/2,h=(i+n)/2,u=(l+c)/2,d=(c+h)/2,p=(d-u)/8;return r.b=l+(t-l)/4,o.b=u+p,r.c=o.a=(r.b+o.b)/2,o.c=s.a=(u+d)/2,s.b=d-p,a.b=h+(n-h)/4,s.c=a.a=(s.b+a.b)/2,[r,o,s,a]},a=function(t,r,o,a,l){var c,h,u,d,p,f,g,m,y,_,v,b,w,x=t.length-1,T=0,A=t[0].a;for(c=0;x>c;c++)p=t[T],h=p.a,u=p.d,d=t[T+1].d,l?(v=e[c],b=i[c],w=.25*(b+v)*r/(a?.5:n[c]||.5),f=u-(u-h)*(a?.5*r:0!==v?w/v:0),g=u+(d-u)*(a?.5*r:0!==b?w/b:0),m=u-(f+((g-f)*(3*v/(v+b)+.5)/4||0))):(f=u-.5*(u-h)*r,g=u+.5*(d-u)*r,m=u-(f+g)/2),f+=m,g+=m,p.c=y=f,p.b=0!==c?A:A=p.a+.6*(p.c-p.a),p.da=u-h,p.ca=y-h,p.ba=A-h,o?(_=s(h,A,y,u),t.splice(T,1,_[0],_[1],_[2],_[3]),T+=4):T++,A=g;p=t[T],p.b=A,p.c=A+.4*(p.d-A),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=A-p.a,o&&(_=s(p.a,A,p.c,p.d),t.splice(T,1,_[0],_[1],_[2],_[3]))},l=function(t,n,r,s){var a,l,c,h,u,d,p=[];if(s)for(t=[s].concat(t),l=t.length;--l>-1;)"string"==typeof(d=t[l][n])&&"="===d.charAt(1)&&(t[l][n]=s[n]+Number(d.charAt(0)+d.substr(2)));if(0>(a=t.length-2))return p[0]=new o(t[0][n],0,0,t[-1>a?0:1][n]),p;for(l=0;a>l;l++)c=t[l][n],h=t[l+1][n],p[l]=new o(c,0,0,h),r&&(u=t[l+2][n],e[l]=(e[l]||0)+(h-c)*(h-c),i[l]=(i[l]||0)+(u-h)*(u-h));return p[l]=new o(t[l][n],0,0,t[l+1][n]),p},c=function(t,o,s,c,h,u){var d,p,f,g,m,y,_,v,b={},w=[],x=u||t[0];h="string"==typeof h?","+h+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==o&&(o=1);for(p in t[0])w.push(p);if(t.length>1){for(v=t[t.length-1],_=!0,d=w.length;--d>-1;)if(p=w[d],Math.abs(x[p]-v[p])>.05){_=!1;break}_&&(t=t.concat(),u&&t.unshift(u),t.push(t[1]),u=t[t.length-3])}for(e.length=i.length=n.length=0,d=w.length;--d>-1;)p=w[d],r[p]=-1!==h.indexOf(","+p+","),b[p]=l(t,p,r[p],u);for(d=e.length;--d>-1;)e[d]=Math.sqrt(e[d]),i[d]=Math.sqrt(i[d]);if(!c){for(d=w.length;--d>-1;)if(r[p])for(f=b[w[d]],y=f.length-1,g=0;y>g;g++)m=f[g+1].da/i[g]+f[g].da/e[g],n[g]=(n[g]||0)+m*m;for(d=n.length;--d>-1;)n[d]=Math.sqrt(n[d])}for(d=w.length,g=s?4:1;--d>-1;)p=w[d],f=b[p],a(f,o,s,c,r[p]),_&&(f.splice(0,g),f.splice(f.length-g,g));return b},h=function(t,e,i){e=e||"soft";var n,r,s,a,l,c,h,u,d,p,f,g={},m="cubic"===e?3:2,y="soft"===e,_=[];if(y&&i&&(t=[i].concat(t)),null==t||m+1>t.length)throw"invalid Bezier data";for(d in t[0])_.push(d);for(c=_.length;--c>-1;){for(d=_[c],g[d]=l=[],p=0,u=t.length,h=0;u>h;h++)n=null==i?t[h][d]:"string"==typeof(f=t[h][d])&&"="===f.charAt(1)?i[d]+Number(f.charAt(0)+f.substr(2)):Number(f),y&&h>1&&u-1>h&&(l[p++]=(n+l[p-2])/2),l[p++]=n;for(u=p-m+1,p=0,h=0;u>h;h+=m)n=l[h],r=l[h+1],s=l[h+2],a=2===m?0:l[h+3],l[p++]=f=3===m?new o(n,r,s,a):new o(n,(2*r+n)/3,(2*r+s)/3,s);l.length=p}return g},u=function(t,e,i){for(var n,r,o,s,a,l,c,h,u,d,p,f=1/i,g=t.length;--g>-1;)for(d=t[g],o=d.a,s=d.d-o,a=d.c-o,l=d.b-o,n=r=0,h=1;i>=h;h++)c=f*h,u=1-c,n=r-(r=(c*c*s+3*u*(c*a+u*l))*c),p=g*i+h-1,e[p]=(e[p]||0)+n*n},d=function(t,e){e=e>>0||6;var i,n,r,o,s=[],a=[],l=0,c=0,h=e-1,d=[],p=[];for(i in t)u(t[i],s,e);for(r=s.length,n=0;r>n;n++)l+=Math.sqrt(s[n]),o=n%e,p[o]=l,o===h&&(c+=l,o=n/e>>0,d[o]=p,a[o]=c,l=0,p=[]);return{length:c,lengths:a,segments:d}},p=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.3",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var n,r,o,s,a,l=e.values||[],u={},p=l[0],f=e.autoRotate||i.vars.orientToBezier;this._autoRotate=f?f instanceof Array?f:[["x","y","rotation",!0===f?0:Number(f)||0]]:null;for(n in p)this._props.push(n);for(o=this._props.length;--o>-1;)n=this._props[o],this._overwriteProps.push(n),r=this._func[n]="function"==typeof t[n],u[n]=r?t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(t[n]),a||u[n]!==l[0][n]&&(a=u);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?c(l,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):h(l,e.type,u),this._segCount=this._beziers[n].length,this._timeRes){var g=d(this._beziers,this._timeRes);this._length=g.length,this._lengths=g.lengths,this._segments=g.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),o=f.length;--o>-1;){for(s=0;3>s;s++)n=f[o][s],this._func[n]="function"==typeof t[n]&&t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)];n=f[o][2],this._initialRotations[o]=this._func[n]?this._func[n].call(this._target):this._target[n]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,n,r,o,s,a,l,c,h,u,d=this._segCount,p=this._func,f=this._target,g=e!==this._startRatio;if(this._timeRes){if(h=this._lengths,u=this._curSeg,e*=this._length,r=this._li,e>this._l2&&d-1>r){for(c=d-1;c>r&&e>=(this._l2=h[++r]););this._l1=h[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0]}else if(this._l1>e&&r>0){for(;r>0&&(this._l1=h[--r])>=e;);0===r&&this._l1>e?this._l1=0:r++,this._l2=h[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=r,e-=this._l1,r=this._si,e>this._s2&&u.length-1>r){for(c=u.length-1;c>r&&e>=(this._s2=u[++r]););this._s1=u[r-1],
this._si=r}else if(this._s1>e&&r>0){for(;r>0&&(this._s1=u[--r])>=e;);0===r&&this._s1>e?this._s1=0:r++,this._s2=u[r],this._si=r}a=(r+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?d-1:d*e>>0,a=(e-i*(1/d))*d;for(n=1-a,r=this._props.length;--r>-1;)o=this._props[r],s=this._beziers[o][i],l=(a*a*s.da+3*n*(a*s.ca+n*s.ba))*a+s.a,this._round[o]&&(l=Math.round(l)),p[o]?f[o](l):f[o]=l;if(this._autoRotate){var m,y,_,v,b,w,x,T=this._autoRotate;for(r=T.length;--r>-1;)o=T[r][2],w=T[r][3]||0,x=!0===T[r][4]?1:t,s=this._beziers[T[r][0]],m=this._beziers[T[r][1]],s&&m&&(s=s[i],m=m[i],y=s.a+(s.b-s.a)*a,v=s.b+(s.c-s.b)*a,y+=(v-y)*a,v+=(s.c+(s.d-s.c)*a-v)*a,_=m.a+(m.b-m.a)*a,b=m.b+(m.c-m.b)*a,_+=(b-_)*a,b+=(m.c+(m.d-m.c)*a-b)*a,l=g?Math.atan2(b-_,v-y)*x+w:this._initialRotations[r],p[o]?f[o](l):f[o]=l)}}}),f=p.prototype;p.bezierThrough=c,p.cubicToQuadratic=s,p._autoCSS=!0,p.quadraticToCubic=function(t,e,i){return new o(t,(2*e+t)/3,(2*e+i)/3,i)},p._cssRegister=function(){var t=_gsScope._gsDefine.globals.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,n=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,o,s,a,l){e instanceof Array&&(e={values:e}),l=new p;var c,h,u,d=e.values,f=d.length-1,g=[],m={};if(0>f)return a;for(c=0;f>=c;c++)u=i(t,d[c],s,a,l,f!==c),g[c]=u.end;for(h in e)m[h]=e[h];return m.values=g,a=new r(t,"bezier",0,0,u.pt,2),a.data=u,a.plugin=l,a.setRatio=n,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(c=!0===m.autoRotate?0:Number(m.autoRotate),m.autoRotate=null!=u.end.left?[["left","top","rotation",c,!1]]:null!=u.end.x&&[["x","y","rotation",c,!1]]),m.autoRotate&&(s._transform||s._enableTransforms(!1),u.autoRotate=s._target._gsTransform),l._onInitTween(u.proxy,m,s._tween),a}})}},f._roundProps=function(t,e){for(var i=this._overwriteProps,n=i.length;--n>-1;)(t[i[n]]||t.bezier||t.bezierThrough)&&(this._round[i[n]]=e)},f._kill=function(t){var e,i,n=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=n.length;--i>-1;)n[i]===e&&n.splice(i,1);return this._super._kill.call(this,t)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,n,r,o,s=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=s.prototype.setRatio},a={},l=s.prototype=new t("css");l.constructor=s,s.version="1.14.2",s.API=2,s.defaultTransformPerspective=0,s.defaultSkewType="compensated",l="px",s.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var c,h,u,d,p,f,g=/(?:\d|\-\d|\.\d|\-\.\d)+/g,m=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,y=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,_=/(?![+-]?\d*\.?\d+|e[+-]\d+)[^0-9]/g,v=/(?:\d|\-|\+|=|#|\.)*/g,b=/opacity *= *([^)]*)/i,w=/opacity:([^;]*)/i,x=/^(rgb|hsl)/,T=/([A-Z])/g,A=/-([a-z])/gi,C=function(t,e){return e.toUpperCase()},E=/(?:Left|Right|Width)/i,S=/,(?=[^\)]*(?:\(|$))/gi,O=Math.PI/180,M=180/Math.PI,L={},k=document,D=k.createElement("div"),I=k.createElement("img"),R=s._internals={_specialProps:a},P=navigator.userAgent,B=function(){var t,e=P.indexOf("Android"),i=k.createElement("div");return u=-1!==P.indexOf("Safari")&&-1===P.indexOf("Chrome")&&(-1===e||Number(P.substr(e+8,1))>3),p=u&&6>Number(P.substr(P.indexOf("Version/")+8,1)),d=-1!==P.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(P)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(P))&&(f=parseFloat(RegExp.$1)),i.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",!!(t=i.getElementsByTagName("a")[0])&&/^0.55/.test(t.style.opacity)}(),H=function(t){return b.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},j=function(t){window.console&&console.log(t)},W="",N="",F=function(t,e){e=e||D;var i,n,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;--n>-1&&void 0===r[i[n]+t];);return n>=0?(N=3===n?"ms":i[n],W="-"+N.toLowerCase()+"-",N+t):null},z=k.defaultView?k.defaultView.getComputedStyle:function(){},U=s.getStyle=function(t,e,i,n,r){var o;return B||"opacity"!==e?(!n&&t.style[e]?o=t.style[e]:(i=i||z(t))?o=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(T,"-$1").toLowerCase()):t.currentStyle&&(o=t.currentStyle[e]),null==r||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:r):H(t)},Y=R.convertToPixels=function(t,i,n,r,o){if("px"===r||!r)return n;if("auto"===r||!n)return 0;var a,l,c,h=E.test(i),u=t,d=D.style,p=0>n;if(p&&(n=-n),"%"===r&&-1!==i.indexOf("border"))a=n/100*(h?t.clientWidth:t.clientHeight);else{if(d.cssText="border:0 solid red;position:"+U(t,"position")+";line-height:0;","%"!==r&&u.appendChild)d[h?"borderLeftWidth":"borderTopWidth"]=n+r;else{if(u=t.parentNode||k.body,l=u._gsCache,c=e.ticker.frame,l&&h&&l.time===c)return l.width*n/100;d[h?"width":"height"]=n+r}u.appendChild(D),a=parseFloat(D[h?"offsetWidth":"offsetHeight"]),u.removeChild(D),h&&"%"===r&&!1!==s.cacheWidths&&(l=u._gsCache=u._gsCache||{},l.time=c,l.width=a/n*100),0!==a||o||(a=Y(t,i,n,r,!0))}return p?-a:a},X=R.calculateOffset=function(t,e,i){if("absolute"!==U(t,"position",i))return 0;var n="left"===e?"Left":"Top",r=U(t,"margin"+n,i);return t["offset"+n]-(Y(t,e,parseFloat(r),r.replace(v,""))||0)},G=function(t,e){var i,n,r={};if(e=e||z(t,null))if(i=e.length)for(;--i>-1;)r[e[i].replace(A,C)]=e.getPropertyValue(e[i]);else for(i in e)r[i]=e[i];else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===r[i]&&(r[i.replace(A,C)]=e[i]);return B||(r.opacity=H(t)),n=Ct(t,e,!1),r.rotation=n.rotation,r.skewX=n.skewX,r.scaleX=n.scaleX,r.scaleY=n.scaleY,r.x=n.x,r.y=n.y,_t&&(r.z=n.z,r.rotationX=n.rotationX,r.rotationY=n.rotationY,r.scaleZ=n.scaleZ),r.filters&&delete r.filters,r},V=function(t,e,i,n,r){var o,s,a,l={},c=t.style;for(s in i)"cssText"!==s&&"length"!==s&&isNaN(s)&&(e[s]!==(o=i[s])||r&&r[s])&&-1===s.indexOf("Origin")&&("number"==typeof o||"string"==typeof o)&&(l[s]="auto"!==o||"left"!==s&&"top"!==s?""!==o&&"auto"!==o&&"none"!==o||"string"!=typeof e[s]||""===e[s].replace(_,"")?o:0:X(t,s),void 0!==c[s]&&(a=new at(c,s,c[s],a)));if(n)for(s in n)"className"!==s&&(l[s]=n[s]);return{difs:l,firstMPT:a}},q={width:["Left","Right"],height:["Top","Bottom"]},J=["marginLeft","marginRight","marginTop","marginBottom"],K=function(t,e,i){var n=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=q[e],o=r.length;for(i=i||z(t,null);--o>-1;)n-=parseFloat(U(t,"padding"+r[o],i,!0))||0,n-=parseFloat(U(t,"border"+r[o]+"Width",i,!0))||0;return n},Q=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),n=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],r=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==r?r="0":"center"===r&&(r="50%"),("center"===n||isNaN(parseFloat(n))&&-1===(n+"").indexOf("="))&&(n="50%"),e&&(e.oxp=-1!==n.indexOf("%"),e.oyp=-1!==r.indexOf("%"),e.oxr="="===n.charAt(1),e.oyr="="===r.charAt(1),e.ox=parseFloat(n.replace(_,"")),e.oy=parseFloat(r.replace(_,""))),n+" "+r+(i.length>2?" "+i[2]:"")},Z=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},$=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)},tt=function(t,e,i,n){var r,o,s,a;return null==t?a=e:"number"==typeof t?a=t:(r=360,o=t.split("_"),s=Number(o[0].replace(_,""))*(-1===t.indexOf("rad")?1:M)-("="===t.charAt(1)?0:e),o.length&&(n&&(n[i]=e+s),-1!==t.indexOf("short")&&(s%=r)!==s%(r/2)&&(s=0>s?s+r:s-r),-1!==t.indexOf("_cw")&&0>s?s=(s+9999999999*r)%r-(0|s/r)*r:-1!==t.indexOf("ccw")&&s>0&&(s=(s-9999999999*r)%r-(0|s/r)*r)),a=e+s),1e-6>a&&a>-1e-6&&(a=0),a},et={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},it=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},nt=s.parseColor=function(t){var e,i,n,r,o,s;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),et[t]?et[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),n=t.charAt(3),t="#"+e+e+i+i+n+n),t=parseInt(t.substr(1),16),[t>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(g),r=Number(t[0])%360/360,o=Number(t[1])/100,s=Number(t[2])/100,i=.5>=s?s*(o+1):s+o-s*o,e=2*s-i,t.length>3&&(t[3]=Number(t[3])),t[0]=it(r+1/3,e,i),t[1]=it(r,e,i),t[2]=it(r-1/3,e,i),t):(t=t.match(g)||et.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):et.black},rt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(l in et)rt+="|"+l+"\\b";rt=RegExp(rt+")","gi");var ot=function(t,e,i,n){if(null==t)return function(t){return t};var r,o=e?(t.match(rt)||[""])[0]:"",s=t.split(o).join("").match(y)||[],a=t.substr(0,t.indexOf(s[0])),l=")"===t.charAt(t.length-1)?")":"",c=-1!==t.indexOf(" ")?" ":",",h=s.length,u=h>0?s[0].replace(g,""):"";return h?r=e?function(t){var e,d,p,f;if("number"==typeof t)t+=u;else if(n&&S.test(t)){for(f=t.replace(S,"|").split("|"),p=0;f.length>p;p++)f[p]=r(f[p]);return f.join(",")}if(e=(t.match(rt)||[o])[0],d=t.split(e).join("").match(y)||[],p=d.length,h>p--)for(;h>++p;)d[p]=i?d[0|(p-1)/2]:s[p];return a+d.join(c)+c+e+l+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,o,d;if("number"==typeof t)t+=u;else if(n&&S.test(t)){for(o=t.replace(S,"|").split("|"),d=0;o.length>d;d++)o[d]=r(o[d]);return o.join(",")}if(e=t.match(y)||[],d=e.length,h>d--)for(;h>++d;)e[d]=i?e[0|(d-1)/2]:s[d];return a+e.join(c)+l}:function(t){return t}},st=function(t){return t=t.split(","),function(e,i,n,r,o,s,a){var l,c=(i+"").split(" ");for(a={},l=0;4>l;l++)a[t[l]]=c[l]=c[l]||c[(l-1)/2>>0];return r.parse(e,a,o,s)}},at=(R._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,n,r,o=this.data,s=o.proxy,a=o.firstMPT;a;)e=s[a.v],a.r?e=Math.round(e):1e-6>e&&e>-1e-6&&(e=0),a.t[a.p]=e,a=a._next;if(o.autoRotate&&(o.autoRotate.rotation=s.rotation),1===t)for(a=o.firstMPT;a;){if(i=a.t,i.type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,n=1;i.l>n;n++)r+=i["xn"+n]+i["xs"+(n+1)];i.e=r}}else i.e=i.s+i.xs0;a=a._next}},function(t,e,i,n,r){this.t=t,this.p=e,this.v=i,this.r=r,n&&(n._prev=this,this._next=n)}),lt=(R._parseToProxy=function(t,e,i,n,r,o){var s,a,l,c,h,u=n,d={},p={},f=i._transform,g=L;for(i._transform=null,L=e,n=h=i.parse(t,e,n,r),L=g,o&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));n&&n!==u;){if(1>=n.type&&(a=n.p,p[a]=n.s+n.c,d[a]=n.s,o||(c=new at(n,"s",a,c,n.r),n.c=0),1===n.type))for(s=n.l;--s>0;)l="xn"+s,a=n.p+"_"+l,p[a]=n.data[l],d[a]=n[l],o||(c=new at(n,l,a,c,n.rxp[l]));n=n._next}return{proxy:d,end:p,firstMPT:c,pt:h}},R.CSSPropTween=function(t,e,n,r,s,a,l,c,h,u,d){this.t=t,this.p=e,this.s=n,this.c=r,this.n=l||e,t instanceof lt||o.push(this.n),this.r=c,this.type=a||0,h&&(this.pr=h,i=!0),this.b=void 0===u?n:u,this.e=void 0===d?n+r:d,s&&(this._next=s,s._prev=this)}),ct=s.parseComplex=function(t,e,i,n,r,o,s,a,l,h){i=i||o||"",s=new lt(t,e,0,0,s,h?2:1,null,!1,a,i,n),n+="";var u,d,p,f,y,_,v,b,w,T,A,C,E=i.split(", ").join(",").split(" "),O=n.split(", ").join(",").split(" "),M=E.length,L=!1!==c;for((-1!==n.indexOf(",")||-1!==i.indexOf(","))&&(E=E.join(" ").replace(S,", ").split(" "),O=O.join(" ").replace(S,", ").split(" "),M=E.length),M!==O.length&&(E=(o||"").split(" "),M=E.length),s.plugin=l,s.setRatio=h,u=0;M>u;u++)if(f=E[u],y=O[u],(b=parseFloat(f))||0===b)s.appendXtra("",b,Z(y,b),y.replace(m,""),L&&-1!==y.indexOf("px"),!0);else if(r&&("#"===f.charAt(0)||et[f]||x.test(f)))C=","===y.charAt(y.length-1)?"),":")",f=nt(f),y=nt(y),w=f.length+y.length>6,w&&!B&&0===y[3]?(s["xs"+s.l]+=s.l?" transparent":"transparent",s.e=s.e.split(O[u]).join("transparent")):(B||(w=!1),s.appendXtra(w?"rgba(":"rgb(",f[0],y[0]-f[0],",",!0,!0).appendXtra("",f[1],y[1]-f[1],",",!0).appendXtra("",f[2],y[2]-f[2],w?",":C,!0),w&&(f=4>f.length?1:f[3],s.appendXtra("",f,(4>y.length?1:y[3])-f,C,!1)));else if(_=f.match(g)){if(!(v=y.match(m))||v.length!==_.length)return s;for(p=0,d=0;_.length>d;d++)A=_[d],T=f.indexOf(A,p),s.appendXtra(f.substr(p,T-p),Number(A),Z(v[d],A),"",L&&"px"===f.substr(T+A.length,2),0===d),p=T+A.length;s["xs"+s.l]+=f.substr(p)}else s["xs"+s.l]+=s.l?" "+f:f;if(-1!==n.indexOf("=")&&s.data){for(C=s.xs0+s.data.s,u=1;s.l>u;u++)C+=s["xs"+u]+s.data["xn"+u];s.e=C+s["xs"+u]}return s.l||(s.type=-1,s.xs0=s.e),s.xfirst||s},ht=9;for(l=lt.prototype,l.l=l.pr=0;--ht>0;)l["xn"+ht]=0,l["xs"+ht]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(t,e,i,n,r,o){var s=this,a=s.l;return s["xs"+a]+=o&&a?" "+t:t||"",i||0===a||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=n||"",a>0?(s.data["xn"+a]=e+i,s.rxp["xn"+a]=r,s["xn"+a]=e,s.plugin||(s.xfirst=new lt(s,"xn"+a,e,i,s.xfirst||s,0,s.n,r,s.pr),s.xfirst.xs0=0),s):(s.data={s:e+i},s.rxp={},s.s=e,s.c=i,s.r=r,s)):(s["xs"+a]+=e+(n||""),s)};var ut=function(t,e){e=e||{},this.p=e.prefix?F(t)||t:t,a[t]=a[this.p]=this,this.format=e.formatter||ot(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},dt=R._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var n,r=t.split(","),o=e.defaultValue;for(i=i||[o],n=0;r.length>n;n++)e.prefix=0===n&&e.prefix,e.defaultValue=i[n]||o,new ut(r[n],e)};l=ut.prototype,l.parseComplex=function(t,e,i,n,r,o){var s,a,l,c,h,u,d=this.keyword;if(this.multi&&(S.test(i)||S.test(e)?(a=e.replace(S,"|").split("|"),l=i.replace(S,"|").split("|")):d&&(a=[e],l=[i])),l){for(c=l.length>a.length?l.length:a.length,s=0;c>s;s++)e=a[s]=a[s]||this.dflt,i=l[s]=l[s]||this.dflt,d&&(h=e.indexOf(d),u=i.indexOf(d),h!==u&&(i=-1===u?l:a,i[s]+=" "+d));e=a.join(", "),i=l.join(", ")}return ct(t,this.p,e,i,this.clrs,this.dflt,n,this.pr,r,o)},l.parse=function(t,e,i,n,o,s){return this.parseComplex(t.style,this.format(U(t,this.p,r,!1,this.dflt)),this.format(e),o,s)},s.registerSpecialProp=function(t,e,i){dt(t,{parser:function(t,n,r,o,s,a){var l=new lt(t,r,0,0,s,2,r,!1,i);return l.plugin=a,l.setRatio=e(t,n,o._tween,r),l},priority:i})};var pt,ft="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),gt=F("transform"),mt=W+"transform",yt=F("transformOrigin"),_t=null!==F("perspective"),vt=R.Transform=function(){this.skewY=0},bt=window.SVGElement,wt=function(t,e,i){var n,r=k.createElementNS("http://www.w3.org/2000/svg",t);for(n in i)r.setAttributeNS(null,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i[n]);return e.appendChild(r),r},xt=document.documentElement,Tt=function(){var t,e,i,n=f||/Android/i.test(P)&&!window.chrome;return k.createElementNS&&!n&&(t=wt("svg",xt),e=wt("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().left,e.style[yt]="50% 50%",e.style[gt]="scale(0.5,0.5)",n=i===e.getBoundingClientRect().left,xt.removeChild(t)),n}(),At=function(t,e,i){var n=t.getBBox();e=Q(e).split(" "),i.xOrigin=(-1!==e[0].indexOf("%")?parseFloat(e[0])/100*n.width:parseFloat(e[0]))+n.x,i.yOrigin=(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*n.height:parseFloat(e[1]))+n.y},Ct=R.getTransform=function(t,e,i,n){if(t._gsTransform&&i&&!n)return t._gsTransform;var o,a,l,c,h,u,d,p,f,g,m,y,_,v=i?t._gsTransform||new vt:new vt,b=0>v.scaleX,w=2e-5,x=1e5,T=179.99,A=T*O,C=_t?parseFloat(U(t,yt,e,!1,"0 0 0").split(" ")[2])||v.zOrigin||0:0,E=parseFloat(s.defaultTransformPerspective)||0;if(gt?o=U(t,mt,e,!0):t.currentStyle&&(o=t.currentStyle.filter.match(/(M11|M12|M21|M22)=[\d\-\.e]+/gi),o=o&&4===o.length?[o[0].substr(4),Number(o[2].substr(4)),Number(o[1].substr(4)),o[3].substr(4),v.x||0,v.y||0].join(","):""),o&&"none"!==o&&"matrix(1, 0, 0, 1, 0, 0)"!==o){for(a=(o||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],l=a.length;--l>-1;)c=Number(a[l]),a[l]=(h=c-(c|=0))?(0|h*x+(0>h?-.5:.5))/x+c:c;if(16===a.length){var S=a[8],L=a[9],k=a[10],D=a[12],I=a[13],R=a[14];if(v.zOrigin&&(R=-v.zOrigin,D=S*R-a[12],I=L*R-a[13],R=k*R+v.zOrigin-a[14]),!i||n||null==v.rotationX){var P,B,H,j,W,N,F,z=a[0],Y=a[1],X=a[2],G=a[3],V=a[4],q=a[5],J=a[6],K=a[7],Q=a[11],Z=Math.atan2(J,k),$=-A>Z||Z>A;v.rotationX=Z*M,Z&&(j=Math.cos(-Z),W=Math.sin(-Z),P=V*j+S*W,B=q*j+L*W,H=J*j+k*W,S=V*-W+S*j,L=q*-W+L*j,k=J*-W+k*j,Q=K*-W+Q*j,V=P,q=B,J=H),Z=Math.atan2(S,z),v.rotationY=Z*M,Z&&(N=-A>Z||Z>A,j=Math.cos(-Z),W=Math.sin(-Z),P=z*j-S*W,B=Y*j-L*W,H=X*j-k*W,L=Y*W+L*j,k=X*W+k*j,Q=G*W+Q*j,z=P,Y=B,X=H),Z=Math.atan2(Y,q),v.rotation=Z*M,Z&&(F=-A>Z||Z>A,j=Math.cos(-Z),W=Math.sin(-Z),z=z*j+V*W,B=Y*j+q*W,q=Y*-W+q*j,J=X*-W+J*j,Y=B),F&&$?v.rotation=v.rotationX=0:F&&N?v.rotation=v.rotationY=0:N&&$&&(v.rotationY=v.rotationX=0),v.scaleX=(0|Math.sqrt(z*z+Y*Y)*x+.5)/x,v.scaleY=(0|Math.sqrt(q*q+L*L)*x+.5)/x,v.scaleZ=(0|Math.sqrt(J*J+k*k)*x+.5)/x,v.skewX=0,v.perspective=Q?1/(0>Q?-Q:Q):0,v.x=D,v.y=I,v.z=R}}else if(!(_t&&!n&&a.length&&v.x===a[4]&&v.y===a[5]&&(v.rotationX||v.rotationY)||void 0!==v.x&&"none"===U(t,"display",e))){var tt=a.length>=6,et=tt?a[0]:1,it=a[1]||0,nt=a[2]||0,rt=tt?a[3]:1;v.x=a[4]||0,v.y=a[5]||0,u=Math.sqrt(et*et+it*it),d=Math.sqrt(rt*rt+nt*nt),p=et||it?Math.atan2(it,et)*M:v.rotation||0,f=nt||rt?Math.atan2(nt,rt)*M+p:v.skewX||0,g=u-Math.abs(v.scaleX||0),m=d-Math.abs(v.scaleY||0),Math.abs(f)>90&&270>Math.abs(f)&&(b?(u*=-1,f+=0>=p?180:-180,p+=0>=p?180:-180):(d*=-1,f+=0>=f?180:-180)),y=(p-v.rotation)%180,_=(f-v.skewX)%180,(void 0===v.skewX||g>w||-w>g||m>w||-w>m||y>-T&&T>y&&!1|y*x||_>-T&&T>_&&!1|_*x)&&(v.scaleX=u,v.scaleY=d,v.rotation=p,v.skewX=f),_t&&(v.rotationX=v.rotationY=v.z=0,v.perspective=E,v.scaleZ=1)}v.zOrigin=C;for(l in v)w>v[l]&&v[l]>-w&&(v[l]=0)}else v={x:0,y:0,z:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,perspective:E,rotation:0,rotationX:0,rotationY:0,zOrigin:0};return i&&(t._gsTransform=v),v.svg=bt&&t instanceof bt&&t.parentNode instanceof bt,v.svg&&(At(t,U(t,yt,r,!1,"50% 50%")+"",v),pt=s.useSVGTransformAttr||Tt),v.xPercent=v.yPercent=0,v},Et=function(t){var e,i,n=this.data,r=-n.rotation*O,o=r+n.skewX*O,s=1e5,a=(0|Math.cos(r)*n.scaleX*s)/s,l=(0|Math.sin(r)*n.scaleX*s)/s,c=(0|Math.sin(o)*-n.scaleY*s)/s,h=(0|Math.cos(o)*n.scaleY*s)/s,u=this.t.style,d=this.t.currentStyle;if(d){i=l,l=-c,c=-i,e=d.filter,u.filter="";var p,g,m=this.t.offsetWidth,y=this.t.offsetHeight,_="absolute"!==d.position,w="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+l+", M21="+c+", M22="+h,x=n.x+m*n.xPercent/100,T=n.y+y*n.yPercent/100;if(null!=n.ox&&(p=(n.oxp?.01*m*n.ox:n.ox)-m/2,g=(n.oyp?.01*y*n.oy:n.oy)-y/2,x+=p-(p*a+g*l),T+=g-(p*c+g*h)),_?(p=m/2,g=y/2,w+=", Dx="+(p-(p*a+g*l)+x)+", Dy="+(g-(p*c+g*h)+T)+")"):w+=", sizingMethod='auto expand')",u.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,w):w+" "+e,(0===t||1===t)&&1===a&&0===l&&0===c&&1===h&&(_&&-1===w.indexOf("Dx=0, Dy=0")||b.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&u.removeAttribute("filter")),!_){var A,C,E,S=8>f?1:-1;for(p=n.ieOffsetX||0,g=n.ieOffsetY||0,n.ieOffsetX=Math.round((m-((0>a?-a:a)*m+(0>l?-l:l)*y))/2+x),n.ieOffsetY=Math.round((y-((0>h?-h:h)*y+(0>c?-c:c)*m))/2+T),ht=0;4>ht;ht++)C=J[ht],A=d[C],i=-1!==A.indexOf("px")?parseFloat(A):Y(this.t,C,parseFloat(A),A.replace(v,""))||0,E=i!==n[C]?2>ht?-n.ieOffsetX:-n.ieOffsetY:2>ht?p-n.ieOffsetX:g-n.ieOffsetY,u[C]=(n[C]=Math.round(i-E*(0===ht||2===ht?1:S)))+"px"}}},St=R.set3DTransformRatio=function(t){var e,i,n,r,o,s,a,l,c,h,u,p,f,g,m,y,_,v,b,w,x,T,A,C=this.data,E=this.t.style,S=C.rotation*O,M=C.scaleX,L=C.scaleY,k=C.scaleZ,D=C.x,I=C.y,R=C.z,P=C.perspective;if(!(1!==t&&0!==t||"auto"!==C.force3D||C.rotationY||C.rotationX||1!==k||P||R))return void Ot.call(this,t);if(d){var B=1e-4;B>M&&M>-B&&(M=k=2e-5),B>L&&L>-B&&(L=k=2e-5),!P||C.z||C.rotationX||C.rotationY||(P=0)}if(S||C.skewX)v=Math.cos(S),b=Math.sin(S),e=v,o=b,C.skewX&&(S-=C.skewX*O,v=Math.cos(S),b=Math.sin(S),"simple"===C.skewType&&(w=Math.tan(C.skewX*O),w=Math.sqrt(1+w*w),v*=w,b*=w)),i=-b,s=v;else{if(!(C.rotationY||C.rotationX||1!==k||P||C.svg))return void(E[gt]=(C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) translate3d(":"translate3d(")+D+"px,"+I+"px,"+R+"px)"+(1!==M||1!==L?" scale("+M+","+L+")":""));e=s=1,i=o=0}u=1,n=r=a=l=c=h=p=f=g=0,m=P?-1/P:0,y=C.zOrigin,_=1e5,S=C.rotationY*O,S&&(v=Math.cos(S),b=Math.sin(S),c=u*-b,f=m*-b,n=e*b,a=o*b,u*=v,m*=v,e*=v,o*=v),S=C.rotationX*O,S&&(v=Math.cos(S),b=Math.sin(S),w=i*v+n*b,x=s*v+a*b,T=h*v+u*b,A=g*v+m*b,n=i*-b+n*v,a=s*-b+a*v,u=h*-b+u*v,m=g*-b+m*v,i=w,s=x,h=T,g=A),1!==k&&(n*=k,a*=k,u*=k,m*=k),1!==L&&(i*=L,s*=L,h*=L,g*=L),1!==M&&(e*=M,o*=M,c*=M,f*=M),y&&(p-=y,r=n*p,l=a*p,p=u*p+y),C.svg&&(r+=C.xOrigin-(C.xOrigin*e+C.yOrigin*i),l+=C.yOrigin-(C.xOrigin*o+C.yOrigin*s)),r=(w=(r+=D)-(r|=0))?(0|w*_+(0>w?-.5:.5))/_+r:r,l=(w=(l+=I)-(l|=0))?(0|w*_+(0>w?-.5:.5))/_+l:l,p=(w=(p+=R)-(p|=0))?(0|w*_+(0>w?-.5:.5))/_+p:p,E[gt]=(C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) matrix3d(":"matrix3d(")+[(0|e*_)/_,(0|o*_)/_,(0|c*_)/_,(0|f*_)/_,(0|i*_)/_,(0|s*_)/_,(0|h*_)/_,(0|g*_)/_,(0|n*_)/_,(0|a*_)/_,(0|u*_)/_,(0|m*_)/_,r,l,p,P?1+-p/P:1].join(",")+")"},Ot=R.set2DTransformRatio=function(t){var e,i,n,r,o,s,a,l,c,h,u,d=this.data,p=this.t,f=p.style,g=d.x,m=d.y;return!(d.rotationX||d.rotationY||d.z||!0===d.force3D||"auto"===d.force3D&&1!==t&&0!==t)||d.svg&&pt||!_t?(r=d.scaleX,o=d.scaleY,void(d.rotation||d.skewX||d.svg?(e=d.rotation*O,i=e-d.skewX*O,n=1e5,s=Math.cos(e)*r,a=Math.sin(e)*r,l=Math.sin(i)*-o,c=Math.cos(i)*o,d.svg&&(g+=d.xOrigin-(d.xOrigin*s+d.yOrigin*l),m+=d.yOrigin-(d.xOrigin*a+d.yOrigin*c),u=1e-6,u>g&&g>-u&&(g=0),u>m&&m>-u&&(m=0)),h=(0|s*n)/n+","+(0|a*n)/n+","+(0|l*n)/n+","+(0|c*n)/n+","+g+","+m+")",d.svg&&pt?p.setAttribute("transform","matrix("+h):f[gt]=(d.xPercent||d.yPercent?"translate("+d.xPercent+"%,"+d.yPercent+"%) matrix(":"matrix(")+h):f[gt]=(d.xPercent||d.yPercent?"translate("+d.xPercent+"%,"+d.yPercent+"%) matrix(":"matrix(")+r+",0,0,"+o+","+g+","+m+")")):(this.setRatio=St,void St.call(this,t))};dt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(t,e,i,n,o,a,l){if(n._transform)return o;var c,h,u,d,p,f,g,m=n._transform=Ct(t,r,!0,l.parseTransform),y=t.style,_=ft.length,v=l,b={};if("string"==typeof v.transform&&gt)u=D.style,u[gt]=v.transform,u.display="block",u.position="absolute",k.body.appendChild(D),c=Ct(D,null,!1),k.body.removeChild(D);else if("object"==typeof v){if(c={scaleX:$(null!=v.scaleX?v.scaleX:v.scale,m.scaleX),scaleY:$(null!=v.scaleY?v.scaleY:v.scale,m.scaleY),scaleZ:$(v.scaleZ,m.scaleZ),x:$(v.x,m.x),y:$(v.y,m.y),z:$(v.z,m.z),xPercent:$(v.xPercent,m.xPercent),yPercent:$(v.yPercent,m.yPercent),perspective:$(v.transformPerspective,m.perspective)},null!=(g=v.directionalRotation))if("object"==typeof g)for(u in g)v[u]=g[u];else v.rotation=g;"string"==typeof v.x&&-1!==v.x.indexOf("%")&&(c.x=0,c.xPercent=$(v.x,m.xPercent)),"string"==typeof v.y&&-1!==v.y.indexOf("%")&&(c.y=0,c.yPercent=$(v.y,m.yPercent)),c.rotation=tt("rotation"in v?v.rotation:"shortRotation"in v?v.shortRotation+"_short":"rotationZ"in v?v.rotationZ:m.rotation,m.rotation,"rotation",b),_t&&(c.rotationX=tt("rotationX"in v?v.rotationX:"shortRotationX"in v?v.shortRotationX+"_short":m.rotationX||0,m.rotationX,"rotationX",b),c.rotationY=tt("rotationY"in v?v.rotationY:"shortRotationY"in v?v.shortRotationY+"_short":m.rotationY||0,m.rotationY,"rotationY",b)),c.skewX=null==v.skewX?m.skewX:tt(v.skewX,m.skewX),c.skewY=null==v.skewY?m.skewY:tt(v.skewY,m.skewY),(h=c.skewY-m.skewY)&&(c.skewX+=h,c.rotation+=h)}for(_t&&null!=v.force3D&&(m.force3D=v.force3D,f=!0),m.skewType=v.skewType||m.skewType||s.defaultSkewType,(p=m.force3D||m.z||m.rotationX||m.rotationY||c.z||c.rotationX||c.rotationY||c.perspective)||null==v.scale||(c.scaleZ=1);--_>-1;)i=ft[_],((d=c[i]-m[i])>1e-6||-1e-6>d||null!=v[i]||null!=L[i])&&(f=!0,o=new lt(m,i,m[i],d,o),i in b&&(o.e=b[i]),o.xs0=0,o.plugin=a,n._overwriteProps.push(o.n));return d=v.transformOrigin,d&&m.svg&&(At(t,d,c),o=new lt(m,"xOrigin",m.xOrigin,c.xOrigin-m.xOrigin,o,-1,"transformOrigin"),o.b=m.xOrigin,o.e=o.xs0=c.xOrigin,o=new lt(m,"yOrigin",m.yOrigin,c.yOrigin-m.yOrigin,o,-1,"transformOrigin"),o.b=m.yOrigin,o.e=o.xs0=c.yOrigin,d="0px 0px"),(d||_t&&p&&m.zOrigin)&&(gt?(f=!0,i=yt,d=(d||U(t,i,r,!1,"50% 50%"))+"",o=new lt(y,i,0,0,o,-1,"transformOrigin"),o.b=y[i],o.plugin=a,_t?(u=m.zOrigin,d=d.split(" "),m.zOrigin=(d.length>2&&(0===u||"0px"!==d[2])?parseFloat(d[2]):u)||0,o.xs0=o.e=d[0]+" "+(d[1]||"50%")+" 0px",o=new lt(m,"zOrigin",0,0,o,-1,o.n),o.b=u,o.xs0=o.e=m.zOrigin):o.xs0=o.e=d):Q(d+"",m)),f&&(n._transformType=m.svg&&pt||!p&&3!==this._transformType?2:3),o},prefix:!0}),dt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),dt("borderRadius",{defaultValue:"0px",parser:function(t,e,i,o,s){e=this.format(e);var a,l,c,h,u,d,p,f,g,m,y,_,v,b,w,x,T=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],A=t.style;for(g=parseFloat(t.offsetWidth),m=parseFloat(t.offsetHeight),a=e.split(" "),l=0;T.length>l;l++)this.p.indexOf("border")&&(T[l]=F(T[l])),u=h=U(t,T[l],r,!1,"0px"),-1!==u.indexOf(" ")&&(h=u.split(" "),u=h[0],h=h[1]),d=c=a[l],p=parseFloat(u),_=u.substr((p+"").length),v="="===d.charAt(1),v?(f=parseInt(d.charAt(0)+"1",10),d=d.substr(2),f*=parseFloat(d),y=d.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(d),y=d.substr((f+"").length)),""===y&&(y=n[i]||_),y!==_&&(b=Y(t,"borderLeft",p,_),w=Y(t,"borderTop",p,_),"%"===y?(u=b/g*100+"%",h=w/m*100+"%"):"em"===y?(x=Y(t,"borderLeft",1,"em"),u=b/x+"em",h=w/x+"em"):(u=b+"px",h=w+"px"),v&&(d=parseFloat(u)+f+y,c=parseFloat(h)+f+y)),s=ct(A,T[l],u+" "+h,d+" "+c,!1,"0px",s);return s},prefix:!0,formatter:ot("0px 0px 0px 0px",!1,!0)}),dt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,n,o,s){var a,l,c,h,u,d,p="background-position",g=r||z(t,null),m=this.format((g?f?g.getPropertyValue(p+"-x")+" "+g.getPropertyValue(p+"-y"):g.getPropertyValue(p):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),y=this.format(e);if(-1!==m.indexOf("%")!=(-1!==y.indexOf("%"))&&(d=U(t,"backgroundImage").replace(/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,""))&&"none"!==d){for(a=m.split(" "),l=y.split(" "),I.setAttribute("src",d),c=2;--c>-1;)m=a[c],(h=-1!==m.indexOf("%"))!==(-1!==l[c].indexOf("%"))&&(u=0===c?t.offsetWidth-I.width:t.offsetHeight-I.height,a[c]=h?parseFloat(m)/100*u+"px":parseFloat(m)/u*100+"%");m=a.join(" ")}return this.parseComplex(t.style,m,y,o,s)},formatter:Q}),dt("backgroundSize",{defaultValue:"0 0",formatter:Q}),dt("perspective",{defaultValue:"0px",prefix:!0}),dt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),dt("transformStyle",{prefix:!0}),dt("backfaceVisibility",{prefix:!0}),dt("userSelect",{prefix:!0}),dt("margin",{parser:st("marginTop,marginRight,marginBottom,marginLeft")}),dt("padding",{parser:st("paddingTop,paddingRight,paddingBottom,paddingLeft")}),dt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,n,o,s){var a,l,c;return 9>f?(l=t.currentStyle,c=8>f?" ":",",a="rect("+l.clipTop+c+l.clipRight+c+l.clipBottom+c+l.clipLeft+")",e=this.format(e).split(",").join(c)):(a=this.format(U(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,o,s)}}),dt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),dt("autoRound,strictUnits",{parser:function(t,e,i,n,r){return r}}),dt("border",{defaultValue:"0px solid #000",parser:function(t,e,i,n,o,s){return this.parseComplex(t.style,this.format(U(t,"borderTopWidth",r,!1,"0px")+" "+U(t,"borderTopStyle",r,!1,"solid")+" "+U(t,"borderTopColor",r,!1,"#000")),this.format(e),o,s)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(rt)||["#000"])[0]}}),dt("borderWidth",{parser:st("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),dt("float,cssFloat,styleFloat",{parser:function(t,e,i,n,r){var o=t.style,s="cssFloat"in o?"cssFloat":"styleFloat";return new lt(o,s,0,0,r,-1,i,!1,0,o[s],e)}});var Mt=function(t){var e,i=this.t,n=i.filter||U(this.data,"filter")||"",r=0|this.s+this.c*t;100===r&&(-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")&&-1===n.indexOf("oader(")?(i.removeAttribute("filter"),e=!U(this.data,"filter")):(i.filter=n.replace(/alpha\(opacity *=.+?\)/i,""),e=!0)),e||(this.xn1&&(i.filter=n=n||"alpha(opacity="+r+")"),-1===n.indexOf("pacity")?0===r&&this.xn1||(i.filter=n+" alpha(opacity="+r+")"):i.filter=n.replace(b,"opacity="+r))};dt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,n,o,s){var a=parseFloat(U(t,"opacity",r,!1,"1")),l=t.style,c="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),c&&1===a&&"hidden"===U(t,"visibility",r)&&0!==e&&(a=0),B?o=new lt(l,"opacity",a,e-a,o):(o=new lt(l,"opacity",100*a,100*(e-a),o),o.xn1=c?1:0,l.zoom=1,o.type=2,o.b="alpha(opacity="+o.s+")",o.e="alpha(opacity="+(o.s+o.c)+")",o.data=t,o.plugin=s,o.setRatio=Mt),c&&(o=new lt(l,"visibility",0,0,o,-1,null,!1,0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit"),o.xs0="inherit",n._overwriteProps.push(o.n),n._overwriteProps.push(i)),o}});var Lt=function(t,e){e&&(t.removeProperty?("ms"===e.substr(0,2)&&(e="M"+e.substr(1)),t.removeProperty(e.replace(T,"-$1").toLowerCase())):t.removeAttribute(e))},kt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Lt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};dt("className",{parser:function(t,e,n,o,s,a,l){var c,h,u,d,p,f=t.getAttribute("class")||"",g=t.style.cssText;if(s=o._classNamePT=new lt(t,n,0,0,s,2),s.setRatio=kt,s.pr=-11,i=!0,s.b=f,h=G(t,r),u=t._gsClassPT){for(d={},p=u.data;p;)d[p.p]=1,p=p._next;u.setRatio(1)}return t._gsClassPT=s,s.e="="!==e.charAt(1)?e:f.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),o._tween._duration&&(t.setAttribute("class",s.e),c=V(t,h,G(t),l,d),t.setAttribute("class",f),s.data=c.firstMPT,t.style.cssText=g,s=s.xfirst=o.parse(t,c.difs,s,a)),s}});var Dt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,n,r,o=this.t.style,s=a.transform.parse;if("all"===this.e)o.cssText="",r=!0;else for(e=this.e.split(" ").join("").split(","),n=e.length;--n>-1;)i=e[n],a[i]&&(a[i].parse===s?r=!0:i="transformOrigin"===i?yt:a[i].p),Lt(o,i);r&&(Lt(o,gt),this.t._gsTransform&&delete this.t._gsTransform)}};for(dt("clearProps",{parser:function(t,e,n,r,o){return o=new lt(t,n,0,0,o,2),o.setRatio=Dt,o.e=e,o.pr=-10,o.data=r._tween,i=!0,o}}),l="bezier,throwProps,physicsProps,physics2D".split(","),ht=l.length;ht--;)!function(t){if(!a[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";dt(t,{parser:function(t,i,n,r,o,s,l){var c=(_gsScope.GreenSockGlobals||_gsScope).com.greensock.plugins[e];return c?(c._cssRegister(),a[n].parse(t,i,n,r,o,s,l)):(j("Error: "+e+" js file not loaded."),o)}})}}(l[ht]);l=s.prototype,l._firstPT=null,l._onInitTween=function(t,e,a){if(!t.nodeType)return!1;this._target=t,this._tween=a,this._vars=e,c=e.autoRound,i=!1,n=e.suffixMap||s.suffixMap,r=z(t,""),o=this._overwriteProps;var l,d,f,g,m,y,_,v,b,x=t.style
;if(h&&""===x.zIndex&&("auto"===(l=U(t,"zIndex",r))||""===l)&&this._addLazySet(x,"zIndex",0),"string"==typeof e&&(g=x.cssText,l=G(t,r),x.cssText=g+";"+e,l=V(t,l,G(t)).difs,!B&&w.test(e)&&(l.opacity=parseFloat(RegExp.$1)),e=l,x.cssText=g),this._firstPT=d=this.parse(t,e,null),this._transformType){for(b=3===this._transformType,gt?u&&(h=!0,""===x.zIndex&&("auto"===(_=U(t,"zIndex",r))||""===_)&&this._addLazySet(x,"zIndex",0),p&&this._addLazySet(x,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(b?"visible":"hidden"))):x.zoom=1,f=d;f&&f._next;)f=f._next;v=new lt(t,"transform",0,0,null,2),this._linkCSSP(v,null,f),v.setRatio=b&&_t?St:gt?Ot:Et,v.data=this._transform||Ct(t,r,!0),o.pop()}if(i){for(;d;){for(y=d._next,f=g;f&&f.pr>d.pr;)f=f._next;(d._prev=f?f._prev:m)?d._prev._next=d:g=d,(d._next=f)?f._prev=d:m=d,d=y}this._firstPT=g}return!0},l.parse=function(t,e,i,o){var s,l,h,u,d,p,f,g,m,y,_=t.style;for(s in e)p=e[s],l=a[s],l?i=l.parse(t,p,s,this,i,o,e):(d=U(t,s,r)+"",m="string"==typeof p,"color"===s||"fill"===s||"stroke"===s||-1!==s.indexOf("Color")||m&&x.test(p)?(m||(p=nt(p),p=(p.length>3?"rgba(":"rgb(")+p.join(",")+")"),i=ct(_,s,d,p,!0,"transparent",i,0,o)):!m||-1===p.indexOf(" ")&&-1===p.indexOf(",")?(h=parseFloat(d),f=h||0===h?d.substr((h+"").length):"",(""===d||"auto"===d)&&("width"===s||"height"===s?(h=K(t,s,r),f="px"):"left"===s||"top"===s?(h=X(t,s,r),f="px"):(h="opacity"!==s?0:1,f="")),y=m&&"="===p.charAt(1),y?(u=parseInt(p.charAt(0)+"1",10),p=p.substr(2),u*=parseFloat(p),g=p.replace(v,"")):(u=parseFloat(p),g=m?p.substr((u+"").length)||"":""),""===g&&(g=s in n?n[s]:f),p=u||0===u?(y?u+h:u)+g:e[s],f!==g&&""!==g&&(u||0===u)&&h&&(h=Y(t,s,h,f),"%"===g?(h/=Y(t,s,100,"%")/100,!0!==e.strictUnits&&(d=h+"%")):"em"===g?h/=Y(t,s,1,"em"):"px"!==g&&(u=Y(t,s,u,g),g="px"),y&&(u||0===u)&&(p=u+h+g)),y&&(u+=h),!h&&0!==h||!u&&0!==u?void 0!==_[s]&&(p||"NaN"!=p+""&&null!=p)?(i=new lt(_,s,u||h||0,0,i,-1,s,!1,0,d,p),i.xs0="none"!==p||"display"!==s&&-1===s.indexOf("Style")?p:d):j("invalid "+s+" tween value: "+e[s]):(i=new lt(_,s,h,u-h,i,0,s,!1!==c&&("px"===g||"zIndex"===s),0,d,p),i.xs0=g)):i=ct(_,s,d,p,!0,null,i,0,o)),o&&i&&!i.plugin&&(i.plugin=o);return i},l.setRatio=function(t){var e,i,n,r=this._firstPT;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):1e-6>e&&e>-1e-6&&(e=0),r.type)if(1===r.type)if(2===(n=r.l))r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,n=1;r.l>n;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;)2!==r.type?r.t[r.p]=r.e:r.setRatio(t),r=r._next},l._enableTransforms=function(t){this._transform=this._transform||Ct(this._target,r,!0),this._transformType=this._transform.svg&&pt||!t&&3!==this._transformType?2:3};var It=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};l._addLazySet=function(t,e,i){var n=this._firstPT=new lt(t,e,0,0,this._firstPT,2);n.e=i,n.setRatio=It,n.data=this},l._linkCSSP=function(t,e,i,n){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,n=!0),i?i._next=t:n||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},l._kill=function(e){var i,n,r,o=e;if(e.autoAlpha||e.alpha){o={};for(n in e)o[n]=e[n];o.opacity=1,o.autoAlpha&&(o.visibility=1)}return e.className&&(i=this._classNamePT)&&(r=i.xfirst,r&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),t.prototype._kill.call(this,o)};var Rt=function(t,e,i){var n,r,o,s;if(t.slice)for(r=t.length;--r>-1;)Rt(t[r],e,i);else for(n=t.childNodes,r=n.length;--r>-1;)o=n[r],s=o.type,o.style&&(e.push(G(o)),i&&i.push(o)),1!==s&&9!==s&&11!==s||!o.childNodes.length||Rt(o,e,i)};return s.cascadeTo=function(t,i,n){var r,o,s,a=e.to(t,i,n),l=[a],c=[],h=[],u=[],d=e._internals.reservedProps;for(t=a._targets||a.target,Rt(t,c,u),a.render(i,!0),Rt(t,h),a.render(0,!0),a._enabled(!0),r=u.length;--r>-1;)if(o=V(u[r],c[r],h[r]),o.firstMPT){o=o.difs;for(s in n)d[s]&&(o[s]=n[s]);l.push(e.to(u[r],i,o))}return l},t.activate([s]),s},!0),function(){var t=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=t.prototype;e._onInitAllProps=function(){for(var t,e,i,n=this._tween,r=n.vars.roundProps instanceof Array?n.vars.roundProps:n.vars.roundProps.split(","),o=r.length,s={},a=n._propLookup.roundProps;--o>-1;)s[r[o]]=1;for(o=r.length;--o>-1;)for(t=r[o],e=n._firstPT;e;)i=e._next,e.pg?e.t._roundProps(s,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:n._firstPT===e&&(n._firstPT=i),e._next=e._prev=null,n._propLookup[t]=a),e=i;return!1},e._add=function(t,e,i,n){this._addTween(t,e,i,i+n,e,!0),this._overwriteProps.push(e)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(t,e){var i,n,r;if("function"!=typeof t.setAttribute)return!1;this._target=t,this._proxy={},this._start={},this._end={};for(i in e)this._start[i]=this._proxy[i]=n=t.getAttribute(i),r=this._addTween(this._proxy,i,parseFloat(n),e[i],i),this._end[i]=r?r.s+r.c:e[i],this._overwriteProps.push(i);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,n=i.length,r=1===t?this._end:t?this._proxy:this._start;--n>-1;)e=i[n],this._target.setAttribute(e,r[e]+"")}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,n,r,o,s,a,l=!0===e.useRadians?2*Math.PI:360;for(i in e)"useRadians"!==i&&(a=(e[i]+"").split("_"),n=a[0],r=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),o=this.finals[i]="string"==typeof n&&"="===n.charAt(1)?r+parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)):Number(n)||0,s=o-r,a.length&&(n=a.join("_"),-1!==n.indexOf("short")&&(s%=l)!==s%(l/2)&&(s=0>s?s+l:s-l),-1!==n.indexOf("_cw")&&0>s?s=(s+9999999999*l)%l-(0|s/l)*l:-1!==n.indexOf("ccw")&&s>0&&(s=(s-9999999999*l)%l-(0|s/l)*l)),(s>1e-6||-1e-6>s)&&(this._addTween(t,i,r,r+s,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,n,r=_gsScope.GreenSockGlobals||_gsScope,o=r.com.greensock,s=2*Math.PI,a=Math.PI/2,l=o._class,c=function(e,i){var n=l("easing."+e,function(){},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,n},h=t.register||function(){},u=function(t,e,i,n){var r=l("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new n},!0);return h(r,t),r},d=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},p=function(e,i){var n=l("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,r.config=function(t){return new n(t)},n},f=u("Back",p("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),p("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),p("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),g=l("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===i},!0),m=g.prototype=new t;return m.constructor=g,m.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},g.ease=new g(.7,.7),m.config=g.config=function(t,e,i){return new g(t,e,i)},e=l("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),m=e.prototype=new t,m.constructor=e,m.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},m.config=e.config=function(t){return new e(t)},i=l("easing.RoughEase",function(e){e=e||{};for(var i,n,r,o,s,a,l=e.taper||"none",c=[],h=0,u=0|(e.points||20),p=u,f=!1!==e.randomize,g=!0===e.clamp,m=e.template instanceof t?e.template:null,y="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=f?Math.random():1/u*p,n=m?m.getRatio(i):i,"none"===l?r=y:"out"===l?(o=1-i,r=o*o*y):"in"===l?r=i*i*y:.5>i?(o=2*i,r=.5*o*o*y):(o=2*(1-i),r=.5*o*o*y),f?n+=Math.random()*r-.5*r:p%2?n+=.5*r:n-=.5*r,g&&(n>1?n=1:0>n&&(n=0)),c[h++]={x:i,y:n};for(c.sort(function(t,e){return t.x-e.x}),a=new d(1,1,null),p=u;--p>-1;)s=c[p],a=new d(s.x,s.y,a);this._prev=new d(0,0,0!==a.t?a:a.next)},!0),m=i.prototype=new t,m.constructor=i,m.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},m.config=function(t){return new i(t)},i.ease=new i,u("Bounce",c("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),c("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),c("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),u("Circ",c("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),c("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),c("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),n=function(e,i,n){var r=l("easing."+e,function(t,e){this._p1=t||1,this._p2=e||n,this._p3=this._p2/s*(Math.asin(1/this._p1)||0)},!0),o=r.prototype=new t;return o.constructor=r,o.getRatio=i,o.config=function(t,e){return new r(t,e)},r},u("Elastic",n("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*s/this._p2)+1},.3),n("ElasticIn",function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*s/this._p2)},.3),n("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*s/this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*s/this._p2)+1},.45)),u("Expo",c("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),c("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),c("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),u("Sine",c("SineOut",function(t){return Math.sin(t*a)}),c("SineIn",function(t){return 1-Math.cos(t*a)}),c("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),l("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),h(r.SlowMo,"SlowMo","ease,"),h(i,"RoughEase","ease,"),h(e,"SteppedEase","ease,"),f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t,e){"use strict";var i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!i.TweenLite){var n,r,o,s,a,l=function(t){var e,n=t.split("."),r=i;for(e=0;n.length>e;e++)r[n[e]]=r=r[n[e]]||{};return r},c=l("com.greensock"),h=1e-10,u=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},d=function(){},p=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),f={},g=function(e,n,r,o){this.sc=f[e]?f[e].sc:[],f[e]=this,this.gsClass=null,this.func=r;var s=[];this.check=function(a){for(var c,h,u,d,p=n.length,m=p;--p>-1;)(c=f[n[p]]||new g(n[p],[])).gsClass?(s[p]=c.gsClass,m--):a&&c.sc.push(this);if(0===m&&r)for(h=("com.greensock."+e).split("."),u=h.pop(),d=l(h.join("."))[u]=this.gsClass=r.apply(r,s),o&&(i[u]=d,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+e.split(".").pop(),[],function(){return d}):"TweenMax"===e&&"undefined"!=typeof module&&module.exports&&(module.exports=d)),p=0;this.sc.length>p;p++)this.sc[p].check()},this.check(!0)},m=t._gsDefine=function(t,e,i,n){return new g(t,e,i,n)},y=c._class=function(t,e,i){return e=e||function(){},m(t,[],function(){return e},i),e};m.globals=i;var _=[0,0,1,1],v=[],b=y("easing.Ease",function(t,e,i,n){this._func=t,this._type=i||0,this._power=n||0,this._params=e?_.concat(e):_},!0),w=b.map={},x=b.register=function(t,e,i,n){for(var r,o,s,a,l=e.split(","),h=l.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--h>-1;)for(o=l[h],r=n?y("easing."+o,null,!0):c.easing[o]||{},s=u.length;--s>-1;)a=u[s],w[o+"."+a]=w[a+o]=r[a]=t.getRatio?t:t[a]||new t};for(o=b.prototype,o._calcEnd=!1,o.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,n=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===e?1-n:2===e?n:.5>t?n/2:1-n/2},n=["Linear","Quad","Cubic","Quart","Quint,Strong"],r=n.length;--r>-1;)o=n[r]+",Power"+r,x(new b(null,null,1,r),o,"easeOut",!0),x(new b(null,null,2,r),o,"easeIn"+(0===r?",easeNone":"")),x(new b(null,null,3,r),o,"easeInOut");w.linear=c.easing.Linear.easeIn,w.swing=c.easing.Quad.easeInOut;var T=y("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});o=T.prototype,o.addEventListener=function(t,e,i,n,r){r=r||0;var o,l,c=this._listeners[t],h=0;for(null==c&&(this._listeners[t]=c=[]),l=c.length;--l>-1;)o=c[l],o.c===e&&o.s===i?c.splice(l,1):0===h&&r>o.pr&&(h=l+1);c.splice(h,0,{c:e,s:i,up:n,pr:r}),this!==s||a||s.wake()},o.removeEventListener=function(t,e){var i,n=this._listeners[t];if(n)for(i=n.length;--i>-1;)if(n[i].c===e)return void n.splice(i,1)},o.dispatchEvent=function(t){var e,i,n,r=this._listeners[t];if(r)for(e=r.length,i=this._eventTarget;--e>-1;)(n=r[e])&&(n.up?n.c.call(n.s||i,{type:t,target:i}):n.c.call(n.s||i))};var A=t.requestAnimationFrame,C=t.cancelAnimationFrame,E=Date.now||function(){return(new Date).getTime()},S=E();for(n=["ms","moz","webkit","o"],r=n.length;--r>-1&&!A;)A=t[n[r]+"RequestAnimationFrame"],C=t[n[r]+"CancelAnimationFrame"]||t[n[r]+"CancelRequestAnimationFrame"];y("Ticker",function(t,e){var i,n,r,o,l,c=this,u=E(),p=!1!==e&&A,f=500,g=33,m=function(t){var e,s,a=E()-S;a>f&&(u+=a-g),S+=a,c.time=(S-u)/1e3,e=c.time-l,(!i||e>0||!0===t)&&(c.frame++,l+=e+(e>=o?.004:o-e),s=!0),!0!==t&&(r=n(m)),s&&c.dispatchEvent("tick")};T.call(c),c.time=c.frame=0,c.tick=function(){m(!0)},c.lagSmoothing=function(t,e){f=t||1/h,g=Math.min(e,f,0)},c.sleep=function(){null!=r&&(p&&C?C(r):clearTimeout(r),n=d,r=null,c===s&&(a=!1))},c.wake=function(){null!==r?c.sleep():c.frame>10&&(S=E()-f+5),n=0===i?d:p&&A?A:function(t){return setTimeout(t,0|1e3*(l-c.time)+1)},c===s&&(a=!0),m(2)},c.fps=function(t){return arguments.length?(i=t,o=1/(i||60),l=this.time+o,void c.wake()):i},c.useRAF=function(t){return arguments.length?(c.sleep(),p=t,void c.fps(i)):p},c.fps(t),setTimeout(function(){p&&(!r||5>c.frame)&&c.useRAF(!1)},1500)}),o=c.Ticker.prototype=new c.events.EventDispatcher,o.constructor=c.Ticker;var O=y("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!0===e.immediateRender,this.data=e.data,this._reversed=!0===e.reversed,U){a||s.wake();var i=this.vars.useFrames?z:U;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});s=O.ticker=new c.Ticker,o=O.prototype,o._dirty=o._gc=o._initted=o._paused=!1,o._totalTime=o._time=0,o._rawPrevTime=-1,o._next=o._last=o._onUpdate=o._timeline=o.timeline=null,o._paused=!1;var M=function(){a&&E()-S>2e3&&s.wake(),setTimeout(M,2e3)};M(),o.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},o.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},o.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},o.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},o.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},o.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},o.render=function(){},o.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},o.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},o._enabled=function(t,e){return a||s.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},o._kill=function(){return this._enabled(!1,!1)},o.kill=function(t,e){return this._kill(t,e),this},o._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},o._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},o.eventCallback=function(t,e,i,n){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=p(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=n),"onUpdate"===t&&(this._onUpdate=e)}return this},o.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},o.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},o.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},o.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},o.totalTime=function(t,e,i){if(a||s.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(t>n&&!i&&(t=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(this.render(t,e,!1),R.length&&Y())}return this},o.progress=o.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},o.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},o.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},o.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||h,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},o.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},o.paused=function(t){if(!arguments.length)return this._paused;if(t!=this._paused&&this._timeline){a||t||s.wake();var e=this._timeline,i=e.rawTime(),n=i-this._pauseTime;!t&&e.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=t?i:null,this._paused=t,this._active=this.isActive(),!t&&0!==n&&this._initted&&this.duration()&&this.render(e.smoothChildTiming?this._totalTime:(i-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!t&&this._enabled(!0,!1),this};var L=y("core.SimpleTimeline",function(t){O.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});o=L.prototype=new O,o.constructor=L,o.kill()._gc=!1,o._first=o._last=o._recent=null,o._sortChildren=!1,o.add=o.insert=function(t,e){var i,n;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(n=t._startTime;i&&i._startTime>n;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._recent=t,this._timeline&&this._uncache(!0),this},o._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},o.render=function(t,e,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)n=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=n},o.rawTime=function(){return a||s.wake(),this._totalTime};var k=y("TweenLite",function(e,i,n){if(O.call(this,i,n),this.render=k.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:k.selector(e)||e;var r,o,s,a=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?F[k.defaultOverwrite]:"number"==typeof l?l>>0:F[l],(a||e instanceof Array||e.push&&p(e))&&"number"!=typeof e[0])for(this._targets=s=u(e),this._propLookup=[],this._siblings=[],r=0;s.length>r;r++)o=s[r],o?"string"!=typeof o?o.length&&o!==t&&o[0]&&(o[0]===t||o[0].nodeType&&o[0].style&&!o.nodeType)?(s.splice(r--,1),this._targets=s=s.concat(u(o))):(this._siblings[r]=X(o,this,!1),1===l&&this._siblings[r].length>1&&V(o,this,null,1,this._siblings[r])):"string"==typeof(o=s[r--]=k.selector(o))&&s.splice(r+1,1):s.splice(r--,1);else this._propLookup={},this._siblings=X(e,this,!1),1===l&&this._siblings.length>1&&V(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-h,this.render(-this._delay))},!0),D=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},I=function(t,e){var i,n={};for(i in t)N[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!H[i]||H[i]&&H[i]._autoCSS)||(n[i]=t[i],delete t[i]);t.css=n};o=k.prototype=new O,o.constructor=k,o.kill()._gc=!1,o.ratio=0,o._firstPT=o._targets=o._overwrittenProps=o._startAt=null,o._notifyPluginsOfEnabled=o._lazy=!1,k.version="1.14.2",k.defaultEase=o._ease=new b(null,null,1,1),k.defaultOverwrite="auto",k.ticker=s,k.autoSleep=!0,k.lagSmoothing=function(t,e){s.lagSmoothing(t,e)},k.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(k.selector=i,i(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var R=[],P={},B=k._internals={isArray:p,isSelector:D,lazyTweens:R},H=k._plugins={},j=B.tweenLookup={},W=0,N=B.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1},F={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},z=O._rootFramesTimeline=new L,U=O._rootTimeline=new L,Y=B.lazyRender=function(){var t,e=R.length;for(P={};--e>-1;)(t=R[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);R.length=0};U._startTime=s.time,z._startTime=s.frame,U._active=z._active=!0,setTimeout(Y,1),O._updateRoot=k.render=function(){var t,e,i;if(R.length&&Y(),U.render((s.time-U._startTime)*U._timeScale,!1,!1),z.render((s.frame-z._startTime)*z._timeScale,!1,!1),R.length&&Y(),!(s.frame%120)){for(i in j){for(e=j[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete j[i]}if((!(i=U._first)||i._paused)&&k.autoSleep&&!z._first&&1===s._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||s.sleep()}}},s.addEventListener("tick",O._updateRoot);var X=function(t,e,i){var n,r,o=t._gsTweenID;if(j[o||(t._gsTweenID=o="t"+W++)]||(j[o]={target:t,tweens:[]}),e&&(n=j[o].tweens,n[r=n.length]=e,i))for(;--r>-1;)n[r]===e&&n.splice(r,1);return j[o].tweens},G=function(t,e,i,n){var r,o,s=t.vars.onOverwrite;return s&&(r=s(t,e,i,n)),s=k.onOverwrite,s&&(o=s(t,e,i,n)),!1!==r&&!1!==o},V=function(t,e,i,n,r){var o,s,a,l;if(1===n||n>=4){for(l=r.length,o=0;l>o;o++)if((a=r[o])!==e)a._gc||G(a,e)&&a._enabled(!1,!1)&&(s=!0);else if(5===n)break;return s}var c,u=e._startTime+h,d=[],p=0,f=0===e._duration;for(o=r.length;--o>-1;)(a=r[o])===e||a._gc||a._paused||(a._timeline!==e._timeline?(c=c||q(e,0,f),0===q(a,c,f)&&(d[p++]=a)):u>=a._startTime&&a._startTime+a.totalDuration()/a._timeScale>u&&((f||!a._initted)&&2e-10>=u-a._startTime||(d[p++]=a)));for(o=p;--o>-1;)if(a=d[o],2===n&&a._kill(i,t,e)&&(s=!0),2!==n||!a._firstPT&&a._initted){if(2!==n&&!G(a,e))continue;a._enabled(!1,!1)&&(s=!0)}return s},q=function(t,e,i){for(var n=t._timeline,r=n._timeScale,o=t._startTime;n._timeline;){if(o+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return o/=r,o>e?o-e:i&&o===e||!t._initted&&2*h>o-e?h:(o+=t.totalDuration()/t._timeScale/r)>e+h?0:o-e-h};o._init=function(){var t,e,i,n,r,o=this.vars,s=this._overwrittenProps,a=this._duration,l=!!o.immediateRender,c=o.ease;if(o.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(n in o.startAt)r[n]=o.startAt[n];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=l&&!1!==o.lazy,r.startAt=r.delay=null,this._startAt=k.to(this.target,0,r),l)if(this._time>0)this._startAt=null;else if(0!==a)return}else if(o.runBackwards&&0!==a)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(l=!1),i={};for(n in o)N[n]&&"autoCSS"!==n||(i[n]=o[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=l&&!1!==o.lazy,i.immediateRender=l,this._startAt=k.to(this.target,0,i),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof b?c:"function"==typeof c?new b(c,o.easeParams):w[c]||k.defaultEase:k.defaultEase,o.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],s?s[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,s);if(e&&k._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=o.onUpdate,this._initted=!0},o._initProps=function(e,i,n,r){var o,s,a,l,c,h;if(null==e)return!1;P[e._gsTweenID]&&Y(),this.vars.css||e.style&&e!==t&&e.nodeType&&H.css&&!1!==this.vars.autoCSS&&I(this.vars,e);for(o in this.vars){if(h=this.vars[o],N[o])h&&(h instanceof Array||h.push&&p(h))&&-1!==h.join("").indexOf("{self}")&&(this.vars[o]=h=this._swapSelfInParams(h,this));else if(H[o]&&(l=new H[o])._onInitTween(e,this.vars[o],this)){for(this._firstPT=c={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:!0,n:o,pg:!0,pr:l._priority},s=l._overwriteProps.length;--s>-1;)i[l._overwriteProps[s]]=this._firstPT;(l._priority||l._onInitAllProps)&&(a=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[o]=c={_next:this._firstPT,t:e,p:o,f:"function"==typeof e[o],n:o,pg:!1,pr:0},c.s=c.f?e[o.indexOf("set")||"function"!=typeof e["get"+o.substr(3)]?o:"get"+o.substr(3)]():parseFloat(e[o]),c.c="string"==typeof h&&"="===h.charAt(1)?parseInt(h.charAt(0)+"1",10)*Number(h.substr(2)):Number(h)-c.s||0;c&&c._next&&(c._next._prev=c)}return r&&this._kill(r,e)?this._initProps(e,i,n,r):this._overwrite>1&&this._firstPT&&n.length>1&&V(e,this,i,this._overwrite,n)?(this._kill(i,e),this._initProps(e,i,n,r)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(P[e._gsTweenID]=!0),a)},o.render=function(t,e,i){var n,r,o,s,a=this._time,l=this._duration,c=this._rawPrevTime;if(t>=l)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,r="onComplete"),0===l&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>c||c===h)&&c!==t&&(i=!0,c>h&&(r="onReverseComplete")),this._rawPrevTime=s=!e||t||c===t?t:h);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===l&&c>0&&c!==h)&&(r="onReverseComplete",n=this._reversed),0>t&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||i)&&(c>=0&&(i=!0),this._rawPrevTime=s=!e||t||c===t?t:h)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/l,d=this._easeType,p=this._easePower;(1===d||3===d&&u>=.5)&&(u=1-u),3===d&&(u*=2),1===p?u*=u:2===p?u*=u*u:3===p?u*=u*u*u:4===p&&(u*=u*u*u*u),this.ratio=1===d?1-u:2===d?u:.5>t/l?u/2:1-u/2}else this.ratio=this._ease.getRatio(t/l);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=c,R.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/l):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._time||0===l)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||v))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(0>t&&this._startAt&&-1e-4!==t&&this._startAt.render(t,e,i),e||(this._time!==a||n)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||v)),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&-1e-4!==t&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||v),0===l&&this._rawPrevTime===h&&s!==h&&(this._rawPrevTime=0))}},o._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1)
;e="string"!=typeof e?e||this._targets||this.target:k.selector(e)||e;var n,r,o,s,a,l,c,h,u;if((p(e)||D(e))&&"number"!=typeof e[0])for(n=e.length;--n>-1;)this._kill(t,e[n])&&(l=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(e===this._targets[n]){a=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=t?this._overwrittenProps[n]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(c=t||a,h=t!==r&&"all"!==r&&t!==a&&("object"!=typeof t||!t._tempKill),i&&(k.onOverwrite||this.vars.onOverwrite)){for(o in c)a[o]&&(u||(u=[]),u.push(o));if(!G(this,i,e,u))return!1}for(o in c)(s=a[o])&&(s.pg&&s.t._kill(c)&&(l=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete a[o]),h&&(r[o]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},o.invalidate=function(){return this._notifyPluginsOfEnabled&&k._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],O.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-h,this.render(-this._delay)),this},o._enabled=function(t,e){if(a||s.wake(),t&&this._gc){var i,n=this._targets;if(n)for(i=n.length;--i>-1;)this._siblings[i]=X(n[i],this,!0);else this._siblings=X(this.target,this,!0)}return O.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&k._onPluginEvent(t?"_onEnable":"_onDisable",this)},k.to=function(t,e,i){return new k(t,e,i)},k.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new k(t,e,i)},k.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new k(t,e,n)},k.delayedCall=function(t,e,i,n,r){return new k(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:n,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:n,immediateRender:!1,useFrames:r,overwrite:0})},k.set=function(t,e){return new k(t,0,e)},k.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:k.selector(t)||t;var i,n,r,o;if((p(t)||D(t))&&"number"!=typeof t[0]){for(i=t.length,n=[];--i>-1;)n=n.concat(k.getTweensOf(t[i],e));for(i=n.length;--i>-1;)for(o=n[i],r=i;--r>-1;)o===n[r]&&n.splice(i,1)}else for(n=X(t).concat(),i=n.length;--i>-1;)(n[i]._gc||e&&!n[i].isActive())&&n.splice(i,1);return n},k.killTweensOf=k.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var n=k.getTweensOf(t,e),r=n.length;--r>-1;)n[r]._kill(i,t)};var J=y("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=J.prototype},!0);if(o=J.prototype,J.version="1.10.1",J.API=2,o._firstPT=null,o._addTween=function(t,e,i,n,r,o){var s,a;return null!=n&&(s="number"==typeof n||"="!==n.charAt(1)?Number(n)-i:parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)))?(this._firstPT=a={_next:this._firstPT,t:t,p:e,s:i,c:s,f:"function"==typeof t[e],n:r||e,r:o},a._next&&(a._next._prev=a),a):void 0},o.setRatio=function(t){for(var e,i=this._firstPT;i;)e=i.c*t+i.s,i.r?e=Math.round(e):1e-6>e&&e>-1e-6&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},o._kill=function(t){var e,i=this._overwriteProps,n=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;n;)null!=t[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},o._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},k._onPluginEvent=function(t,e){var i,n,r,o,s,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(s=a._next,n=r;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:o)?a._prev._next=a:r=a,(a._next=n)?n._prev=a:o=a,a=s}a=e._firstPT=r}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(i=!0),a=a._next;return i},J.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===J.API&&(H[(new t[e])._propName]=t[e]);return!0},m.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,n=t.priority||0,r=t.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},s=y("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){J.call(this,i,n),this._overwriteProps=r||[]},!0===t.global),a=s.prototype=new J(i);a.constructor=s,s.API=t.API;for(e in o)"function"==typeof t[e]&&(a[o[e]]=t[e]);return s.version=t.version,J.activate([s]),s},n=t._gsQueue){for(r=0;n.length>r;r++)n[r]();for(o in f)f[o].func||t.console.log("GSAP encountered missing dependency: com.greensock."+o)}a=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window);/*!
 * VERSION: 1.7.4
 * DATE: 2014-07-17
 * UPDATES AND DOCS AT: http://www.greensock.com
 *
 * @license Copyright (c) 2008-2014, GreenSock. All rights reserved.
 * This work is subject to the terms at http://www.greensock.com/terms_of_use.html or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var t=document.documentElement,e=window,i=function(i,n){var r="x"===n?"Width":"Height",o="scroll"+r,s="client"+r,a=document.body;return i===e||i===t||i===a?Math.max(t[o],a[o])-(e["inner"+r]||Math.max(t[s],a[s])):i[o]-i["offset"+r]},n=_gsScope._gsDefine.plugin({propName:"scrollTo",API:2,version:"1.7.4",init:function(t,n,r){return this._wdw=t===e,this._target=t,this._tween=r,"object"!=typeof n&&(n={y:n}),this.vars=n,this._autoKill=!1!==n.autoKill,this.x=this.xPrev=this.getX(),this.y=this.yPrev=this.getY(),null!=n.x?(this._addTween(this,"x",this.x,"max"===n.x?i(t,"x"):n.x,"scrollTo_x",!0),this._overwriteProps.push("scrollTo_x")):this.skipX=!0,null!=n.y?(this._addTween(this,"y",this.y,"max"===n.y?i(t,"y"):n.y,"scrollTo_y",!0),this._overwriteProps.push("scrollTo_y")):this.skipY=!0,!0},set:function(t){this._super.setRatio.call(this,t);var n=this._wdw||!this.skipX?this.getX():this.xPrev,r=this._wdw||!this.skipY?this.getY():this.yPrev,o=r-this.yPrev,s=n-this.xPrev;this._autoKill&&(!this.skipX&&(s>7||s<-7)&&n<i(this._target,"x")&&(this.skipX=!0),!this.skipY&&(o>7||o<-7)&&r<i(this._target,"y")&&(this.skipY=!0),this.skipX&&this.skipY&&(this._tween.kill(),this.vars.onAutoKill&&this.vars.onAutoKill.apply(this.vars.onAutoKillScope||this._tween,this.vars.onAutoKillParams||[]))),this._wdw?e.scrollTo(this.skipX?n:this.x,this.skipY?r:this.y):(this.skipY||(this._target.scrollTop=this.y),this.skipX||(this._target.scrollLeft=this.x)),this.xPrev=this.x,this.yPrev=this.y}}),r=n.prototype;n.max=i,r.getX=function(){return this._wdw?null!=e.pageXOffset?e.pageXOffset:null!=t.scrollLeft?t.scrollLeft:document.body.scrollLeft:this._target.scrollLeft},r.getY=function(){return this._wdw?null!=e.pageYOffset?e.pageYOffset:null!=t.scrollTop?t.scrollTop:document.body.scrollTop:this._target.scrollTop},r._kill=function(t){return t.scrollTo_x&&(this.skipX=!0),t.scrollTo_y&&(this.skipY=!0),this._super._kill.call(this,t)}}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()();var dat=dat||{};dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css=function(){return{load:function(t,e){e=e||document;var i=e.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t,e.getElementsByTagName("head")[0].appendChild(i)},inject:function(t,e){e=e||document;var i=document.createElement("style");i.type="text/css",i.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(i)}}}(),dat.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var i in e)this.isUndefined(e[i])||(t[i]=e[i])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var i in e)this.isUndefined(t[i])&&(t[i]=e[i])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var i=e.call(arguments),n=t.length-1;0<=n;n--)i=[t[n].apply(this,i)];return i[0]}},each:function(e,i,n){if(t&&e.forEach===t)e.forEach(i,n);else if(e.length===e.length+0)for(var r=0,o=e.length;r<o&&!(r in e&&i.call(n,e[r],r)===this.BREAK);r++);else for(r in e)if(i.call(n,e[r],r)===this.BREAK)break},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),dat.controllers.Controller=function(t){var e=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onFinishChange=this.__onChange=void 0};return t.extend(e.prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),e}(dat.utils.common),dat.dom.dom=function(t){function e(e){return"0"===e||t.isUndefined(e)?0:(e=e.match(n),t.isNull(e)?0:parseFloat(e[1]))}var i={};t.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,n){t.each(e,function(t){i[t]=n})});var n=/(\d+(\.\d+)?)px/,r={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(e,i,n){t.isUndefined(i)&&(i=!0),t.isUndefined(n)&&(n=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),n&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,n,r,o){r=r||{};var s=i[n];if(!s)throw Error("Event type "+n+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":a.initMouseEvent(n,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,r.x||r.clientX||0,r.y||r.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":s=a.initKeyboardEvent||a.initKeyEvent,t.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),s(n,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:a.initEvent(n,r.bubbles||!1,r.cancelable||!0)}t.defaults(a,o),e.dispatchEvent(a)},bind:function(t,e,i,n){return t.addEventListener?t.addEventListener(e,i,n||!1):t.attachEvent&&t.attachEvent("on"+e,i),r},unbind:function(t,e,i,n){return t.removeEventListener?t.removeEventListener(e,i,n||!1):t.detachEvent&&t.detachEvent("on"+e,i),r},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var i=t.className.split(/ +/);-1==i.indexOf(e)&&(i.push(e),t.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return r},removeClass:function(t,e){if(e){if(void 0!==t.className)if(t.className===e)t.removeAttribute("class");else{var i=t.className.split(/ +/),n=i.indexOf(e);-1!=n&&(i.splice(n,1),t.className=i.join(" "))}}else t.className=void 0;return r},hasClass:function(t,e){return RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){return t=getComputedStyle(t),e(t["border-left-width"])+e(t["border-right-width"])+e(t["padding-left"])+e(t["padding-right"])+e(t.width)},getHeight:function(t){return t=getComputedStyle(t),e(t["border-top-width"])+e(t["border-bottom-width"])+e(t["padding-top"])+e(t["padding-bottom"])+e(t.height)},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)do{e.left+=t.offsetLeft,e.top+=t.offsetTop}while(t=t.offsetParent);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return r}(dat.utils.common),dat.controllers.OptionController=function(t,e,i){var n=function(t,r,o){n.superclass.call(this,t,r);var s=this;if(this.__select=document.createElement("select"),i.isArray(o)){var a={};i.each(o,function(t){a[t]=t}),o=a}i.each(o,function(t,e){var i=document.createElement("option");i.innerHTML=e,i.setAttribute("value",t),s.__select.appendChild(i)}),this.updateDisplay(),e.bind(this.__select,"change",function(){s.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return n.superclass=t,i.extend(n.prototype,t.prototype,{setValue:function(t){return t=n.superclass.prototype.setValue.call(this,t),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t},updateDisplay:function(){return this.__select.value=this.getValue(),n.superclass.prototype.updateDisplay.call(this)}}),n}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(t,e){var i=function(t,n,r){i.superclass.call(this,t,n),r=r||{},this.__min=r.min,this.__max=r.max,this.__step=r.step,e.isUndefined(this.__step)?this.__impliedStep=0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,t=this.__impliedStep,t=t.toString(),t=-1<t.indexOf(".")?t.length-t.indexOf(".")-1:0,this.__precision=t};return i.superclass=t,e.extend(i.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&0!=t%this.__step&&(t=Math.round(t/this.__step)*this.__step),i.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this}}),i}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(t,e,i){var n=function(t,r,o){function s(){var t=parseFloat(h.__input.value);i.isNaN(t)||h.setValue(t)}function a(t){var e=c-t.clientY;h.setValue(h.getValue()+e*h.__impliedStep),c=t.clientY}function l(){e.unbind(window,"mousemove",a),e.unbind(window,"mouseup",l)}this.__truncationSuspended=!1,n.superclass.call(this,t,r,o);var c,h=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"change",s),e.bind(this.__input,"blur",function(){s(),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}),e.bind(this.__input,"mousedown",function(t){e.bind(window,"mousemove",a),e.bind(window,"mouseup",l),c=t.clientY}),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&(h.__truncationSuspended=!0,this.blur(),h.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return n.superclass=t,i.extend(n.prototype,t.prototype,{updateDisplay:function(){var t,e=this.__input;if(this.__truncationSuspended)t=this.getValue();else{t=this.getValue();var i=Math.pow(10,this.__precision);t=Math.round(t*i)/i}return e.value=t,n.superclass.prototype.updateDisplay.call(this)}}),n}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(t,e,i,n,r){function o(t,e,i,n,r){return n+(t-e)/(i-e)*(r-n)}var s=function(t,i,n,r,a){function l(t){t.preventDefault();var i=e.getOffset(h.__background),n=e.getWidth(h.__background);return h.setValue(o(t.clientX,i.left,i.left+n,h.__min,h.__max)),!1}function c(){e.unbind(window,"mousemove",l),e.unbind(window,"mouseup",c),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}s.superclass.call(this,t,i,{min:n,max:r,step:a});var h=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),e.bind(this.__background,"mousedown",function(t){e.bind(window,"mousemove",l),e.bind(window,"mouseup",c),l(t)}),e.addClass(this.__background,"slider"),e.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return s.superclass=t,s.useDefaultStyles=function(){i.inject("/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}")},n.extend(s.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",s.superclass.prototype.updateDisplay.call(this)}}),s}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common),dat.controllers.FunctionController=function(t,e,i){var n=function(t,i,r){n.superclass.call(this,t,i);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===r?"Fire":r,e.bind(this.__button,"click",function(t){return t.preventDefault(),o.fire(),!1}),e.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return n.superclass=t,i.extend(n.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),n}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(t,e,i){var n=function(t,i){n.superclass.call(this,t,i);var r=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),e.bind(this.__checkbox,"change",function(){r.setValue(!r.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return n.superclass=t,i.extend(n.prototype,t.prototype,{setValue:function(t){return t=n.superclass.prototype.setValue.call(this,t),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,n.superclass.prototype.updateDisplay.call(this)}}),n}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(e=e.hex.toString(16);6>e.length;)e="0"+e;return"#"+e}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(dat.utils.common),dat.color.interpret=function(t,e){var i,n,r=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){return null!==(t=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i))&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){return null!==(t=t.match(/^#([A-F0-9]{6})$/i))&&{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:t},CSS_RGB:{read:function(t){return null!==(t=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/))&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:t},CSS_RGBA:{read:function(t){return null!==(t=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/))&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return function(){n=!1;var t=1<arguments.length?e.toArray(arguments):arguments[0];return e.each(r,function(r){if(r.litmus(t))return e.each(r.conversions,function(r,o){if(i=r.read(t),!1===n&&!1!==i)return n=i,i.conversionName=o,i.conversion=r,e.BREAK}),e.BREAK}),n}}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(t,e,i,n,r,o,s,a,l,c,h,u,d,p,f){function g(t,e,i,o){if(void 0===e[i])throw Error("Object "+e+' has no property "'+i+'"');o.color?e=new h(e,i):(e=[e,i].concat(o.factoryArgs),e=n.apply(t,e)),o.before instanceof r&&(o.before=o.before.__li),_(t,e),p.addClass(e.domElement,"c"),i=document.createElement("span"),p.addClass(i,"property-name"),i.innerHTML=e.property;var s=document.createElement("div");return s.appendChild(i),s.appendChild(e.domElement),o=m(t,s,o.before),p.addClass(o,I.CLASS_CONTROLLER_ROW),p.addClass(o,typeof e.getValue()),y(t,o,e),t.__controllers.push(e),e}function m(t,e,i){var n=document.createElement("li");return e&&n.appendChild(e),i?t.__ul.insertBefore(n,params.before):t.__ul.appendChild(n),t.onResize(),n}function y(t,e,i){if(i.__li=e,i.__gui=t,f.extend(i,{options:function(e){return 1<arguments.length?(i.remove(),g(t,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[f.toArray(arguments)]})):f.isArray(e)||f.isObject(e)?(i.remove(),g(t,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return i.__li.firstElementChild.firstElementChild.innerHTML=t,i},listen:function(){return i.__gui.listen(i),i},remove:function(){return i.__gui.remove(i),i}}),i instanceof l){var n=new a(i.object,i.property,{min:i.__min,max:i.__max,step:i.__step});f.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=i[t],r=n[t];i[t]=n[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(i,t),r.apply(n,t)}}),p.addClass(e,"has-slider"),i.domElement.insertBefore(n.domElement,i.domElement.firstElementChild)}else if(i instanceof a){var r=function(e){return f.isNumber(i.__min)&&f.isNumber(i.__max)?(i.remove(),g(t,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[i.__min,i.__max,i.__step]})):e};i.min=f.compose(r,i.min),i.max=f.compose(r,i.max)}else i instanceof o?(p.bind(e,"click",function(){p.fakeEvent(i.__checkbox,"click")}),p.bind(i.__checkbox,"click",function(t){t.stopPropagation()})):i instanceof s?(p.bind(e,"click",function(){p.fakeEvent(i.__button,"click")}),p.bind(e,"mouseover",function(){p.addClass(i.__button,"hover")}),p.bind(e,"mouseout",function(){p.removeClass(i.__button,"hover")})):i instanceof h&&(p.addClass(e,"color"),i.updateDisplay=f.compose(function(t){return e.style.borderLeftColor=i.__color.toString(),t},i.updateDisplay),i.updateDisplay());i.setValue=f.compose(function(e){return t.getRoot().__preset_select&&i.isModified()&&A(t.getRoot(),!0),e},i.setValue)}function _(t,e){var i=t.getRoot(),n=i.__rememberedObjects.indexOf(e.object);if(-1!=n){var r=i.__rememberedObjectIndecesToControllers[n];if(void 0===r&&(r={},i.__rememberedObjectIndecesToControllers[n]=r),r[e.property]=e,i.load&&i.load.remembered){if(i=i.load.remembered,i[t.preset])i=i[t.preset];else{if(!i[S])return;i=i[S]}i[n]&&void 0!==i[n][e.property]&&(n=i[n][e.property],e.initialValue=n,e.setValue(n))}}}function v(t){var e=t.__save_row=document.createElement("li");p.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),p.addClass(e,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",p.addClass(i,"button gears");var n=document.createElement("span");n.innerHTML="Save",p.addClass(n,"button"),p.addClass(n,"save");var r=document.createElement("span");r.innerHTML="New",p.addClass(r,"button"),p.addClass(r,"save-as");var o=document.createElement("span");o.innerHTML="Revert",p.addClass(o,"button"),p.addClass(o,"revert");var s=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?f.each(t.load.remembered,function(e,i){T(t,i,i==t.preset)}):T(t,S,!1),p.bind(s,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),e.appendChild(s),e.appendChild(i),e.appendChild(n),e.appendChild(r),e.appendChild(o),E){var e=document.getElementById("dg-save-locally"),a=document.getElementById("dg-local-explain");e.style.display="block",e=document.getElementById("dg-local-storage"),"true"===localStorage.getItem(document.location.href+".isLocal")&&e.setAttribute("checked","checked");var l=function(){a.style.display=t.useLocalStorage?"block":"none"};l(),p.bind(e,"change",function(){t.useLocalStorage=!t.useLocalStorage,l()})}var c=document.getElementById("dg-new-constructor");p.bind(c,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||O.hide()}),p.bind(i,"click",function(){c.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),O.show(),c.focus(),c.select()}),p.bind(n,"click",function(){t.save()}),p.bind(r,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),p.bind(o,"click",function(){t.revert()})}function b(t){function e(e){return e.preventDefault(),r=e.clientX,p.addClass(t.__closeButton,I.CLASS_DRAG),p.bind(window,"mousemove",i),p.bind(window,"mouseup",n),!1}function i(e){return e.preventDefault(),t.width+=r-e.clientX,t.onResize(),r=e.clientX,!1}function n(){p.removeClass(t.__closeButton,I.CLASS_DRAG),p.unbind(window,"mousemove",i),p.unbind(window,"mouseup",n)}t.__resize_handle=document.createElement("div"),f.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var r;p.bind(t.__resize_handle,"mousedown",e),p.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function w(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function x(t,e){var i={};return f.each(t.__rememberedObjects,function(n,r){var o={};f.each(t.__rememberedObjectIndecesToControllers[r],function(t,i){o[i]=e?t.initialValue:t.getValue()}),i[r]=o}),i}function T(t,e,i){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.__preset_select.appendChild(n),i&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function A(t,e){var i=t.__preset_select[t.__preset_select.selectedIndex];i.innerHTML=e?i.value+"*":i.value}function C(t){0!=t.length&&u(function(){C(t)}),f.each(t,function(t){t.updateDisplay()})}t.inject(".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n");var E,S="Default";try{E="localStorage"in window&&null!==window.localStorage}catch(t){E=!1}var O,M,L=!0,k=!1,D=[],I=function(t){function e(){localStorage.setItem(document.location.href+".gui",JSON.stringify(i.getSaveObject()))}var i=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),p.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=f.defaults(t,{autoPlace:!0,width:I.DEFAULT_WIDTH}),t=f.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),f.isUndefined(t.load)?t.load={preset:S}:t.preset&&(t.load.preset=t.preset),f.isUndefined(t.parent)&&t.hideable&&D.push(this),t.resizable=f.isUndefined(t.parent)&&t.resizable,t.autoPlace&&f.isUndefined(t.scrollable)&&(t.scrollable=!0);var n=E&&"true"===localStorage.getItem(document.location.href+".isLocal");if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){
return t.autoPlace}},preset:{get:function(){return i.parent?i.getRoot().preset:t.load.preset},set:function(e){for(i.parent?i.getRoot().preset=e:t.load.preset=e,e=0;e<this.__preset_select.length;e++)this.__preset_select[e].value==this.preset&&(this.__preset_select.selectedIndex=e);i.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,w(i,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,o&&(o.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(e){t.closed=e,t.closed?p.addClass(i.__ul,I.CLASS_CLOSED):p.removeClass(i.__ul,I.CLASS_CLOSED),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=e?I.TEXT_OPEN:I.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return n},set:function(t){E&&((n=t)?p.bind(window,"unload",e):p.unbind(window,"unload",e),localStorage.setItem(document.location.href+".isLocal",t))}}}),f.isUndefined(t.parent)){if(t.closed=!1,p.addClass(this.domElement,I.CLASS_MAIN),p.makeSelectable(this.domElement,!1),E&&n){i.useLocalStorage=!0;var r=localStorage.getItem(document.location.href+".gui");r&&(t.load=JSON.parse(r))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=I.TEXT_CLOSED,p.addClass(this.__closeButton,I.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),p.bind(this.__closeButton,"click",function(){i.closed=!i.closed})}else{void 0===t.closed&&(t.closed=!0);var o=document.createTextNode(t.name);p.addClass(o,"controller-name"),r=m(i,o),p.addClass(this.__ul,I.CLASS_CLOSED),p.addClass(r,"title"),p.bind(r,"click",function(t){return t.preventDefault(),i.closed=!i.closed,!1}),t.closed||(this.closed=!1)}t.autoPlace&&(f.isUndefined(t.parent)&&(L&&(M=document.createElement("div"),p.addClass(M,"dg"),p.addClass(M,I.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(M),L=!1),M.appendChild(this.domElement),p.addClass(this.domElement,I.CLASS_AUTO_PLACE)),this.parent||w(i,t.width)),p.bind(window,"resize",function(){i.onResize()}),p.bind(this.__ul,"webkitTransitionEnd",function(){i.onResize()}),p.bind(this.__ul,"transitionend",function(){i.onResize()}),p.bind(this.__ul,"oTransitionEnd",function(){i.onResize()}),this.onResize(),t.resizable&&b(this),i.getRoot(),t.parent||function(){var t=i.getRoot();t.width+=1,f.defer(function(){t.width-=1})}()};return I.toggleHide=function(){k=!k,f.each(D,function(t){t.domElement.style.zIndex=k?-999:999,t.domElement.style.opacity=k?0:1})},I.CLASS_AUTO_PLACE="a",I.CLASS_AUTO_PLACE_CONTAINER="ac",I.CLASS_MAIN="main",I.CLASS_CONTROLLER_ROW="cr",I.CLASS_TOO_TALL="taller-than-window",I.CLASS_CLOSED="closed",I.CLASS_CLOSE_BUTTON="close-button",I.CLASS_DRAG="drag",I.DEFAULT_WIDTH=245,I.TEXT_CLOSED="Close Controls",I.TEXT_OPEN="Open Controls",p.bind(window,"keydown",function(t){"text"===document.activeElement.type||72!==t.which&&72!=t.keyCode||I.toggleHide()},!1),f.extend(I.prototype,{add:function(t,e){return g(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return g(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;f.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&M.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};return e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]),e=new I(e),this.__folders[t]=e,t=m(this,e.domElement),p.addClass(t,"folder"),e},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=p.getOffset(t.__ul).top,i=0;f.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(i+=p.getHeight(e))}),window.innerHeight-e-20<i?(p.addClass(t.domElement,I.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(p.removeClass(t.domElement,I.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&f.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(f.isUndefined(O)&&(O=new d,O.domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'),this.parent)throw Error("You can only call remember on a top level GUI.");var t=this;f.each(Array.prototype.slice.call(arguments),function(e){0==t.__rememberedObjects.length&&v(t),-1==t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&w(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,0<this.__rememberedObjects.length&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=x(this)),t.folders={},f.each(this.__folders,function(e,i){t.folders[i]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=x(this),A(this,!1)},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[S]=x(this,!0)),this.load.remembered[t]=x(this),this.preset=t,T(this,t,!0)},revert:function(t){f.each(this.__controllers,function(e){this.getRoot().load.remembered?_(t||this.getRoot(),e):e.setValue(e.initialValue)},this),f.each(this.__folders,function(t){t.revert(t)}),t||A(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&C(this.__listening)}}),I}(dat.utils.css,0,0,dat.controllers.factory=function(t,e,i,n,r,o,s){return function(a,l,c,h){var u=a[l];return s.isArray(c)||s.isObject(c)?new t(a,l,c):s.isNumber(u)?s.isNumber(c)&&s.isNumber(h)?new i(a,l,c,h):new e(a,l,{min:c,max:h}):s.isString(u)?new n(a,l):s.isFunction(u)?new r(a,l,""):s.isBoolean(u)?new o(a,l):void 0}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(t,e,i){var n=function(t,i){function r(){o.setValue(o.__input.value)}n.superclass.call(this,t,i);var o=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"keyup",r),e.bind(this.__input,"change",r),e.bind(this.__input,"blur",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return n.superclass=t,i.extend(n.prototype,t.prototype,{updateDisplay:function(){return e.isActive(this.__input)||(this.__input.value=this.getValue()),n.superclass.prototype.updateDisplay.call(this)}}),n}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(t,e,i,n,r){function o(t,e,i,n){t.style.background="",r.each(l,function(r){t.style.cssText+="background: "+r+"linear-gradient("+e+", "+i+" 0%, "+n+" 100%); "})}function s(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var a=function(t,l){function c(t){p(t),e.bind(window,"mousemove",p),e.bind(window,"mouseup",h)}function h(){e.unbind(window,"mousemove",p),e.unbind(window,"mouseup",h)}function u(){var t=n(this.value);!1!==t?(g.__color.__state=t,g.setValue(g.__color.toOriginal())):this.value=g.__color.toString()}function d(){e.unbind(window,"mousemove",f),e.unbind(window,"mouseup",d)}function p(t){t.preventDefault();var i=e.getWidth(g.__saturation_field),n=e.getOffset(g.__saturation_field),r=(t.clientX-n.left+document.body.scrollLeft)/i;return t=1-(t.clientY-n.top+document.body.scrollTop)/i,1<t?t=1:0>t&&(t=0),1<r?r=1:0>r&&(r=0),g.__color.v=t,g.__color.s=r,g.setValue(g.__color.toOriginal()),!1}function f(t){t.preventDefault();var i=e.getHeight(g.__hue_field),n=e.getOffset(g.__hue_field);return t=1-(t.clientY-n.top+document.body.scrollTop)/i,1<t?t=1:0>t&&(t=0),g.__color.h=360*t,g.setValue(g.__color.toOriginal()),!1}a.superclass.call(this,t,l),this.__color=new i(this.getValue()),this.__temp=new i(0);var g=this;this.domElement=document.createElement("div"),e.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",e.bind(this.__input,"keydown",function(t){13===t.keyCode&&u.call(this)}),e.bind(this.__input,"blur",u),e.bind(this.__selector,"mousedown",function(t){e.addClass(this,"drag").bind(window,"mouseup",function(t){e.removeClass(g.__selector,"drag")})});var m=document.createElement("div");r.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),r.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(.5>this.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),r.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),r.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),r.extend(m.style,{width:"100%",height:"100%",background:"none"}),o(m,"top","rgba(0,0,0,0)","#000"),r.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),s(this.__hue_field),r.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),e.bind(this.__saturation_field,"mousedown",c),e.bind(this.__field_knob,"mousedown",c),e.bind(this.__hue_field,"mousedown",function(t){f(t),e.bind(window,"mousemove",f),e.bind(window,"mouseup",d)}),this.__saturation_field.appendChild(m),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=t,r.extend(a.prototype,t.prototype,{updateDisplay:function(){var t=n(this.getValue());if(!1!==t){var e=!1;r.each(i.COMPONENTS,function(i){if(!r.isUndefined(t[i])&&!r.isUndefined(this.__color.__state[i])&&t[i]!==this.__color.__state[i])return e=!0,{}},this),e&&r.extend(this.__color.__state,t)}r.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=.5>this.__color.v||.5<this.__color.s?255:0,a=255-s;r.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toString()),r.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];return a}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(t,e,i,n){function r(t,e,i){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,i),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,i),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,i,r){if("HEX"===t.__state.space)t.__state[i]=e.component_from_hex(t.__state.hex,r);else{if("HSV"!==t.__state.space)throw"Corrupted color state";n.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var i=e.rgb_to_hsv(t.r,t.g,t.b);n.extend(t.__state,{s:i.s,v:i.v}),n.isNaN(i.h)?n.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=i.h}var l=function(){if(this.__state=t.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return l.COMPONENTS="r g b h s v hex a".split(" "),n.extend(l.prototype,{toString:function(){return i(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),r(l.prototype,"r",2),r(l.prototype,"g",1),r(l.prototype,"b",0),o(l.prototype,"h"),o(l.prototype,"s"),o(l.prototype,"v"),Object.defineProperty(l.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(l.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),l}(dat.color.interpret,dat.color.math=function(){var t;return{hsv_to_rgb:function(t,e,i){var n=t/60-Math.floor(t/60),r=i*(1-e),o=i*(1-n*e);return e=i*(1-(1-n)*e),t=[[i,e,r],[o,i,r],[r,i,e],[r,o,i],[e,r,i],[i,r,o]][Math.floor(t/60)%6],{r:255*t[0],g:255*t[1],b:255*t[2]}},rgb_to_hsv:function(t,e,i){var n=Math.min(t,e,i),r=Math.max(t,e,i),n=r-n;return 0==r?{h:NaN,s:0,v:0}:(t=(t==r?(e-i)/n:e==r?2+(i-t)/n:4+(t-e)/n)/6,0>t&&(t+=1),{h:360*t,s:n/r,v:r/255})},rgb_to_hex:function(t,e,i){return t=this.hex_with_component(0,2,t),t=this.hex_with_component(t,1,e),t=this.hex_with_component(t,0,i)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,i,n){return n<<(t=8*i)|e&~(255<<t)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}(),dat.dom.CenteredDiv=function(t,e){var i=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),t.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var i=this;t.bind(this.backgroundElement,"click",function(){i.hide()})};return i.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},i.prototype.hide=function(){var e=this,i=function(){e.domElement.style.display="none",e.backgroundElement.style.display="none",t.unbind(e.domElement,"webkitTransitionEnd",i),t.unbind(e.domElement,"transitionend",i),t.unbind(e.domElement,"oTransitionEnd",i)};t.bind(this.domElement,"webkitTransitionEnd",i),t.bind(this.domElement,"transitionend",i),t.bind(this.domElement,"oTransitionEnd",i),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},i.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-t.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-t.getHeight(this.domElement)/2+"px"},i}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common),function(){"use strict";/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */
function t(e,n){var r;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=e,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!t.notNeeded(e)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,a=0,l=o.length;a<l;a++)s[o[a]]=function(t,e){return function(){return t.apply(e,arguments)}}(s[o[a]],s);i&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,i,n){var r=Node.prototype.removeEventListener;"click"===t?r.call(e,t,i.hijacked||i,n):r.call(e,t,i,n)},e.addEventListener=function(t,i,n){var r=Node.prototype.addEventListener;"click"===t?r.call(e,t,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):r.call(e,t,i,n)}),"function"==typeof e.onclick&&(r=e.onclick,e.addEventListener("click",function(t){r(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!e,n=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,r=n&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=n&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(n&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(t),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},t.prototype.determineEventType=function(t){return i&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;n&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,i;if(!(e=t.fastClickScrollParent)||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,i,o;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],n){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!r){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i},t.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,s,a,l,c,h=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,s=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(c=t.changedTouches[0],h=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||h,h.fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(a=h.tagName.toLowerCase())){if(e=this.findControl(h)){if(this.focus(h),i)return!1;h=e}}else if(this.needsFocus(h))return t.timeStamp-s>100||n&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(h),this.sendClick(h,t),n&&"select"===a||(this.targetElement=null,t.preventDefault()),!1);return!(!n||r||!(l=h.fastClickScrollParent)||l.fastClickLastScrollTop===l.scrollTop)||(this.needsClick(h)||(t.preventDefault(),this.sendClick(h,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;i&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,n,r;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"none"===t.style.touchAction},t.attach=function(e,i){return new t(e,i)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}(),function t(e){function i(t,e){var i=[],n=0,r=e;for(n;n<r;n++)i.push(t+"frame_"+n+".png");return i}function n(t,e){var i=[],n=0,r=e;for(n;n<r;n++)i.push(AssetLoader.getAsset(t+"frame_"+n+".png"));return i}var r={};t.THAT_THING_WE_DID={fps:30,audio:"assets/audio/that_thing.mp3",path:"assets/animations/bob_that_thing/",frames:200},t.PROUD_PEACOCK={fps:20,audio:"Explorer"===BrowserDetect.BROWSER_NAME||"Opera"===BrowserDetect.BROWSER_NAME||"Mozilla"===BrowserDetect.BROWSER_NAME?null:"assets/audio/proud_peacock.mp3",path:"assets/animations/bob_proud_peacock/",frames:84},r.getDataForType=function(e){var i;switch(e){case"that_thing":i=t.THAT_THING_WE_DID;break;case"proud_peacock":i=t.PROUD_PEACOCK}return i.images=n(i.path,i.frames),i},r.getAssetsForType=function(e){var n;switch(e){case"that_thing":n=t.THAT_THING_WE_DID;break;case"proud_peacock":n=t.PROUD_PEACOCK}return i(n.path,n.frames)},e.CatAnimationData=r}(window);/*! Fabric.js Copyright 2008-2013, Printio (Juriy Zaytsev, Maxim Chernyak) */
var exports=exports||{},fabric=fabric||{version:"1.3.0"};exports.fabric=fabric,"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window):(fabric.document=require("jsdom").jsdom("<!DOCTYPE html><html><head></head><body></body></html>"),fabric.window=fabric.document.createWindow()),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window;/*!
 * Copyright (c) 2009 Simo Kinnunen.
 * Licensed under the MIT license.
 */
var Cufon=function(){function t(t){var e=this.face=t.face;this.glyphs=t.glyphs,this.w=t.w,this.baseSize=parseInt(e["units-per-em"],10),this.family=e["font-family"].toLowerCase(),this.weight=e["font-weight"],this.style=e["font-style"]||"normal",this.viewBox=function(){var t=e.bbox.split(/\s+/),i={minX:parseInt(t[0],10),minY:parseInt(t[1],10),maxX:parseInt(t[2],10),maxY:parseInt(t[3],10)};return i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.toString=function(){return[this.minX,this.minY,this.width,this.height].join(" ")},i}(),this.ascent=-parseInt(e.ascent,10),this.descent=-parseInt(e.descent,10),this.height=-this.ascent+this.descent}function e(){var t={},e={oblique:"italic",italic:"oblique"};this.add=function(e){(t[e.style]||(t[e.style]={}))[e.weight]=e},this.get=function(i,n){var r=t[i]||t[e[i]]||t.normal||t.italic||t.oblique;if(!r)return null;if(n={normal:400,bold:700}[n]||parseInt(n,10),r[n])return r[n];var o,s,a={1:1,99:0}[n%100],l=[];void 0===a&&(a=n>400),500==n&&(n=400);for(var c in r)c=parseInt(c,10),(!o||c<o)&&(o=c),(!s||c>s)&&(s=c),l.push(c);return n<o&&(n=o),n>s&&(n=s),l.sort(function(t,e){return(a?t>n&&e>n?t<e:t>e:t<n&&e<n?t>e:t<e)?-1:1}),r[l[0]]}}function i(){function t(t,e){return t.contains?t.contains(e):16&t.compareDocumentPosition(e)}function e(e){var i=e.relatedTarget;i&&!t(this,i)&&n(this)}function i(t){n(this)}function n(t){setTimeout(function(){p.replace(t,y.get(t).options,!0)},10)}this.attach=function(t){void 0===t.onmouseenter?(o(t,"mouseover",e),o(t,"mouseout",e)):(o(t,"mouseenter",i),o(t,"mouseleave",i))}}function n(){function t(t){return t.cufid||(t.cufid=++i)}var e={},i=0;this.get=function(i){var n=t(i);return e[n]||(e[n]={})}}function r(t){var e={},i={};this.get=function(i){return void 0!=e[i]?e[i]:t[i]},this.getSize=function(t,e){return i[t]||(i[t]=new g.Size(this.get(t),e))},this.extend=function(t){for(var i in t)e[i]=t[i];return this}}function o(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,function(){return i.call(t,fabric.window.event)})}function s(t,e){var i=y.get(t);return i.options?t:(e.hover&&e.hoverables[t.nodeName.toLowerCase()]&&_.attach(t),i.options=e,t)}function a(t){var e={};return function(i){return e.hasOwnProperty(i)||(e[i]=t.apply(null,arguments)),e[i]}}function l(t,e){e||(e=g.getStyle(t));for(var i,n=g.quotedList(e.get("fontFamily").toLowerCase()),r=0,o=n.length;r<o;++r)if(i=n[r],w[i])return w[i].get(e.get("fontStyle"),e.get("fontWeight"));return null}function c(t){return fabric.document.getElementsByTagName(t)}function h(){for(var t,e={},i=0,n=arguments.length;i<n;++i)for(t in arguments[i])e[t]=arguments[i][t];return e}function u(t,e,i,n,r,o){var s=n.separate;if("none"==s)return b[n.engine].apply(null,arguments);var a,l=fabric.document.createDocumentFragment(),c=e.split(T[s]),h="words"==s;h&&m&&(/^\s/.test(e)&&c.unshift(""),/\s$/.test(e)&&c.push(""));for(var u=0,d=c.length;u<d;++u)(a=b[n.engine](t,h?g.textAlign(c[u],i,u,d):c[u],i,n,r,o,u<d-1))&&l.appendChild(a);return l}function d(t,e){for(var i,n,r,o,a=s(t,e).firstChild;a;a=r){if(r=a.nextSibling,o=!1,1==a.nodeType){if(!a.firstChild)continue;if(!/cufon/.test(a.className)){arguments.callee(a,e);continue}o=!0}if(n||(n=g.getStyle(t).extend(e)),i||(i=l(t,n)),i)if(o)b[e.engine](i,null,n,e,a,t);else{var c=a.data;if("undefined"!=typeof G_vmlCanvasManager&&(c=c.replace(/\r/g,"\n")),""!==c){var h=u(i,c,n,e,a,t);h?a.parentNode.replaceChild(h,a):a.parentNode.removeChild(a)}}}}var p=function(){return p.replace.apply(null,arguments)},f=p.DOM={ready:function(){var t=!1,e={loaded:1,complete:1},i=[],n=function(){if(!t){t=!0;for(var e;e=i.shift();e());}};return fabric.document.addEventListener&&(fabric.document.addEventListener("DOMContentLoaded",n,!1),fabric.window.addEventListener("pageshow",n,!1)),!fabric.window.opera&&fabric.document.readyState&&function(){e[fabric.document.readyState]?n():setTimeout(arguments.callee,10)}(),fabric.document.readyState&&fabric.document.createStyleSheet&&function(){try{fabric.document.body.doScroll("left"),n()}catch(t){setTimeout(arguments.callee,1)}}(),o(fabric.window,"load",n),function(e){arguments.length?t?e():i.push(e):n()}}()},g=p.CSS={Size:function(t,e){this.value=parseFloat(t),this.unit=String(t).match(/[a-z%]*$/)[0]||"px",this.convert=function(t){return t/e*this.value},this.convertFrom=function(t){return t/this.value*e},this.toString=function(){return this.value+this.unit}},getStyle:function(t){return new r(t.style)},quotedList:a(function(t){for(var e,i=[],n=/\s*((["'])([\s\S]*?[^\\])\2|[^,]+)\s*/g;e=n.exec(t);)i.push(e[3]||e[1]);return i}),ready:function(){var t=!1,e=[],i=function(){t=!0;for(var i;i=e.shift();i());},n=Object.prototype.propertyIsEnumerable?c("style"):{length:0},r=c("link");return f.ready(function(){for(var t,e=0,o=0,s=r.length;t=r[o],o<s;++o)t.disabled||"stylesheet"!=t.rel.toLowerCase()||++e;fabric.document.styleSheets.length>=n.length+e?i():setTimeout(arguments.callee,10)}),function(i){t?i():e.push(i)}}(),supports:function(t,e){var i=fabric.document.createElement("span").style;return void 0!==i[t]&&(i[t]=e,i[t]===e)},textAlign:function(t,e,i,n){return"right"==e.get("textAlign")?i>0&&(t=" "+t):i<n-1&&(t+=" "),t},textDecoration:function(t,e){e||(e=this.getStyle(t));for(var i={underline:null,overline:null,"line-through":null},n=t;n.parentNode&&1==n.parentNode.nodeType;){var r=!0;for(var o in i)i[o]||(-1!=e.get("textDecoration").indexOf(o)&&(i[o]=e.get("color")),r=!1);if(r)break;e=this.getStyle(n=n.parentNode)}return i},textShadow:a(function(t){if("none"==t)return null;for(var e,i=[],n={},r=0,o=/(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)|(-?[\d.]+[a-z%]*)|,/gi;e=o.exec(t);)","==e[0]?(i.push(n),n={},r=0):e[1]?n.color=e[1]:n[["offX","offY","blur"][r++]]=e[2];return i.push(n),i}),color:a(function(t){var e={};return e.color=t.replace(/^rgba\((.*?),\s*([\d.]+)\)/,function(t,i,n){return e.opacity=parseFloat(n),"rgb("+i+")"}),e}),textTransform:function(t,e){return t[{uppercase:"toUpperCase",lowercase:"toLowerCase"}[e.get("textTransform")]||"toString"]()}},m=0==" ".split(/\s+/).length,y=new n,_=new i,v=[],b={},w={},x={engine:null,hover:!1,hoverables:{a:!0},printable:!0,selector:fabric.window.Sizzle||fabric.window.jQuery&&function(t){return jQuery(t)}||fabric.window.dojo&&dojo.query||fabric.window.$$&&function(t){return $$(t)}||fabric.window.$&&function(t){return $(t)}||fabric.document.querySelectorAll&&function(t){return fabric.document.querySelectorAll(t)}||c,separate:"words",textShadow:"none"},T={words:/\s+/,characters:""};return p.now=function(){return f.ready(),p},p.refresh=function(){for(var t=v.splice(0,v.length),e=0,i=t.length;e<i;++e)p.replace.apply(null,t[e]);return p},p.registerEngine=function(t,e){return e?(b[t]=e,p.set("engine",t)):p},p.registerFont=function(i){var n=new t(i),r=n.family;return w[r]||(w[r]=new e),w[r].add(n),p.set("fontFamily",'"'+r+'"')},p.replace=function(t,e,i){return e=h(x,e),e.engine?("string"==typeof e.textShadow&&e.textShadow&&(e.textShadow=g.textShadow(e.textShadow)),i||v.push(arguments),(t.nodeType||"string"==typeof t)&&(t=[t]),g.ready(function(){for(var i=0,n=t.length;i<n;++i){var r=t[i];"string"==typeof r?p.replace(e.selector(r),e,!0):d(r,e)}}),p):p},p.replaceElement=function(t,e){return e=h(x,e),"string"==typeof e.textShadow&&e.textShadow&&(e.textShadow=g.textShadow(e.textShadow)),d(t,e)},p.engines=b,p.fonts=w,p.getOptions=function(){return h(x)},p.set=function(t,e){return x[t]=e,p},p}();Cufon.registerEngine("canvas",function(){function t(t,e){var i,n=0,r=0,o=[],s=/([mrvxe])([^a-z]*)/g;t:for(var a=0;i=s.exec(t);++a){var l=i[2].split(",");switch(i[1]){case"v":o[a]={m:"bezierCurveTo",a:[n+~~l[0],r+~~l[1],n+~~l[2],r+~~l[3],n+=~~l[4],r+=~~l[5]]};break;case"r":o[a]={m:"lineTo",a:[n+=~~l[0],r+=~~l[1]]};break;case"m":o[a]={m:"moveTo",a:[n=~~l[0],r=~~l[1]]};break;case"x":o[a]={m:"closePath",a:[]};break;case"e":break t}e[o[a].m].apply(e,o[a].a)}return o}function e(t,e){for(var i=0,n=t.length;i<n;++i){var r=t[i];e[r.m].apply(e,r.a)}}var i=Cufon.CSS.supports("display","inline-block"),n=!i&&("BackCompat"==fabric.document.compatMode||/frameset|transitional/i.test(fabric.document.doctype.publicId)),r=fabric.document.createElement("style");r.type="text/css";var o=fabric.document.createTextNode(".cufon-canvas{text-indent:0}@media screen,projection{.cufon-canvas{display:inline;display:inline-block;position:relative;vertical-align:middle"+(n?"":";font-size:1px;line-height:1px")+"}.cufon-canvas .cufon-alt{display:-moz-inline-box;display:inline-block;width:0;height:0;overflow:hidden}"+(i?".cufon-canvas canvas{position:relative}":".cufon-canvas canvas{position:absolute}")+"}@media print{.cufon-canvas{padding:0 !important}.cufon-canvas canvas{display:none}.cufon-canvas .cufon-alt{display:inline}}");try{r.appendChild(o)}catch(t){r.setAttribute("type","text/css"),r.styleSheet.cssText=o.data}return fabric.document.getElementsByTagName("head")[0].appendChild(r),function(n,r,o,s,a,l){function c(i){Y.fillStyle=i||Cufon.textOptions.color||o.get("color");var r=0,a=0;"right"===s.textAlign?Y.translate(k[a],0):"center"===s.textAlign&&Y.translate(k[a]/2,0);for(var l=0,c=A.length;l<c;++l)if("\n"!==A[l]){var h=n.glyphs[A[l]]||n.missingGlyph;if(h){var u=Number(h.w||n.w)+p;V&&(Y.save(),Y.strokeStyle=Y.fillStyle,Y.lineWidth+=Y.lineWidth,Y.beginPath(),V.underline&&(Y.moveTo(0,.5-n.face["underline-position"]),Y.lineTo(u,.5-n.face["underline-position"])),V.overline&&(Y.moveTo(0,n.ascent+.5),Y.lineTo(u,n.ascent+.5)),V["line-through"]&&(Y.moveTo(0,.5-n.descent),Y.lineTo(u,.5-n.descent)),Y.stroke(),Y.restore()),q&&(Y.save(),Y.transform(1,0,-.25,1,0,0)),Y.beginPath(),h.d&&(h.code?e(h.code,Y):h.code=t("m"+h.d,Y)),Y.fill(),s.strokeStyle&&(Y.closePath(),Y.save(),Y.lineWidth=s.strokeWidth,Y.strokeStyle=s.strokeStyle,Y.stroke(),Y.restore()),q&&Y.restore(),Y.translate(u,0),r+=u}}else{a++;var d=-n.ascent-n.ascent/5*s.lineHeight;"right"===s.textAlign?(Y.translate(-C,d),Y.translate(k[a],0)):"center"===s.textAlign?(Y.translate(-r-k[a-1]/2,d),Y.translate(k[a]/2,0)):Y.translate(-r,d),r=0}}var h=null===r,u=n.viewBox,d=o.getSize("fontSize",n.baseSize),p=o.get("letterSpacing");p="normal"==p?0:d.convertFrom(parseInt(p,10));var f=0,g=0,m=0,y=s.textShadow,_=[];if(Cufon.textOptions.shadowOffsets=[],Cufon.textOptions.shadows=null,y){Cufon.textOptions.shadows=y;for(var v=0,b=y.length;v<b;++v){var w=y[v],x=d.convertFrom(parseFloat(w.offX)),T=d.convertFrom(parseFloat(w.offY));_[v]=[x,T]}}for(var A=Cufon.CSS.textTransform(h?a.alt:r,o).split(""),C=0,E=null,S=0,O=1,M=[],v=0,b=A.length;v<b;++v)if("\n"!==A[v]){var L=n.glyphs[A[v]]||n.missingGlyph;L&&(C+=E=Number(L.w||n.w)+p)}else O++,C>S&&(S=C),M.push(C),C=0;M.push(C),C=Math.max(S,C);for(var k=[],v=M.length;v--;)k[v]=C-M[v];if(null===E)return null;g+=u.width-E,m+=u.minX;var D,I;if(h)D=a,I=a.firstChild;else if(D=fabric.document.createElement("span"),D.className="cufon cufon-canvas",D.alt=r,I=fabric.document.createElement("canvas"),D.appendChild(I),s.printable){var R=fabric.document.createElement("span");R.className="cufon-alt",R.appendChild(fabric.document.createTextNode(r)),D.appendChild(R)}var P=D.style,B=I.style||{},H=d.convert(u.height-f+0),j=Math.ceil(H),W=j/H;I.width=Math.ceil(d.convert(C+g-m)*W),I.height=j,f+=u.minY,B.top=Math.round(d.convert(f-n.ascent))+"px",B.left=Math.round(d.convert(m))+"px";var N=Math.ceil(d.convert(C*W)),F=N+"px",z=d.convert(n.height),U=(s.lineHeight-1)*d.convert(-n.ascent/5)*(O-1);Cufon.textOptions.width=N,Cufon.textOptions.height=z*O+U,Cufon.textOptions.lines=O,Cufon.textOptions.totalLineHeight=U,i?(P.width=F,P.height=z+"px"):(P.paddingLeft=F,P.paddingBottom=z-1+"px");var Y=Cufon.textOptions.context||I.getContext("2d"),X=j/u.height;Cufon.textOptions.fontAscent=n.ascent*X,Cufon.textOptions.boundaries=null;for(var G=Cufon.textOptions.shadowOffsets,v=_.length;v--;)G[v]=[_[v][0]*X,_[v][1]*X];Y.save(),Y.scale(X,X),Y.translate(-m-1/X*I.width/2+(Cufon.fonts[n.family].offsetLeft||0),-f-Cufon.textOptions.height/X/2+(Cufon.fonts[n.family].offsetTop||0)),Y.lineWidth=n.face["underline-thickness"],Y.save();var V=Cufon.getTextDecoration(s),q="italic"===s.fontStyle;if(Y.save(),function(){Y.save();var t=0,e=0,i=[{left:0}];s.backgroundColor&&(Y.save(),Y.fillStyle=s.backgroundColor,Y.translate(0,n.ascent),Y.fillRect(0,0,C+10,(-n.ascent+n.descent)*O),Y.restore()),"right"===s.textAlign?(Y.translate(k[e],0),i[0].left=k[e]*X):"center"===s.textAlign&&(Y.translate(k[e]/2,0),i[0].left=k[e]/2*X);for(var r=0,o=A.length;r<o;++r)if("\n"!==A[r]){var a=n.glyphs[A[r]]||n.missingGlyph;if(a){var l=Number(a.w||n.w)+p;s.textBackgroundColor&&(Y.save(),Y.fillStyle=s.textBackgroundColor,Y.translate(0,n.ascent),Y.fillRect(0,0,l+10,-n.ascent+n.descent),Y.restore()),Y.translate(l,0),t+=l,r==o-1&&(i[i.length-1].width=t*X,i[i.length-1].height=(-n.ascent+n.descent)*X)}}else{e++;var c=-n.ascent-n.ascent/5*s.lineHeight,h=i[i.length-1],u={left:0};h.width=t*X,h.height=(-n.ascent+n.descent)*X,"right"===s.textAlign?(Y.translate(-C,c),Y.translate(k[e],0),u.left=k[e]*X):"center"===s.textAlign?(Y.translate(-t-k[e-1]/2,c),Y.translate(k[e]/2,0),u.left=k[e]/2*X):Y.translate(-t,c),i.push(u),t=0}Y.restore(),Cufon.textOptions.boundaries=i}(),y)for(var v=0,b=y.length;v<b;++v){var w=y[v];Y.save(),Y.translate.apply(Y,_[v]),c(w.color),Y.restore()}return c(),Y.restore(),Y.restore(),Y.restore(),D}}()),Cufon.registerEngine("vml",function(){function t(t,i){return e(t,/(?:em|ex|%)$/i.test(i)?"1em":i)}function e(t,e){if(/px$/i.test(e))return parseFloat(e);var i=t.style.left,n=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left,t.style.left=e;var r=t.style.pixelLeft;return t.style.left=i,t.runtimeStyle.left=n,r}if(fabric.document.namespaces){var i=fabric.document.createElement("canvas");if(!(i&&i.getContext&&i.getContext.apply)){null==fabric.document.namespaces.cvml&&fabric.document.namespaces.add("cvml","urn:schemas-microsoft-com:vml");var n=fabric.document.createElement("cvml:shape");if(n.style.behavior="url(#default#VML)",n.coordsize)return n=null,fabric.document.write('<style type="text/css">.cufon-vml-canvas{text-indent:0}@media screen{cvml\\:shape,cvml\\:shadow{behavior:url(#default#VML);display:block;antialias:true;position:absolute}.cufon-vml-canvas{position:absolute;text-align:left}.cufon-vml{display:inline-block;position:relative;vertical-align:middle}.cufon-vml .cufon-alt{position:absolute;left:-10000in;font-size:1px}a .cufon-vml{cursor:pointer}}@media print{.cufon-vml *{display:none}.cufon-vml .cufon-alt{display:inline}}</style>'),function(i,n,r,o,s,a,l){var c=null===n;c&&(n=s.alt);var h=i.viewBox,u=r.computedFontSize||(r.computedFontSize=new Cufon.CSS.Size(t(a,r.get("fontSize"))+"px",i.baseSize)),d=r.computedLSpacing;void 0==d&&(d=r.get("letterSpacing"),r.computedLSpacing=d="normal"==d?0:~~u.convertFrom(e(a,d)));var p,f;if(c)p=s,f=s.firstChild;else{if(p=fabric.document.createElement("span"),p.className="cufon cufon-vml",p.alt=n,f=fabric.document.createElement("span"),f.className="cufon-vml-canvas",p.appendChild(f),o.printable){var g=fabric.document.createElement("span");g.className="cufon-alt",g.appendChild(fabric.document.createTextNode(n)),p.appendChild(g)}l||p.appendChild(fabric.document.createElement("cvml:shape"))}var m=p.style,y=f.style,_=u.convert(h.height),v=Math.ceil(_),b=v/_,w=h.minX,x=h.minY;y.height=v,y.top=Math.round(u.convert(x-i.ascent)),y.left=Math.round(u.convert(w)),m.height=u.convert(i.height)+"px";for(var T,A,C=(Cufon.getTextDecoration(o),r.get("color")),E=Cufon.CSS.textTransform(n,r).split(""),S=0,O=0,M=null,L=o.textShadow,k=0,D=0,I=E.length;k<I;++k)(T=i.glyphs[E[k]]||i.missingGlyph)&&(S+=M=~~(T.w||i.w)+d);if(null===M)return null;var R,P=-w+S+(h.width-M),B=u.convert(P*b),H=Math.round(B),j=P+","+h.height,W="r"+j+"nsnf";for(k=0;k<I;++k)if(T=i.glyphs[E[k]]||i.missingGlyph){c?(A=f.childNodes[D],A.firstChild&&A.removeChild(A.firstChild)):(A=fabric.document.createElement("cvml:shape"),f.appendChild(A)),A.stroked="f",A.coordsize=j,A.coordorigin=R=w-O+","+x,A.path=(T.d?"m"+T.d+"xe":"")+"m"+R+W,A.fillcolor=C;var N=A.style;if(N.width=H,N.height=v,L){var F,z=L[0],U=L[1],Y=Cufon.CSS.color(z.color),X=fabric.document.createElement("cvml:shadow");X.on="t",X.color=Y.color,X.offset=z.offX+","+z.offY,U&&(F=Cufon.CSS.color(U.color),X.type="double",X.color2=F.color,X.offset2=U.offX+","+U.offY),X.opacity=Y.opacity||F&&F.opacity||1,A.appendChild(X)}O+=~~(T.w||i.w)+d,++D}return m.width=Math.max(Math.ceil(u.convert(S*b)),0),p}}}}()),Cufon.getTextDecoration=function(t){return{underline:"underline"===t.textDecoration,overline:"overline"===t.textDecoration,"line-through":"line-through"===t.textDecoration}},void 0!==exports&&(exports.Cufon=Cufon);var JSON;/*
 ----------------------------------------------------
 Event.js : 1.1.1 : 2012/11/19 : MIT License
 ----------------------------------------------------
 https://github.com/mudcube/Event.js
 ----------------------------------------------------
 1	: click, dblclick, dbltap
 1+	: tap, longpress, drag, swipe
 2+	: pinch, rotate
 : mousewheel, devicemotion, shake
 ----------------------------------------------------
 TODO
 ----------------------------------------------------
 * switch configuration to 4th argument on addEventListener
 * bbox calculation for elements scaled with transform.
 ----------------------------------------------------
 NOTES
 ----------------------------------------------------
 * When using other libraries that may have built in "Event" namespace,
 i.e. Typescript, you can use "eventjs" instead of "Event" for all example calls.
 ----------------------------------------------------
 REQUIREMENTS: querySelector, querySelectorAll
 ----------------------------------------------------
 *	There are two ways to add/remove events with this library.
 ----------------------------------------------------
 // Retains "this" attribute as target, and overrides native addEventListener.
 target.addEventListener(type, listener, useCapture);
 target.removeEventListener(type, listener, useCapture);

 // Attempts to perform as fast as possible.
 Event.add(type, listener, configure);
 Event.remove(type, listener, configure);

 *	You can turn prototyping on/off for individual features.
 ----------------------------------------------------
 Event.modifyEventListener = true; // add custom *EventListener commands to HTMLElements.
 Event.modifySelectors = true; // add bulk *EventListener commands on NodeLists from querySelectorAll and others.

 *	Example of setting up a single listener with a custom configuration.
 ----------------------------------------------------
 // optional configuration.
 var configure = {
 fingers: 2, // listen for specifically two fingers.
 snap: 90 // snap to 90 degree intervals.
 };
 // adding with addEventListener()
 target.addEventListener("swipe", function(event) {
 // additional variables can be found on the event object.
 console.log(event.velocity, event.angle, event.fingers);
 }, configure);

 // adding with Event.add()
 Event.add("swipe", function(event, self) {
 // additional variables can be found on the self object.
 console.log(self.velocity, self.angle, self.fingers);
 }, configure);

 *	Multiple listeners glued together.
 ----------------------------------------------------
 // adding with addEventListener()
 target.addEventListener("click swipe", function(event) { });

 // adding with Event.add()
 Event.add(target, "click swipe", function(event, self) { });

 *	Use query selectors to create an event (querySelectorAll)
 ----------------------------------------------------
 // adding events to NodeList from querySelectorAll()
 document.querySelectorAll("#element a.link").addEventListener("click", callback);

 // adding with Event.add()
 Event.add("#element a.link", "click", callback);

 *	Listen for selector to become available (querySelector)
 ----------------------------------------------------
 Event.add("body", "ready", callback);
 // or...
 Event.add({
 target: "body",
 type: "ready",
 timeout: 10000, // set a timeout to stop checking.
 interval: 30, // set how often to check for element.
 listener: callback
 });

 *	Multiple listeners bound to one callback w/ single configuration.
 ----------------------------------------------------
 var bindings = Event.add({
 target: target,
 type: "click swipe",
 snap: 90, // snap to 90 degree intervals.
 minFingers: 2, // minimum required fingers to start event.
 maxFingers: 4, // maximum fingers in one event.
 listener: function(event, self) {
 console.log(self.gesture); // will be click or swipe.
 console.log(self.x);
 console.log(self.y);
 console.log(self.identifier);
 console.log(self.start);
 console.log(self.fingers); // somewhere between "2" and "4".
 self.pause(); // disable event.
 self.resume(); // enable event.
 self.remove(); // remove event.
 }
 });

 *	Multiple listeners bound to multiple callbacks w/ single configuration.
 ----------------------------------------------------
 var bindings = Event.add({
 target: target,
 minFingers: 1,
 maxFingers: 12,
 listeners: {
 click: function(event, self) {
 self.remove(); // removes this click listener.
 },
 swipe: function(event, self) {
 binding.remove(); // removes both the click + swipe listeners.
 }
 }
 });

 *	Multiple listeners bound to multiple callbacks w/ multiple configurations.
 ----------------------------------------------------
 var binding = Event.add({
 target: target,
 listeners: {
 longpress: {
 fingers: 1,
 wait: 500, // milliseconds
 listener: function(event, self) {
 console.log(self.fingers); // "1" finger.
 }
 },
 drag: {
 fingers: 3,
 position: "relative", // "relative", "absolute", "difference", "move"
 listener: function(event, self) {
 console.log(self.fingers); // "3" fingers.
 console.log(self.x); // coordinate is relative to edge of target.
 }
 }
 }
 });

 *	Capturing an event and manually forwarding it to a proxy (tiered events).
 ----------------------------------------------------
 Event.add(target, "down", function(event, self) {
 var x = event.pageX; // local variables that wont change.
 var y = event.pageY;
 Event.proxy.drag({
 event: event,
 target: target,
 listener: function(event, self) {
 console.log(x - event.pageX); // measure movement.
 console.log(y - event.pageY);
 }
 });
 });
 ----------------------------------------------------

 *	Event proxies.
 *	type, fingers, state, start, x, y, position, bbox
 *	rotation, scale, velocity, angle, delay, timeout
 ----------------------------------------------------
 // "Click" :: fingers, minFingers, maxFingers.
 Event.add(window, "click", function(event, self) {
 console.log(self.gesture, self.x, self.y);
 });
 // "Double-Click" :: fingers, minFingers, maxFingers.
 Event.add(window, "dblclick", function(event, self) {
 console.log(self.gesture, self.x, self.y);
 });
 // "Drag" :: fingers, maxFingers, position
 Event.add(window, "drag", function(event, self) {
 console.log(self.gesture, self.fingers, self.state, self.start, self.x, self.y, self.bbox);
 });
 // "Gesture" :: fingers, minFingers, maxFingers.
 Event.add(window, "gesture", function(event, self) {
 console.log(self.gesture, self.fingers, self.state, self.rotation, self.scale);
 });
 // "Swipe" :: fingers, minFingers, maxFingers, snap, threshold.
 Event.add(window, "swipe", function(event, self) {
 console.log(self.gesture, self.fingers, self.velocity, self.angle, self.start, self.x, self.y);
 });
 // "Tap" :: fingers, minFingers, maxFingers, timeout.
 Event.add(window, "tap", function(event, self) {
 console.log(self.gesture, self.fingers);
 });
 // "Longpress" :: fingers, minFingers, maxFingers, delay.
 Event.add(window, "longpress", function(event, self) {
 console.log(self.gesture, self.fingers);
 });
 //
 Event.add(window, "shake", function(event, self) {
 console.log(self.gesture, self.acceleration, self.accelerationIncludingGravity);
 });
 //
 Event.add(window, "devicemotion", function(event, self) {
 console.log(self.gesture, self.acceleration, self.accelerationIncludingGravity);
 });
 //
 Event.add(window, "wheel", function(event, self) {
 console.log(self.gesture, self.state, self.wheelDelta);
 });

 *	Stop, prevent and cancel.
 ----------------------------------------------------
 Event.stop(event); // stop bubble.
 Event.prevent(event); // prevent default.
 Event.cancel(event); // stop and prevent.

 *	Track for proper command/control-key for Mac/PC.
 ----------------------------------------------------
 Event.add(window, "keyup keydown", Event.proxy.metaTracker);
 console.log(Event.proxy.metaKey);

 *	Test for event features, in this example Drag & Drop file support.
 ----------------------------------------------------
 console.log(Event.supports('dragstart') && Event.supports('drop') && !!window.FileReader);

 */
if(JSON||(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,r,o,s,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,i=0;i<o;i+=1)s[i]=str(i,l)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(o=rep.length,i=0;i<o;i+=1)"string"==typeof rep[i]&&(n=rep[i],(r=str(n,l))&&s.push(quote(n)+(gap?": ":":")+r));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(r=str(n,l))&&s.push(quote(n)+(gap?": ":":")+r);return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,n,r=t[e];if(r&&"object"==typeof r)for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=walk(r,i),void 0!==n?r[i]=n:delete r[i]);return reviver.call(t,e,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),void 0===Event)var Event={};if(void 0===eventjs)var eventjs=Event;/*
 ----------------------------------------------------
 Event.proxy : 0.4.2 : 2012/07/29 : MIT License
 ----------------------------------------------------
 https://github.com/mudcube/Event.js
 ----------------------------------------------------
 Pointer Gestures
 ----------------------------------------------------
 1  : click, dblclick, dbltap
 1+ : tap, taphold, drag, swipe
 2+ : pinch, rotate
 ----------------------------------------------------
 Gyroscope Gestures
 ----------------------------------------------------
 * shake
 ----------------------------------------------------
 Fixes issues with
 ----------------------------------------------------
 * mousewheel-Firefox uses DOMMouseScroll and does not return wheelDelta.
 * devicemotion-Fixes issue where event.acceleration is not returned.
 ----------------------------------------------------
 Ideas for the future
 ----------------------------------------------------
 * Keyboard, GamePad, and other input abstractions.
 * Event batching - i.e. for every x fingers down a new gesture is created.
 */
if(void 0===(Event=function(t){"use strict";t.modifyEventListener=!1,t.modifySelectors=!1,t.add=function(t,e,n,r){return i(t,e,n,r,"add")},t.remove=function(t,e,n,r){return i(t,e,n,r,"remove")},t.stop=function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.bubble=0},t.prevent=function(t){t.preventDefault&&t.preventDefault(),t.returnValue=!1},t.cancel=function(e){t.stop(e),t.prevent(e)},t.supports=function(t,e){if("string"==typeof t&&(e=t,t=window),(e="on"+e)in t)return!0;if(t.setAttribute||(t=document.createElement("div")),t.setAttribute&&t.removeAttribute){t.setAttribute(e,"");var i="function"==typeof t[e];return void 0!==t[e]&&(t[e]=null),t.removeAttribute(e),i}};var e=function(t){if(!t||"object"!=typeof t)return t;var i=new t.constructor;for(var n in t)t[n]&&"object"==typeof t[n]?i[n]=e(t[n]):i[n]=t[n];return i},i=function(a,u,d,p,f,g){p=p||{};{if("string"!=typeof a||"ready"!==u){if("string"==typeof a){if(a=document.querySelectorAll(a),0===a.length)return r("Missing target on listener!");1===a.length&&(a=a[0])}var m,y={};if(a.length>0){for(var _=0,v=a.length;_<v;_++)(m=i(a[_],u,d,e(p),f))&&(y[_]=m);return n(y)}if(u.indexOf&&-1!==u.indexOf(" ")&&(u=u.split(" ")),u.indexOf&&-1!==u.indexOf(",")&&(u=u.split(",")),"string"!=typeof u){if("number"==typeof u.length)for(var b=0,w=u.length;b<w;b++)(m=i(a,u[b],d,e(p),f))&&(y[u[b]]=m);else for(var x in u)(m="function"==typeof u[x]?i(a,x,u[x],e(p),f):i(a,x,u[x].listener,e(u[x]),f))&&(y[x]=m);return n(y)}if("function"!=typeof d)return r("Listener is not a function!");var T=p.useCapture||!1,A=o(u)+l(a)+"."+l(d)+"."+(T?1:0);if(t.Gesture&&t.Gesture._gestureHandlers[u]){if("remove"===f){if(!s[A])return;s[A].remove(),delete s[A]}else if("add"===f){if(s[A])return s[A];if(p.useCall&&!t.modifyEventListener){var C=d;d=function(t,e){for(var i in e)t[i]=e[i];return C.call(a,t)}}p.gesture=u,p.target=a,p.listener=d,p.fromOverwrite=g,s[A]=t.proxy[u](p)}}else if(u=o(u),"remove"===f){if(!s[A])return;a[h](u,d,T),delete s[A]}else if("add"===f){if(s[A])return s[A];a[c](u,d,T),s[A]={type:u,target:a,listener:d,remove:function(){t.remove(a,u,d,p)}}}return s[A]}var E=(new Date).getTime(),S=p.timeout,O=p.interval||1e3/60,M=window.setInterval(function(){(new Date).getTime()-E>S&&window.clearInterval(M),document.querySelector(a)&&(window.clearInterval(M),d())},O)}},n=function(t){return{remove:function(){for(var e in t)t[e].remove()},add:function(){for(var e in t)t[e].add()}}},r=function(t){"undefined"!=typeof console&&void 0!==console.error&&console.error(t)},o=function(){var e={};return function(i){return t.pointerType||(window.navigator.msPointerEnabled?(t.pointerType="mspointer",e={mousedown:"MSPointerDown",mousemove:"MSPointerMove",mouseup:"MSPointerUp"}):t.supports("touchstart")?(t.pointerType="touch",e={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"}):t.pointerType="mouse"),e[i]&&(i=e[i]),document.addEventListener?i:"on"+i}}(),s={},a=0,l=function(t){return t===window?"#window":t===document?"#document":t?(t.uniqueID||(t.uniqueID="id"+a++),t.uniqueID):r("Missing target on listener!")},c=document.addEventListener?"addEventListener":"attachEvent",h=document.removeEventListener?"removeEventListener":"detachEvent";return t.createPointerEvent=function(e,i,n){var r=i.gesture,o=i.target,s=e.changedTouches||t.proxy.getCoords(e);if(s.length){var a=s[0];i.pointers=n?[]:s,i.pageX=a.pageX,i.pageY=a.pageY,i.x=i.pageX,i.y=i.pageY}var l=document.createEvent("Event");l.initEvent(r,!0,!0),l.originalEvent=e;for(var c in i)"target"!==c&&(l[c]=i[c]);o.dispatchEvent(l)},t.modifyEventListener&&window.HTMLElement&&function(){var e=function(e){var n=function(n){var r=n+"EventListener",s=e[r];e[r]=function(e,r,a){if(t.Gesture&&t.Gesture._gestureHandlers[e]){var l=a;"object"==typeof a?l.useCall=!0:l={useCall:!0,useCapture:a},i(this,e,r,l,n,!0),s.call(this,e,r,a)}else s.call(this,o(e),r,a)}};n("add"),n("remove")};navigator.userAgent.match(/Firefox/)?(e(HTMLDivElement.prototype),e(HTMLCanvasElement.prototype)):e(HTMLElement.prototype),e(document),e(window)}(),t.modifySelectors&&function(){var t=NodeList.prototype;t.removeEventListener=function(t,e,i){for(var n=0,r=this.length;n<r;n++)this[n].removeEventListener(t,e,i)},t.addEventListener=function(t,e,i){for(var n=0,r=this.length;n<r;n++)this[n].addEventListener(t,e,i)}}(),t}(Event)))var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(t){"use strict";return t.pointerSetup=function(t,e){t.doc=t.target.ownerDocument||t.target,t.minFingers=t.minFingers||t.fingers||1,t.maxFingers=t.maxFingers||t.fingers||1/0,t.position=t.position||"relative",delete t.fingers,e=e||{},e.gesture=t.gesture,e.target=t.target,e.pointerType=Event.pointerType,Event.modifyEventListener&&t.fromOverwrite&&(t.listener=Event.createPointerEvent);var i=0,n=0===e.gesture.indexOf("pointer")&&Event.modifyEventListener?"pointer":"mouse";return e.listener=t.listener,e.proxy=function(i){e.defaultListener=t.listener,t.listener=i,i(t.event,e)},e.remove=function(){t.onPointerDown&&Event.remove(t.target,n+"down",t.onPointerDown),t.onPointerMove&&Event.remove(t.doc,n+"move",t.onPointerMove),t.onPointerUp&&Event.remove(t.doc,n+"up",t.onPointerUp)},e.resume=function(e){!t.onPointerMove||e&&!e.move||Event.add(t.doc,n+"move",t.onPointerMove),!t.onPointerUp||e&&!e.move||Event.add(t.doc,n+"up",t.onPointerUp),t.fingers=i},e.pause=function(e){i=t.fingers,!t.onPointerMove||e&&!e.move||Event.remove(t.doc,n+"move",t.onPointerMove),!t.onPointerUp||e&&!e.up||Event.remove(t.doc,n+"up",t.onPointerUp),t.fingers=0},e},t.pointerStart=function(e,i,n){var r=function(t,e){var i=n.bbox,r=s[e]={};switch(n.position){case"absolute":r.offsetX=0,r.offsetY=0;break;case"difference":r.offsetX=t.pageX,r.offsetY=t.pageY;break;case"move":r.offsetX=t.pageX-i.x1,r.offsetY=t.pageY-i.y1;break;default:r.offsetX=i.x1,r.offsetY=i.y1}if("relative"===n.position)var o=(t.pageX+i.scrollLeft-r.offsetX)*i.scaleX,a=(t.pageY+i.scrollTop-r.offsetY)*i.scaleY;else var o=t.pageX-r.offsetX,a=t.pageY-r.offsetY;r.rotation=0,r.scale=1,r.startTime=r.moveTime=(new Date).getTime(),r.move={x:o,y:a},r.start={x:o,y:a},n.fingers++};n.event=e,i.defaultListener&&(n.listener=i.defaultListener,delete i.defaultListener);for(var o=!n.fingers,s=n.tracker,a=e.changedTouches||t.getCoords(e),l=a.length,c=0;c<l;c++){var h=a[c],u=h.identifier||1/0;if(n.fingers){if(n.fingers>=n.maxFingers){var d=[];for(var u in n.tracker)d.push(u);return i.identifier=d.join(","),o}var p=0;for(var f in s){if(s[f].up){delete s[f],r(h,u),n.cancel=!0;break}p++}if(s[u])continue;r(h,u)}else s=n.tracker={},i.bbox=n.bbox=t.getBoundingBox(n.target),n.fingers=0,n.cancel=!1,r(h,u)}var d=[];for(var u in n.tracker)d.push(u);return i.identifier=d.join(","),o},t.pointerEnd=function(t,e,i,n){for(var r=t.touches||[],o=r.length,s={},a=0;a<o;a++){var l=r[a],c=l.identifier;s[c||1/0]=!0}for(var c in i.tracker){var h=i.tracker[c];s[c]||h.up||(n&&n({pageX:h.pageX,pageY:h.pageY,changedTouches:[{pageX:h.pageX,pageY:h.pageY,identifier:"Infinity"===c?1/0:c}]},"up"),h.up=!0,i.fingers--)}if(0!==i.fingers)return!1;var u=[];i.gestureFingers=0;for(var c in i.tracker)i.gestureFingers++,u.push(c);return e.identifier=u.join(","),!0},t.getCoords=function(e){return void 0!==e.pageX?t.getCoords=function(t){return Array({type:"mouse",x:t.pageX,y:t.pageY,pageX:t.pageX,pageY:t.pageY,identifier:1/0})}:t.getCoords=function(t){return t=t||window.event,Array({type:"mouse",x:t.clientX+document.documentElement.scrollLeft,y:t.clientY+document.documentElement.scrollTop,pageX:t.clientX+document.documentElement.scrollLeft,pageY:t.clientY+document.documentElement.scrollTop,identifier:1/0})},t.getCoords(e)},t.getCoord=function(e){if("ontouchstart"in window){var i=0,n=0;t.getCoord=function(t){var e=t.changedTouches;return e.length?{x:i=e[0].pageX,y:n=e[0].pageY}:{x:i,y:n}}}else void 0!==e.pageX&&void 0!==e.pageY?t.getCoord=function(t){return{x:t.pageX,y:t.pageY}}:t.getCoord=function(t){return t=t||window.event,{x:t.clientX+document.documentElement.scrollLeft,y:t.clientY+document.documentElement.scrollTop}};return t.getCoord(e)},t.getBoundingBox=function(t){t!==window&&t!==document||(t=document.body);var e={x1:0,y1:0,x2:0,y2:0,scrollLeft:0,scrollTop:0};t===document.body?(e.height=document.querySelector(".section.logo-generator").clientHeight,e.width=document.querySelector(".section.logo-generator").clientWidth):(e.height=t.offsetHeight,e.width=t.offsetWidth),e.scaleX=t.width/e.width||1,e.scaleY=t.height/e.height||1;for(var i=t;null!==i;)e.x1+=i.offsetLeft,e.y1+=i.offsetTop,i=i.offsetParent;for(var i=t.parentNode;null!==i&&i!==document.body&&void 0!==i.scrollTop;)e.scrollLeft+=i.scrollLeft,e.scrollTop+=i.scrollTop,i=i.parentNode;return e.x2=e.x1+e.width,e.y2=e.y1+e.height,e},function(){var e=navigator.userAgent.toLowerCase(),i=-1!==e.indexOf("macintosh");if(i&&-1!==e.indexOf("khtml"))var n={91:!0,93:!0};else if(i&&-1!==e.indexOf("firefox"))var n={224:!0};else var n={17:!0};t.isMetaKey=function(t){return!!n[t.keyCode]},t.metaTracker=function(e){n[e.keyCode]&&(t.metaKey="keydown"===e.type)}}(),t}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(t){"use strict";return t.click=function(e){e.maxFingers=e.maxFingers||e.fingers||1;var i;e.onPointerDown=function(i){t.pointerStart(i,n,e)&&(Event.add(e.doc,"mousemove",e.onPointerMove).listener(i),Event.add(e.doc,"mouseup",e.onPointerUp))},e.onPointerMove=function(t){i=t},e.onPointerUp=function(r){if(t.pointerEnd(r,n,e)){if(Event.remove(e.doc,"mousemove",e.onPointerMove),Event.remove(e.doc,"mouseup",e.onPointerUp),i.cancelBubble&&++i.bubble>1)return;var o=i.changedTouches||t.getCoords(i),s=o[0],a=e.bbox,l=t.getBoundingBox(e.target);if("relative"===e.position)var c=(s.pageX+a.scrollLeft-a.x1)*a.scaleX,h=(s.pageY+a.scrollTop-a.y1)*a.scaleY;else var c=s.pageX-a.x1,h=s.pageY-a.y1;c>0&&c<a.width&&h>0&&h<a.height&&a.scrollTop===l.scrollTop&&e.listener(i,n)}};var n=t.pointerSetup(e);return n.state="click",Event.add(e.target,"mousedown",e.onPointerDown),n},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.click=t.click,t}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(t){"use strict";return t.dbltap=t.dblclick=function(e){e.maxFingers=e.maxFingers||e.fingers||1;var i,n,r,o,s;e.onPointerDown=function(l){var c=l.changedTouches||t.getCoords(l);i&&!n?(s=c[0],n=(new Date).getTime()-i):(o=c[0],i=(new Date).getTime(),n=0,clearTimeout(r),r=setTimeout(function(){i=0},700)),t.pointerStart(l,a,e)&&(Event.add(e.doc,"mousemove",e.onPointerMove).listener(l),Event.add(e.doc,"mouseup",e.onPointerUp))},e.onPointerMove=function(a){if(i&&!n){var l=a.changedTouches||t.getCoords(a);s=l[0]}var c=e.bbox;if("relative"===e.position)var h=(s.pageX+c.scrollLeft-c.x1)*c.scaleX,u=(s.pageY+c.scrollTop-c.y1)*c.scaleY;else var h=s.pageX-c.x1,u=s.pageY-c.y1;h>0&&h<c.width&&u>0&&u<c.height&&Math.abs(s.pageX-o.pageX)<=25&&Math.abs(s.pageY-o.pageY)<=25||(Event.remove(e.doc,"mousemove",e.onPointerMove),clearTimeout(r),i=n=0)},e.onPointerUp=function(o){t.pointerEnd(o,a,e)&&(Event.remove(e.doc,"mousemove",e.onPointerMove),Event.remove(e.doc,"mouseup",e.onPointerUp)),i&&n&&(n<=700&&!(o.cancelBubble&&++o.bubble>1)&&(a.state=e.gesture,e.listener(o,a)),clearTimeout(r),i=n=0)};var a=t.pointerSetup(e);return a.state="dblclick",Event.add(e.target,"mousedown",e.onPointerDown),a},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.dbltap=t.dbltap,Event.Gesture._gestureHandlers.dblclick=t.dblclick,t}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(t){"use strict";return t.dragElement=function(e,i){t.drag({event:i,target:e,position:"move",listener:function(t,i){e.style.left=i.x+"px",e.style.top=i.y+"px",Event.prevent(t)}})},t.drag=function(e){e.gesture="drag",e.onPointerDown=function(n){t.pointerStart(n,i,e)&&(e.monitor||(Event.add(e.doc,"mousemove",e.onPointerMove),Event.add(e.doc,"mouseup",e.onPointerUp))),e.onPointerMove(n,"down")},e.onPointerMove=function(n,r){if(!e.tracker)return e.onPointerDown(n);for(var o=e.bbox,s=n.changedTouches||t.getCoords(n),a=s.length,l=0;l<a;l++){var c=s[l],h=c.identifier||1/0,u=e.tracker[h];u&&(u.pageX=c.pageX,u.pageY=c.pageY,i.state=r||"move",i.identifier=h,i.start=u.start,i.fingers=e.fingers,"relative"===e.position?(i.x=(u.pageX+o.scrollLeft-u.offsetX)*o.scaleX,i.y=(u.pageY+o.scrollTop-u.offsetY)*o.scaleY):(i.x=u.pageX-u.offsetX,i.y=u.pageY-u.offsetY),e.listener(n,i))}},e.onPointerUp=function(n){t.pointerEnd(n,i,e,e.onPointerMove)&&(e.monitor||(Event.remove(e.doc,"mousemove",e.onPointerMove),Event.remove(e.doc,"mouseup",e.onPointerUp)))};var i=t.pointerSetup(e);return e.event?e.onPointerDown(e.event):(Event.add(e.target,"mousedown",e.onPointerDown),e.monitor&&(Event.add(e.doc,"mousemove",e.onPointerMove),Event.add(e.doc,"mouseup",e.onPointerUp))),i},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.drag=t.drag,t}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(t){"use strict";var e=Math.PI/180;return t.gesture=function(i){i.minFingers=i.minFingers||i.fingers||2,i.onPointerDown=function(e){var r=i.fingers;if(t.pointerStart(e,n,i)&&(Event.add(i.doc,"mousemove",i.onPointerMove),Event.add(i.doc,"mouseup",i.onPointerUp)),i.fingers===i.minFingers&&r!==i.fingers){n.fingers=i.minFingers,n.scale=1,n.rotation=0,n.state="start";var o="";for(var s in i.tracker)o+=s;n.identifier=parseInt(o),i.listener(e,n)}},i.onPointerMove=function(r,o){for(var s=i.bbox,a=i.tracker,l=r.changedTouches||t.getCoords(r),c=l.length,h=0;h<c;h++){var u=l[h],d=u.identifier||1/0,p=a[d];p&&("relative"===i.position?(p.move.x=(u.pageX+s.scrollLeft-s.x1)*s.scaleX,p.move.y=(u.pageY+s.scrollTop-s.y1)*s.scaleY):(p.move.x=u.pageX-s.x1,p.move.y=u.pageY-s.y1))}if(!(i.fingers<i.minFingers)){var l=[],f=0,g=0,m=0,y=0,c=0;for(var d in a){var u=a[d];u.up||(m+=u.move.x,y+=u.move.y,c++)}m/=c,y/=c;for(var d in a){var u=a[d];if(!u.up){var _=u.start;if(!_.distance){var v=_.x-m,b=_.y-y;_.distance=Math.sqrt(v*v+b*b),_.angle=Math.atan2(v,b)/e}var v=u.move.x-m,b=u.move.y-y;f+=Math.sqrt(v*v+b*b)/_.distance;var w=Math.atan2(v,b)/e,x=(_.angle-w+360)%360-180;u.DEG2=u.DEG1,u.DEG1=x>0?x:-x,void 0!==u.DEG2&&(x>0?u.rotation+=u.DEG1-u.DEG2:u.rotation-=u.DEG1-u.DEG2,g+=u.rotation),l.push(u.move)}}n.touches=l,n.fingers=i.fingers,n.scale=f/i.fingers,n.rotation=g/i.fingers,n.state="change",i.listener(r,n)}},i.onPointerUp=function(e){var r=i.fingers;t.pointerEnd(e,n,i)&&(Event.remove(i.doc,"mousemove",i.onPointerMove),Event.remove(i.doc,"mouseup",i.onPointerUp)),r===i.minFingers&&i.fingers<i.minFingers&&(n.fingers=i.fingers,n.state="end",i.listener(e,n))};var n=t.pointerSetup(i);return Event.add(i.target,"mousedown",i.onPointerDown),n},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.gesture=t.gesture,t}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(t){"use strict";return t.pointerdown=t.pointermove=t.pointerup=function(e){if(!e.target.isPointerEmitter){var i=!0;e.onPointerDown=function(t){i=!1,n.gesture="pointerdown",e.listener(t,n)},e.onPointerMove=function(t){n.gesture="pointermove",e.listener(t,n,i)},e.onPointerUp=function(t){i=!0,n.gesture="pointerup",e.listener(t,n,!0)};var n=t.pointerSetup(e);return Event.add(e.target,"mousedown",e.onPointerDown),Event.add(e.target,"mousemove",e.onPointerMove),Event.add(e.doc,"mouseup",e.onPointerUp),e.target.isPointerEmitter=!0,n}},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.pointerdown=t.pointerdown,Event.Gesture._gestureHandlers.pointermove=t.pointermove,Event.Gesture._gestureHandlers.pointerup=t.pointerup,t}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(t){"use strict";return t.shake=function(t){var e={gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:t.target,listener:t.listener,remove:function(){window.removeEventListener("devicemotion",o,!1)}},i=(new Date).getTime(),n={x:0,y:0,z:0},r={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},o=function(o){var s=o.accelerationIncludingGravity;if(n.x=.8*n.x+(1-.8)*s.x,n.y=.8*n.y+(1-.8)*s.y,n.z=.8*n.z+(1-.8)*s.z,e.accelerationIncludingGravity=n,e.acceleration.x=s.x-n.x,e.acceleration.y=s.y-n.y,e.acceleration.z=s.z-n.z,"devicemotion"===t.gesture)return void t.listener(o,e);for(var a=(new Date).getTime(),l=0,c="xyz".length;l<c;l++){var h="xyz"[l],u=e.acceleration[h],d=r[h],p=Math.abs(u);if(!(a-i<1e3)&&p>4){var f=a*u/p,g=Math.abs(f+d.value);d.value&&g<200?(d.value=f,3===++d.count&&(t.listener(o,e),i=a,d.value=0,d.count=0)):(d.value=f,d.count=1)}}};if(window.addEventListener)return window.addEventListener("devicemotion",o,!1),e},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.shake=t.shake,t}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(t){"use strict";var e=Math.PI/180;return t.swipe=function(i){i.snap=i.snap||90,i.threshold=i.threshold||1,i.onPointerDown=function(e){t.pointerStart(e,n,i)&&(Event.add(i.doc,"mousemove",i.onPointerMove).listener(e),Event.add(i.doc,"mouseup",i.onPointerUp))},i.onPointerMove=function(e){for(var n=e.changedTouches||t.getCoords(e),r=n.length,o=0;o<r;o++){var s=n[o],a=s.identifier||1/0,l=i.tracker[a];l&&(l.move.x=s.pageX,l.move.y=s.pageY,l.moveTime=(new Date).getTime())}},i.onPointerUp=function(r){if(t.pointerEnd(r,n,i)){Event.remove(i.doc,"mousemove",i.onPointerMove),Event.remove(i.doc,"mouseup",i.onPointerUp);var o,s,a,l,c={x:0,y:0},h=0,u=0,d=0;for(var p in i.tracker){var f=i.tracker[p],g=f.move.x-f.start.x,m=f.move.y-f.start.y;h+=f.move.x,u+=f.move.y,c.x+=f.start.x,c.y+=f.start.y,d++;var y=Math.sqrt(g*g+m*m),_=f.moveTime-f.startTime,l=Math.atan2(g,m)/e+180,s=_?y/_:0;if(void 0===a)a=l,o=s;else{if(!(Math.abs(l-a)<=20))return;a=(a+l)/2,o=(o+s)/2}}o>i.threshold&&(c.x/=d,c.y/=d,n.start=c,n.x=h/d,n.y=u/d,n.angle=-(((a/i.snap+.5>>0)*i.snap||360)-360),n.velocity=o,n.fingers=i.gestureFingers,n.state="swipe",i.listener(r,n))}};var n=t.pointerSetup(i);return Event.add(i.target,"mousedown",i.onPointerDown),n},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.swipe=t.swipe,t}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(t){"use strict";return t.tap=t.longpress=function(e){e.delay=e.delay||500,e.timeout=e.timeout||250;var i,n;e.onPointerDown=function(o){if(t.pointerStart(o,r,e)){if(i=(new Date).getTime(),Event.add(e.doc,"mousemove",e.onPointerMove).listener(o),Event.add(e.doc,"mouseup",e.onPointerUp),"longpress"!==e.gesture)return;n=setTimeout(function(){if(!(o.cancelBubble&&++o.bubble>1)){var t=0;for(var i in e.tracker){if(!0===e.tracker[i].end)return;if(e.cancel)return;t++}r.state="start",r.fingers=t,e.listener(o,r)}},e.delay)}},e.onPointerMove=function(i){for(var n=e.bbox,r=i.changedTouches||t.getCoords(i),o=r.length,s=0;s<o;s++){var a=r[s],l=a.identifier||1/0,c=e.tracker[l];if(c){if("relative"===e.position)var h=(a.pageX+n.scrollLeft-n.x1)*n.scaleX,u=(a.pageY+n.scrollTop-n.y1)*n.scaleY;else var h=a.pageX-n.x1,u=a.pageY-n.y1;if(!(h>0&&h<n.width&&u>0&&u<n.height&&Math.abs(h-c.start.x)<=25&&Math.abs(u-c.start.y)<=25))return Event.remove(e.doc,"mousemove",e.onPointerMove),void(e.cancel=!0)}}},e.onPointerUp=function(o){if(t.pointerEnd(o,r,e)){if(clearTimeout(n),Event.remove(e.doc,"mousemove",e.onPointerMove),Event.remove(e.doc,"mouseup",e.onPointerUp),o.cancelBubble&&++o.bubble>1)return;if("longpress"===e.gesture)return void("start"===r.state&&(r.state="end",e.listener(o,r)));if(e.cancel)return;if((new Date).getTime()-i>e.timeout)return;r.state="tap",r.fingers=e.gestureFingers,e.listener(o,r)}};var r=t.pointerSetup(e);return Event.add(e.target,"mousedown",e.onPointerDown),r},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.tap=t.tap,Event.Gesture._gestureHandlers.longpress=t.longpress,t}(Event.proxy),void 0===Event)var Event={};void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(t){"use strict";return t.wheel=function(t){var e,i=t.timeout||150,n=0,r={gesture:"wheel",state:"start",wheelDelta:0,target:t.target,listener:t.listener,remove:function(){t.target[a](l,o,!1)}},o=function(o){o=o||window.event,r.state=n++?"change":"start",r.wheelDelta=o.detail?-20*o.detail:o.wheelDelta,t.listener(o,r),clearTimeout(e),e=setTimeout(function(){n=0,r.state="end",r.wheelDelta=0,t.listener(o,r)},i)},s=document.addEventListener?"addEventListener":"attachEvent",a=document.removeEventListener?"removeEventListener":"detachEvent",l=Event.supports("mousewheel")?"mousewheel":"DOMMouseScroll";return t.target[s](l,o,!1),r},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.wheel=t.wheel,t}(Event.proxy),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&(void 0!==console.log&&console.log.apply&&(fabric.log=function(){return console.log.apply(console,arguments)}),void 0!==console.warn&&console.warn.apply&&(fabric.warn=function(){return console.warn.apply(console,arguments)})),function(){function t(t,e){this.__eventListeners[t]&&(e?fabric.util.removeFromArray(this.__eventListeners[t],e):this.__eventListeners[t].length=0)}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function i(e,i){if(this.__eventListeners){if(1===arguments.length&&"object"==typeof arguments[0])for(var n in e)t.call(this,n,e[n]);else t.call(this,e,i);return this}}function n(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var n=0,r=i.length;n<r;n++)i[n].call(this,e||{});return this}}}fabric.Observable={observe:e,stopObserving:i,fire:n,on:e,off:i,trigger:n}}(),fabric.Collection={add:function(){this._objects.push.apply(this._objects,arguments);for(var t=arguments.length;t--;)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,i){var n=this.getObjects();return i?n[e]=t:n.splice(e,0,t),this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(t){var e=this.getObjects(),i=e.indexOf(t);return-1!==i&&(e.splice(i,1),this._onObjectRemoved(t)),this.renderOnAddRemove&&this.renderAll(),t},forEachObject:function(t,e){for(var i=this.getObjects(),n=i.length;n--;)t.call(e,i[n],n,i);return this},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return this.getObjects().indexOf(t)>-1},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)},toGrayscale:function(){return this.forEachObject(function(t){t.toGrayscale()})}},function(){function t(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t}function e(t,e){return Math.floor(Math.random()*(e-t+1))+t}function i(t){return t*E}function n(t){return t/E}function r(t,e,i){var n=Math.sin(i),r=Math.cos(i);t.subtractEquals(e);var o=t.x*r-t.y*n,s=t.x*n+t.y*r;return new fabric.Point(o,s).addEquals(e)}function o(t,e){return parseFloat(Number(t).toFixed(e))}function s(){return!1}function a(t,e){return l(e)[fabric.util.string.camelize(fabric.util.string.capitalize(t))]}function l(t){if(!t)return fabric;for(var e=t.split("."),i=e.length,n=fabric.window,r=0;r<i;++r)n=n[e[r]];return n}function c(t,e,i){if(t){var n=fabric.util.createImage();n.onload=function(){e&&e.call(i,n),n=n.onload=null},n.src=t}else e&&e.call(i,t)}function h(t,e,i,n){function r(){++s===a&&e&&e(o)}var o=[],s=0,a=t.length;t.forEach(function(t,e){if(t.type){var s=fabric.util.getKlass(t.type,i);s.async?s.fromObject(t,function(i,s){s||(o[e]=i,n&&n(t,o[e])),r()}):(o[e]=s.fromObject(t),n&&n(t,o[e]),r())}})}function u(t,e,i){var n;return n=t.length>1?new fabric.PathGroup(t,e):t[0],void 0!==i&&n.setSourcePath(i),n}function d(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var n=0,r=i.length;n<r;n++)i[n]in t&&(e[i[n]]=t[i[n]])}function p(t,e,i,n,r,o){var s=n-e,a=r-i,l=T(s*s+a*a),c=A(a,s),h=o.length,u=0,d=!0;for(t.save(),t.translate(e,i),t.moveTo(0,0),t.rotate(c),e=0;l>e;)e+=o[u++%h],e>l&&(e=l),t[d?"lineTo":"moveTo"](e,0),d=!d;t.restore()}function f(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t}function g(){return fabric.isLikelyNode?new(require("canvas").Image):fabric.document.createElement("img")}function m(t){for(var e=t.prototype,i=e.stateProperties.length;i--;){var n=e.stateProperties[i],r=n.charAt(0).toUpperCase()+n.slice(1),o="set"+r,s="get"+r;e[s]||(e[s]=function(t){return new Function('return this.get("'+t+'")')}(n)),e[o]||(e[o]=function(t){return new Function("value",'return this.set("'+t+'", value)')}(n))}}function y(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()}function _(t,e){for(var i=[[t[0],t[2],t[4]],[t[1],t[3],t[5]],[0,0,1]],n=[[e[0],e[2],e[4]],[e[1],e[3],e[5]],[0,0,1]],r=[],o=0;o<3;o++){r[o]=[];for(var s=0;s<3;s++){for(var a=0,l=0;l<3;l++)a+=i[o][l]*n[l][s];r[o][s]=a}}return[r[0][0],r[1][0],r[0][1],r[1][1],r[0][2],r[1][2]]}function v(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]}function b(t,e,i,n){for(var r=n[0],o=n[1],s=n[2],a=n[3],l=n[4],c=n[5],h=n[6],u=w(c,h,r,o,a,l,s,e,i),d=0;d<u.length;d++){var p=x.apply(this,u[d]);t.bezierCurveTo.apply(t,p)}}function w(t,e,i,n,r,o,s,a,l){if(C=M.call(arguments),S[C])return S[C];var c=s*(Math.PI/180),h=Math.sin(c),u=Math.cos(c);i=Math.abs(i),n=Math.abs(n);var d=u*(a-t)*.5+h*(l-e)*.5,p=u*(l-e)*.5-h*(a-t)*.5,f=d*d/(i*i)+p*p/(n*n);f>1&&(f=Math.sqrt(f),i*=f,n*=f);var g=u/i,m=h/i,y=-h/n,_=u/n,v=g*a+m*l,b=y*a+_*l,w=g*t+m*e,x=y*t+_*e,T=(w-v)*(w-v)+(x-b)*(x-b),A=1/T-.25;A<0&&(A=0);var E=Math.sqrt(A);o===r&&(E=-E);var O=.5*(v+w)-E*(x-b),L=.5*(b+x)+E*(w-v),k=Math.atan2(b-L,v-O),D=Math.atan2(x-L,w-O),I=D-k;I<0&&1===o?I+=2*Math.PI:I>0&&0===o&&(I-=2*Math.PI);for(var R=Math.ceil(Math.abs(I/(.5*Math.PI+.001))),P=[],B=0;B<R;B++){var H=k+B*I/R,j=k+(B+1)*I/R;P[B]=[O,L,H,j,i,n,h,u]}return S[C]=P,P}function x(t,e,i,n,r,o,s,a){if(C=M.call(arguments),O[C])return O[C];var l=a*r,c=-s*o,h=s*r,u=a*o,d=.5*(n-i),p=8/3*Math.sin(.5*d)*Math.sin(.5*d)/Math.sin(d),f=t+Math.cos(i)-p*Math.sin(i),g=e+Math.sin(i)+p*Math.cos(i),m=t+Math.cos(n),y=e+Math.sin(n),_=m+p*Math.sin(n),v=y-p*Math.cos(n);return O[C]=[l*f+c*g,h*f+u*g,l*_+c*v,h*_+u*v,l*m+c*y,h*m+u*y],O[C]}var T=Math.sqrt,A=Math.atan2;fabric.util={};var C,E=Math.PI/180,S={},O={},M=Array.prototype.join;fabric.util.removeFromArray=t,fabric.util.degreesToRadians=i,fabric.util.radiansToDegrees=n,fabric.util.rotatePoint=r,fabric.util.toFixed=o,fabric.util.getRandomInt=e,fabric.util.falseFunction=s,fabric.util.getKlass=a,fabric.util.resolveNamespace=l,fabric.util.loadImage=c,fabric.util.enlivenObjects=h,fabric.util.groupSVGElements=u,fabric.util.populateWithProperties=d,fabric.util.drawDashedLine=p,fabric.util.createCanvasElement=f,fabric.util.createImage=g,fabric.util.createAccessors=m,fabric.util.clipContext=y,fabric.util.multiplyTransformMatrices=_,fabric.util.getFunctionBody=v,fabric.util.drawArc=b}(),function(){function t(t,e){for(var i=n.call(arguments,2),r=[],o=0,s=t.length;o<s;o++)r[o]=i.length?t[o][e].apply(t[o],i):t[o][e].call(t[o]);return r}function e(t,e){if(t&&0!==t.length){var i=t.length-1,n=e?t[i][e]:t[i];if(e)for(;i--;)t[i][e]>=n&&(n=t[i][e]);else for(;i--;)t[i]>=n&&(n=t[i]);return n}}function i(t,e){if(t&&0!==t.length){var i=t.length-1,n=e?t[i][e]:t[i];if(e)for(;i--;)t[i][e]<n&&(n=t[i][e]);else for(;i--;)t[i]<n&&(n=t[i]);return n}}var n=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==Number.POSITIVE_INFINITY&&n!==Number.NEGATIVE_INFINITY&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var r=n>=0?n:Math.max(i-Math.abs(n),0);r<i;r++)if(r in e&&e[r]===t)return r;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)i in this&&t.call(e,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var i=[],n=0,r=this.length>>>0;n<r;n++)n in this&&(i[n]=t.call(e,this[n],n,this));return i}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)if(i in this&&!t.call(e,this[i],i,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)if(i in this&&t.call(e,this[i],i,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var i,n=[],r=0,o=this.length>>>0;r<o;r++)r in this&&(i=this[r],t.call(e,i,r,this)&&n.push(i));return n}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,i=this.length>>>0,n=0;if(arguments.length>1)e=arguments[1];else for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;n<i;n++)n in this&&(e=t.call(null,e,this[n],n,this));return e}),fabric.util.array={invoke:t,min:i,max:e}}(),function(){function t(t,e){for(var i in e)t[i]=e[i];return t}function e(e){return t({},e)}fabric.util.object={extend:t,clone:e}}(),function(){function t(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function e(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}function i(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:t,capitalize:e,escapeXml:i}}(),function(){var t=Array.prototype.slice,e=Function.prototype.apply,i=function(){};Function.prototype.bind||(Function.prototype.bind=function(n){var r,o=this,s=t.call(arguments,1);return r=s.length?function(){return e.call(o,this instanceof i?this:n,s.concat(t.call(arguments)))}:function(){return e.call(o,this instanceof i?this:n,arguments)},i.prototype=this.prototype,r.prototype=new i,r})}(),function(){function t(){}function e(t){var e=this.constructor.superclass.prototype[t];return arguments.length>1?e.apply(this,n.call(arguments,1)):e.call(this)}function i(){function i(){this.initialize.apply(this,arguments)}var o=null,a=n.call(arguments,0);"function"==typeof a[0]&&(o=a.shift()),i.superclass=o,i.subclasses=[],o&&(t.prototype=o.prototype,i.prototype=new t,o.subclasses.push(i));for(var l=0,c=a.length;l<c;l++)s(i,a[l],o);return i.prototype.initialize||(i.prototype.initialize=r),i.prototype.constructor=i,i.prototype.callSuper=e,i}var n=Array.prototype.slice,r=function(){},o=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),s=function(t,e,i){for(var n in e)n in t.prototype&&"function"==typeof t.prototype[n]&&(e[n]+"").indexOf("callSuper")>-1?t.prototype[n]=function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var r=e[t].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==t)return r}}(n):t.prototype[n]=e[n],
o&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};fabric.util.createClass=i}(),function(){function t(t){var e,i,n=Array.prototype.slice.call(arguments,1),r=n.length;for(i=0;i<r;i++)if(e=typeof t[n[i]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}function e(t,e){return{handler:e,wrappedHandler:i(t,e)}}function i(t,e){return function(i){e.call(o(t),i||fabric.window.event)}}function n(t,e){return function(i){if(p[t]&&p[t][e])for(var n=p[t][e],r=0,o=n.length;r<o;r++)n[r].call(this,i||fabric.window.event)}}function r(t,e){t||(t=fabric.window.event);for(var i,n=t.target||("unknown"!=typeof t.srcElement?t.srcElement:null),r=fabric.document.body||{scrollLeft:0,scrollTop:0},o=fabric.document.documentElement,s=n,a=0,l=0;n&&n.parentNode&&!i;)n=n.parentNode,n!==fabric.document&&"fixed"===fabric.util.getElementStyle(n,"position")&&(i=n),n!==fabric.document&&s!==e&&"absolute"===fabric.util.getElementStyle(n,"position")?(a=0,l=0):n===fabric.document?(a=r.scrollLeft||o.scrollLeft||0,l=r.scrollTop||o.scrollTop||0):(a+=n.scrollLeft||0,l+=n.scrollTop||0);return{x:f(t)+a,y:g(t)+l}}var o,s,a=function(){var t=0;return function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+t++)}}();!function(){var t={};o=function(e){return t[e]},s=function(e,i){t[e]=i}}();var l,c,h=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),u=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),d={},p={};h?(l=function(t,e,i){t.addEventListener(e,i,!1)},c=function(t,e,i){t.removeEventListener(e,i,!1)}):u?(l=function(t,i,n){var r=a(t);s(r,t),d[r]||(d[r]={}),d[r][i]||(d[r][i]=[]);var o=e(r,n);d[r][i].push(o),t.attachEvent("on"+i,o.wrappedHandler)},c=function(t,e,i){var n,r=a(t);if(d[r]&&d[r][e])for(var o=0,s=d[r][e].length;o<s;o++)(n=d[r][e][o])&&n.handler===i&&(t.detachEvent("on"+e,n.wrappedHandler),d[r][e][o]=null)}):(l=function(t,e,i){var r=a(t);if(p[r]||(p[r]={}),!p[r][e]){p[r][e]=[];var o=t["on"+e];o&&p[r][e].push(o),t["on"+e]=n(r,e)}p[r][e].push(i)},c=function(t,e,i){var n=a(t);if(p[n]&&p[n][e])for(var r=p[n][e],o=0,s=r.length;o<s;o++)r[o]===i&&r.splice(o,1)}),fabric.util.addListener=l,fabric.util.removeListener=c;var f=function(t){return"unknown"!=typeof t.clientX?t.clientX:0},g=function(t){return"unknown"!=typeof t.clientY?t.clientY:0};fabric.isTouchSupported&&(f=function(t){return"touchend"!==t.type?t.touches&&t.touches[0]?t.touches[0].pageX-(t.touches[0].pageX-t.touches[0].clientX)||t.clientX:t.clientX:t.changedTouches&&t.changedTouches[0]?t.changedTouches[0].pageX-(t.changedTouches[0].pageX-t.changedTouches[0].clientX)||t.clientX:t.clientX},g=function(t){return"touchend"!==t.type?t.touches&&t.touches[0]?t.touches[0].pageY-(t.touches[0].pageY-t.touches[0].clientY)||t.clientY:t.clientY:t.changedTouches&&t.changedTouches[0]?t.changedTouches[0].pageY-(t.changedTouches[0].pageY-t.changedTouches[0].clientY)||t.clientY:t.clientY}),fabric.util.getPointer=r,fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function t(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?o(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var n in e)if("opacity"===n)o(t,e[n]);else{var r="float"===n||"cssFloat"===n?void 0===i.styleFloat?"cssFloat":"styleFloat":n;i[r]=e[n]}return t}var e=fabric.document.createElement("div"),i="string"==typeof e.style.opacity,n="string"==typeof e.style.filter,r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(t){return t};i?o=function(t,e){return t.style.opacity=e,t}:n&&(o=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),r.test(i.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(r,e)):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=t}(),function(){function t(t){return"string"==typeof t?fabric.document.getElementById(t):t}function e(t,e){var i=fabric.document.createElement(t);for(var n in e)"class"===n?i.className=e[n]:"for"===n?i.htmlFor=e[n]:i.setAttribute(n,e[n]);return i}function i(t,e){-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)}function n(t,i,n){return"string"==typeof i&&(i=e(i,n)),t.parentNode&&t.parentNode.replaceChild(i,t),i.appendChild(t),i}function r(t){var e,i,n={left:0,top:0},r=t&&t.ownerDocument,s={left:0,top:0},a={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return{left:0,top:0};for(var l in a)s[a[l]]+=parseInt(o(t,l),10)||0;return e=r.documentElement,void 0!==t.getBoundingClientRect&&(n=t.getBoundingClientRect()),i=null!=r&&r===r.window?r:9===r.nodeType&&(r.defaultView||r.parentWindow),{left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)+s.left,top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0)+s.top}}function o(t,e){if(t.style||(t.style={}),fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle)return fabric.document.defaultView.getComputedStyle(t,null)[e];var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i}var s,a=Array.prototype.slice,l=function(t){return a.call(t,0)};try{s=l(fabric.document.childNodes)instanceof Array}catch(t){}s||(l=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e}),function(){function t(t){return void 0!==t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),n?t.style[n]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t}function e(t){return void 0!==t.onselectstart&&(t.onselectstart=null),n?t.style[n]="":"string"==typeof t.unselectable&&(t.unselectable=""),t}var i=fabric.document.documentElement.style,n="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=t,fabric.util.makeElementSelectable=e}(),function(){function t(t,e){var i=fabric.document.getElementsByTagName("head")[0],n=fabric.document.createElement("script"),r=!0;n.onload=n.onreadystatechange=function(t){if(r){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;r=!1,e(t||fabric.window.event),n=n.onload=n.onreadystatechange=null}},n.src=t,i.appendChild(n)}fabric.util.getScript=t}(),fabric.util.getById=t,fabric.util.toArray=l,fabric.util.makeElement=e,fabric.util.addClass=i,fabric.util.wrapElement=n,fabric.util.getElementOffset=r,fabric.util.getElementStyle=o}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function i(i,r){r||(r={});var o,s=r.method?r.method.toUpperCase():"GET",a=r.onComplete||function(){},l=n();return l.onreadystatechange=function(){4===l.readyState&&(a(l),l.onreadystatechange=e)},"GET"===s&&(o=null,"string"==typeof r.parameters&&(i=t(i,r.parameters))),l.open(s,i,!0),"POST"!==s&&"PUT"!==s||l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.send(o),l}var n=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{if(t[e]())return t[e]}catch(t){}}();fabric.util.request=i}(),function(){function t(t){t||(t={});var e,n=+new Date,r=t.duration||500,o=n+r,s=t.onChange||function(){},a=t.abort||function(){return!1},l=t.easing||function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},c="startValue"in t?t.startValue:0,h="endValue"in t?t.endValue:100,u=t.byValue||h-c;t.onStart&&t.onStart(),function h(){e=+new Date;var d=e>o?r:e-n;return a()?void(t.onComplete&&t.onComplete()):(s(l(d,c,u,r)),e>o?void(t.onComplete&&t.onComplete()):void i(h))}()}var e=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)},i=function(){return e.apply(fabric.window,arguments)};fabric.util.animate=t,fabric.util.requestAnimFrame=i}(),function(){function t(t,e,i,n){return i*(t/=n)*t+e}function e(t,e,i,n){return-i*(t/=n)*(t-2)+e}function i(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}function n(t,e,i,n){return i*(t/=n)*t*t+e}function r(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e}function o(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}function s(t,e,i,n){return i*(t/=n)*t*t*t+e}function a(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e}function l(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}function c(t,e,i,n){return i*(t/=n)*t*t*t*t+e}function h(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e}function u(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}function d(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e}function p(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e}function f(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e}function g(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e}function m(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e}function y(t,e,i,n){return 0===t?e:t===n?e+i:(t/=n/2,t<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e)}function _(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e}function v(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e}function b(t,e,i,n){return t/=n/2,t<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function w(t,e,i,n){var r=1.70158,o=0,s=i;return 0===t?e:1===(t/=n)?e+i:(o||(o=.3*n),s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),-s*Math.pow(2,10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/o)+e)}function x(t,e,i,n){var r=1.70158,o=0,s=i;return 0===t?e:1===(t/=n)?e+i:(o||(o=.3*n),s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*n-r)*(2*Math.PI)/o)+i+e)}function T(t,e,i,n){var r=1.70158,o=0,s=i;return 0===t?e:2===(t/=n/2)?e+i:(o||(o=n*(.3*1.5)),s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),t<1?s*Math.pow(2,10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/o)*-.5+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/o)*.5+i+e)}function A(t,e,i,n,r){return void 0===r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e}function C(t,e,i,n,r){return void 0===r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e}function E(t,e,i,n,r){return void 0===r&&(r=1.70158),t/=n/2,t<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e}function S(t,e,i,n){return i-O(n-t,0,i,n)+e}function O(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function M(t,e,i,n){return t<n/2?.5*S(2*t,0,i,n)+e:.5*O(2*t-n,0,i,n)+.5*i+e}fabric.util.ease={easeInQuad:t,easeOutQuad:e,easeInOutQuad:i,easeInCubic:n,easeOutCubic:r,easeInOutCubic:o,easeInQuart:s,easeOutQuart:a,easeInOutQuart:l,easeInQuint:c,easeOutQuint:h,easeInOutQuint:u,easeInSine:d,easeOutSine:p,easeInOutSine:f,easeInExpo:g,easeOutExpo:m,easeInOutExpo:y,easeInCirc:_,easeOutCirc:v,easeInOutCirc:b,easeInElastic:w,easeOutElastic:x,easeInOutElastic:T,easeInBack:A,easeOutBack:C,easeInOutBack:E,easeInBounce:S,easeOutBounce:O,easeInOutBounce:M}}(),function(t){"use strict";function e(t){return t in A?A[t]:t}function i(t,e,i){var n;"fill"!==t&&"stroke"!==t||"none"!==e?"fillRule"===t?e="evenodd"===e?"destination-over":e:"strokeDashArray"===t?e=e.replace(/,/g," ").split(/\s+/):"transformMatrix"===t&&(e=i&&i.transformMatrix?T(i.transformMatrix,_.parseTransformAttribute(e)):_.parseTransformAttribute(e)):e="",n="[object Array]"===Object.prototype.toString.call(e);var r=n?e.map(parseFloat):parseFloat(e);return!n&&isNaN(r)?e:r}function n(t){for(var e in C)if(t[e]&&void 0!==t[C[e]]&&0!==t[e].indexOf("url(")){var i=new _.Color(t[e]);t[e]=i.setAlpha(x(i.getAlpha()*t[C[e]],2)).toRgba(),delete t[C[e]]}return t}function r(t,r){if(t){var o,s={};t.parentNode&&/^g$/i.test(t.parentNode.nodeName)&&(s=_.parseAttributes(t.parentNode,r));var a=r.reduce(function(n,r){return o=t.getAttribute(r),o&&(r=e(r),o=i(r,o,s),n[r]=o),n},{});return a=v(a,v(u(t),_.parseStyleAttribute(t))),n(v(s,a))}}function o(t){if(!t)return null;t=t.trim();var e=t.indexOf(",")>-1;t=t.split(/\s+/);var i,n,r=[];if(e)for(i=0,n=t.length;i<n;i++){var o=t[i].split(",");r.push({x:parseFloat(o[0]),y:parseFloat(o[1])})}else for(i=0,n=t.length;i<n;i+=2)r.push({x:parseFloat(t[i]),y:parseFloat(t[i+1])});return r.length,r}function s(t,e){var i=t.match(/(normal|italic)?\s*(normal|small-caps)?\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\s*(\d+)px(?:\/(normal|[\d\.]+))?\s+(.*)/);if(i){var n=i[1],r=i[3],o=i[4],s=i[5],a=i[6];n&&(e.fontStyle=n),r&&(e.fontSize=isNaN(parseFloat(r))?r:parseFloat(r)),o&&(e.fontSize=parseFloat(o)),a&&(e.fontFamily=a),s&&(e.lineHeight="normal"===s?1:s)}}function a(t){var n,r,o={},a=t.getAttribute("style");if(!a)return o;if("string"==typeof a)a.replace(/;$/,"").split(";").forEach(function(t){var a=t.split(":");n=e(a[0].trim().toLowerCase()),r=i(n,a[1].trim()),"font"===n?s(r,o):o[n]=r});else for(var l in a)void 0!==a[l]&&(n=e(l.toLowerCase()),r=i(n,a[l]),"font"===n?s(r,o):o[n]=r);return o}function l(t){for(var e=t.length;e--;){var i=t[e].get("fill");if(/^url\(/.test(i)){var n=i.slice(5,i.length-1);_.gradientDefs[n]&&t[e].set("fill",_.Gradient.fromElement(_.gradientDefs[n],t[e]))}}}function c(t,e,i,n){function r(){0==--a&&(s=s.filter(function(t){return null!=t}),l(s),e(s))}for(var o,s=new Array(t.length),a=t.length,c=0,h=t.length;c<h;c++){o=t[c];var u=_[b(o.tagName)];if(u&&u.fromElement)try{if(u.async)u.fromElement(o,function(t,e){return function(i){n&&n(e,i),s.splice(t,0,i),r()}}(c,o),i);else{var d=u.fromElement(o,i);n&&n(o,d),s.splice(c,0,d),r()}}catch(t){_.log(t)}else r()}}function h(t){for(var e,i=t.getElementsByTagName("style"),n={},r=0,o=i.length;r<o;r++){var s=i[0].textContent;s=s.replace(/\/\*[\s\S]*?\*\//g,""),e=s.match(/[^{]*\{[\s\S]*?\}/g),e=e.map(function(t){return t.trim()}),e.forEach(function(t){var e=t.match(/([\s\S]*?)\s*\{([^}]*)\}/);t=e[1];var i=e[2].trim(),r=i.replace(/;$/,"").split(/\s*;\s*/);n[t]||(n[t]={});for(var o=0,s=r.length;o<s;o++){var a=r[o].split(/\s*:\s*/),l=a[0],c=a[1];n[t][l]=c}})}return n}function u(t){var e=t.nodeName,i=t.getAttribute("class"),n=t.getAttribute("id"),r={};for(var o in _.cssRules){if(i&&new RegExp("^\\."+i).test(o)||n&&new RegExp("^#"+n).test(o)||new RegExp("^"+e).test(o))for(var s in _.cssRules[o])r[s]=_.cssRules[o][s]}return r}function d(t,e,i){function n(n){var r=n.responseXML;!r.documentElement&&_.window.ActiveXObject&&n.responseText&&(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),r.documentElement&&_.parseSVGDocument(r.documentElement,function(i,n){E.set(t,{objects:_.util.array.invoke(i,"toObject"),options:n}),e(i,n)},i)}t=t.replace(/^\n\s*/,"").trim(),E.has(t,function(i){i?E.get(t,function(t){var i=p(t);e(i.objects,i.options)}):new _.util.request(t,{method:"get",onComplete:n})})}function p(t){var e=t.objects,i=t.options;return e=e.map(function(t){return _[b(t.type)].fromObject(t)}),{objects:e,options:i}}function f(t,e,i){t=t.trim();var n;if("undefined"!=typeof DOMParser){var r=new DOMParser;r&&r.parseFromString&&(n=r.parseFromString(t,"text/xml"))}else _.window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));_.parseSVGDocument(n.documentElement,function(t,i){e(t,i)},i)}function g(t){for(var e="",i=0,n=t.length;i<n;i++)"text"===t[i].type&&t[i].path&&(e+=["@font-face {","font-family: ",t[i].fontFamily,"; ","src: url('",t[i].path,"')","}"].join(""));return e&&(e=['<style type="text/css">',"<![CDATA[",e,"]]>","</style>"].join("")),e}function m(t){var e="";return t.backgroundColor&&t.backgroundColor.source&&(e=['<pattern x="0" y="0" id="backgroundColorPattern" ','width="',t.backgroundColor.source.width,'" height="',t.backgroundColor.source.height,'" patternUnits="userSpaceOnUse">','<image x="0" y="0" ','width="',t.backgroundColor.source.width,'" height="',t.backgroundColor.source.height,'" xlink:href="',t.backgroundColor.source.src,'"></image></pattern>'].join("")),e}function y(t){var e,i,n=t.getElementsByTagName("linearGradient"),r=t.getElementsByTagName("radialGradient"),o={};for(i=n.length;i--;)e=n[i],o[e.getAttribute("id")]=e;for(i=r.length;i--;)e=r[i],o[e.getAttribute("id")]=e;return o}var _=t.fabric||(t.fabric={}),v=_.util.object.extend,b=_.util.string.capitalize,w=_.util.object.clone,x=_.util.toFixed,T=_.util.multiplyTransformMatrices;_.SHARED_ATTRIBUTES=["transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width"];var A={"fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight",cx:"left",x:"left",r:"radius","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration",cy:"top",y:"top",transform:"transformMatrix"},C={stroke:"strokeOpacity",fill:"fillOpacity"};_.parseTransformAttribute=function(){function t(t,e){var i=e[0];t[0]=Math.cos(i),t[1]=Math.sin(i),t[2]=-Math.sin(i),t[3]=Math.cos(i)}function e(t,e){var i=e[0],n=2===e.length?e[1]:e[0];t[0]=i,t[3]=n}function i(t,e){t[2]=e[0]}function n(t,e){t[1]=e[0]}function r(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var o=[1,0,0,1,0,0],s="(?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)",a="(?:\\s+,?\\s*|,\\s*)",l="(?:(?:(matrix)\\s*\\(\\s*("+s+")"+a+"("+s+")"+a+"("+s+")"+a+"("+s+")"+a+"("+s+")"+a+"("+s+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+s+")(?:"+a+"("+s+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+s+")(?:"+a+"("+s+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+s+")(?:"+a+"("+s+")"+a+"("+s+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+s+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+s+")\\s*\\)))",c=new RegExp("^\\s*(?:(?:"+l+"(?:"+a+l+")*)?)\\s*$"),h=new RegExp(l,"g");return function(s){var a=o.concat(),u=[];if(!s||s&&!c.test(s))return a;s.replace(h,function(s){var c=new RegExp(l).exec(s).filter(function(t){return""!==t&&null!=t}),h=c[1],d=c.slice(2).map(parseFloat);switch(h){case"translate":r(a,d);break;case"rotate":t(a,d);break;case"scale":e(a,d);break;case"skewX":i(a,d);break;case"skewY":n(a,d);break;case"matrix":a=d}u.push(a.concat()),a=o.concat()});for(var d=u[0];u.length>1;)u.shift(),d=_.util.multiplyTransformMatrices(d,u[0]);return d}}(),_.parseSVGDocument=function(){function t(t,e){for(;t&&(t=t.parentNode);)if(e.test(t.nodeName))return!0;return!1}var e=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/,i="(?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)",n=new RegExp("^\\s*("+i+"+)\\s*,?\\s*("+i+"+)\\s*,?\\s*("+i+"+)\\s*,?\\s*("+i+"+)\\s*$");return function(i,r,o){if(i){var s=new Date,a=_.util.toArray(i.getElementsByTagName("*"));if(0===a.length){a=i.selectNodes("//*[name(.)!='svg']");for(var l=[],c=0,u=a.length;c<u;c++)l[c]=a[c];a=l}var d=a.filter(function(i){return e.test(i.tagName)&&!t(i,/^(?:pattern|defs)$/)});if(d&&(!d||d.length)){var p=i.getAttribute("viewBox"),f=i.getAttribute("width"),g=i.getAttribute("height"),m=null,y=null;p&&(p=p.match(n))&&(parseInt(p[1],10),parseInt(p[2],10),m=parseInt(p[3],10),y=parseInt(p[4],10)),m=f?parseFloat(f):m,y=g?parseFloat(g):y;var v={width:m,height:y};_.gradientDefs=_.getGradientDefs(i),_.cssRules=h(i),_.parseElements(d,function(t){_.documentParsingTime=new Date-s,r&&r(t,v)},w(v),o)}}}}();var E={has:function(t,e){e(!1)},get:function(){},set:function(){}};v(_,{parseAttributes:r,parseElements:c,parseStyleAttribute:a,parsePointsAttribute:o,getCSSRules:h,loadSVGFromURL:d,loadSVGFromString:f,createSVGFontFacesMarkup:g,createSVGRefElementsMarkup:m,getGradientDefs:y})}(void 0!==exports?exports:this),function(t){"use strict";function e(t,e){this.x=t,this.y=e}var i=t.fabric||(t.fabric={});if(i.Point)return void i.warn("fabric.Point is already defined");i.Point=e,e.prototype={constructor:e,add:function(t){return new e(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new e(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new e(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new e(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new e(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new e(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,i){return new e(this.x+(t.x-this.x)*i,this.y+(t.y-this.y)*i)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return new e(this.x+(t.x-this.x)/2,this.y+(t.y-this.y)/2)},min:function(t){return new e(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new e(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){this.x=t,this.y=e},setFromPoint:function(t){this.x=t.x,this.y=t.y},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i}}}(void 0!==exports?exports:this),function(t){"use strict";function e(t){this.status=t,this.points=[]}var i=t.fabric||(t.fabric={});if(i.Intersection)return void i.warn("fabric.Intersection is already defined");i.Intersection=e,i.Intersection.prototype={appendPoint:function(t){this.points.push(t)},appendPoints:function(t){this.points=this.points.concat(t)}},i.Intersection.intersectLineLine=function(t,n,r,o){var s,a=(o.x-r.x)*(t.y-r.y)-(o.y-r.y)*(t.x-r.x),l=(n.x-t.x)*(t.y-r.y)-(n.y-t.y)*(t.x-r.x),c=(o.y-r.y)*(n.x-t.x)-(o.x-r.x)*(n.y-t.y);if(0!==c){var h=a/c,u=l/c;0<=h&&h<=1&&0<=u&&u<=1?(s=new e("Intersection"),s.points.push(new i.Point(t.x+h*(n.x-t.x),t.y+h*(n.y-t.y)))):s=new e}else s=new e(0===a||0===l?"Coincident":"Parallel");return s},i.Intersection.intersectLinePolygon=function(t,i,n){for(var r=new e,o=n.length,s=0;s<o;s++){var a=n[s],l=n[(s+1)%o],c=e.intersectLineLine(t,i,a,l);r.appendPoints(c.points)}return r.points.length>0&&(r.status="Intersection"),r},i.Intersection.intersectPolygonPolygon=function(t,i){for(var n=new e,r=t.length,o=0;o<r;o++){var s=t[o],a=t[(o+1)%r],l=e.intersectLinePolygon(s,a,i);n.appendPoints(l.points)}return n.points.length>0&&(n.status="Intersection"),n},i.Intersection.intersectPolygonRectangle=function(t,n,r){var o=n.min(r),s=n.max(r),a=new i.Point(s.x,o.y),l=new i.Point(o.x,s.y),c=e.intersectLinePolygon(o,a,t),h=e.intersectLinePolygon(a,s,t),u=e.intersectLinePolygon(s,l,t),d=e.intersectLinePolygon(l,o,t),p=new e;return p.appendPoints(c.points),p.appendPoints(h.points),p.appendPoints(u.points),p.appendPoints(d.points),p.points.length>0&&(p.status="Intersection"),p}}(void 0!==exports?exports:this),function(t){"use strict";function e(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var n=t.fabric||(t.fabric={});if(n.Color)return void n.warn("fabric.Color is already defined.");n.Color=e,n.Color.prototype={_tryParsingColor:function(t){var i;t in e.colorNameMap&&(t=e.colorNameMap[t]),i=e.sourceFromHex(t),i||(i=e.sourceFromRgb(t)),i||(i=e.sourceFromHsl(t)),i&&this.setSource(i)},_rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var r,o,s,a=n.util.array.max([t,e,i]),l=n.util.array.min([t,e,i]);if(s=(a+l)/2,a===l)r=o=0;else{var c=a-l;switch(o=s>.5?c/(2-a-l):c/(a+l),a){case t:r=(e-i)/c+(e<i?6:0);break;case e:r=(i-t)/c+2;break;case i:r=(t-e)/c+4}r/=6}return[Math.round(360*r),Math.round(100*o),Math.round(100*s)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t=this.getSource(),e=t[0].toString(16);e=1===e.length?"0"+e:e;var i=t[1].toString(16);i=1===i.length?"0"+i:i;var n=t[2].toString(16);return n=1===n.length?"0"+n:n,e.toUpperCase()+i.toUpperCase()+n.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),n=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,n]),this},overlayWith:function(t){t instanceof e||(t=new e(t));for(var i=[],n=this.getAlpha(),r=this.getSource(),o=t.getSource(),s=0;s<3;s++)i.push(Math.round(.5*r[s]+.5*o[s]));return i[3]=n,this.setSource(i),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}\%?)\s*,\s*(\d{1,3}\%?)\s*,\s*(\d{1,3}\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,n.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},n.Color.fromRgb=function(t){return e.fromSource(e.sourceFromRgb(t))},n.Color.sourceFromRgb=function(t){var i=t.match(e.reRGBa);if(i){var n=parseInt(i[1],10)/(/%$/.test(i[1])?100:1)*(/%$/.test(i[1])?255:1),r=parseInt(i[2],10)/(/%$/.test(i[2])?100:1)*(/%$/.test(i[2])?255:1),o=parseInt(i[3],10)/(/%$/.test(i[3])?100:1)*(/%$/.test(i[3])?255:1);return[parseInt(n,10),parseInt(r,10),parseInt(o,10),i[4]?parseFloat(i[4]):1]}},n.Color.fromRgba=e.fromRgb,n.Color.fromHsl=function(t){return e.fromSource(e.sourceFromHsl(t))},n.Color.sourceFromHsl=function(t){var n=t.match(e.reHSLa);if(n){var r,o,s,a=(parseFloat(n[1])%360+360)%360/360,l=parseFloat(n[2])/(/%$/.test(n[2])?100:1),c=parseFloat(n[3])/(/%$/.test(n[3])?100:1);if(0===l)r=o=s=c;else{var h=c<=.5?c*(l+1):c+l-c*l,u=2*c-h;r=i(u,h,a+1/3),o=i(u,h,a),s=i(u,h,a-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*s),n[4]?parseFloat(n[4]):1]}},n.Color.fromHsla=e.fromHsl,n.Color.fromHex=function(t){return e.fromSource(e.sourceFromHex(t))},n.Color.sourceFromHex=function(t){if(t.match(e.reHex)){var i=t.slice(t.indexOf("#")+1),n=3===i.length,r=n?i.charAt(0)+i.charAt(0):i.substring(0,2),o=n?i.charAt(1)+i.charAt(1):i.substring(2,4),s=n?i.charAt(2)+i.charAt(2):i.substring(4,6);return[parseInt(r,16),parseInt(o,16),parseInt(s,16),1]}},n.Color.fromSource=function(t){var i=new e;return i.setSource(t),i}}(void 0!==exports?exports:this),function(){function t(t){var e,i,n=t.getAttribute("style"),r=t.getAttribute("offset");if(r=parseFloat(r)/(/%$/.test(r)?100:1),n){var o=n.split(/\s*;\s*/);""===o[o.length-1]&&o.pop();for(var s=o.length;s--;){var a=o[s].split(/\s*:\s*/),l=a[0].trim(),c=a[1].trim();"stop-color"===l?e=c:"stop-opacity"===l&&(i=c)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),i||(i=t.getAttribute("stop-opacity")),e=new fabric.Color(e).toRgb(),{offset:r,color:e,opacity:isNaN(parseFloat(i))?1:parseFloat(i)}}function e(t,e){for(var i in e){if("string"==typeof e[i]&&/^\d+%$/.test(e[i])){var n=parseFloat(e[i],10);"x1"===i||"x2"===i||"r2"===i?e[i]=fabric.util.toFixed(t.width*n/100,2):"y1"!==i&&"y2"!==i||(e[i]=fabric.util.toFixed(t.height*n/100,2))}"x1"===i||"x2"===i?e[i]-=fabric.util.toFixed(t.width/2,2):"y1"!==i&&"y2"!==i||(e[i]-=fabric.util.toFixed(t.height/2,2))}}function i(t,e){for(var i in e)"x1"===i||"x2"===i?e[i]+=fabric.util.toFixed(t.width/2,2):"y1"!==i&&"y2"!==i||(e[i]+=fabric.util.toFixed(t.height/2,2)),"x1"===i||"x2"===i||"r2"===i?e[i]=fabric.util.toFixed(e[i]/t.width*100,2)+"%":"y1"!==i&&"y2"!==i||(e[i]=fabric.util.toFixed(e[i]/t.height*100,2)+"%")}fabric.Gradient=fabric.util.createClass({initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.gradientUnits=t.gradientUnits||"objectBoundingBox",this.colorStops=t.colorStops.slice()},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:e,color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(){return{type:this.type,coords:this.coords,gradientUnits:this.gradientUnits,colorStops:this.colorStops}},toSVG:function(t,e){var n,r=fabric.util.object.clone(this.coords);this.colorStops.sort(function(t,e){return t.offset-e.offset}),e&&"userSpaceOnUse"===this.gradientUnits?(r.x1+=t.width/2,r.y1+=t.height/2,r.x2+=t.width/2,r.y2+=t.height/2):"objectBoundingBox"===this.gradientUnits&&i(t,r),"linear"===this.type?n=["<linearGradient ",'id="SVGID_',this.id,'" gradientUnits="',this.gradientUnits,'" x1="',r.x1,'" y1="',r.y1,'" x2="',r.x2,'" y2="',r.y2,'">']:"radial"===this.type&&(n=["<radialGradient ",'id="SVGID_',this.id,'" gradientUnits="',this.gradientUnits,'" cx="',r.x2,'" cy="',r.y2,'" r="',r.r2,'" fx="',r.x1,'" fy="',r.y1,'">']);for(var o=0;o<this.colorStops.length;o++)n.push("<stop ",'offset="',100*this.colorStops[o].offset+"%",'" style="stop-color:',this.colorStops[o].color,this.colorStops[o].opacity?";stop-opacity: "+this.colorStops[o].opacity:";",'"/>');return n.push("linear"===this.type?"</linearGradient>":"</radialGradient>"),n.join("")},toLive:function(t){var e;if(this.type){"linear"===this.type?e=t.createLinearGradient(this.coords.x1,this.coords.y1,this.coords.x2,this.coords.y2):"radial"===this.type&&(e=t.createRadialGradient(this.coords.x1,this.coords.y1,this.coords.r1,this.coords.x2,this.coords.y2,this.coords.r2));for(var i=0,n=this.colorStops.length;i<n;i++){var r=this.colorStops[i].color,o=this.colorStops[i].opacity,s=this.colorStops[i].offset;void 0!==o&&(r=new fabric.Color(r).setAlpha(o).toRgba()),e.addColorStop(parseFloat(s),r)}return e}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(i,n){var r=i.getElementsByTagName("stop"),o="linearGradient"===i.nodeName?"linear":"radial",s=i.getAttribute("gradientUnits")||"objectBoundingBox",a=[],l={};"linear"===o?l={x1:i.getAttribute("x1")||0,y1:i.getAttribute("y1")||0,x2:i.getAttribute("x2")||"100%",y2:i.getAttribute("y2")||0}:"radial"===o&&(l={x1:i.getAttribute("fx")||i.getAttribute("cx")||"50%",y1:i.getAttribute("fy")||i.getAttribute("cy")||"50%",r1:0,x2:i.getAttribute("cx")||"50%",y2:i.getAttribute("cy")||"50%",r2:i.getAttribute("r")||"50%"});for(var c=r.length;c--;)a.push(t(r[c]));return e(n,l),new fabric.Gradient({type:o,coords:l,gradientUnits:s,colorStops:a})},forObject:function(t,i){return i||(i={}),e(t,i),new fabric.Gradient(i)}})}(),fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t){if(t||(t={}),this.id=fabric.Object.__uid++,t.source)if("string"==typeof t.source)if(void 0!==fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source));else{var e=this
;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){e.source=t})}else this.source=t.source;t.repeat&&(this.repeat=t.repeat),t.offsetX&&(this.offsetX=t.offsetX),t.offsetY&&(this.offsetY=t.offsetY)},toObject:function(){var t;return"function"==typeof this.source?t=String(this.source):"string"==typeof this.source.src&&(t=this.source.src),{source:t,repeat:this.repeat,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.getWidth(),n=e.height/t.getHeight(),r="";return e.src?r=e.src:e.toDataURL&&(r=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+this.offsetX+'" y="'+this.offsetY+'" width="'+i+'" height="'+n+'"><image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+r+'"></image></pattern>'},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;return t.createPattern(e,this.repeat)}}),function(t){"use strict";var e=t.fabric||(t.fabric={});if(e.Shadow)return void e.warn("fabric.Shadow is already defined.");e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,initialize:function(t){"string"==typeof t&&(t=this._parseShadow(t));for(var i in t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),n=e.Shadow.reOffsetsAndBlur.exec(i)||[];return{color:(i.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(n[1],10)||0,offsetY:parseInt(n[2],10)||0,blur:parseInt(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var e="SourceAlpha";return!t||t.fill!==this.color&&t.stroke!==this.color||(e="SourceGraphic"),'<filter id="SVGID_'+this.id+'" y="-40%" height="180%"><feGaussianBlur in="'+e+'" stdDeviation="'+(this.blur?this.blur/3:0)+'"></feGaussianBlur><feOffset dx="'+this.offsetX+'" dy="'+this.offsetY+'"></feOffset><feMerge><feMergeNode></feMergeNode><feMergeNode in="SourceGraphic"></feMergeNode></feMerge></filter>'},toObject:function(){return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY}}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/}(void 0!==exports?exports:this),function(){"use strict";if(fabric.StaticCanvas)return void fabric.warn("fabric.StaticCanvas is already defined.");var t=fabric.util.object.extend,e=fabric.util.getElementOffset,i=fabric.util.removeFromArray,n=fabric.util.removeListener,r=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass({initialize:function(t,e){e||(e={}),this._initStatic(t,e),fabric.StaticCanvas.activeInstance=this},backgroundColor:"",backgroundImage:"",backgroundImageOpacity:1,backgroundImageStretch:!0,overlayImage:"",overlayImageLeft:0,overlayImageTop:0,includeDefaultValues:!0,stateful:!0,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,onBeforeScaleRotate:function(){},_initStatic:function(t,e){this._objects=[],this._createLowerCanvas(t),this._initOptions(e),e.overlayImage&&this.setOverlayImage(e.overlayImage,this.renderAll.bind(this)),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,this.renderAll.bind(this)),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,this.renderAll.bind(this)),this.calcOffset()},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return fabric.util.loadImage(t,function(t){this.overlayImage=t,i&&"overlayImageLeft"in i&&(this.overlayImageLeft=i.overlayImageLeft),i&&"overlayImageTop"in i&&(this.overlayImageTop=i.overlayImageTop),e&&e()},this),this},setBackgroundImage:function(t,e,i){return fabric.util.loadImage(t,function(t){this.backgroundImage=t,i&&"backgroundImageOpacity"in i&&(this.backgroundImageOpacity=i.backgroundImageOpacity),i&&"backgroundImageStretch"in i&&(this.backgroundImageStretch=i.backgroundImageStretch),e&&e()},this),this},setBackgroundColor:function(t,e){if(t.source){var i=this;fabric.util.loadImage(t.source,function(n){i.backgroundColor=new fabric.Pattern({source:n,repeat:t.repeat}),e&&e()})}else this.backgroundColor=t,e&&e();return this},_createCanvasElement:function(){var t=fabric.document.createElement("canvas");if(t.style||(t.style={}),!t)throw r;return this._initCanvasElement(t),t},_initCanvasElement:function(t){if(fabric.util.createCanvasElement(t),void 0===t.getContext)throw r},_initOptions:function(t){for(var e in t)this[e]=t[e];this.width=parseInt(this.lowerCanvasEl.width,10)||0,this.height=parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px")},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(),this._initCanvasElement(this.lowerCanvasEl),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t){return this._setDimension("width",t)},setHeight:function(t){return this._setDimension("height",t)},setDimensions:function(t){for(var e in t)this._setDimension(e,t[e]);return this},_setDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.lowerCanvasEl.style[t]=e+"px",this.upperCanvasEl&&(this.upperCanvasEl[t]=e,this.upperCanvasEl.style[t]=e+"px"),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e+"px"),this[t]=e,this.calcOffset(),this.renderAll(),this},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_draw:function(t,e){if(e)if(this.controlsAboveOverlay){var i=e.hasBorders,n=e.hasControls;e.hasBorders=e.hasControls=!1,e.render(t),e.hasBorders=i,e.hasControls=n}else e.render(t)},_onObjectAdded:function(t){this.stateful&&t.setupState(),t.setCoords(),t.canvas=this,this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed")},getObjects:function(){return this._objects},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.discardActiveGroup&&this.discardActiveGroup(),this.discardActiveObject&&this.discardActiveObject(),this.clearContext(this.contextContainer),this.contextTop&&this.clearContext(this.contextTop),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(t){var e=this[!0===t&&this.interactive?"contextTop":"contextContainer"];this.contextTop&&this.selection&&!this._groupSelector&&this.clearContext(this.contextTop),t||this.clearContext(e),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,e),this.backgroundColor&&(e.fillStyle=this.backgroundColor.toLive?this.backgroundColor.toLive(e):this.backgroundColor,e.fillRect(this.backgroundColor.offsetX||0,this.backgroundColor.offsetY||0,this.width,this.height)),"object"==typeof this.backgroundImage&&this._drawBackroundImage(e);for(var i=this.getActiveGroup(),n=0,r=this._objects.length;n<r;++n)(!i||i&&this._objects[n]&&!i.contains(this._objects[n]))&&this._draw(e,this._objects[n]);if(i){var o=[];this.forEachObject(function(t){i.contains(t)&&o.push(t)}),i._set("objects",o),this._draw(e,i)}return this.clipTo&&e.restore(),this.overlayImage&&e.drawImage(this.overlayImage,this.overlayImageLeft,this.overlayImageTop),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render"),this},_drawBackroundImage:function(t){t.save(),t.globalAlpha=this.backgroundImageOpacity,this.backgroundImageStretch?t.drawImage(this.backgroundImage,0,0,this.width,this.height):t.drawImage(this.backgroundImage,0,0),t.restore()},renderTop:function(){var t=this.contextTop||this.contextContainer;this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection();var e=this.getActiveGroup();return e&&e.render(t),this.overlayImage&&t.drawImage(this.overlayImage,this.overlayImageLeft,this.overlayImageTop),this.fire("after:render"),this},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return t.set("left",this.getCenter().left),this.renderAll(),this},centerObjectV:function(t){return t.set("top",this.getCenter().top),this.renderAll(),this},centerObject:function(t){return this.centerObjectH(t).centerObjectV(t)},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(t,e){var i=this.getActiveGroup();i&&this.discardActiveGroup();var n={objects:this.getObjects().map(function(i){var n;this.includeDefaultValues||(n=i.includeDefaultValues,i.includeDefaultValues=!1);var r=i[t](e);return this.includeDefaultValues||(i.includeDefaultValues=n),r},this),background:this.backgroundColor&&this.backgroundColor.toObject?this.backgroundColor.toObject():this.backgroundColor};return this.backgroundImage&&(n.backgroundImage=this.backgroundImage.src,n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch),this.overlayImage&&(n.overlayImage=this.overlayImage.src,n.overlayImageLeft=this.overlayImageLeft,n.overlayImageTop=this.overlayImageTop),fabric.util.populateWithProperties(this,n,e),i&&(this.setActiveGroup(new fabric.Group(i.getObjects())),i.forEachObject(function(t){t.set("active",!0)})),n},toSVG:function(t){t||(t={});var e=[];t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'),e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',t.viewBox?t.viewBox.width:this.width,'" ','height="',t.viewBox?t.viewBox.height:this.height,'" ',this.backgroundColor&&!this.backgroundColor.source?'style="background-color: '+this.backgroundColor+'" ':null,t.viewBox?'viewBox="'+t.viewBox.x+" "+t.viewBox.y+" "+t.viewBox.width+" "+t.viewBox.height+'" ':null,'xml:space="preserve">',"<desc>Created with Fabric.js ",fabric.version,"</desc>","<defs>",fabric.createSVGFontFacesMarkup(this.getObjects()),fabric.createSVGRefElementsMarkup(this),"</defs>"),this.backgroundColor&&this.backgroundColor.source&&e.push('<rect x="0" y="0" ','width="',"repeat-y"===this.backgroundColor.repeat||"no-repeat"===this.backgroundColor.repeat?this.backgroundColor.source.width:this.width,'" height="',"repeat-x"===this.backgroundColor.repeat||"no-repeat"===this.backgroundColor.repeat?this.backgroundColor.source.height:this.height,'" fill="url(#backgroundColorPattern)"',"></rect>"),this.backgroundImage&&e.push('<image x="0" y="0" ','width="',this.backgroundImageStretch?this.width:this.backgroundImage.width,'" height="',this.backgroundImageStretch?this.height:this.backgroundImage.height,'" preserveAspectRatio="',this.backgroundImageStretch?"none":"defer",'" xlink:href="',this.backgroundImage.src,'" style="opacity:',this.backgroundImageOpacity,'"></image>'),this.overlayImage&&e.push('<image x="',this.overlayImageLeft,'" y="',this.overlayImageTop,'" width="',this.overlayImage.width,'" height="',this.overlayImage.height,'" xlink:href="',this.overlayImage.src,'"></image>');var i=this.getActiveGroup();i&&this.discardActiveGroup();for(var n=0,r=this.getObjects(),o=r.length;n<o;n++)e.push(r[n].toSVG());return i&&(this.setActiveGroup(new fabric.Group(i.getObjects())),i.forEachObject(function(t){t.set("active",!0)})),e.push("</svg>"),e.join("")},remove:function(t){return this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this.discardActiveObject(),this.fire("selection:cleared")),fabric.Collection.remove.call(this,t)},sendToBack:function(t){return i(this._objects,t),this._objects.unshift(t),this.renderAll&&this.renderAll()},bringToFront:function(t){return i(this._objects,t),this._objects.push(t),this.renderAll&&this.renderAll()},sendBackwards:function(t,e){var n=this._objects.indexOf(t);if(0!==n){var r;if(e){r=n;for(var o=n-1;o>=0;--o){if(t.intersectsWithObject(this._objects[o])||t.isContainedWithinObject(this._objects[o])||this._objects[o].isContainedWithinObject(t)){r=o;break}}}else r=n-1;i(this._objects,t),this._objects.splice(r,0,t),this.renderAll&&this.renderAll()}return this},bringForward:function(t,e){var n=this._objects.indexOf(t);if(n!==this._objects.length-1){var r;if(e){r=n;for(var o=n+1;o<this._objects.length;++o){if(t.intersectsWithObject(this._objects[o])||t.isContainedWithinObject(this._objects[o])||this._objects[o].isContainedWithinObject(t)){r=o;break}}}else r=n+1;i(this._objects,t),this._objects.splice(r,0,t),this.renderAll&&this.renderAll()}return this},moveTo:function(t,e){return i(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this.interactive?(fabric.isTouchSupported?(n(this.upperCanvasEl,"touchstart",this._onMouseDown),n(this.upperCanvasEl,"touchmove",this._onMouseMove),void 0!==Event&&"remove"in Event&&Event.remove(this.upperCanvasEl,"gesture",this._onGesture)):(n(this.upperCanvasEl,"mousedown",this._onMouseDown),n(this.upperCanvasEl,"mousemove",this._onMouseMove),n(fabric.window,"resize",this._onResize)),this):this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),t(fabric.StaticCanvas.prototype,fabric.Observable),t(fabric.StaticCanvas.prototype,fabric.Collection),t(fabric.StaticCanvas.prototype,fabric.DataURLExporter),t(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',toGrayscale:function(t){var e,i,n,r,o=t.getContext("2d"),s=o.getImageData(0,0,t.width,t.height),a=s.data,l=s.width,c=s.height;for(n=0;n<l;n++)for(r=0;r<c;r++)e=4*n*c+4*r,i=(a[e]+a[e+1]+a[e+2])/3,a[e]=i,a[e+1]=i,a[e+2]=i;o.putImageData(s,0,0)},supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"getImageData":return void 0!==i.getImageData;case"setLineDash":return void 0!==i.setLineDash;case"toDataURL":return void 0!==e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(t){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur,t.shadowOffsetX=this.shadow.offsetX,t.shadowOffsetY=this.shadow.offsetY}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),function(){var t=fabric.util.array.min,e=fabric.util.array.max;fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t=this.canvas.contextTop;t.beginPath();var e=this._points[0],i=this._points[1];2===this._points.length&&e.x===i.x&&e.y===i.y&&(e.x-=.5,i.x+=.5),t.moveTo(e.x,e.y);for(var n=1,r=this._points.length;n<r;n++){var o=e.midPointFrom(i);t.quadraticCurveTo(e.x,e.y,o.x,o.y),e=this._points[n],i=this._points[n+1]}t.lineTo(e.x,e.y),t.stroke()},_getSVGPathData:function(){return this.box=this.getPathBoundingBox(this._points),this.convertPointsToSVGPath(this._points,this.box.minx,this.box.maxx,this.box.miny,this.box.maxy)},getPathBoundingBox:function(i){for(var n=[],r=[],o=i[0],s=i[1],a=o,l=1,c=i.length;l<c;l++){var h=o.midPointFrom(s);n.push(a.x),n.push(h.x),r.push(a.y),r.push(h.y),o=i[l],s=i[l+1],a=h}return n.push(o.x),r.push(o.y),{minx:t(n),miny:t(r),maxx:e(n),maxy:e(r)}},convertPointsToSVGPath:function(t,e,i,n){var r=[],o=new fabric.Point(t[0].x-e,t[0].y-n),s=new fabric.Point(t[1].x-e,t[1].y-n);r.push("M ",t[0].x-e," ",t[0].y-n," ");for(var a=1,l=t.length;a<l;a++){var c=o.midPointFrom(s);r.push("Q ",o.x," ",o.y," ",c.x," ",c.y," "),o=new fabric.Point(t[a].x-e,t[a].y-n),a+1<t.length&&(s=new fabric.Point(t[a+1].x-e,t[a+1].y-n))}return r.push("L ",o.x," ",o.y," "),r},createPath:function(t){var e=new fabric.Path(t);return e.fill=null,e.stroke=this.color,e.strokeWidth=this.width,e.strokeLineCap=this.strokeLineCap,e.strokeLineJoin=this.strokeLineJoin,this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();var t=this._getSVGPathData().join("");if("M 0 0 Q 0 0 0 0 L 0 0"===t)return void this.canvas.renderAll();var e=this.box.minx+(this.box.maxx-this.box.minx)/2,i=this.box.miny+(this.box.maxy-this.box.miny)/2;this.canvas.contextTop.arc(e,i,3,0,2*Math.PI,!1);var n=this.createPath(t);n.set({left:e,top:i}),this.canvas.add(n),n.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:n})}})}(),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop;i.fillStyle=e.fill,i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.closePath(),i.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.points.length;i<n;i++){var r=this.points[i],o=new fabric.Circle({radius:r.radius,left:r.x,top:r.y,fill:r.fill});this.shadow&&o.setShadow(this.shadow),e.push(o)}var s=new fabric.Group(e);this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),i=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,n=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=n,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.sprayChunks.length;i<n;i++)for(var r=this.sprayChunks[i],o=0,s=r.length;o<s;o++){var a=new fabric.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,fill:this.color});this.shadow&&a.setShadow(this.shadow),e.push(a)}var l=new fabric.Group(e);this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color,t.save();for(var e=0,i=this.sprayChunkPoints.length;e<i;e++){var n=this.sprayChunkPoints[e];void 0!==n.opacity&&(t.globalAlpha=n.opacity),t.fillRect(n.x,n.y,n.width,n.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,i,n,r=this.width/2,o=0;o<this.density;o++){e=fabric.util.getRandomInt(t.x-r,t.x+r),i=fabric.util.getRandomInt(t.y-r,t.y+r),n=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s={x:e,y:i,width:n};this.randomOpacity&&(s.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=fabric.document.createElement("canvas"),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction()}),e}}),function(){var t=fabric.util.getPointer,e=fabric.util.degreesToRadians,i=fabric.util.radiansToDegrees,n=Math.atan2,r=Math.abs,o=Math.min,s=Math.max;fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas(),fabric.Canvas.activeInstance=this},uniScaleTransform:!1,centerTransform:!1,interactive:!0,selection:!0,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEvents(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_resetCurrentTransform:function(t){var e=this._currentTransform;e.target.set("scaleX",e.original.scaleX),e.target.set("scaleY",e.original.scaleY),e.target.set("left",e.original.left),e.target.set("top",e.original.top),t.altKey||this.centerTransform||e.target.centerTransform?("center"!==e.originX&&("right"===e.originX?e.mouseXSign=-1:e.mouseXSign=1),"center"!==e.originY&&("bottom"===e.originY?e.mouseYSign=-1:e.mouseYSign=1),e.originX="center",e.originY="center"):(e.originX=e.original.originX,e.originY=e.original.originY)},containsPoint:function(t,e){var i=this.getPointer(t),n=this._normalizePointer(e,i);return e.containsPoint(n)||e._findTargetCorner(t,this._offset)},_normalizePointer:function(t,e){var i=this.getActiveGroup(),n=e.x,r=e.y;return i&&"group"!==t.type&&i.contains(t)&&(n-=i.left,r-=i.top),{x:n,y:r}},isTargetTransparent:function(t,e,i){var n=this.contextCache,r=t.hasBorders,o=t.transparentCorners;t.hasBorders=t.transparentCorners=!1,this._draw(n,t),t.hasBorders=r,t.transparentCorners=o,this.targetFindTolerance>0&&(e>this.targetFindTolerance?e-=this.targetFindTolerance:e=0,i>this.targetFindTolerance?i-=this.targetFindTolerance:i=0);for(var s=!0,a=n.getImageData(e,i,2*this.targetFindTolerance||1,2*this.targetFindTolerance||1),l=3,c=a.data.length;l<c;l+=4){if(!1===(s=a.data[l]<=0))break}return a=null,this.clearContext(n),s},_shouldClearSelection:function(t,e){var i=this.getActiveGroup();return!e||e&&i&&!i.contains(e)&&i!==e&&!t.shiftKey||e&&!e.selectable},_setupCurrentTransform:function(i,n){if(n){var r,o="drag",s=t(i,n.canvas.upperCanvasEl);r=n._findTargetCorner(i,this._offset),r&&(o="ml"===r||"mr"===r?"scaleX":"mt"===r||"mb"===r?"scaleY":"mtr"===r?"rotate":"scale");var a=n.originX,l=n.originY;"ml"===r||"tl"===r||"bl"===r?a="right":"mr"!==r&&"tr"!==r&&"br"!==r||(a="left"),"tl"===r||"mt"===r||"tr"===r?l="bottom":"bl"!==r&&"mb"!==r&&"br"!==r||(l="top"),this._currentTransform={target:n,action:o,scaleX:n.scaleX,scaleY:n.scaleY,offsetX:s.x-n.left,offsetY:s.y-n.top,originX:a,originY:l,ex:s.x,ey:s.y,left:n.left,top:n.top,theta:e(n.angle),width:n.width*n.scaleX,mouseXSign:1,mouseYSign:1},this._currentTransform.original={left:n.left,top:n.top,scaleX:n.scaleX,scaleY:n.scaleY,originX:a,originY:l},this._resetCurrentTransform(i)}},_shouldHandleGroupLogic:function(t,e){var i=this.getActiveObject();return t.shiftKey&&(this.getActiveGroup()||i&&i!==e)&&this.selection},_handleGroupLogic:function(t,e){if(e!==this.getActiveGroup()||(e=this.findTarget(t,!0))&&!e.isType("group")){var i=this.getActiveGroup();if(i)i.contains(e)?(i.removeWithUpdate(e),this._resetObjectTransform(i),e.set("active",!1),1===i.size()&&this.discardActiveGroup()):(i.addWithUpdate(e),this._resetObjectTransform(i)),this.fire("selection:created",{target:i,e:t}),i.set("active",!0);else{if(this._activeObject&&e!==this._activeObject){var n=this.getObjects(),r=n.indexOf(this._activeObject)<n.indexOf(e),o=new fabric.Group(r?[e,this._activeObject]:[this._activeObject,e]);this.setActiveGroup(o),this._activeObject=null,i=this.getActiveGroup(),this.fire("selection:created",{target:i,e:t})}e.set("active",!0)}i&&i.saveCoords()}},_translateObject:function(t,e){var i=this._currentTransform.target;i.get("lockMovementX")||i.set("left",t-this._currentTransform.offsetX),i.get("lockMovementY")||i.set("top",e-this._currentTransform.offsetY)},_scaleObject:function(t,e,i){var n=this._currentTransform,o=this._offset,s=n.target,a=s.get("lockScalingX"),l=s.get("lockScalingY");if(!a||!l){var c=s.translateToOriginPoint(s.getCenterPoint(),n.originX,n.originY),h=s.toLocalPoint(new fabric.Point(t-o.left,e-o.top),n.originX,n.originY);"right"===n.originX?h.x*=-1:"center"===n.originX&&(h.x*=2*n.mouseXSign,h.x<0&&(n.mouseXSign=-n.mouseXSign)),"bottom"===n.originY?h.y*=-1:"center"===n.originY&&(h.y*=2*n.mouseYSign,h.y<0&&(n.mouseYSign=-n.mouseYSign)),r(h.x)>s.padding?h.x<0?h.x+=s.padding:h.x-=s.padding:h.x=0,r(h.y)>s.padding?h.y<0?h.y+=s.padding:h.y-=s.padding:h.y=0;var u=s.scaleX,d=s.scaleY;if("equally"!==i||a||l)i?"x"!==i||s.get("lockUniScaling")?"y"!==i||s.get("lockUniScaling")||(d=h.y/(s.height+s.strokeWidth),l||s.set("scaleY",d)):(u=h.x/(s.width+s.strokeWidth),a||s.set("scaleX",u)):(u=h.x/(s.width+s.strokeWidth),d=h.y/(s.height+s.strokeWidth),a||s.set("scaleX",u),l||s.set("scaleY",d));else{var p=h.y+h.x,f=(s.height+s.strokeWidth)*n.original.scaleY+(s.width+s.strokeWidth)*n.original.scaleX;u=n.original.scaleX*p/f,d=n.original.scaleY*p/f,s.set("scaleX",u),s.set("scaleY",d)}u<0&&("left"===n.originX?n.originX="right":"right"===n.originX&&(n.originX="left")),d<0&&("top"===n.originY?n.originY="bottom":"bottom"===n.originY&&(n.originY="top")),s.setPositionByOrigin(c,n.originX,n.originY)}},_rotateObject:function(t,e){var r=this._currentTransform,o=this._offset;if(!r.target.get("lockRotation")){var s=n(r.ey-r.top-o.top,r.ex-r.left-o.left),a=n(e-r.top-o.top,t-r.left-o.left),l=i(a-s+r.theta);l<0&&(l=360+l),r.target.angle=l}},_setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.setAngle(0)},_drawSelection:function(){var t=this.contextTop,e=this._groupSelector,i=e.left,n=e.top,o=r(i),s=r(n);if(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(i>0?0:-i),e.ey-(n>0?0:-n),o,s),t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1){var a=e.ex+.5-(i>0?0:o),l=e.ey+.5-(n>0?0:s);t.beginPath(),fabric.util.drawDashedLine(t,a,l,a+o,l,this.selectionDashArray),fabric.util.drawDashedLine(t,a,l+s-1,a+o,l+s-1,this.selectionDashArray),fabric.util.drawDashedLine(t,a,l,a,l+s,this.selectionDashArray),fabric.util.drawDashedLine(t,a+o-1,l,a+o-1,l+s,this.selectionDashArray),t.closePath(),t.stroke()}else t.strokeRect(e.ex+.5-(i>0?0:o),e.ey+.5-(n>0?0:s),o,s)},_findSelectedObjects:function(t){for(var e,i=[],n=this._groupSelector.ex,r=this._groupSelector.ey,a=n+this._groupSelector.left,l=r+this._groupSelector.top,c=new fabric.Point(o(n,a),o(r,l)),h=new fabric.Point(s(n,a),s(r,l)),u=n===a&&r===l,d=this._objects.length;d--&&!((e=this._objects[d])&&(e.intersectsWithRect(c,h)||e.isContainedWithinRect(c,h)||e.containsPoint(c)||e.containsPoint(h))&&this.selection&&e.selectable&&(e.set("active",!0),i.push(e),u)););1===i.length?this.setActiveObject(i[0],t):i.length>1&&(i=new fabric.Group(i.reverse()),this.setActiveGroup(i),i.saveCoords(),this.fire("selection:created",{target:i}),this.renderAll())},findTarget:function(t,e){if(!this.skipTargetFind){var i,n=this.getPointer(t);if(this.controlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay.visible&&this.containsPoint(t,this.lastRenderedObjectWithControlsAboveOverlay)&&this.lastRenderedObjectWithControlsAboveOverlay._findTargetCorner(t,this._offset))return i=this.lastRenderedObjectWithControlsAboveOverlay;var r=this.getActiveGroup();if(r&&!e&&this.containsPoint(t,r))return i=r;for(var o=[],s=this._objects.length;s--;)if(this._objects[s]&&this._objects[s].visible&&this._objects[s].selectable&&this.containsPoint(t,this._objects[s])){if(!this.perPixelTargetFind&&!this._objects[s].perPixelTargetFind){i=this._objects[s],this.relatedTarget=i;break}o[o.length]=this._objects[s]}for(var a=0,l=o.length;a<l;a++){n=this.getPointer(t);if(!this.isTargetTransparent(o[a],n.x,n.y)){i=o[a],this.relatedTarget=i;break}}return i}},getPointer:function(e){var i=t(e,this.upperCanvasEl);return{x:i.x-this._offset.left,y:i.y-this._offset.top}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,i=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},setActiveObject:function(t,e){return this._activeObject&&this._activeObject.set("active",!1),this._activeObject=t,t.set("active",!0),this.renderAll(),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this},getActiveObject:function(){return this._activeObject},discardActiveObject:function(){return this._activeObject&&this._activeObject.set("active",!1),
this._activeObject=null,this},setActiveGroup:function(t){return this._activeGroup=t,t&&(t.canvas=this,t.set("active",!0)),this},getActiveGroup:function(){return this._activeGroup},discardActiveGroup:function(){var t=this.getActiveGroup();return t&&t.destroy(),this.setActiveGroup(null)},deactivateAll:function(){for(var t=this.getObjects(),e=0,i=t.length;e<i;e++)t[e].set("active",!1);return this.discardActiveGroup(),this.discardActiveObject(),this},deactivateAllWithDispatch:function(){var t=this.getActiveGroup()||this.getActiveObject();return t&&this.fire("before:selection:cleared",{target:t}),this.deactivateAll(),t&&this.fire("selection:cleared"),this},drawControls:function(t){var e=this.getActiveGroup();if(e)t.save(),fabric.Group.prototype.transform.call(e,t),e.drawBorders(t).drawControls(t),t.restore();else for(var i=0,n=this._objects.length;i<n;++i)this._objects[i]&&this._objects[i].active&&(t.save(),fabric.Object.prototype.transform.call(this._objects[i],t),this._objects[i].drawBorders(t).drawControls(t),t.restore(),this.lastRenderedObjectWithControlsAboveOverlay=this._objects[i])}});for(var a in fabric.StaticCanvas)"prototype"!==a&&(fabric.Canvas[a]=fabric.StaticCanvas[a]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var t=["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],e={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},i=fabric.util.addListener,n=fabric.util.removeListener,r=fabric.util.getPointer;fabric.util.object.extend(fabric.Canvas.prototype,{_initEvents:function(){var t=this;this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=function(e,i){t.__onTransformGesture(e,i)},i(fabric.window,"resize",this._onResize),fabric.isTouchSupported?(i(this.upperCanvasEl,"touchstart",this._onMouseDown),i(this.upperCanvasEl,"touchmove",this._onMouseMove),void 0!==Event&&"add"in Event&&Event.add(this.upperCanvasEl,"gesture",this._onGesture)):(i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"mousemove",this._onMouseMove))},_onMouseDown:function(t){this.__onMouseDown(t),!fabric.isTouchSupported&&i(fabric.document,"mouseup",this._onMouseUp),fabric.isTouchSupported&&i(fabric.document,"touchend",this._onMouseUp),!fabric.isTouchSupported&&i(fabric.document,"mousemove",this._onMouseMove),fabric.isTouchSupported&&i(fabric.document,"touchmove",this._onMouseMove),!fabric.isTouchSupported&&n(this.upperCanvasEl,"mousemove",this._onMouseMove),fabric.isTouchSupported&&n(this.upperCanvasEl,"touchmove",this._onMouseMove)},_onMouseUp:function(t){this.__onMouseUp(t),!fabric.isTouchSupported&&n(fabric.document,"mouseup",this._onMouseUp),fabric.isTouchSupported&&n(fabric.document,"touchend",this._onMouseUp),!fabric.isTouchSupported&&n(fabric.document,"mousemove",this._onMouseMove),fabric.isTouchSupported&&n(fabric.document,"touchmove",this._onMouseMove),!fabric.isTouchSupported&&i(this.upperCanvasEl,"mousemove",this._onMouseMove),fabric.isTouchSupported&&i(this.upperCanvasEl,"touchmove",this._onMouseMove)},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var i=this.getActiveGroup()||this.getActiveObject();return t&&(t.isMoving||t!==i)||!t&&i||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y)},__onMouseUp:function(t){var e,i,n;if(this.isDrawingMode&&this._isCurrentlyDrawing)return this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),void this.fire("mouse:up",{e:t});if(this._currentTransform){var r=this._currentTransform;if(e=r.target,e._scaling&&(e._scaling=!1),e.setCoords(),this.stateful&&e.hasStateChanged()&&(this.fire("object:modified",{target:e}),e.fire("modified")),this._previousOriginX&&this._previousOriginY){var o=e.translateToOriginPoint(e.getCenterPoint(),this._previousOriginX,this._previousOriginY);e.originX=this._previousOriginX,e.originY=this._previousOriginY,e.left=o.x,e.top=o.y,this._previousOriginX=null,this._previousOriginY=null}}else i=this.getPointer(t);n=this._shouldRender(e,i),this.selection&&this._groupSelector&&this._findSelectedObjects(t);var s=this.getActiveGroup();s&&(s.setObjectsCoords(),s.isMoving=!1,this._setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null,e&&(e.isMoving=!1),n&&this.renderAll(),this._setCursorFromEvent(t,e);var a=this;setTimeout(function(){a._setCursorFromEvent(t,e)},50),this.fire("mouse:up",{target:e,e:t}),e&&e.fire("mouseup",{e:t})},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject().renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop),this.freeDrawingBrush.onMouseDown(this.getPointer(t)),this.fire("mouse:down",{e:t})},__onMouseDown:function(t){if(("which"in t?1===t.which:1===t.button)||fabric.isTouchSupported){if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._currentTransform){var e,i,n=this.findTarget(t),r=this.getPointer(t);this._previousPointer=r,i=this._shouldRender(n,r),this._shouldClearSelection(t,n)?(this.selection&&(this._groupSelector={ex:r.x,ey:r.y,top:0,left:0}),this.deactivateAllWithDispatch(),n&&n.selectable&&this.setActiveObject(n,t)):this._shouldHandleGroupLogic(t,n)?(this._handleGroupLogic(t,n),n=this.getActiveGroup()):(this.stateful&&n.saveState(),(e=n._findTargetCorner(t,this._offset))&&this.onBeforeScaleRotate(n),n!==this.getActiveGroup()&&n!==this.getActiveObject()&&(this.deactivateAll(),this.setActiveObject(n,t)),this._setupCurrentTransform(t,n)),i&&this.renderAll(),this.fire("mouse:down",{target:n,e:t}),n&&n.fire("mousedown",{e:t}),"mtr"===e&&n.centerTransform&&this._setOriginToCenter(n)}}},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},__onMouseMove:function(t){var e,i;if(this.isDrawingMode)return this._isCurrentlyDrawing&&(i=this.getPointer(t),this.freeDrawingBrush.onMouseMove(i)),this.upperCanvasEl.style.cursor=this.freeDrawingCursor,void this.fire("mouse:move",{e:t});var n=this._groupSelector;if(n)i=r(t,this.upperCanvasEl),n.left=i.x-this._offset.left-n.ex,n.top=i.y-this._offset.top-n.ey,this.renderTop();else if(this._currentTransform){i=r(t,this.upperCanvasEl);var o=i.x,s=i.y,a=!1,l=this._currentTransform;e=l.target,e.isMoving=!0,"scale"!==l.action&&"scaleX"!==l.action&&"scaleY"!==l.action||(!t.altKey||"center"===l.originX&&"center"===l.originY)&&(t.altKey||"center"!==l.originX||"center"!==l.originY)||(this._resetCurrentTransform(t),a=!0),"rotate"===l.action?(this._rotateObject(o,s),this.fire("object:rotating",{target:e,e:t}),e.fire("rotating",{e:t})):"scale"===l.action?(!t.shiftKey&&!this.uniScaleTransform||e.get("lockUniScaling")?(a||"scale"!==l.currentAction||this._resetCurrentTransform(t),l.currentAction="scaleEqually",this._scaleObject(o,s,"equally")):(l.currentAction="scale",this._scaleObject(o,s)),this.fire("object:scaling",{target:e,e:t}),e.fire("scaling",{e:t})):"scaleX"===l.action?(this._scaleObject(o,s,"x"),this.fire("object:scaling",{target:e,e:t}),e.fire("scaling",{e:t})):"scaleY"===l.action?(this._scaleObject(o,s,"y"),this.fire("object:scaling",{target:e,e:t}),e.fire("scaling",{e:t})):(this._translateObject(o,s),this.fire("object:moving",{target:e,e:t}),e.fire("moving",{e:t}),this._setCursor(this.moveCursor)),this.renderAll()}else{var c=this.upperCanvasEl.style;e=this.findTarget(t),!e||e&&!e.selectable?c.cursor=this.defaultCursor:this._setCursorFromEvent(t,e)}this.fire("mouse:move",{target:e,e:t}),e&&e.fire("mousemove",{e:t})},_setCursorFromEvent:function(i,n){var r=this.upperCanvasEl.style;if(!n)return r.cursor=this.defaultCursor,!1;var o=this.getActiveGroup(),s=n._findTargetCorner&&(!o||!o.contains(n))&&n._findTargetCorner(i,this._offset);if(s)if(s in e){var a=Math.round(n.getAngle()%360/45);a<0&&(a+=8),a+=e[s],a%=8,r.cursor=t[a]}else{if("mtr"!==s||!n.hasRotatingPoint)return r.cursor=this.defaultCursor,!1;r.cursor=this.rotationCursor}else r.cursor=n.hoverCursor||this.hoverCursor;return!0}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,n=t.multiplier||1,r={left:t.left,top:t.top,width:t.width,height:t.height};return 1!==n?this.__toDataURLWithMultiplier(e,i,r,n):this.__toDataURL(e,i,r)},__toDataURL:function(t,e,i){this.renderAll(!0);var n=this.upperCanvasEl||this.lowerCanvasEl,r=this.__getCroppedCanvas(n,i);"jpg"===t&&(t="jpeg");var o=fabric.StaticCanvas.supports("toDataURLWithQuality")?(r||n).toDataURL("image/"+t,e):(r||n).toDataURL("image/"+t);return this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),r&&(r=null),o},__getCroppedCanvas:function(t,e){var i,n;return("left"in e||"top"in e||"width"in e||"height"in e)&&(i=fabric.util.createCanvasElement(),n=i.getContext("2d"),i.width=e.width||this.width,i.height=e.height||this.height,n.drawImage(t,-e.left||0,-e.top||0)),i},__toDataURLWithMultiplier:function(t,e,i,n){var r=this.getWidth(),o=this.getHeight(),s=r*n,a=o*n,l=this.getActiveObject(),c=this.getActiveGroup(),h=this.contextTop||this.contextContainer;this.setWidth(s).setHeight(a),h.scale(n,n),i.left&&(i.left*=n),i.top&&(i.top*=n),i.width&&(i.width*=n),i.height&&(i.height*=n),c?this._tempRemoveBordersControlsFromGroup(c):l&&this.deactivateAll&&this.deactivateAll(),this.width=r,this.height=o,this.renderAll(!0);var u=this.__toDataURL(t,e,i);return h.scale(1/n,1/n),this.setWidth(r).setHeight(o),c?this._restoreBordersControlsOnGroup(c):l&&this.setActiveObject&&this.setActiveObject(l),this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),u},toDataURLWithMultiplier:function(t,e,i){return this.toDataURL({format:t,multiplier:e,quality:i})},_tempRemoveBordersControlsFromGroup:function(t){t.origHasControls=t.hasControls,t.origBorderColor=t.borderColor,t.hasControls=!0,t.borderColor="rgba(0,0,0,0)",t.forEachObject(function(t){t.origBorderColor=t.borderColor,t.borderColor="rgba(0,0,0,0)"})},_restoreBordersControlsOnGroup:function(t){t.hideControls=t.origHideControls,t.borderColor=t.origBorderColor,t.forEachObject(function(t){t.borderColor=t.origBorderColor,delete t.origBorderColor})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,i){return this.loadFromJSON(t,e,i)},loadFromJSON:function(t,e,i){if(t){var n="string"==typeof t?JSON.parse(t):t;this.clear();var r=this;return this._enlivenObjects(n.objects,function(){r._setBgOverlayImages(n,e)},i),this}},_setBgOverlayImages:function(t,e){var i,n,r,o=this,s=function(){e&&n&&r&&i&&e()};t.backgroundImage?this.setBackgroundImage(t.backgroundImage,function(){o.backgroundImageOpacity=t.backgroundImageOpacity,o.backgroundImageStretch=t.backgroundImageStretch,o.renderAll(),n=!0,s()}):n=!0,t.overlayImage?this.setOverlayImage(t.overlayImage,function(){o.overlayImageLeft=t.overlayImageLeft||0,o.overlayImageTop=t.overlayImageTop||0,o.renderAll(),r=!0,s()}):r=!0,t.background?this.setBackgroundColor(t.background,function(){o.renderAll(),i=!0,s()}):i=!0,t.backgroundImage||t.overlayImage||t.background||e&&e()},_enlivenObjects:function(t,e,i){var n=this;0===t.length&&e&&e();var r=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(t,function(t){t.forEach(function(t,e){n.insertAt(t,e,!0)}),n.renderOnAddRemove=r,e&&e()},null,i)},_toDataURL:function(t,e){this.clone(function(i){e(i.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,i){this.clone(function(n){i(n.toDataURLWithMultiplier(t,e))})},clone:function(t){var e=JSON.stringify(this);this.cloneWithoutData(function(i){i.loadFromJSON(e,function(){t&&t(i)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var i=new fabric.Canvas(e);i.clipTo=this.clipTo,this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(){var t=fabric.util.degreesToRadians,e=fabric.util.radiansToDegrees;fabric.util.object.extend(fabric.Canvas.prototype,{__onTransformGesture:function(t,e){if(!this.isDrawingMode&&2===t.touches.length&&"gesture"===e.gesture){var i=this.findTarget(t);void 0!==i&&(this.onBeforeScaleRotate(i),this._rotateObjectByAngle(e.rotation),this._scaleObjectBy(e.scale)),this.fire("touch:gesture",{target:i,e:t,self:e})}},_scaleObjectBy:function(t,e){var i=this._currentTransform,n=i.target,r=n.get("lockScalingX"),o=n.get("lockScalingY");r&&o||(n._scaling=!0,e?"x"!==e||n.get("lockUniScaling")?"y"!==e||n.get("lockUniScaling")||o||n.set("scaleY",i.scaleY*t):r||n.set("scaleX",i.scaleX*t):(r||n.set("scaleX",i.scaleX*t),o||n.set("scaleY",i.scaleY*t)))},_rotateObjectByAngle:function(i){var n=this._currentTransform;n.target.get("lockRotation")||(n.target.angle=e(t(i)+n.theta))}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.toFixed,r=e.util.string.capitalize,o=e.util.degreesToRadians,s=e.StaticCanvas.supports("setLineDash");e.Object||(e.Object=e.util.createClass({type:"object",originX:"center",originY:"center",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,cornerSize:12,transparentCorners:!0,hoverCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",cornerColor:"rgba(102,153,255,0.5)",centerTransform:!1,fill:"rgb(0,0,0)",fillRule:"source-over",overlayFill:null,stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule overlayFill shadow clipTo visible".split(" "),initialize:function(t){t&&this.setOptions(t)},_initGradient:function(t){!t.fill||!t.fill.colorStops||t.fill instanceof e.Gradient||this.set("fill",new e.Gradient(t.fill))},_initPattern:function(t){!t.fill||!t.fill.source||t.fill instanceof e.Pattern||this.set("fill",new e.Pattern(t.fill)),!t.stroke||!t.stroke.source||t.stroke instanceof e.Pattern||this.set("stroke",new e.Pattern(t.stroke))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var i=e.util.getFunctionBody(t.clipTo);void 0!==i&&(this.clipTo=new Function("ctx",i))}},setOptions:function(t){for(var e in t)this.set(e,t[e]);this._initGradient(t),this._initPattern(t),this._initClipping(t)},transform:function(t,e){t.globalAlpha=this.opacity;var i=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(i.x,i.y),t.rotate(o(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1))},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,r={type:this.type,originX:this.originX,originY:this.originY,left:n(this.left,i),top:n(this.top,i),width:n(this.width,i),height:n(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,overlayFill:this.overlayFill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,i),strokeDashArray:this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:n(this.strokeMiterLimit,i),scaleX:n(this.scaleX,i),scaleY:n(this.scaleY,i),angle:n(this.getAngle(),i),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo)};return this.includeDefaultValues||(r=this._removeDefaultValues(r)),e.util.populateWithProperties(this,r,t),r},toDatalessObject:function(t){return this.toObject(t)},getSvgStyles:function(){var t=this.fill?this.fill.toLive?"url(#SVGID_"+this.fill.id+")":this.fill:"none",e=this.stroke?this.stroke.toLive?"url(#SVGID_"+this.stroke.id+")":this.stroke:"none",i=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):"",r=this.strokeLineCap?this.strokeLineCap:"butt",o=this.strokeLineJoin?this.strokeLineJoin:"miter",s=this.strokeMiterLimit?this.strokeMiterLimit:"4",a=void 0!==this.opacity?this.opacity:"1",l=this.visible?"":" visibility: hidden;";return["stroke: ",e,"; ","stroke-width: ",i,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",r,"; ","stroke-linejoin: ",o,"; ","stroke-miterlimit: ",s,"; ","fill: ",t,"; ","opacity: ",a,";",this.shadow&&"text"!==this.type?"filter: url(#SVGID_"+this.shadow.id+");":"",l].join("")},getSvgTransform:function(){var t=this.getAngle(),i=this.getCenterPoint(),r=e.Object.NUM_FRACTION_DIGITS;return["translate("+n(i.x,r)+" "+n(i.y,r)+")",0!==t?" rotate("+n(t,r)+")":"",1===this.scaleX&&1===this.scaleY?"":" scale("+n(this.scaleX,r)+" "+n(this.scaleY,r)+")",this.flipX?"matrix(-1 0 0 1 0 0) ":"",this.flipY?"matrix(1 0 0 -1 0 0)":""].join("")},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t},_removeDefaultValues:function(t){return this.stateProperties.forEach(function(e){t[e]===this.constructor.prototype[e]&&delete t[e]},this),t},toString:function(){return"#<fabric."+r(this.type)+">"},get:function(t){return this[t]},set:function(t,e){if("object"==typeof t)for(var i in t)this._set(i,t[i]);else"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e);return this},_set:function(t,i){return("scaleX"===t||"scaleY"===t)&&(i=this._constrainScale(i)),"scaleX"===t&&i<0?(this.flipX=!this.flipX,i*=-1):"scaleY"===t&&i<0?(this.flipY=!this.flipY,i*=-1):"width"===t||"height"===t?this.minScaleLimit=n(Math.min(.1,1/Math.max(this.width,this.height)),2):"shadow"!==t||!i||i instanceof e.Shadow||(i=new e.Shadow(i)),this[t]=i,this},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},setSourcePath:function(t){return this.sourcePath=t,this},render:function(t,i){if(0!==this.width&&0!==this.height&&this.visible){t.save();var n=this.transformMatrix;n&&!this.group&&t.setTransform(n[0],n[1],n[2],n[3],n[4],n[5]),i||this.transform(t),this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t):this.stroke),this.overlayFill?t.fillStyle=this.overlayFill:this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t):this.fill),n&&this.group&&(t.translate(-this.group.width/2,-this.group.height/2),t.transform(n[0],n[1],n[2],n[3],n[4],n[5])),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),this._render(t,i),this.clipTo&&t.restore(),this._removeShadow(t),this.active&&!i&&(this.drawBorders(t),this.drawControls(t)),t.restore()}},_setShadow:function(t){this.shadow&&(t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur,t.shadowOffsetX=this.shadow.offsetX,t.shadowOffsetY=this.shadow.offsetY)},_removeShadow:function(t){t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0},_renderFill:function(t){this.fill&&(this.fill.toLive&&(t.save(),t.translate(-this.width/2+this.fill.offsetX||0,-this.height/2+this.fill.offsetY||0)),t.fill(),this.fill.toLive&&t.restore(),this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t))},_renderStroke:function(t){this.stroke&&(t.save(),this.strokeDashArray?(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),s?(t.setLineDash(this.strokeDashArray),this._stroke&&this._stroke(t)):this._renderDashedStroke&&this._renderDashedStroke(t),t.stroke()):this._stroke?this._stroke(t):t.stroke(),this._removeShadow(t),t.restore())},clone:function(t,i){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(i),t):new e.Object(this.toObject(i))},cloneAsImage:function(t){var i=this.toDataURL();return e.util.loadImage(i,function(i){t&&t(new e.Image(i))}),this},toDataURL:function(t){t||(t={});var i=e.util.createCanvasElement(),n=this.getBoundingRect();i.width=n.width,i.height=n.height,e.util.wrapElement(i,"div");var r=new e.Canvas(i);"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(r.backgroundColor="#fff");var o={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new e.Point(i.width/2,i.height/2),"center","center"),r.add(this);var s=r.toDataURL(t);return this.set(o).setCoords(),r.dispose(),r=null,s},isType:function(t){return this.type===t},toGrayscale:function(){var t=this.get("fill");return t&&this.set("overlayFill",new e.Color(t).toGrayscale().toRgb()),this},complexity:function(){return 0},toJSON:function(t){return this.toObject(t)},setGradient:function(t,i){i||(i={});var n={colorStops:[]};n.type=i.type||(i.r1||i.r2?"radial":"linear"),n.coords={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},(i.r1||i.r2)&&(n.coords.r1=i.r1,n.coords.r2=i.r2);for(var r in i.colorStops){var o=new e.Color(i.colorStops[r]);n.colorStops.push({offset:r,color:o.toRgb(),opacity:o.getAlpha()})}return this.set(t,e.Gradient.forObject(this,n))},setPatternFill:function(t){return this.set("fill",new e.Pattern(t))},setShadow:function(t){return this.set("shadow",new e.Shadow(t))},setColor:function(t){return this.set("fill",t),this},centerH:function(){return this.canvas.centerObjectH(this),this},centerV:function(){return this.canvas.centerObjectV(this),this},center:function(){return this.centerH().centerV()},remove:function(){return this.canvas.remove(this)},sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?e.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),e.util.createAccessors(e.Object),e.Object.prototype.rotate=e.Object.prototype.setAngle,i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object.__uid=0)}(void 0!==exports?exports:this),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{translateToCenterPoint:function(e,i,n){var r=e.x,o=e.y;return"left"===i?r=e.x+(this.getWidth()+this.strokeWidth*this.scaleX)/2:"right"===i&&(r=e.x-(this.getWidth()+this.strokeWidth*this.scaleX)/2),"top"===n?o=e.y+(this.getHeight()+this.strokeWidth*this.scaleY)/2:"bottom"===n&&(o=e.y-(this.getHeight()+this.strokeWidth*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(r,o),e,t(this.angle))},translateToOriginPoint:function(e,i,n){var r=e.x,o=e.y;return"left"===i?r=e.x-(this.getWidth()+this.strokeWidth*this.scaleX)/2:"right"===i&&(r=e.x+(this.getWidth()+this.strokeWidth*this.scaleX)/2),"top"===n?o=e.y-(this.getHeight()+this.strokeWidth*this.scaleY)/2:"bottom"===n&&(o=e.y+(this.getHeight()+this.strokeWidth*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(r,o),e,t(this.angle))},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(e,i,n){var r,o,s=this.getCenterPoint();return void 0!==i&&void 0!==n?(r="left"===i?s.x-(this.getWidth()+this.strokeWidth*this.scaleX)/2:"right"===i?s.x+(this.getWidth()+this.strokeWidth*this.scaleX)/2:s.x,o="top"===n?s.y-(this.getHeight()+this.strokeWidth*this.scaleY)/2:"bottom"===n?s.y+(this.getHeight()+this.strokeWidth*this.scaleY)/2:s.y):(r=this.left,o=this.top),fabric.util.rotatePoint(new fabric.Point(e.x,e.y),s,-t(this.angle)).subtractEquals(new fabric.Point(r,o))},setPositionByOrigin:function(t,e,i){var n=this.translateToCenterPoint(t,e,i),r=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(e){var i=t(this.angle),n=this.getWidth()/2,r=Math.cos(i)*n,o=Math.sin(i)*n,s=this.getWidth(),a=Math.cos(i)*s,l=Math.sin(i)*s;"center"===this.originX&&"left"===e||"right"===this.originX&&"center"===e?(this.left-=r,this.top-=o):"left"===this.originX&&"center"===e||"center"===this.originX&&"right"===e?(this.left+=r,this.top+=o):"left"===this.originX&&"right"===e?(this.left+=a,this.top+=l):"right"===this.originX&&"left"===e&&(this.left-=a,this.top-=l),this.setCoords(),this.originX=e},_getLeftTopCoords:function(){var e=t(this.angle),i=this.getWidth()/2,n=Math.cos(e)*i,r=Math.sin(e)*i,o=this.left,s=this.top;return"center"!==this.originX&&"right"!==this.originX||(o-=n),"center"!==this.originY&&"bottom"!==this.originY||(s-=r),{x:o,y:s}}})}(),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,intersectsWithRect:function(t,e){var i=this.oCoords,n=new fabric.Point(i.tl.x,i.tl.y),r=new fabric.Point(i.tr.x,i.tr.y),o=new fabric.Point(i.bl.x,i.bl.y),s=new fabric.Point(i.br.x,i.br.y);return"Intersection"===fabric.Intersection.intersectPolygonRectangle([n,r,s,o],t,e).status},intersectsWithObject:function(t){function e(t){return{tl:new fabric.Point(t.tl.x,t.tl.y),tr:new fabric.Point(t.tr.x,t.tr.y),bl:new fabric.Point(t.bl.x,t.bl.y),br:new fabric.Point(t.br.x,t.br.y)}}var i=e(this.oCoords),n=e(t.oCoords);return"Intersection"===fabric.Intersection.intersectPolygonPolygon([i.tl,i.tr,i.br,i.bl],[n.tl,n.tr,n.br,n.bl]).status},isContainedWithinObject:function(t){var e=t.getBoundingRect(),i=new fabric.Point(e.left,e.top),n=new fabric.Point(e.left+e.width,e.top+e.height);return this.isContainedWithinRect(i,n)},isContainedWithinRect:function(t,e){var i=this.getBoundingRect();return i.left>t.x&&i.left+i.width<e.x&&i.top>t.y&&i.top+i.height<e.y},containsPoint:function(t){var e=this._getImageLines(this.oCoords),i=this._findCrossPoints(t,e);return 0!==i&&i%2==1},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,n,r,o,s,a,l=0;for(var c in e)if(a=e[c],!(a.o.y<t.y&&a.d.y<t.y||a.o.y>=t.y&&a.d.y>=t.y||(a.o.x===a.d.x&&a.o.x>=t.x?(s=a.o.x,t.y):(i=0,n=(a.d.y-a.o.y)/(a.d.x-a.o.x),r=t.y-i*t.x,o=a.o.y-n*a.o.x,s=-(r-o)/(i-n),r+i*s),s>=t.x&&(l+=1),2!==l)))break;return l},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){this.oCoords||this.setCoords();var t=[this.oCoords.tl.x,this.oCoords.tr.x,this.oCoords.br.x,this.oCoords.bl.x],e=fabric.util.array.min(t),i=fabric.util.array.max(t),n=Math.abs(e-i),r=[this.oCoords.tl.y,this.oCoords.tr.y,this.oCoords.br.y,this.oCoords.bl.y],o=fabric.util.array.min(r),s=fabric.util.array.max(r);return{left:e,top:o,width:n,height:Math.abs(o-s)}},getWidth:function(){return this.width*this.scaleX},getHeight:function(){return this.height*this.scaleY},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return t=this._constrainScale(t),t<0&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords(),this},scaleToWidth:function(t){var e=this.getBoundingRectWidth()/this.getWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRectHeight()/this.getHeight();return this.scale(t/this.height/e)},setCoords:function(){var e=this.strokeWidth>1?this.strokeWidth:0,i=this.padding,n=t(this.angle);this.currentWidth=(this.width+e)*this.scaleX+2*i,this.currentHeight=(this.height+e)*this.scaleY+2*i,this.currentWidth<0&&(this.currentWidth=Math.abs(this.currentWidth));var r=Math.sqrt(Math.pow(this.currentWidth/2,2)+Math.pow(this.currentHeight/2,2)),o=Math.atan(isFinite(this.currentHeight/this.currentWidth)?this.currentHeight/this.currentWidth:0),s=Math.cos(o+n)*r,a=Math.sin(o+n)*r,l=Math.sin(n),c=Math.cos(n),h=this.getCenterPoint(),u={x:h.x-s,y:h.y-a},d={x:u.x+this.currentWidth*c,y:u.y+this.currentWidth*l},p={x:d.x-this.currentHeight*l,y:d.y+this.currentHeight*c},f={x:u.x-this.currentHeight*l,y:u.y+this.currentHeight*c},g={x:u.x-this.currentHeight/2*l,y:u.y+this.currentHeight/2*c},m={x:u.x+this.currentWidth/2*c,y:u.y+this.currentWidth/2*l},y={x:d.x-this.currentHeight/2*l,y:d.y+this.currentHeight/2*c},_={x:f.x+this.currentWidth/2*c,y:f.y+this.currentWidth/2*l},v={x:m.x,y:m.y};return this.oCoords={tl:u,tr:d,br:p,bl:f,ml:g,mt:m,mr:y,mb:_,mtr:v},this._setCornerCoords&&this._setCornerCoords(),this}})}(),fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(){return this.stateProperties.some(function(t){return this.get(t)!==this.originalState[t]},this)},saveState:function(t){return this.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),t&&t.stateProperties&&t.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),this},setupState:function(){return this.originalState={},this.saveState(),this}}),function(){var t=fabric.util.getPointer,e=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_findTargetCorner:function(e,i){if(!this.hasControls||!this.active)return!1;var n,r,o=t(e,this.canvas.upperCanvasEl),s=o.x-i.left,a=o.y-i.top;for(var l in this.oCoords)if(("mtr"!==l||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==l&&"mr"!==l&&"mb"!==l&&"ml"!==l)&&(r=this._getImageLines(this.oCoords[l].corner),0!==(n=this._findCrossPoints({x:s,y:a},r))&&n%2==1))return this.__corner=l,l;return!1},_setCornerCoords:function(){var t=this.oCoords,i=e(this.angle),n=e(45-this.angle),r=Math.sqrt(2*Math.pow(this.cornerSize,2))/2,o=r*Math.cos(n),s=r*Math.sin(n),a=Math.sin(i),l=Math.cos(i);t.tl.corner={tl:{x:t.tl.x-s,y:t.tl.y-o},tr:{x:t.tl.x+o,y:t.tl.y-s},bl:{x:t.tl.x-o,y:t.tl.y+s},br:{x:t.tl.x+s,y:t.tl.y+o}},t.tr.corner={tl:{x:t.tr.x-s,y:t.tr.y-o},tr:{x:t.tr.x+o,y:t.tr.y-s},br:{x:t.tr.x+s,y:t.tr.y+o},bl:{x:t.tr.x-o,y:t.tr.y+s}},t.bl.corner={tl:{x:t.bl.x-s,y:t.bl.y-o},bl:{x:t.bl.x-o,y:t.bl.y+s},br:{x:t.bl.x+s,y:t.bl.y+o},tr:{x:t.bl.x+o,y:t.bl.y-s}},t.br.corner={tr:{x:t.br.x+o,y:t.br.y-s},bl:{x:t.br.x-o,y:t.br.y+s},br:{x:t.br.x+s,y:t.br.y+o},tl:{x:t.br.x-s,y:t.br.y-o}},t.ml.corner={tl:{x:t.ml.x-s,y:t.ml.y-o},tr:{x:t.ml.x+o,y:t.ml.y-s},bl:{x:t.ml.x-o,y:t.ml.y+s},br:{x:t.ml.x+s,y:t.ml.y+o}},t.mt.corner={tl:{x:t.mt.x-s,y:t.mt.y-o},tr:{x:t.mt.x+o,y:t.mt.y-s},bl:{x:t.mt.x-o,y:t.mt.y+s},br:{x:t.mt.x+s,y:t.mt.y+o}},t.mr.corner={tl:{x:t.mr.x-s,y:t.mr.y-o},tr:{x:t.mr.x+o,y:t.mr.y-s},bl:{x:t.mr.x-o,y:t.mr.y+s},br:{x:t.mr.x+s,y:t.mr.y+o}},t.mb.corner={tl:{x:t.mb.x-s,y:t.mb.y-o},tr:{x:t.mb.x+o,y:t.mb.y-s},bl:{x:t.mb.x-o,y:t.mb.y+s},br:{x:t.mb.x+s,y:t.mb.y+o}},t.mtr.corner={tl:{x:t.mtr.x-s+a*this.rotatingPointOffset,y:t.mtr.y-o-l*this.rotatingPointOffset},tr:{x:t.mtr.x+o+a*this.rotatingPointOffset,y:t.mtr.y-s-l*this.rotatingPointOffset},bl:{
x:t.mtr.x-o+a*this.rotatingPointOffset,y:t.mtr.y+s-l*this.rotatingPointOffset},br:{x:t.mtr.x+s+a*this.rotatingPointOffset,y:t.mtr.y+o-l*this.rotatingPointOffset}}},drawBorders:function(t){if(!this.hasBorders)return this;var e=this.padding,i=2*e,n=2*~~(this.strokeWidth/2);t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=this.borderColor;var r=1/this._constrainScale(this.scaleX),o=1/this._constrainScale(this.scaleY);t.lineWidth=1/this.borderScaleFactor,t.scale(r,o);var s=this.getWidth(),a=this.getHeight();if(t.strokeRect(~~(-s/2-e-n/2*this.scaleX)-.5,~~(-a/2-e-n/2*this.scaleY)-.5,1+~~(s+i+n*this.scaleX),1+~~(a+i+n*this.scaleY)),this.hasRotatingPoint&&!this.get("lockRotation")&&this.hasControls){var l=(this.flipY?a+n*this.scaleY+2*e:-a-n*this.scaleY-2*e)/2;t.beginPath(),t.moveTo(0,l),t.lineTo(0,l+(this.flipY?this.rotatingPointOffset:-this.rotatingPointOffset)),t.closePath(),t.stroke()}return t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e,i,n=this.cornerSize,r=n/2,o=~~(this.strokeWidth/2),s=-this.width/2,a=-this.height/2,l=n/this.scaleX,c=n/this.scaleY,h=this.padding/this.scaleX,u=this.padding/this.scaleY,d=r/this.scaleY,p=r/this.scaleX,f=(r-n)/this.scaleX,g=(r-n)/this.scaleY,m=this.height,y=this.width,_=this.transparentCorners?"strokeRect":"fillRect",v=this.transparentCorners,b="undefined"!=typeof G_vmlCanvasManager;return t.save(),t.lineWidth=1/Math.max(this.scaleX,this.scaleY),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=t.fillStyle=this.cornerColor,e=s-p-o-h,i=a-d-o-u,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),e=s+y-p+o+h,i=a-d-o-u,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),e=s-p-o-h,i=a+m+g+o+u,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),e=s+y+f+o+h,i=a+m+g+o+u,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),this.get("lockUniScaling")||(e=s+y/2-p,i=a-d-o-u,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),e=s+y/2-p,i=a+m+g+o+u,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),e=s+y+f+o+h,i=a+m/2-d,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),e=s-p-o-h,i=a+m/2-d,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c)),this.hasRotatingPoint&&(e=s+y/2-p,i=this.flipY?a+m+this.rotatingPointOffset/this.scaleY-c/2+o+u:a-this.rotatingPointOffset/this.scaleY-c/2-o-u,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c)),t.restore(),this}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,r=e.onChange||i,o=this;return fabric.util.animate({startValue:t.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),o.renderAll(),r()},onComplete:function(){t.setCoords(),n()}}),this},fxCenterObjectV:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,r=e.onChange||i,o=this;return fabric.util.animate({startValue:t.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),o.renderAll(),r()},onComplete:function(){t.setCoords(),n()}}),this},fxRemove:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,r=e.onChange||i,o=this;return fabric.util.animate({startValue:t.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){t.set("active",!1)},onChange:function(e){t.set("opacity",e),o.renderAll(),r()},onComplete:function(){o.remove(t),n()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var n=0,r=i.length;n<r;n++)t=i[n],e=n!==r-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,i,n){var r,o=this;e=e.toString(),i=i?fabric.util.object.clone(i):{},~t.indexOf(".")&&(r=t.split("."));var s=r?this.get(r[0])[r[1]]:this.get(t);"from"in i||(i.from=s),e=~e.indexOf("=")?s+parseFloat(e.replace("=","")):parseFloat(e),fabric.util.animate({startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(){return i.abort.call(o)},onChange:function(e){r?o[r[0]][r[1]]=e:o.set(t,e),n||i.onChange&&i.onChange()},onComplete:function(){n||(o.setCoords(),i.onComplete&&i.onComplete())}})}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n={x1:1,x2:1,y1:1,y2:1},r=e.StaticCanvas.supports("setLineDash");if(e.Line)return void e.warn("fabric.Line is already defined");e.Line=e.util.createClass(e.Object,{type:"line",initialize:function(t,e){e=e||{},t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.set("width",Math.abs(this.x2-this.x1)||1),this.set("height",Math.abs(this.y2-this.y1)||1),this.set("left","left"in t?t.left:Math.min(this.x1,this.x2)+this.width/2),this.set("top","top"in t?t.top:Math.min(this.y1,this.y2)+this.height/2)},_set:function(t,e){return this[t]=e,t in n&&this._setWidthHeight(),this},_render:function(t){if(t.beginPath(),this.group&&"group"!==this.group.type&&!this.transformMatrix&&t.translate(-this.group.width/2+this.left,-this.group.height/2+this.top),!this.strokeDashArray||this.strokeDashArray&&r){var e=this.x1<=this.x2?-1:1,i=this.y1<=this.y2?-1:1;t.moveTo(1===this.width?0:e*this.width/2,1===this.height?0:i*this.height/2),t.lineTo(1===this.width?0:-1*e*this.width/2,1===this.height?0:-1*i*this.height/2)}t.lineWidth=this.strokeWidth;var n=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this._renderStroke(t),t.strokeStyle=n},_renderDashedStroke:function(t){var i=this.x1<=this.x2?-1:1,n=this.y1<=this.y2?-1:1,r=1===this.width?0:i*this.width/2,o=1===this.height?0:n*this.height/2;t.beginPath(),e.util.drawDashedLine(t,r,o,-r,-o,this.strokeDashArray),t.closePath()},toObject:function(t){return i(this.callSuper("toObject",t),{x1:this.get("x1"),y1:this.get("y1"),x2:this.get("x2"),y2:this.get("y2")})},toSVG:function(){var t=this._createBaseSVGMarkup();return t.push("<line ",'x1="',this.get("x1"),'" y1="',this.get("y1"),'" x2="',this.get("x2"),'" y2="',this.get("y2"),'" style="',this.getSvgStyles(),'"/>'),t.join("")},complexity:function(){return 1}}),e.Line.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),e.Line.fromElement=function(t,n){var r=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES),o=[r.x1||0,r.y1||0,r.x2||0,r.y2||0];return new e.Line(o,i(r,n))},e.Line.fromObject=function(t){var i=[t.x1,t.y1,t.x2,t.y2];return new e.Line(i,t)}}(void 0!==exports?exports:this),function(t){"use strict";function e(t){return"radius"in t&&t.radius>0}var i=t.fabric||(t.fabric={}),n=2*Math.PI,r=i.util.object.extend;if(i.Circle)return void i.warn("fabric.Circle is already defined.");i.Circle=i.util.createClass(i.Object,{type:"circle",initialize:function(t){t=t||{},this.set("radius",t.radius||0),this.callSuper("initialize",t)},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return r(this.callSuper("toObject",t),{radius:this.get("radius")})},toSVG:function(){var t=this._createBaseSVGMarkup();return t.push("<circle ",'cx="0" cy="0" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t.join("")},_render:function(t,e){t.beginPath(),t.globalAlpha=this.group?t.globalAlpha*this.opacity:this.opacity,t.arc(e?this.left:0,e?this.top:0,this.radius,0,n,!1),t.closePath(),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){this.radius=t,this.set("width",2*t).set("height",2*t)},complexity:function(){return 1}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(t,n){n||(n={});var o=i.parseAttributes(t,i.Circle.ATTRIBUTE_NAMES);if(!e(o))throw new Error("value of `r` attribute is required and can not be negative");"left"in o&&(o.left-=n.width/2||0),"top"in o&&(o.top-=n.height/2||0);var s=new i.Circle(r(o,n));return s.cx=parseFloat(t.getAttribute("cx"))||0,s.cy=parseFloat(t.getAttribute("cy"))||0,s},i.Circle.fromObject=function(t){return new i.Circle(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});if(e.Triangle)return void e.warn("fabric.Triangle is already defined");e.Triangle=e.util.createClass(e.Object,{type:"triangle",initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("width",t.width||100).set("height",t.height||100)},_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=this.width/2,n=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-i,n,0,-n,this.strokeDashArray),e.util.drawDashedLine(t,0,-n,i,n,this.strokeDashArray),e.util.drawDashedLine(t,i,n,-i,n,this.strokeDashArray),t.closePath()},toSVG:function(){var t=this._createBaseSVGMarkup(),e=this.width/2,i=this.height/2,n=[-e+" "+i,"0 "+-i,e+" "+i].join(",");return t.push("<polygon ",'points="',n,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t.join("")},complexity:function(){return 1}}),e.Triangle.fromObject=function(t){return new e.Triangle(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=2*Math.PI,n=e.util.object.extend;if(e.Ellipse)return void e.warn("fabric.Ellipse is already defined.");e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("rx",t.rx||0),this.set("ry",t.ry||0),this.set("width",2*this.get("rx")),this.set("height",2*this.get("ry"))},toObject:function(t){return n(this.callSuper("toObject",t),{rx:this.get("rx"),ry:this.get("ry")})},toSVG:function(){var t=this._createBaseSVGMarkup();return t.push("<ellipse ",'rx="',this.get("rx"),'" ry="',this.get("ry"),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t.join("")},render:function(t,e){if(0!==this.rx&&0!==this.ry)return this.callSuper("render",t,e)},_render:function(t,e){t.beginPath(),t.save(),t.globalAlpha=this.group?t.globalAlpha*this.opacity:this.opacity,this.transformMatrix&&this.group&&t.translate(this.cx,this.cy),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left:0,e?this.top:0,this.rx,0,i,!1),this._renderFill(t),this._renderStroke(t),t.restore()},complexity:function(){return 1}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,i){i||(i={});var r=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES),o=r.left,s=r.top;"left"in r&&(r.left-=i.width/2||0),"top"in r&&(r.top-=i.height/2||0);var a=new e.Ellipse(n(r,i));return a.cx=o||0,a.cy=s||0,a},e.Ellipse.fromObject=function(t){return new e.Ellipse(t)}}(void 0!==exports?exports:this),function(t){"use strict";function e(t){return t.left=t.left||0,t.top=t.top||0,t}var i=t.fabric||(t.fabric={}),n=i.util.object.extend;if(i.Rect)return void console.warn("fabric.Rect is already defined");var r=i.Object.prototype.stateProperties.concat();r.push("rx","ry"),i.Rect=i.util.createClass(i.Object,{stateProperties:r,type:"rect",rx:0,ry:0,strokeDashArray:null,initialize:function(t){t=t||{},this.callSuper("initialize",t),this._initRxRy(),this.x=t.x||0,this.y=t.y||0},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx||0,i=this.ry||0,n=-this.width/2,r=-this.height/2,o=this.width,s=this.height,a=this.group&&"group"!==this.group.type;t.beginPath(),t.globalAlpha=a?t.globalAlpha*this.opacity:this.opacity,this.transformMatrix&&a&&t.translate(this.width/2+this.x,this.height/2+this.y),!this.transformMatrix&&a&&t.translate(-this.group.width/2+this.width/2+this.x,-this.group.height/2+this.height/2+this.y);var l=0!==e||0!==i;t.moveTo(n+e,r),t.lineTo(n+o-e,r),l&&t.quadraticCurveTo(n+o,r,n+o,r+i,n+o,r+i),t.lineTo(n+o,r+s-i),l&&t.quadraticCurveTo(n+o,r+s,n+o-e,r+s,n+o-e,r+s),t.lineTo(n+e,r+s),l&&t.quadraticCurveTo(n,r+s,n,r+s-i,n,r+s-i),t.lineTo(n,r+i),l&&t.quadraticCurveTo(n,r,n+e,r,n+e,r),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var e=-this.width/2,n=-this.height/2,r=this.width,o=this.height;t.beginPath(),i.util.drawDashedLine(t,e,n,e+r,n,this.strokeDashArray),i.util.drawDashedLine(t,e+r,n,e+r,n+o,this.strokeDashArray),i.util.drawDashedLine(t,e+r,n+o,e,n+o,this.strokeDashArray),i.util.drawDashedLine(t,e,n+o,e,n,this.strokeDashArray),t.closePath()},_normalizeLeftTopProperties:function(t){return"left"in t&&this.set("left",t.left+this.getWidth()/2),this.set("x",t.left||0),"top"in t&&this.set("top",t.top+this.getHeight()/2),this.set("y",t.top||0),this},toObject:function(t){return n(this.callSuper("toObject",t),{rx:this.get("rx")||0,ry:this.get("ry")||0,x:this.get("x"),y:this.get("y")})},toSVG:function(){var t=this._createBaseSVGMarkup();return t.push("<rect ",'x="',-1*this.width/2,'" y="',-1*this.height/2,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t.join("")},complexity:function(){return 1}}),i.Rect.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),i.Rect.fromElement=function(t,r){if(!t)return null;var o=i.parseAttributes(t,i.Rect.ATTRIBUTE_NAMES);o=e(o);var s=new i.Rect(n(r?i.util.object.clone(r):{},o));return s._normalizeLeftTopProperties(o),s},i.Rect.fromObject=function(t){return new i.Rect(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed,n=e.util.array.min;if(e.Polyline)return void e.warn("fabric.Polyline is already defined");e.Polyline=e.util.createClass(e.Object,{type:"polyline",initialize:function(t,e,i){e=e||{},this.set("points",t),this.callSuper("initialize",e),this._calcDimensions(i)},_calcDimensions:function(t){return e.Polygon.prototype._calcDimensions.call(this,t)},toObject:function(t){return e.Polygon.prototype.toObject.call(this,t)},toSVG:function(){for(var t=[],e=this._createBaseSVGMarkup(),n=0,r=this.points.length;n<r;n++)t.push(i(this.points[n].x,2),",",i(this.points[n].y,2)," ");return e.push("<polyline ",'points="',t.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),e.join("")},_render:function(t){var e;t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(var i=0,n=this.points.length;i<n;i++)e=this.points[i],t.lineTo(e.x,e.y);this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i,n;t.beginPath();for(var r=0,o=this.points.length;r<o;r++)i=this.points[r],n=this.points[r+1]||i,e.util.drawDashedLine(t,i.x,i.y,n.x,n.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElement=function(t,i){if(!t)return null;i||(i={});var r=e.parsePointsAttribute(t.getAttribute("points")),o=e.parseAttributes(t,e.Polyline.ATTRIBUTE_NAMES),s=n(r,"x"),a=n(r,"y");s=s<0?s:0,a=s<0?a:0;for(var l=0,c=r.length;l<c;l++)r[l].x-=i.width/2+s||0,r[l].y-=i.height/2+a||0;return new e.Polyline(r,e.util.object.extend(o,i),!0)},e.Polyline.fromObject=function(t){var i=t.points;return new e.Polyline(i,t,!0)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,r=e.util.array.max,o=e.util.toFixed;if(e.Polygon)return void e.warn("fabric.Polygon is already defined");e.Polygon=e.util.createClass(e.Object,{type:"polygon",initialize:function(t,e,i){e=e||{},this.points=t,this.callSuper("initialize",e),this._calcDimensions(i)},_calcDimensions:function(t){var e=this.points,i=n(e,"x"),o=n(e,"y"),s=r(e,"x"),a=r(e,"y");if(this.width=s-i||1,this.height=a-o||1,this.minX=i,this.minY=o,!t){var l=this.width/2+this.minX,c=this.height/2+this.minY;this.points.forEach(function(t){t.x-=l,t.y-=c},this)}},toObject:function(t){return i(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(){for(var t=[],e=this._createBaseSVGMarkup(),i=0,n=this.points.length;i<n;i++)t.push(o(this.points[i].x,2),",",o(this.points[i].y,2)," ");return e.push("<polygon ",'points="',t.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),e.join("")},_render:function(t){var e;t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(var i=0,n=this.points.length;i<n;i++)e=this.points[i],t.lineTo(e.x,e.y);this._renderFill(t),(this.stroke||this.strokeDashArray)&&(t.closePath(),this._renderStroke(t))},_renderDashedStroke:function(t){var i,n;t.beginPath();for(var r=0,o=this.points.length;r<o;r++)i=this.points[r],n=this.points[r+1]||this.points[0],e.util.drawDashedLine(t,i.x,i.y,n.x,n.y,this.strokeDashArray);t.closePath()},complexity:function(){return this.points.length}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=function(t,r){if(!t)return null;r||(r={});var o=e.parsePointsAttribute(t.getAttribute("points")),s=e.parseAttributes(t,e.Polygon.ATTRIBUTE_NAMES),a=n(o,"x"),l=n(o,"y");a=a<0?a:0,l=a<0?l:0;for(var c=0,h=o.length;c<h;c++)o[c].x-=r.width/2+a||0,o[c].y-=r.height/2+l||0;return new e.Polygon(o,i(s,r),!0)},e.Polygon.fromObject=function(t){return new e.Polygon(t.points,t,!0)}}(void 0!==exports?exports:this),function(t){function e(t){return"H"===t[0]?t[1]:t[t.length-2]}function i(t){return"V"===t[0]?t[1]:t[t.length-1]}var n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},r=t.fabric||(t.fabric={}),o=r.util.array.min,s=r.util.array.max,a=r.util.object.extend,l=Object.prototype.toString,c=r.util.drawArc;if(r.Path)return void r.warn("fabric.Path is already defined");r.Path=r.util.createClass(r.Object,{type:"path",initialize:function(t,e){if(e=e||{},this.setOptions(e),!t)throw new Error("`path` argument is required");var i="[object Array]"===l.call(t);this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),this._initializePath(e),e.sourcePath&&this.setSourcePath(e.sourcePath))},_initializePath:function(t){var e="width"in t&&null!=t.width,i="height"in t&&null!=t.width,n="left"in t,r="top"in t,o=n?this.left:0,s=r?this.top:0;e&&i?(r||(this.top=this.height/2),n||(this.left=this.width/2)):(a(this,this._parseDimensions()),e&&(this.width=t.width),i&&(this.height=t.height)),this.pathOffset=this.pathOffset||this._calculatePathOffset(o,s)},_calculatePathOffset:function(t,e){return{x:this.left-t-this.width/2,y:this.top-e-this.height/2}},_render:function(t){for(var e,i,n,r,o,s=null,a=0,l=0,h=0,u=0,d=-(this.width/2+this.pathOffset.x),p=-(this.height/2+this.pathOffset.y),f=0,g=this.path.length;f<g;++f){switch(e=this.path[f],e[0]){case"l":a+=e[1],l+=e[2],t.lineTo(a+d,l+p);break;case"L":a=e[1],l=e[2],t.lineTo(a+d,l+p);break;case"h":a+=e[1],t.lineTo(a+d,l+p);break;case"H":a=e[1],t.lineTo(a+d,l+p);break;case"v":l+=e[1],t.lineTo(a+d,l+p);break;case"V":l=e[1],t.lineTo(a+d,l+p);break;case"m":a+=e[1],l+=e[2],t[!s||"m"!==s[0]&&"M"!==s[0]?"moveTo":"lineTo"](a+d,l+p);break;case"M":a=e[1],l=e[2],t[!s||"m"!==s[0]&&"M"!==s[0]?"moveTo":"lineTo"](a+d,l+p);break;case"c":i=a+e[5],n=l+e[6],h=a+e[3],u=l+e[4],t.bezierCurveTo(a+e[1]+d,l+e[2]+p,h+d,u+p,i+d,n+p),a=i,l=n;break;case"C":a=e[5],l=e[6],h=e[3],u=e[4],t.bezierCurveTo(e[1]+d,e[2]+p,h+d,u+p,a+d,l+p);break;case"s":i=a+e[3],n=l+e[4],h=h?2*a-h:a,u=u?2*l-u:l,t.bezierCurveTo(h+d,u+p,a+e[1]+d,l+e[2]+p,i+d,n+p),h=a+e[1],u=l+e[2],a=i,l=n;break;case"S":i=e[3],n=e[4],h=2*a-h,u=2*l-u,t.bezierCurveTo(h+d,u+p,e[1]+d,e[2]+p,i+d,n+p),a=i,l=n,h=e[1],u=e[2];break;case"q":i=a+e[3],n=l+e[4],h=a+e[1],u=l+e[2],t.quadraticCurveTo(h+d,u+p,i+d,n+p),a=i,l=n;break;case"Q":i=e[3],n=e[4],t.quadraticCurveTo(e[1]+d,e[2]+p,i+d,n+p),a=i,l=n,h=e[1],u=e[2];break;case"t":i=a+e[1],n=l+e[2],null===s[0].match(/[QqTt]/)?(h=a,u=l):"t"===s[0]?(h=2*a-r,u=2*l-o):"q"===s[0]&&(h=2*a-h,u=2*l-u),r=h,o=u,t.quadraticCurveTo(h+d,u+p,i+d,n+p),a=i,l=n,h=a+e[1],u=l+e[2];break;case"T":i=e[1],n=e[2],h=2*a-h,u=2*l-u,t.quadraticCurveTo(h+d,u+p,i+d,n+p),a=i,l=n;break;case"a":c(t,a+d,l+p,[e[1],e[2],e[3],e[4],e[5],e[6]+a+d,e[7]+l+p]),a+=e[6],l+=e[7];break;case"A":c(t,a+d,l+p,[e[1],e[2],e[3],e[4],e[5],e[6]+d,e[7]+p]),a=e[6],l=e[7];break;case"z":case"Z":t.closePath()}s=e}},render:function(t,e){if(this.visible){t.save();var i=this.transformMatrix;i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e||this.transform(t),this.overlayFill?t.fillStyle=this.overlayFill:this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t):this.fill),this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t):this.stroke),this._setShadow(t),this.clipTo&&r.util.clipContext(this,t),t.beginPath(),this._render(t),this._renderFill(t),this._renderStroke(t),this.clipTo&&t.restore(),this._removeShadow(t),!e&&this.active&&(this.drawBorders(t),this.drawControls(t)),t.restore()}},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){var e=a(this.callSuper("toObject",t),{path:this.path,pathOffset:this.pathOffset});return this.sourcePath&&(e.sourcePath=this.sourcePath),this.transformMatrix&&(e.transformMatrix=this.transformMatrix),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.path=this.sourcePath),delete e.sourcePath,e},toSVG:function(){for(var t=[],e=this._createBaseSVGMarkup(),i=0,n=this.path.length;i<n;i++)t.push(this.path[i].join(" "));var r=t.join(" ");return e.push('<g transform="',this.group?"":this.getSvgTransform(),'">',"<path ",'d="',r,'" style="',this.getSvgStyles(),'" transform="translate(',-this.width/2," ",-this.height/2,")",'" stroke-linecap="round" ',"/>","</g>"),e.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,i,r,o,s=[],a=[],l=/(-?\.\d+)|(-?\d+(\.\d+)?)/g,c=0,h=this.path.length;c<h;c++){for(t=this.path[c],r=t.slice(1).trim(),a.length=0;i=l.exec(r);)a.push(i[0]);o=[t.charAt(0)];for(var u=0,d=a.length;u<d;u++)e=parseFloat(a[u]),isNaN(e)||o.push(e);var p=o[0].toLowerCase(),f=n[p];if(o.length-1>f)for(var g=1,m=o.length;g<m;g+=f)s.push([o[0]].concat(o.slice(g,g+f)));else s.push(o)}return s},_parseDimensions:function(){var t,n,r,a,l=[],c=[],h=!1;this.path.forEach(function(o,s){"H"!==o[0]&&(t=e(0===s?o:this.path[s-1])),"V"!==o[0]&&(n=i(0===s?o:this.path[s-1])),o[0]===o[0].toLowerCase()&&(h=!0),r=h?t+e(o):"V"===o[0]?t:e(o),a=h?n+i(o):"H"===o[0]?n:i(o);var u=parseInt(r,10);isNaN(u)||l.push(u),u=parseInt(a,10),isNaN(u)||c.push(u)},this);var u=o(l),d=o(c),p=s(l),f=s(c),g=p-u,m=f-d;return{left:this.left+(u+g/2),top:this.top+(d+m/2),width:g,height:m}}}),r.Path.fromObject=function(t,e){"string"==typeof t.path?r.loadSVGFromURL(t.path,function(i){var n=i[0],o=t.path;delete t.path,r.util.object.extend(n,t),n.setSourcePath(o),e(n)}):e(new r.Path(t.path,t))},r.Path.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(["d"]),r.Path.fromElement=function(t,e,i){var n=r.parseAttributes(t,r.Path.ATTRIBUTE_NAMES);e&&e(new r.Path(n.d,a(n,i)))},r.Path.async=!0}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.invoke,r=e.Object.prototype.toObject;if(e.PathGroup)return void e.warn("fabric.PathGroup is already defined");e.PathGroup=e.util.createClass(e.Path,{type:"path-group",fill:"",initialize:function(t,e){e=e||{},this.paths=t||[];for(var i=this.paths.length;i--;)this.paths[i].group=this;this.setOptions(e),this.setCoords(),e.sourcePath&&this.setSourcePath(e.sourcePath)},render:function(t){if(this.visible){t.save();var i=this.transformMatrix;i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t);for(var n=0,r=this.paths.length;n<r;++n)this.paths[n].render(t,!0);this.clipTo&&t.restore(),this._removeShadow(t),this.active&&(this.drawBorders(t),this.drawControls(t)),t.restore()}},_set:function(t,e){if(("fill"===t||"overlayFill"===t)&&e&&this.isSameColor())for(var i=this.paths.length;i--;)this.paths[i]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(t){return i(r.call(this,t),{paths:n(this.getObjects(),"toObject",t),sourcePath:this.sourcePath})},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.paths=this.sourcePath),e},toSVG:function(){for(var t=this.getObjects(),e=["<g ",'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransform(),'" ',">"],i=0,n=t.length;i<n;i++)e.push(t[i].toSVG());return e.push("</g>"),e.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var t=this.getObjects()[0].get("fill");return this.getObjects().every(function(e){return e.get("fill")===t})},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},toGrayscale:function(){for(var t=this.paths.length;t--;)this.paths[t].toGrayscale();return this},getObjects:function(){return this.paths}}),e.PathGroup.fromObject=function(t,i){"string"==typeof t.paths?e.loadSVGFromURL(t.paths,function(n){var r=t.paths;delete t.paths;var o=e.util.groupSVGElements(n,t,r);i(o)}):e.util.enlivenObjects(t.paths,function(n){delete t.paths,i(new e.PathGroup(n,t))})},e.PathGroup.async=!0}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,r=e.util.array.max,o=e.util.array.invoke;if(!e.Group){var s={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",initialize:function(t,e){e=e||{},this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;this.originalState={},this.callSuper("initialize"),this._calcBounds(),this._updateObjectsCoords(),e&&i(this,e),this._setOpacityIfSame(),this.setCoords(!0),this.saveCoords()},_updateObjectsCoords:function(){var t=this.left,e=this.top;this.forEachObject(function(i){var n=i.get("left"),r=i.get("top");i.set("originalLeft",n),i.set("originalTop",r),i.set("left",n-t),i.set("top",r-e),i.setCoords(),i.__origHasControls=i.hasControls,i.hasControls=!1},this)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},getObjects:function(){return this._objects},addWithUpdate:function(t){return this._restoreObjectsState(),this._objects.push(t),t.group=this,this.forEachObject(function(t){t.set("active",!0),t.group=this},this),this._calcBounds(),this._updateObjectsCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),this.forEachObject(function(t){t.set("active",!0),t.group=this},this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this},_onObjectAdded:function(t){t.group=this},_onObjectRemoved:function(t){delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,opacity:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){if(t in this.delegatedProperties){var i=this._objects.length;for(this[t]=e;i--;)this._objects[i].set(t,e)}else this[t]=e},toObject:function(t){return i(this.callSuper("toObject",t),{objects:o(this._objects,"toObject",t)})},render:function(t,i){if(this.visible){t.save(),this.transform(t);var n=Math.max(this.scaleX,this.scaleY);this.clipTo&&e.util.clipContext(this,t);for(var r=0,o=this._objects.length;r<o;r++){var s=this._objects[r],a=s.borderScaleFactor,l=s.hasRotatingPoint;s.visible&&(s.borderScaleFactor=n,s.hasRotatingPoint=!1,s.render(t),s.borderScaleFactor=a,s.hasRotatingPoint=l)}this.clipTo&&t.restore(),!i&&this.active&&(this.drawBorders(t),this.drawControls(t)),t.restore(),this.setCoords()}},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},_restoreObjectState:function(t){var e=this.get("left"),i=this.get("top"),n=this.getAngle()*(Math.PI/180),r=Math.cos(n)*t.get("top")*this.get("scaleY")+Math.sin(n)*t.get("left")*this.get("scaleX"),o=-Math.sin(n)*t.get("top")*this.get("scaleY")+Math.cos(n)*t.get("left")*this.get("scaleX");return t.setAngle(t.getAngle()+this.getAngle()),t.set("left",e+o),t.set("top",i+r),t.set("scaleX",t.get("scaleX")*this.get("scaleX")),t.set("scaleY",t.get("scaleY")*this.get("scaleY")),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),t.setCoords(),delete t.group,this},destroy:function(){return this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords()}),this},_setOpacityIfSame:function(){var t=this.getObjects(),e=t[0]?t[0].get("opacity"):1;t.every(function(t){return t.get("opacity")===e})&&(this.opacity=e)},_calcBounds:function(){for(var t,e,i,o,s,a,l,c=[],h=[],u=0,d=this._objects.length;u<d;++u){s=this._objects[u],s.setCoords();for(var p in s.oCoords)c.push(s.oCoords[p].x),h.push(s.oCoords[p].y)}t=n(c),i=r(c),e=n(h),o=r(h),a=i-t||0,l=o-e||0,this.width=a,this.height=l,this.left=t+a/2||0,this.top=e+l/2||0},toSVG:function(){for(var t=[],e=0,i=this._objects.length;e<i;e++)t.push(this._objects[e].toSVG());return'<g transform="'+this.getSvgTransform()+'">'+t.join("")+"</g>"},get:function(t){if(t in s){if(this[t])return this[t];for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),e.Group.fromObject=function(t,i){e.util.enlivenObjects(t.objects,function(n){delete t.objects,i&&i(new e.Group(n,t))})},e.Group.async=!0}}(void 0!==exports?exports:this),function(t){"use strict";var e=fabric.util.object.extend;if(t.fabric||(t.fabric={}),t.fabric.Image)return void fabric.warn("fabric.Image is already defined.");fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",initialize:function(t,e){e||(e={}),this.filters=[],this.callSuper("initialize",e),this._initElement(t),this._initConfig(e),e.filters&&(this.filters=e.filters,this.applyFilters())},getElement:function(){return this._element},setElement:function(t,e){return this._element=t,this._originalElement=t,this._initConfig(),0!==this.filters.length&&this.applyFilters(e),this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},render:function(t,e){if(this.visible){t.save();var i=this.transformMatrix;this.group&&"group"!==this.group.type&&t.translate(-this.group.width/2+this.width/2,-this.group.height/2+this.height/2),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e||this.transform(t),t.save(),this._setShadow(t),this.clipTo&&fabric.util.clipContext(this,t),this._render(t),this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),this._renderStroke(t),this.clipTo&&t.restore(),t.restore(),this.active&&!e&&(this.drawBorders(t),this.drawControls(t)),t.restore()}},_stroke:function(t){t.save(),t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t):this.stroke,t.beginPath(),t.strokeRect(-this.width/2,-this.height/2,this.width,this.height),t.closePath(),t.restore()},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,n=this.width,r=this.height;t.save(),t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t):this.stroke,t.beginPath(),fabric.util.drawDashedLine(t,e,i,e+n,i,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i,e+n,i+r,this.strokeDashArray),
fabric.util.drawDashedLine(t,e+n,i+r,e,i+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e,i+r,e,i,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){return e(this.callSuper("toObject",t),{src:this._originalElement.src||this._originalElement._src,filters:this.filters.map(function(t){return t&&t.toObject()})})},toSVG:function(){var t=[];if(t.push('<g transform="',this.getSvgTransform(),'">','<image xlink:href="',this.getSvgSrc(),'" style="',this.getSvgStyles(),'" transform="translate('+-this.width/2+" "+-this.height/2+")",'" width="',this.width,'" height="',this.height,'"></image>'),this.stroke||this.strokeDashArray){var e=this.fill;this.fill=null,t.push("<rect ",'x="',-1*this.width/2,'" y="',-1*this.height/2,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>'),this.fill=e}return t.push("</g>"),t.join("")},getSrc:function(){return this.getElement().src||this.getElement()._src},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},clone:function(t,e){this.constructor.fromObject(this.toObject(e),t)},applyFilters:function(t){if(0===this.filters.length)return this._element=this._originalElement,void(t&&t());var e=this._originalElement,i=fabric.util.createCanvasElement(),n=fabric.util.createImage(),r=this;return i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0,e.width,e.height),this.filters.forEach(function(t){t&&t.applyTo(i)}),n.width=e.width,n.height=e.height,fabric.isLikelyNode?(n.src=i.toBuffer(void 0,fabric.Image.pngCompression),r._element=n,t&&t()):(n.onload=function(){r._element=n,t&&t(),n.onload=i=e=null},n.src=i.toDataURL("image/png")),this},_render:function(t){t.drawImage(this._element,-this.width/2,-this.height/2,this.width,this.height)},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t){this.setElement(fabric.util.getById(t)),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t)},_initFilters:function(t,e){t.filters&&t.filters.length?fabric.util.enlivenObjects(t.filters,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement().width||0,this.height="height"in t?t.height:this.getElement().height||0},complexity:function(){return 1}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,e){var i=fabric.document.createElement("img"),n=t.src;i.onload=function(){fabric.Image.prototype._initFilters.call(t,t,function(n){t.filters=n||[];var r=new fabric.Image(i,t);e&&e(r),i=i.onload=i.onerror=null})},i.onerror=function(){fabric.log("Error loading "+i.src),e&&e(null,!0),i=i.onload=i.onerror=null},i.src=n},fabric.Image.fromURL=function(t,e,i){fabric.util.loadImage(t,function(t){e(new fabric.Image(t,i))})},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height xlink:href".split(" ")),fabric.Image.fromElement=function(t,i,n){var r=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(r["xlink:href"],i,e(n?fabric.util.object.clone(n):{},r))},fabric.Image.async=!0,fabric.Image.pngCompression=1}(void 0!==exports?exports:this),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Brightness=e.util.createClass(e.Image.filters.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||100},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,r=this.brightness,o=0,s=n.length;o<s;o+=4)n[o]+=r,n[o+1]+=r,n[o+2]+=r;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=function(t){return new e.Image.filters.Brightness(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Convolute=e.util.createClass(e.Image.filters.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0];var i=e.util.createCanvasElement();this.tmpCtx=i.getContext("2d")},_createImageData:function(t,e){return this.tmpCtx.createImageData(t,e)},applyTo:function(t){for(var e=this.matrix,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=Math.round(Math.sqrt(e.length)),o=Math.floor(r/2),s=n.data,a=n.width,l=n.height,c=a,h=l,u=this._createImageData(c,h),d=u.data,p=this.opaque?1:0,f=0;f<h;f++)for(var g=0;g<c;g++){for(var m=f,y=g,_=4*(f*c+g),v=0,b=0,w=0,x=0,T=0;T<r;T++)for(var A=0;A<r;A++){var C=m+T-o,E=y+A-o;if(C>=0&&C<l&&E>=0&&E<a){var S=4*(C*a+E),O=e[T*r+A];v+=s[S]*O,b+=s[S+1]*O,w+=s[S+2]*O,x+=s[S+3]*O}}d[_]=v,d[_+1]=b,d[_+2]=w,d[_+3]=x+p*(255-x)}i.putImageData(u,0,0)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=function(t){return new e.Image.filters.Convolute(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.GradientTransparency=e.util.createClass(e.Image.filters.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,r=this.threshold,o=n.length,s=0,a=n.length;s<a;s+=4)n[s+3]=r+255*(o-s)/o;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=function(t){return new e.Image.filters.GradientTransparency(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Grayscale=e.util.createClass(e.Image.filters.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=n.width*n.height*4,s=0;s<o;)e=(r[s]+r[s+1]+r[s+2])/3,r[s]=e,r[s+1]=e,r[s+2]=e,s+=4;i.putImageData(n,0,0)}}),e.Image.filters.Grayscale.fromObject=function(){return new e.Image.filters.Grayscale}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Invert=e.util.createClass(e.Image.filters.BaseFilter,{type:"Invert",applyTo:function(t){var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=r.length;for(e=0;e<o;e+=4)r[e]=255-r[e],r[e+1]=255-r[e+1],r[e+2]=255-r[e+2];i.putImageData(n,0,0)}}),e.Image.filters.Invert.fromObject=function(){return new e.Image.filters.Invert}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Mask=e.util.createClass(e.Image.filters.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=[0,1,2,3].indexOf(t.channel)>-1?t.channel:0},applyTo:function(t){if(this.mask){var i,n=t.getContext("2d"),r=n.getImageData(0,0,t.width,t.height),o=r.data,s=this.mask.getElement(),a=e.util.createCanvasElement(),l=this.channel,c=r.width*r.height*4;a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0,s.width,s.height);var h=a.getContext("2d").getImageData(0,0,s.width,s.height),u=h.data;for(i=0;i<c;i+=4)o[i+3]=u[i+l];n.putImageData(r,0,0)}},toObject:function(){return i(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),e.Image.filters.Mask.fromObject=function(t,i){var n=e.document.createElement("img"),r=t.mask.src;n.onload=function(){t.mask=new e.Image(n,t.mask),i&&i(new e.Image.filters.Mask(t)),n=n.onload=n.onerror=null},n.onerror=function(){e.log("Error loading "+n.src),i&&i(null,!0),n=n.onload=n.onerror=null},n.src=r},e.Image.filters.Mask.async=!0}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Noise=e.util.createClass(e.Image.filters.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||100},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=this.noise,s=0,a=r.length;s<a;s+=4)e=(.5-Math.random())*o,r[s]+=e,r[s+1]+=e,r[s+2]+=e;i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=function(t){return new e.Image.filters.Noise(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Pixelate=e.util.createClass(e.Image.filters.BaseFilter,{type:"Pixelate",initialize:function(t){t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,i,n,r,o,s,a,l=t.getContext("2d"),c=l.getImageData(0,0,t.width,t.height),h=c.data,u=c.height,d=c.width;for(i=0;i<u;i+=this.blocksize)for(n=0;n<d;n+=this.blocksize){e=4*i*d+4*n,r=h[e],o=h[e+1],s=h[e+2],a=h[e+3];for(var p=i,f=i+this.blocksize;p<f;p++)for(var g=n,m=n+this.blocksize;g<m;g++)e=4*p*d+4*g,h[e]=r,h[e+1]=o,h[e+2]=s,h[e+3]=a}l.putImageData(c,0,0)},toObject:function(){return i(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=function(t){return new e.Image.filters.Pixelate(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.RemoveWhite=e.util.createClass(e.Image.filters.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,i,n,r=t.getContext("2d"),o=r.getImageData(0,0,t.width,t.height),s=o.data,a=this.threshold,l=this.distance,c=255-a,h=Math.abs,u=0,d=s.length;u<d;u+=4)e=s[u],i=s[u+1],n=s[u+2],e>c&&i>c&&n>c&&h(e-i)<l&&h(e-n)<l&&h(i-n)<l&&(s[u+3]=1);r.putImageData(o,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=function(t){return new e.Image.filters.RemoveWhite(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia",applyTo:function(t){var e,i,n=t.getContext("2d"),r=n.getImageData(0,0,t.width,t.height),o=r.data,s=o.length;for(e=0;e<s;e+=4)i=.3*o[e]+.59*o[e+1]+.11*o[e+2],o[e]=i+100,o[e+1]=i+50,o[e+2]=i+255;n.putImageData(r,0,0)}}),e.Image.filters.Sepia.fromObject=function(){return new e.Image.filters.Sepia}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia2=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,i,n,r,o=t.getContext("2d"),s=o.getImageData(0,0,t.width,t.height),a=s.data,l=a.length;for(e=0;e<l;e+=4)i=a[e],n=a[e+1],r=a[e+2],a[e]=(.393*i+.769*n+.189*r)/1.351,a[e+1]=(.349*i+.686*n+.168*r)/1.203,a[e+2]=(.272*i+.534*n+.131*r)/2.14;o.putImageData(s,0,0)}}),e.Image.filters.Sepia2.fromObject=function(){return new e.Image.filters.Sepia2}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Tint=e.util.createClass(e.Image.filters.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||0},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=r.length,s=parseInt(this.color,10).toString(16);s.length<6;)s="0"+s;var a=parseInt("0x"+s.substr(0,2),16),l=parseInt("0x"+s.substr(2,2),16),c=parseInt("0x"+s.substr(4,2),16);for(e=0;e<o;e+=4)r[e+3]>0&&(r[e]=a,r[e+1]=l,r[e+2]=c);i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color})}}),e.Image.filters.Tint.fromObject=function(t){return new e.Image.filters.Tint(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,r=e.util.toFixed,o=e.StaticCanvas.supports("setLineDash");if(e.Text)return void e.warn("fabric.Text is already defined");var s=e.Object.prototype.stateProperties.concat();s.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","backgroundColor","textBackgroundColor","useNative","path"),e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:{fontSize:!0,fontWeight:!0,fontFamily:!0,textDecoration:!0,fontStyle:!0,lineHeight:!0,stroke:!0,strokeWidth:!0,text:!0},type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.3,backgroundColor:"",textBackgroundColor:"",path:null,useNative:!0,stateProperties:s,stroke:null,shadow:null,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.setOptions(e),this.__skipDimension=!1,this._initDimensions(),this.setCoords()},_initDimensions:function(){if(!this.__skipDimension){var t=e.util.createCanvasElement();this._render(t.getContext("2d"))}},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_render:function(t){var e=this.group&&"group"!==this.group.type;e&&!this.transformMatrix?t.translate(-this.group.width/2+this.left,-this.group.height/2+this.top):e&&this.transformMatrix&&t.translate(-this.group.width/2,-this.group.height/2),void 0===Cufon||!0===this.useNative?this._renderViaNative(t):this._renderViaCufon(t)},_renderViaNative:function(t){this.transform(t,e.isLikelyNode),this._setTextStyles(t);var i=this.text.split(/\r?\n/);this.width=this._getTextWidth(t,i),this.height=this._getTextHeight(t,i),this.clipTo&&e.util.clipContext(this,t),this._renderTextBackground(t,i),"left"!==this.textAlign&&"justify"!==this.textAlign&&(t.save(),t.translate("center"===this.textAlign?this.width/2:this.width,0)),t.save(),this._setShadow(t),this._renderTextFill(t,i),this._renderTextStroke(t,i),this._removeShadow(t),t.restore(),"left"!==this.textAlign&&"justify"!==this.textAlign&&t.restore(),this._renderTextDecoration(t,i),this.clipTo&&t.restore(),this._setBoundaries(t,i),this._totalLineHeight=0},_setBoundaries:function(t,e){this._boundaries=[];for(var i=0,n=e.length;i<n;i++){var r=this._getLineWidth(t,e[i]),o=this._getLineLeftOffset(r);this._boundaries.push({height:this.fontSize*this.lineHeight,width:r,left:o})}},_setTextStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t):this.fill),this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t):this.stroke),t.textBaseline="alphabetic",t.textAlign=this.textAlign,t.font=this._getFontDeclaration()},_getTextHeight:function(t,e){return this.fontSize*e.length*this.lineHeight},_getTextWidth:function(t,e){for(var i=t.measureText(e[0]).width,n=1,r=e.length;n<r;n++){var o=t.measureText(e[n]).width;o>i&&(i=o)}return i},_drawChars:function(t,e,i,n,r){e[t](i,n,r)},_drawTextLine:function(t,e,i,n,r,o){if(r-=this.fontSize/4,"justify"!==this.textAlign)return void this._drawChars(t,e,i,n,r,o);var s=e.measureText(i).width,a=this.width;if(a>s)for(var l=i.split(/\s+/),c=e.measureText(i.replace(/\s+/g,"")).width,h=a-c,u=l.length-1,d=h/u,p=0,f=0,g=l.length;f<g;f++)this._drawChars(t,e,l[f],n+p,r,o),p+=e.measureText(l[f]).width+d;else this._drawChars(t,e,i,n,r,o)},_getLeftOffset:function(){return!e.isLikelyNode||"left"!==this.originX&&"center"!==this.originX?-this.width/2:0},_getTopOffset:function(){return e.isLikelyNode?"center"===this.originY?-this.height/2:"bottom"===this.originY?-this.height:0:-this.height/2},_renderTextFill:function(t,e){if(this.fill||this.skipFillStrokeCheck){this._boundaries=[];for(var i=0,n=0,r=e.length;n<r;n++){i+=this._getHeightOfLine(t,n,e),this._drawTextLine("fillText",t,e[n],this._getLeftOffset(),this._getTopOffset()+i,n)}}},_renderTextStroke:function(t,e){if(this.stroke||this.skipFillStrokeCheck){var i=0;t.save(),this.strokeDashArray&&(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),o&&t.setLineDash(this.strokeDashArray)),t.beginPath();for(var n=0,r=e.length;n<r;n++){i+=this._getHeightOfLine(t,n,e),this._drawTextLine("strokeText",t,e[n],this._getLeftOffset(),this._getTopOffset()+i,n)}t.closePath(),t.restore()}},_getHeightOfLine:function(){return this.fontSize*this.lineHeight},_renderTextBackground:function(t,e){this._renderTextBoxBackground(t),this._renderTextLinesBackground(t,e)},_renderTextBoxBackground:function(t){this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor,t.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),t.restore())},_renderTextLinesBackground:function(t,e){if(this.textBackgroundColor){t.save(),t.fillStyle=this.textBackgroundColor;for(var i=0,n=e.length;i<n;i++)if(""!==e[i]){var r=this._getLineWidth(t,e[i]),o=this._getLineLeftOffset(r);t.fillRect(this._getLeftOffset()+o,this._getTopOffset()+i*this.fontSize*this.lineHeight,r,this.fontSize*this.lineHeight)}t.restore()}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_getLineWidth:function(t,e){return"justify"===this.textAlign?this.width:t.measureText(e).width},_renderTextDecoration:function(t,e){function i(i){for(var o=0,s=e.length;o<s;o++){var a=r._getLineWidth(t,e[o]),l=r._getLineLeftOffset(a);t.fillRect(r._getLeftOffset()+l,i+o*r._getHeightOfLine(t,o,e)-n,a,1)}}if(this.textDecoration){var n=this._getTextHeight(t,e)/2,r=this,o=this.fontSize/4;this.textDecoration.indexOf("underline")>-1&&i(this.fontSize*this.lineHeight),this.textDecoration.indexOf("line-through")>-1&&i(this.fontSize*this.lineHeight-o),this.textDecoration.indexOf("overline")>-1&&i(o)}},_getFontDeclaration:function(){return[e.isLikelyNode?this.fontWeight:this.fontStyle,e.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",e.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(t.save(),this._render(t),!e&&this.active&&(this.drawBorders(t),this.drawControls(t)),t.restore())},toObject:function(t){return i(this.callSuper("toObject",t),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textAlign:this.textAlign,path:this.path,backgroundColor:this.backgroundColor,textBackgroundColor:this.textBackgroundColor,useNative:this.useNative})},toSVG:function(){var t=this.text.split(/\r?\n/),e=this.useNative?this.fontSize*this.lineHeight:-this._fontAscent-this._fontAscent/5*this.lineHeight,i=-this.width/2,n=this.useNative?this.fontSize-1:this.height/2-t.length*this.fontSize-this._totalLineHeight,o=this._getSVGTextAndBg(e,i,t),s=this._getSVGShadows(e,t);return n+=this._fontAscent?this._fontAscent/5*this.lineHeight:0,['<g transform="',this.getSvgTransform(),'">',o.textBgRects.join(""),"<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(),'" ','transform="translate(',r(i,2)," ",r(n,2),')">',s.join(""),o.textSpans.join(""),"</text>","</g>"].join("")},_getSVGShadows:function(t,i){var n,o,s=[],a=1;if(!this.shadow||!this._boundaries)return s;for(n=0,o=i.length;n<o;n++)if(""!==i[n]){var l=this._boundaries&&this._boundaries[n]?this._boundaries[n].left:0;s.push('<tspan x="',r(l+a+this.shadow.offsetX,2),0===n||this.useNative?'" y':'" dy','="',r(this.useNative?t*n-this.height/2+this.shadow.offsetY:t+(0===n?this.shadow.offsetY:0),2),'" ',this._getFillAttributes(this.shadow.color),">",e.util.string.escapeXml(i[n]),"</tspan>"),a=1}else a++;return s},_getSVGTextAndBg:function(t,i,n){var o,s,a,l=[],c=[],h=1;for(this.backgroundColor&&this._boundaries&&c.push("<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,2),'" y="',r(-this.height/2,2),'" width="',r(this.width,2),'" height="',r(this.height,2),'"></rect>'),o=0,a=n.length;o<a;o++)""!==n[o]?(s=this._boundaries&&this._boundaries[o]?r(this._boundaries[o].left,2):0,l.push('<tspan x="',s,'" ',0===o||this.useNative?"y":"dy",'="',r(this.useNative?t*o-this.height/2:t*h,2),'" ',this._getFillAttributes(this.fill),">",e.util.string.escapeXml(n[o]),"</tspan>"),h=1):h++,this.textBackgroundColor&&this._boundaries&&c.push("<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',r(i+this._boundaries[o].left,2),'" y="',r(t*o-this.height/2,2),'" width="',r(this._boundaries[o].width,2),'" height="',r(this._boundaries[o].height,2),'"></rect>');return{textSpans:l,textBgRects:c}},_getFillAttributes:function(t){var i=t&&"string"==typeof t?new e.Color(t):"";return i&&i.getSource()&&1!==i.getAlpha()?'opacity="'+i.getAlpha()+'" fill="'+i.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){"fontFamily"===t&&this.path&&(this.path=this.path.replace(/(.*?)([^\/]*)(\.font\.js)/,"$1"+e+"$3")),this.callSuper("_set",t,e),t in this._dimensionAffectingProps&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y font-family font-style font-weight font-size text-decoration".split(" ")),e.Text.fromElement=function(t,i){if(!t)return null;var n=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES);i=e.util.object.extend(i?e.util.object.clone(i):{},n);var r=new e.Text(t.textContent,i);return r.set({left:r.getLeft()+r.getWidth()/2,top:r.getTop()-r.getHeight()/2}),r},e.Text.fromObject=function(t){return new e.Text(t.text,n(t))},e.util.createAccessors(e.Text)}(void 0!==exports?exports:this),fabric.util.object.extend(fabric.Text.prototype,{_renderViaCufon:function(t){var e=Cufon.textOptions||(Cufon.textOptions={});e.left=this.left,e.top=this.top,e.context=t,e.color=this.fill;var i=this._initDummyElementForCufon();this.transform(t),Cufon.replaceElement(i,{engine:"canvas",separate:"none",fontFamily:this.fontFamily,fontWeight:this.fontWeight,textDecoration:this.textDecoration,textShadow:this.shadow&&this.shadow.toString(),textAlign:this.textAlign,fontStyle:this.fontStyle,lineHeight:this.lineHeight,stroke:this.stroke,strokeWidth:this.strokeWidth,backgroundColor:this.backgroundColor,textBackgroundColor:this.textBackgroundColor}),this.width=e.width,this.height=e.height,this._totalLineHeight=e.totalLineHeight,this._fontAscent=e.fontAscent,this._boundaries=e.boundaries,i=null,this.setCoords()},_initDummyElementForCufon:function(){var t=fabric.document.createElement("pre");return fabric.document.createElement("div").appendChild(t),"undefined"==typeof G_vmlCanvasManager?t.innerHTML=this.text:t.innerText=this.text.replace(/\r?\n/gi,"\r"),t.style.fontSize=this.fontSize+"px",t.style.letterSpacing="normal",t}}),function(){function request(t,e,i){var n=URL.parse(t);n.port||(n.port=0===n.protocol.indexOf("https:")?443:80);var r=443===n.port?HTTPS:HTTP,o=r.request({hostname:n.hostname,port:n.port,path:n.path,method:"GET"},function(t){var n="";e&&t.setEncoding(e),t.on("end",function(){i(n)}),t.on("data",function(e){200===t.statusCode&&(n+=e)})});o.on("error",function(t){t.errno===process.ECONNREFUSED?fabric.log("ECONNREFUSED: connection refused to "+n.hostname+":"+n.port):fabric.log(t.message)}),o.end()}function request_fs(t,e){require("fs").readFile(t,function(t,i){if(t)throw fabric.log(t),t;e(i)})}if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=new require("xmldom").DOMParser,URL=require("url"),HTTP=require("http"),HTTPS=require("https"),Canvas=require("canvas"),Image=require("canvas").Image;fabric.util.loadImage=function(t,e,i){var n=function(n){r.src=new Buffer(n,"binary"),r._src=t,e&&e.call(i,r)},r=new Image;t&&(t instanceof Buffer||0===t.indexOf("data"))?(r.src=r._src=t,e&&e.call(i,r)):t&&0!==t.indexOf("http")?request_fs(t,n):t&&request(t,"binary",n)},fabric.loadSVGFromURL=function(t,e,i){t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim(),0!==t.indexOf("http")?request_fs(t,function(t){fabric.loadSVGFromString(t,e,i)}):request(t,"",function(t){fabric.loadSVGFromString(t,e,i)})},fabric.loadSVGFromString=function(t,e,i){var n=(new DOMParser).parseFromString(t);fabric.parseSVGDocument(n.documentElement,function(t,i){e&&e(t,i)},i)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i){var n=new fabric.Image(i);n._initConfig(t),n._initFilters(t,function(t){n.filters=t||[],e&&e(n)})})},fabric.createCanvasForNode=function(t,e){var i=fabric.document.createElement("canvas"),n=new Canvas(t||600,e||600);i.style={},i.width=n.width,i.height=n.height;var r=fabric.Canvas||fabric.StaticCanvas,o=new r(i);return o.contextContainer=n.getContext("2d"),o.nodeCanvas=n,o.Font=Canvas.Font,o},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)};var origSetWidth=fabric.StaticCanvas.prototype.setWidth;fabric.StaticCanvas.prototype.setWidth=function(t){return origSetWidth.call(this,t),this.nodeCanvas.width=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setWidth=fabric.StaticCanvas.prototype.setWidth);var origSetHeight=fabric.StaticCanvas.prototype.setHeight;fabric.StaticCanvas.prototype.setHeight=function(t){return origSetHeight.call(this,t),this.nodeCanvas.height=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setHeight=fabric.StaticCanvas.prototype.setHeight)}}();var Assets={};Assets.firstRun=!0,Assets.LAYER_ALL=null,Assets.LAYER_TOP=null,Assets.LAYER_MID=null,Assets.LAYER_BOT=null,Assets.DATA_SITE=null,Assets.DATA_STATIC=null,Assets.DATA_PAGES=null,Assets.DATA_URL=null,Assets.CDN_URL_SMALL="",Assets.CDN_URL_LARGE="",Assets.SITE_VERSION="",Assets.SCROLLBAR_WIDTH=0,Assets.CULTURE_ARR=[],Assets.CAT_ANIMATION_RUN=!1,Assets.HOME_CAT=null,Assets.DELAY_CASE_IMAGES=!1,Assets.FIRST_PAGE_TRANSITION=!0,Assets.getWindowWidth=function(){return document.documentElement.clientWidth-Assets.SCROLLBAR_WIDTH},Assets.getWindowHeight=function(){return window.innerHeight},Assets.getScrollbarWidth=function(){var t=document.createElement("div");t.className="scrollbar-measure",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},Assets.hideAllInvisibleChildren=function(t,e){return!1},Assets.showAllInvisibleChildren=function(t,e){return!1},Assets.getTransparentBg=function(){var t=AssetLoader.getAsset("assets/images/ui/transparent.gif");return t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.display="block",t.style.pointerEvents="none",t.style.top=0,t.style.left=0,t},function(){var t=this,e=document.getElementsByTagName("head")[0]||document.documentElement;t.load=function(t){var i;i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.url=t.url||location.href,t.data=t.data||null,t.type=t.type||"json",t.action=t.action||"GET";var n=t.callback||function(){},r=t.callbackError||function(){};if("jsonp"==t.type){var o="_"+Math.random().toString(36).substring(7),s=document.createElement("script");window[o]=function(t){n(t)},t.url=t.url.replace("callback=?","callback="+o),s.src=t.url,e.appendChild(s)}else"json"==t.type&&(i.onreadystatechange=function(){4==i.readyState&&(i.status<300?(n(i.responseText),i.onreadystatechange=null,i=null):i.status>300&&(r(),i.onreadystatechange=null,i=null))});return i.open(t.action,t.url,!0),i.send(t.data),i},window.HM_JSON=t}(),String.prototype.trunc=function(t,e){var i=this.length>t,n=i?this.substr(0,t-1):this;return n=e&&i?n.substr(0,n.lastIndexOf(" ")):n,i?n+"&hellip;":n},Array.prototype.remove=function(t){var e=this.indexOf(t);-1!=this.indexOf(t)&&this.splice(e,0)},Array.prototype.contains=function(t){for(var e=this.length;e--;)if(this[e]===t)return!0;return!1},Array.prototype.move=function(t,e){this.splice(e,0,this.splice(t,1)[0])},Object.size=function(t){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i},function(){for(var t,e=function(){},i=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],n=i.length,r=window.console=window.console||{};n--;)t=i[n],r[t]||(r[t]=e)}(),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),function t(){function e(){var t=document.createElement("div");t.style.position="absolute",t.style.zIndex=9999999999,t.style.top="0px",t.style.left="0px",t.style.width="100%",t.style.height="100%";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.width="100%",e.style.height="100%",e.style.opacity=.7,e.style.backgroundColor="#000000",t.appendChild(e);var i=document.createElement("div");i.style.position="absolute",i.style.top="0px",i.style.left=window.innerWidth/2-225+"px",i.style.width="450px",i.style.height="300px",i.style.backgroundColor="#333333",t.appendChild(i);var n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="150px",n.style.width="1px",n.style.height="300px",n.style.backgroundColor="#555555",i.appendChild(n);for(var r=0;r<o.length;r++){var a=o[r],l=document.createElement("div");l.style.position="absolute",l.style.color="#ffffff",l.style.fontSize="12px",l.style.fontFamily="arial, verdana",l.innerHTML=a.menuItemName,l.style.pointerEvents="all",l.style.top=20*r+20+"px",l.style.left="20px",l.addEventListener("click",a.onClickFunction),i.appendChild(l)}var c=document.createElement("div");c.style.position="absolute",c.style.top="20px",c.style.left="180px",c.style.width="250px",c.style.height="250px",c.innerHTML="Choose an action on the left hand side.",c.style.color="#ffffff",c.style.fontSize="12px",c.style.fontFamily="arial, verdana",i.appendChild(c),s=c,document.body.appendChild(t)}function i(){function e(t){!function(e){var i=this;window.XMLHttpRequest&&(i.xmlHttpReq=new XMLHttpRequest),i.xmlHttpReq.open("POST",e,!0),i.xmlHttpReq.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.xmlHttpReq.onreadystatechange=function(){if(4==i.xmlHttpReq.readyState){var t=!1,e=i.xmlHttpReq.responseText,n=new DOMParser,o=n.parseFromString(e,"text/xml"),a=Number(o.getElementsByTagName("originalSize")[0].firstChild.nodeValue),l=Number(o.getElementsByTagName("compressedSize")[0].firstChild.nodeValue),c=100-Math.round(l/a*100)+"%",h=o.getElementsByTagName("error");if(h.length>0&&(t=!0),0==t){o.getElementsByTagName("compiledCode")[0].firstChild.nodeValue.indexOf("}(")>=0&&alert("Potential error when merging:\nWhen the code gets merged all white space gets removed. It looks like you have not ended one of your functions() {}; with a semi colon ;. If you need to trouble shoot it search the min file for a place where it has '}('");var u="<b>Done:</b><br>Original size: "+a+"<br>Compiled size: "+l+"<br>Saved "+c+" off the original size",d="http://closure-compiler.appspot.com/"+o.getElementsByTagName("outputFilePath")[0].firstChild.nodeValue;s.innerHTML=d+"<br>"+u+"<br><br>Download the file <a style='pointer-events: all' href='"+d+"' download='"+r.jsOutputFilename+"'>here</a>"}else{for(var p="",f=0;f<h.length;f++)trace("checkForError : "+h[f].toString()),p+=h[f].firstChild.nodeValue;s.innerHTML="The Closure Compiler returned with the following errors: <br><br>"+p}
s.pointerEvents="all"}},s.innerHTML="<b>Scripts loaded:</b><br>Sending to Closure Compuler",i.xmlHttpReq.send("compilation_level="+r.compilationLevel+"&output_format=xml&output_info=compiled_code&output_info=errors&output_info=statistics&output_file_name="+r.jsOutputFilename+"&js_code="+encodeURIComponent(t))}("http://closure-compiler.appspot.com/compile")}function i(e){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){var t=i.responseText;t.indexOf("style.float")>=0&&alert("Potential error in "+r+":\nYou are using style.float - please change this to style.cssFloat throughout your code.");o+=t+"\n",s.innerHTML="<b>Loading scripts:</b><br>"+c+" of "+l,n()}};var r=a[e].src,h=a[e].getAttribute("data-minify");"no"===h||""===r||null===r||r.indexOf("www.google-analytics.com")>-1||r.indexOf("apis.google.com")>-1||r.indexOf("Minify.js")>-1||r.indexOf(".com")>=0||r.indexOf("BugTracker_min.js")>-1||r.indexOf("BugTracker.js")>-1?(t.compileInlineScripts&&"no"!==h&&(o+=a[e].innerHTML),n()):(i.open("GET",r,!0),i.send(null))}function n(){c<l?(c++,i(c)):e(o)}var o="",a=document.getElementsByTagName("script"),l=a.length-1,c=0;i(0)}function n(){function t(t){for(var e,i,n,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",s=0,a=t.length;s<a;){if(e=255&t.charCodeAt(s++),s==a){o+=r.charAt(e>>2),o+=r.charAt((3&e)<<4),o+="==";break}if(i=t.charCodeAt(s++),s==a){o+=r.charAt(e>>2),o+=r.charAt((3&e)<<4|(240&i)>>4),o+=r.charAt((15&i)<<2),o+="=";break}n=t.charCodeAt(s++),o+=r.charAt(e>>2),o+=r.charAt((3&e)<<4|(240&i)>>4),o+=r.charAt((15&i)<<2|(192&n)>>6),o+=r.charAt(63&n)}return o}function e(e){function l(e){var c=e.currentTarget.responseText;if(a+=c.length,h+=t(c)+"|",e.currentTarget.removeEventListener(Event.LOAD,l),o+=h,++i==n){s.innerHTML="CreateDataURI:<br>Done, converted "+n+" images into 1 file, saving "+(n-1)+" HTTP Requests",s.innerHTML+="<br>Images loaded as a total of "+Math.round(a/1e3)+" kb";var u="a DECREASE",d=a-o.length;d<0&&(d*=-1,u="an INCREASE"),s.innerHTML+="<br>As data URI the images are now "+Math.round(o.length/1e3)+" kb, which means "+u+" of "+Math.round(d/1e3)+" kb",s.innerHTML+="<br>Remember to serve gzipped, the data-uri size would then be roughly (estimated) "+Math.round(o.length/1.4/1e3)+" kb",s.innerHTML+='<br><a href="data:text/plain;text,'+o+'" download="'+r.dataURIOutputFilename+'">Download file</a>'}}var c=new XMLHttpRequest,h="";c.addEventListener(Event.LOAD,l,!0);var u=e;trace(u);var d=u.lastIndexOf(".");u=null!=d?u.substring(d+1,u.length):"png","jpg"==u&&(u="jpeg"),h=e+"|data:image/"+u+";base64,",c.open("GET",e,!1),c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined"),c.send(null)}var i=0,n=1,o="",a=0;null!=AssetLoader?function(t){i=0,a=0,o="";var r=t.length;n=r,s.innerHTML="CreateDataURI:<br>Converting "+r+" images into 1 file, saving "+(r-1)+" HTTP Requests";for(var l=0;l<r;l++)e(t[l].id)}(AssetLoader.assets):s.innerHTML="AssetLoader not found."}var r={},o=[{menuItemName:"Minify JS",onClickFunction:i},{menuItemName:"Data-URI Creator",onClickFunction:n}];r.compilationLevel="SIMPLE_OPTIMIZATIONS",r.jsOutputFilename="minified.js",r.dataURIOutputFilename="datauri.txt";var s=null;window.addEventListener&&function(){function t(t){n=[],r=!1}function i(t){r=!0,n.push(t.keyCode);for(var i=0,o=0;o<n.length;o++){var s=n[o];17!=s&&77!=s||i++}2==n.length&&2==i&&e()}var n=[],r=!1;window.addEventListener("keyup",t,!1),window.addEventListener("keydown",i,!1)}(),window.Minify=r}(window),function(t){function e(){var t=["assets/images/frontpage/hellomonday-logo@2.png"];AssetLoader.loadGroup(new AssetGroup(t,{onComplete:i}))}function i(){Assets.PRELOADER=new Preloader,n()}function n(){HM_JSON.load({url:"framework/site-structure.json",type:"json",callback:r})}function r(t){Assets.DATA_URL=JSON.parse(t),o()}function o(){AJAX.load("framework/site-content.php",s,"GET")}function s(t){document.getElementById("PAGES").innerHTML=t,a(),l(),h(),u()}function a(){Assets.FULLSCREEN_TRANSITIONS=new FullScreenStackTransition({speed:Assets.PAGE_TRANSTION_SPEED,delay:0}),Assets.TRANSITIONS_MANAGER=new PageTransitionsManager,Assets.SCROLL_DISABLER=new ScrollDisabler,Assets.SCROLLBAR_WIDTH=Assets.getScrollbarWidth(),new FastClick(document.body)}function l(){Assets.LAYER_ALL=document.createElement("div"),Assets.LAYER_ALL.style["-webkit-backface-visibility"]="visible",Assets.LAYER_ALL.style.position="absolute",Assets.LAYER_ALL.id="LAYER_ALL",Assets.LAYER_ALL.style.width="100%",9==BrowserDetect.BROWSER_VERSION&&"Explorer"===BrowserDetect.BROWSER_NAME&&(Assets.LAYER_ALL.style.width=t.innerWidth+16+"px",t.addEventListener("resize",c)),Assets.LAYER_ALL.style.height="100%",Assets.LAYER_ALL.style.overflowX="hidden",Assets.LAYER_ALL.style.overflowY="visible",document.body.appendChild(Assets.LAYER_ALL),Assets.LAYER_MID=document.createElement("div"),Assets.LAYER_MID.style.position="absolute",Assets.LAYER_MID.style.zIndex=2,Assets.LAYER_MID.id="LAYER_MID",Assets.LAYER_MID.style.width="100%",Assets.LAYER_MID.style.height="100%",Assets.LAYER_ALL.appendChild(Assets.LAYER_MID),Assets.LAYER_TOP=document.createElement("div"),Assets.LAYER_TOP.style.position="absolute",Assets.LAYER_TOP.style.zIndex=3,Assets.LAYER_TOP.id="LAYER_TOP",Assets.LAYER_ALL.appendChild(Assets.LAYER_TOP)}function c(e){Assets.LAYER_ALL.style.width=t.innerWidth+16+"px"}function h(){Assets.DATA_SITE=document.getElementById("SITE"),Assets.DATA_PAGES=document.getElementById("PAGES"),Assets.DATA_SITE.parentNode.removeChild(Assets.DATA_SITE),ContentManager.AUTOMATICALLY_TRACK_GOOGLE_ANALYTICS=!0,ContentManager.addTemplate("HomeTemplate",HomeTemplate),ContentManager.addTemplate("ProjectsTemplate",ProjectsTemplate),ContentManager.addTemplate("CaseTemplate",CaseTemplate),ContentManager.addTemplate("AboutTemplate",AboutTemplate),ContentManager.addTemplate("ContactTemplate",ContactTemplate),ContentManager.addTemplate("PeopleTemplate",PeopleTemplate),ContentManager.addTemplate("AwardsTemplate",AwardsTemplate),ContentManager.addTemplate("CultureTemplate",CultureTemplate),ContentManager.addTemplate("JournalTemplate",JournalTemplate),Assets.mid_overflow=Assets.LAYER_MID.style.overflow,Assets.all_overflow=Assets.LAYER_ALL.style.overflowY,Assets.body_overflow=document.body.style.overflow}function u(){var t=["assets/images/ui/arrow@2.png","assets/images/frontpage/hellomonday-logo@2.png","assets/images/ui/menu-ico@2.png","assets/images/ui/white-arrow-left@2.png","assets/images/ui/white-arrow-down@2.png","assets/images/ui/arrow_in_circle@2.png","assets/images/ui/dots_in_circle@2.png","assets/images/ui/offsite_icon_in_circle@2.png","assets/images/ui/navigationline@2.png","assets/images/ui/dots@2.png","assets/images/ui/dots-white@2.png","assets/images/ui/offsite_icon_arrow@2.png","assets/images/ui/offsite_icon_outline@2.png","assets/images/ui/transparent.gif","assets/images/ui/link_icon@2.png"],e=null,i=0;BrowserDetect.MOBILE||BrowserDetect.TABLET?(e="assets/datauri.txt",i=91e3):(t=t.concat(CatAnimationData.getAssetsForType("proud_peacock")),e="assets/datauri_cat.txt",i=3189e3),AssetLoader.loadGroup(new AssetGroup(t,{onComplete:p,onUpdate:d,dataURIFile:e,dataURIFileSizeInBytes:i,dataURIFilePercentageOfTotal:100}))}function d(t){Assets.PRELOADER.update(t)}function p(){if(BrowserDetect.MOBILE||BrowserDetect.TABLET||"Explorer"===BrowserDetect.BROWSER_NAME||"Mozilla"===BrowserDetect.BROWSER_NAME||"Opera"===BrowserDetect.BROWSER_NAME)HM.AssetLoader.init("",Assets.SITE_VERSION),f();else{var t=[new HM.AssetGroup(["assets/audio/proud_peacock.mp3"],{weight:100})];HM.Audio.init(!1),HM.AssetLoader.init("",Assets.SITE_VERSION),HM.AssetLoader.load(t,{onComplete:f})}}function f(){Assets.MAIN_MENU=new MainMenu(Assets.DATA_PAGES),Assets.LAYER_MID.appendChild(Assets.MAIN_MENU),ContentManager.init(Assets.DATA_PAGES,"home"),Assets.PRELOADER.kill()}var g={};g.init=function(){ContentManager.USE_HISTORY_API=!0,ContentManager.DEFAULT_SUBFOLDER=document.getElementById("site-root").getAttribute("data-path"),Trace.isEnabled=!0,Trace.displayOnScreen=!1,(-1===t.location.href.indexOf("8888")||BrowserDetect.MOBILE||BrowserDetect.TABLET)&&(console.log=function(){},console.group=function(){},console.groupEnd=function(){},alert=function(){},Trace.isEnabled=!1),trace("version","1.6"),trace(BrowserDetect.BROWSER_NAME,"BrowserDetect.BROWSER_NAME"),trace(BrowserDetect.BROWSER_VERSION,"BrowserDetect.BROWSER_VERSION"),trace(BrowserDetect.TABLET,"BrowserDetect.TABLET"),trace(BrowserDetect.MOBILE,"BrowserDetect.MOBILE"),trace(BrowserDetect.OS,"BrowserDetect.OS"),BrowserDetect.BROWSER_VERSION<9&&"Explorer"===BrowserDetect.BROWSER_NAME&&alert("Please update your browser. HelloMonday.com is optimised for Internet Explorer 11."),document.body.style.margin=0,document.body.style.padding=0,document.body.style.color="#000",document.body.style.fontFamily="ClarendonLTStdBold",document.body.style.fontSize="11px",document.body.style.fontStyle="normal",Assets.DATA_STATIC=document.getElementById("STATIC"),Assets.SITE_BASE=document.getElementsByTagName("base")[0].href,Assets.CDN_URL_SMALL=Assets.DATA_STATIC.querySelector("#cdn-url-small").getAttribute("data-path"),Assets.CDN_URL_LARGE=Assets.DATA_STATIC.querySelector("#cdn-url-large").getAttribute("data-path"),Assets.SITE_VERSION=Assets.DATA_STATIC.querySelector("#version-string").getAttribute("data-version"),Assets.PAGE_TRANSTION_SPEED=(BrowserDetect.MOBILE||BrowserDetect.TABLET,1),BrowserDetect.DESKTOP||(document.body.className="disallow-text-select"),AssetLoader.init(Assets.CDN_URL_SMALL,Assets.SITE_VERSION),e()},t.Main=g}(window),window.onload=Main.init;